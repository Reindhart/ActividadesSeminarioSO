function $_(s,i){for(var n=0;n<i.length;n++){const l=i[n];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in s)){const m=Object.getOwnPropertyDescriptor(l,d);m&&Object.defineProperty(s,d,m.get?m:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function n(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(d){if(d.ep)return;d.ep=!0;const m=n(d);fetch(d.href,m)}})();function Hg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cm={exports:{}},pi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function G_(){if(If)return pi;If=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function n(l,d,m){var h=null;if(m!==void 0&&(h=""+m),d.key!==void 0&&(h=""+d.key),"key"in d){m={};for(var x in d)x!=="key"&&(m[x]=d[x])}else m=d;return d=m.ref,{$$typeof:s,type:l,key:h,ref:d!==void 0?d:null,props:m}}return pi.Fragment=i,pi.jsx=n,pi.jsxs=n,pi}var Of;function W_(){return Of||(Of=1,cm.exports=G_()),cm.exports}var e=W_(),dm={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function K_(){if(Df)return qt;Df=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),N=Symbol.iterator;function j(T){return T===null||typeof T!="object"?null:(T=N&&T[N]||T["@@iterator"],typeof T=="function"?T:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function E(T,W,re){this.props=T,this.context=W,this.refs=C,this.updater=re||_}E.prototype.isReactComponent={},E.prototype.setState=function(T,W){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,W,"setState")},E.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function D(){}D.prototype=E.prototype;function L(T,W,re){this.props=T,this.context=W,this.refs=C,this.updater=re||_}var V=L.prototype=new D;V.constructor=L,w(V,E.prototype),V.isPureReactComponent=!0;var J=Array.isArray;function ie(){}var I={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function be(T,W,re){var A=re.ref;return{$$typeof:s,type:T,key:W,ref:A!==void 0?A:null,props:re}}function te(T,W){return be(T.type,W,T.props)}function G(T){return typeof T=="object"&&T!==null&&T.$$typeof===s}function oe(T){var W={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return W[re]})}var Ce=/\/+/g;function ke(T,W){return typeof T=="object"&&T!==null&&T.key!=null?oe(""+T.key):W.toString(36)}function Ee(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ie,ie):(T.status="pending",T.then(function(W){T.status==="pending"&&(T.status="fulfilled",T.value=W)},function(W){T.status==="pending"&&(T.status="rejected",T.reason=W)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function P(T,W,re,A,K){var M=typeof T;(M==="undefined"||M==="boolean")&&(T=null);var O=!1;if(T===null)O=!0;else switch(M){case"bigint":case"string":case"number":O=!0;break;case"object":switch(T.$$typeof){case s:case i:O=!0;break;case v:return O=T._init,P(O(T._payload),W,re,A,K)}}if(O)return K=K(T),O=A===""?"."+ke(T,0):A,J(K)?(re="",O!=null&&(re=O.replace(Ce,"$&/")+"/"),P(K,W,re,"",function(ve){return ve})):K!=null&&(G(K)&&(K=te(K,re+(K.key==null||T&&T.key===K.key?"":(""+K.key).replace(Ce,"$&/")+"/")+O)),W.push(K)),1;O=0;var q=A===""?".":A+":";if(J(T))for(var $=0;$<T.length;$++)A=T[$],M=q+ke(A,$),O+=P(A,W,re,M,K);else if($=j(T),typeof $=="function")for(T=$.call(T),$=0;!(A=T.next()).done;)A=A.value,M=q+ke(A,$++),O+=P(A,W,re,M,K);else if(M==="object"){if(typeof T.then=="function")return P(Ee(T),W,re,A,K);throw W=String(T),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return O}function Q(T,W,re){if(T==null)return T;var A=[],K=0;return P(T,A,"","",function(M){return W.call(re,M,K++)}),A}function F(T){if(T._status===-1){var W=T._result;W=W(),W.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=W)}if(T._status===1)return T._result.default;throw T._result}var ue=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},qe={map:Q,forEach:function(T,W,re){Q(T,function(){W.apply(this,arguments)},re)},count:function(T){var W=0;return Q(T,function(){W++}),W},toArray:function(T){return Q(T,function(W){return W})||[]},only:function(T){if(!G(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return qt.Activity=f,qt.Children=qe,qt.Component=E,qt.Fragment=n,qt.Profiler=d,qt.PureComponent=L,qt.StrictMode=l,qt.Suspense=g,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,qt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return I.H.useMemoCache(T)}},qt.cache=function(T){return function(){return T.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(T,W,re){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var A=w({},T.props),K=T.key;if(W!=null)for(M in W.key!==void 0&&(K=""+W.key),W)!k.call(W,M)||M==="key"||M==="__self"||M==="__source"||M==="ref"&&W.ref===void 0||(A[M]=W[M]);var M=arguments.length-2;if(M===1)A.children=re;else if(1<M){for(var O=Array(M),q=0;q<M;q++)O[q]=arguments[q+2];A.children=O}return be(T.type,K,A)},qt.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:m,_context:T},T},qt.createElement=function(T,W,re){var A,K={},M=null;if(W!=null)for(A in W.key!==void 0&&(M=""+W.key),W)k.call(W,A)&&A!=="key"&&A!=="__self"&&A!=="__source"&&(K[A]=W[A]);var O=arguments.length-2;if(O===1)K.children=re;else if(1<O){for(var q=Array(O),$=0;$<O;$++)q[$]=arguments[$+2];K.children=q}if(T&&T.defaultProps)for(A in O=T.defaultProps,O)K[A]===void 0&&(K[A]=O[A]);return be(T,M,K)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(T){return{$$typeof:x,render:T}},qt.isValidElement=G,qt.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:F}},qt.memo=function(T,W){return{$$typeof:b,type:T,compare:W===void 0?null:W}},qt.startTransition=function(T){var W=I.T,re={};I.T=re;try{var A=T(),K=I.S;K!==null&&K(re,A),typeof A=="object"&&A!==null&&typeof A.then=="function"&&A.then(ie,ue)}catch(M){ue(M)}finally{W!==null&&re.types!==null&&(W.types=re.types),I.T=W}},qt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},qt.use=function(T){return I.H.use(T)},qt.useActionState=function(T,W,re){return I.H.useActionState(T,W,re)},qt.useCallback=function(T,W){return I.H.useCallback(T,W)},qt.useContext=function(T){return I.H.useContext(T)},qt.useDebugValue=function(){},qt.useDeferredValue=function(T,W){return I.H.useDeferredValue(T,W)},qt.useEffect=function(T,W){return I.H.useEffect(T,W)},qt.useEffectEvent=function(T){return I.H.useEffectEvent(T)},qt.useId=function(){return I.H.useId()},qt.useImperativeHandle=function(T,W,re){return I.H.useImperativeHandle(T,W,re)},qt.useInsertionEffect=function(T,W){return I.H.useInsertionEffect(T,W)},qt.useLayoutEffect=function(T,W){return I.H.useLayoutEffect(T,W)},qt.useMemo=function(T,W){return I.H.useMemo(T,W)},qt.useOptimistic=function(T,W){return I.H.useOptimistic(T,W)},qt.useReducer=function(T,W,re){return I.H.useReducer(T,W,re)},qt.useRef=function(T){return I.H.useRef(T)},qt.useState=function(T){return I.H.useState(T)},qt.useSyncExternalStore=function(T,W,re){return I.H.useSyncExternalStore(T,W,re)},qt.useTransition=function(){return I.H.useTransition()},qt.version="19.2.0",qt}var zf;function Ei(){return zf||(zf=1,dm.exports=K_()),dm.exports}var c=Ei();const fa=Hg(c),$g=$_({__proto__:null,default:fa},[c]);var um={exports:{}},hi={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function Y_(){return qf||(qf=1,(function(s){function i(P,Q){var F=P.length;P.push(Q);e:for(;0<F;){var ue=F-1>>>1,qe=P[ue];if(0<d(qe,Q))P[ue]=Q,P[F]=qe,F=ue;else break e}}function n(P){return P.length===0?null:P[0]}function l(P){if(P.length===0)return null;var Q=P[0],F=P.pop();if(F!==Q){P[0]=F;e:for(var ue=0,qe=P.length,T=qe>>>1;ue<T;){var W=2*(ue+1)-1,re=P[W],A=W+1,K=P[A];if(0>d(re,F))A<qe&&0>d(K,re)?(P[ue]=K,P[A]=F,ue=A):(P[ue]=re,P[W]=F,ue=W);else if(A<qe&&0>d(K,F))P[ue]=K,P[A]=F,ue=A;else break e}}return Q}function d(P,Q){var F=P.sortIndex-Q.sortIndex;return F!==0?F:P.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;s.unstable_now=function(){return m.now()}}else{var h=Date,x=h.now();s.unstable_now=function(){return h.now()-x}}var g=[],b=[],v=1,f=null,N=3,j=!1,_=!1,w=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function V(P){for(var Q=n(b);Q!==null;){if(Q.callback===null)l(b);else if(Q.startTime<=P)l(b),Q.sortIndex=Q.expirationTime,i(g,Q);else break;Q=n(b)}}function J(P){if(w=!1,V(P),!_)if(n(g)!==null)_=!0,ie||(ie=!0,oe());else{var Q=n(b);Q!==null&&Ee(J,Q.startTime-P)}}var ie=!1,I=-1,k=5,be=-1;function te(){return C?!0:!(s.unstable_now()-be<k)}function G(){if(C=!1,ie){var P=s.unstable_now();be=P;var Q=!0;try{e:{_=!1,w&&(w=!1,D(I),I=-1),j=!0;var F=N;try{t:{for(V(P),f=n(g);f!==null&&!(f.expirationTime>P&&te());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,N=f.priorityLevel;var qe=ue(f.expirationTime<=P);if(P=s.unstable_now(),typeof qe=="function"){f.callback=qe,V(P),Q=!0;break t}f===n(g)&&l(g),V(P)}else l(g);f=n(g)}if(f!==null)Q=!0;else{var T=n(b);T!==null&&Ee(J,T.startTime-P),Q=!1}}break e}finally{f=null,N=F,j=!1}Q=void 0}}finally{Q?oe():ie=!1}}}var oe;if(typeof L=="function")oe=function(){L(G)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,ke=Ce.port2;Ce.port1.onmessage=G,oe=function(){ke.postMessage(null)}}else oe=function(){E(G,0)};function Ee(P,Q){I=E(function(){P(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(P){switch(N){case 1:case 2:case 3:var Q=3;break;default:Q=N}var F=N;N=Q;try{return P()}finally{N=F}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(P,Q){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=N;N=P;try{return Q()}finally{N=F}},s.unstable_scheduleCallback=function(P,Q,F){var ue=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ue+F:ue):F=ue,P){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=F+qe,P={id:v++,callback:Q,priorityLevel:P,startTime:F,expirationTime:qe,sortIndex:-1},F>ue?(P.sortIndex=F,i(b,P),n(g)===null&&P===n(b)&&(w?(D(I),I=-1):w=!0,Ee(J,F-ue))):(P.sortIndex=qe,i(g,P),_||j||(_=!0,ie||(ie=!0,oe()))),P},s.unstable_shouldYield=te,s.unstable_wrapCallback=function(P){var Q=N;return function(){var F=N;N=Q;try{return P.apply(this,arguments)}finally{N=F}}}})(pm)),pm}var Uf;function X_(){return Uf||(Uf=1,mm.exports=Y_()),mm.exports}var hm={exports:{}},Fa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function Q_(){if(Bf)return Fa;Bf=1;var s=Ei();function i(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)b+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(i(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(g,b,v){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:f==null?null:""+f,children:g,containerInfo:b,implementation:v}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(g,b){if(g==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Fa.createPortal=function(g,b){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(i(299));return m(g,b,null,v)},Fa.flushSync=function(g){var b=h.T,v=l.p;try{if(h.T=null,l.p=2,g)return g()}finally{h.T=b,l.p=v,l.d.f()}},Fa.preconnect=function(g,b){typeof g=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,l.d.C(g,b))},Fa.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},Fa.preinit=function(g,b){if(typeof g=="string"&&b&&typeof b.as=="string"){var v=b.as,f=x(v,b.crossOrigin),N=typeof b.integrity=="string"?b.integrity:void 0,j=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;v==="style"?l.d.S(g,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:f,integrity:N,fetchPriority:j}):v==="script"&&l.d.X(g,{crossOrigin:f,integrity:N,fetchPriority:j,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Fa.preinitModule=function(g,b){if(typeof g=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var v=x(b.as,b.crossOrigin);l.d.M(g,{crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&l.d.M(g)},Fa.preload=function(g,b){if(typeof g=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var v=b.as,f=x(v,b.crossOrigin);l.d.L(g,v,{crossOrigin:f,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Fa.preloadModule=function(g,b){if(typeof g=="string")if(b){var v=x(b.as,b.crossOrigin);l.d.m(g,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else l.d.m(g)},Fa.requestFormReset=function(g){l.d.r(g)},Fa.unstable_batchedUpdates=function(g,b){return g(b)},Fa.useFormState=function(g,b,v){return h.H.useFormState(g,b,v)},Fa.useFormStatus=function(){return h.H.useHostTransitionStatus()},Fa.version="19.2.0",Fa}var Vf;function Gg(){if(Vf)return hm.exports;Vf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}return s(),hm.exports=Q_(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function Z_(){if(Ff)return hi;Ff=1;var s=X_(),i=Ei(),n=Gg();function l(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function x(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(m(t)!==t)throw Error(l(188))}function b(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(l(188));return a!==t?null:t}for(var r=t,o=a;;){var u=r.return;if(u===null)break;var p=u.alternate;if(p===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===r)return g(u),t;if(p===o)return g(u),a;p=p.sibling}throw Error(l(188))}if(r.return!==o.return)r=u,o=p;else{for(var y=!1,S=u.child;S;){if(S===r){y=!0,r=u,o=p;break}if(S===o){y=!0,o=u,r=p;break}S=S.sibling}if(!y){for(S=p.child;S;){if(S===r){y=!0,r=p,o=u;break}if(S===o){y=!0,o=p,r=u;break}S=S.sibling}if(!y)throw Error(l(189))}}if(r.alternate!==o)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?t:a}function v(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=v(t),a!==null)return a;t=t.sibling}return null}var f=Object.assign,N=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),be=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function oe(t){return t===null||typeof t!="object"?null:(t=G&&t[G]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case J:return"Suspense";case ie:return"SuspenseList";case be:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case L:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case V:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:ke(t.type)||"Memo";case k:a=t._payload,t=t._init;try{return ke(t(a))}catch{}}return null}var Ee=Array.isArray,P=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},ue=[],qe=-1;function T(t){return{current:t}}function W(t){0>qe||(t.current=ue[qe],ue[qe]=null,qe--)}function re(t,a){qe++,ue[qe]=t.current,t.current=a}var A=T(null),K=T(null),M=T(null),O=T(null);function q(t,a){switch(re(M,a),re(K,t),re(A,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?sf(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=sf(a),t=rf(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(A),re(A,t)}function $(){W(A),W(K),W(M)}function ve(t){t.memoizedState!==null&&re(O,t);var a=A.current,r=rf(a,t.type);a!==r&&(re(K,t),re(A,r))}function Z(t){K.current===t&&(W(A),W(K)),O.current===t&&(W(O),ci._currentValue=F)}var z,Oe;function Re(t){if(z===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||"",Oe=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+z+t+Oe}var ae=!1;function se(t,a){if(!t||ae)return"";ae=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var Le=function(){throw Error()};if(Object.defineProperty(Le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Le,[])}catch(Ne){var xe=Ne}Reflect.construct(t,[],Le)}else{try{Le.call()}catch(Ne){xe=Ne}t.call(Le.prototype)}}else{try{throw Error()}catch(Ne){xe=Ne}(Le=t())&&typeof Le.catch=="function"&&Le.catch(function(){})}}catch(Ne){if(Ne&&xe&&typeof Ne.stack=="string")return[Ne.stack,xe.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),y=p[0],S=p[1];if(y&&S){var H=y.split(`
`),he=S.split(`
`);for(u=o=0;o<H.length&&!H[o].includes("DetermineComponentFrameRoot");)o++;for(;u<he.length&&!he[u].includes("DetermineComponentFrameRoot");)u++;if(o===H.length||u===he.length)for(o=H.length-1,u=he.length-1;1<=o&&0<=u&&H[o]!==he[u];)u--;for(;1<=o&&0<=u;o--,u--)if(H[o]!==he[u]){if(o!==1||u!==1)do if(o--,u--,0>u||H[o]!==he[u]){var Te=`
`+H[o].replace(" at new "," at ");return t.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",t.displayName)),Te}while(1<=o&&0<=u);break}}}finally{ae=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Re(r):""}function rt(t,a){switch(t.tag){case 26:case 27:case 5:return Re(t.type);case 16:return Re("Lazy");case 13:return t.child!==a&&a!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return se(t.type,!1);case 11:return se(t.type.render,!1);case 1:return se(t.type,!0);case 31:return Re("Activity");default:return""}}function jt(t){try{var a="",r=null;do a+=rt(t,r),r=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var fe=Object.prototype.hasOwnProperty,Me=s.unstable_scheduleCallback,De=s.unstable_cancelCallback,Ge=s.unstable_shouldYield,ze=s.unstable_requestPaint,_e=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,We=s.unstable_ImmediatePriority,xt=s.unstable_UserBlockingPriority,Ot=s.unstable_NormalPriority,It=s.unstable_LowPriority,Ue=s.unstable_IdlePriority,kt=s.log,et=s.unstable_setDisableYieldValue,R=null,ne=null;function Ve(t){if(typeof kt=="function"&&et(t),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(R,t)}catch{}}var de=Math.clz32?Math.clz32:St,we=Math.log,_t=Math.LN2;function St(t){return t>>>=0,t===0?32:31-(we(t)/_t|0)|0}var tt=256,Ye=262144,ft=4194304;function Ct(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ye(t,a,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,p=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~p,o!==0?u=Ct(o):(y&=S,y!==0?u=Ct(y):r||(r=S&~t,r!==0&&(u=Ct(r))))):(S=o&~p,S!==0?u=Ct(S):y!==0?u=Ct(y):r||(r=o&~t,r!==0&&(u=Ct(r)))),u===0?0:a!==0&&a!==u&&(a&p)===0&&(p=u&-u,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:u}function gt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Fe(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B(){var t=ft;return ft<<=1,(ft&62914560)===0&&(ft=4194304),t}function U(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Dt(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ke(t,a,r,o,u,p){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,H=t.expirationTimes,he=t.hiddenUpdates;for(r=y&~r;0<r;){var Te=31-de(r),Le=1<<Te;S[Te]=0,H[Te]=-1;var xe=he[Te];if(xe!==null)for(he[Te]=null,Te=0;Te<xe.length;Te++){var Ne=xe[Te];Ne!==null&&(Ne.lane&=-536870913)}r&=~Le}o!==0&&ge(t,o,0),p!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=p&~(y&~a))}function ge(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-de(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function Ft(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var o=31-de(r),u=1<<o;u&a|t[o]&a&&(t[o]|=a),r&=~u}}function Zt(t,a){var r=a&-a;return r=(r&42)!==0?1:pt(r),(r&(t.suspendedLanes|a))!==0?0:r}function pt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function zt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function lt(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:Cf(t.type))}function Be(t,a){var r=Q.p;try{return Q.p=t,a()}finally{Q.p=r}}var Pe=Math.random().toString(36).slice(2),Je="__reactFiber$"+Pe,ot="__reactProps$"+Pe,X="__reactContainer$"+Pe,Ie="__reactEvents$"+Pe,st="__reactListeners$"+Pe,Rt="__reactHandles$"+Pe,Qe="__reactResources$"+Pe,$e="__reactMarker$"+Pe;function mt(t){delete t[Je],delete t[ot],delete t[Ie],delete t[st],delete t[Rt]}function Jt(t){var a=t[Je];if(a)return a;for(var r=t.parentNode;r;){if(a=r[X]||r[Je]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=mf(t);t!==null;){if(r=t[Je])return r;t=mf(t)}return a}t=r,r=t.parentNode}return null}function pa(t){if(t=t[Je]||t[X]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function je(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(l(33))}function He(t){var a=t[Qe];return a||(a=t[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ht(t){t[$e]=!0}var Lt=new Set,ut={};function at(t,a){Y(t,a),Y(t+"Capture",a)}function Y(t,a){for(ut[t]=a,t=0;t<a.length;t++)Lt.add(a[t])}var Se=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},Ze={};function vt(t){return fe.call(Ze,t)?!0:fe.call(Pt,t)?!1:Se.test(t)?Ze[t]=!0:(Pt[t]=!0,!1)}function Tt(t,a,r){if(vt(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function Na(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function La(t,a,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+o)}}function ds(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yp(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zN(t,a,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,p=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return u.call(this)},set:function(y){r=""+y,p.call(this,y)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function ad(t){if(!t._valueTracker){var a=Yp(t)?"checked":"value";t._valueTracker=zN(t,a,""+t[a])}}function Xp(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),o="";return t&&(o=Yp(t)?t.checked?"true":"false":t.value),t=o,t!==r?(a.setValue(t),!0):!1}function Di(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qN=/[\n"\\]/g;function us(t){return t.replace(qN,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sd(t,a,r,o,u,p,y,S){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),a!=null?y==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+ds(a)):t.value!==""+ds(a)&&(t.value=""+ds(a)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),a!=null?rd(t,y,ds(a)):r!=null?rd(t,y,ds(r)):o!=null&&t.removeAttribute("value"),u==null&&p!=null&&(t.defaultChecked=!!p),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+ds(S):t.removeAttribute("name")}function Qp(t,a,r,o,u,p,y,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){ad(t);return}r=r!=null?""+ds(r):"",a=a!=null?""+ds(a):r,S||a===t.value||(t.value=a),t.defaultValue=a}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),ad(t)}function rd(t,a,r){a==="number"&&Di(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function _n(t,a,r,o){if(t=t.options,a){a={};for(var u=0;u<r.length;u++)a["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=a.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+ds(r),a=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}a!==null||t[u].disabled||(a=t[u])}a!==null&&(a.selected=!0)}}function Zp(t,a,r){if(a!=null&&(a=""+ds(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+ds(r):""}function Jp(t,a,r,o){if(a==null){if(o!=null){if(r!=null)throw Error(l(92));if(Ee(o)){if(1<o.length)throw Error(l(93));o=o[0]}r=o}r==null&&(r=""),a=r}r=ds(a),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),ad(t)}function Sn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var UN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eh(t,a,r){var o=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,r):typeof r!="number"||r===0||UN.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function th(t,a,r){if(a!=null&&typeof a!="object")throw Error(l(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var u in a)o=a[u],a.hasOwnProperty(u)&&r[u]!==o&&eh(t,u,o)}else for(var p in a)a.hasOwnProperty(p)&&eh(t,p,a[p])}function nd(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zi(t){return VN.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Gs(){}var od=null;function id(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wn=null,Tn=null;function ah(t){var a=pa(t);if(a&&(t=a.stateNode)){var r=t[ot]||null;e:switch(t=a.stateNode,a.type){case"input":if(sd(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+us(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var o=r[a];if(o!==t&&o.form===t.form){var u=o[ot]||null;if(!u)throw Error(l(90));sd(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(a=0;a<r.length;a++)o=r[a],o.form===t.form&&Xp(o)}break e;case"textarea":Zp(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&_n(t,!!r.multiple,a,!1)}}}var ld=!1;function sh(t,a,r){if(ld)return t(a,r);ld=!0;try{var o=t(a);return o}finally{if(ld=!1,(wn!==null||Tn!==null)&&(wl(),wn&&(a=wn,t=Tn,Tn=wn=null,ah(a),t)))for(a=0;a<t.length;a++)ah(t[a])}}function To(t,a){var r=t.stateNode;if(r===null)return null;var o=r[ot]||null;if(o===null)return null;r=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(l(231,a,typeof r));return r}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=!1;if(Ws)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){cd=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{cd=!1}var br=null,dd=null,qi=null;function rh(){if(qi)return qi;var t,a=dd,r=a.length,o,u="value"in br?br.value:br.textContent,p=u.length;for(t=0;t<r&&a[t]===u[t];t++);var y=r-t;for(o=1;o<=y&&a[r-o]===u[p-o];o++);return qi=u.slice(t,1<o?1-o:void 0)}function Ui(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Bi(){return!0}function nh(){return!1}function Wa(t){function a(r,o,u,p,y){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Bi:nh,this.isPropagationStopped=nh,this}return f(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),a}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Wa(Yr),Co=f({},Yr,{view:0,detail:0}),FN=Wa(Co),ud,md,Ao,Fi=f({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(ud=t.screenX-Ao.screenX,md=t.screenY-Ao.screenY):md=ud=0,Ao=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:md}}),oh=Wa(Fi),HN=f({},Fi,{dataTransfer:0}),$N=Wa(HN),GN=f({},Co,{relatedTarget:0}),pd=Wa(GN),WN=f({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),KN=Wa(WN),YN=f({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XN=Wa(YN),QN=f({},Yr,{data:0}),ih=Wa(QN),ZN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ej={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tj(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=ej[t])?!!a[t]:!1}function hd(){return tj}var aj=f({},Co,{key:function(t){if(t.key){var a=ZN[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(t){return t.type==="keypress"?Ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sj=Wa(aj),rj=f({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lh=Wa(rj),nj=f({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),oj=Wa(nj),ij=f({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),lj=Wa(ij),cj=f({},Fi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dj=Wa(cj),uj=f({},Yr,{newState:0,oldState:0}),mj=Wa(uj),pj=[9,13,27,32],xd=Ws&&"CompositionEvent"in window,Eo=null;Ws&&"documentMode"in document&&(Eo=document.documentMode);var hj=Ws&&"TextEvent"in window&&!Eo,ch=Ws&&(!xd||Eo&&8<Eo&&11>=Eo),dh=" ",uh=!1;function mh(t,a){switch(t){case"keyup":return pj.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ph(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kn=!1;function xj(t,a){switch(t){case"compositionend":return ph(a);case"keypress":return a.which!==32?null:(uh=!0,dh);case"textInput":return t=a.data,t===dh&&uh?null:t;default:return null}}function fj(t,a){if(kn)return t==="compositionend"||!xd&&mh(t,a)?(t=rh(),qi=dd=br=null,kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ch&&a.locale!=="ko"?null:a.data;default:return null}}var gj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!gj[t.type]:a==="textarea"}function xh(t,a,r,o){wn?Tn?Tn.push(o):Tn=[o]:wn=o,a=Ll(a,"onChange"),0<a.length&&(r=new Vi("onChange","change",null,r,o),t.push({event:r,listeners:a}))}var Ro=null,Lo=null;function bj(t){Q0(t,0)}function Hi(t){var a=je(t);if(Xp(a))return t}function fh(t,a){if(t==="change")return a}var gh=!1;if(Ws){var fd;if(Ws){var gd="oninput"in document;if(!gd){var bh=document.createElement("div");bh.setAttribute("oninput","return;"),gd=typeof bh.oninput=="function"}fd=gd}else fd=!1;gh=fd&&(!document.documentMode||9<document.documentMode)}function vh(){Ro&&(Ro.detachEvent("onpropertychange",yh),Lo=Ro=null)}function yh(t){if(t.propertyName==="value"&&Hi(Lo)){var a=[];xh(a,Lo,t,id(t)),sh(bj,a)}}function vj(t,a,r){t==="focusin"?(vh(),Ro=a,Lo=r,Ro.attachEvent("onpropertychange",yh)):t==="focusout"&&vh()}function yj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hi(Lo)}function Nj(t,a){if(t==="click")return Hi(a)}function jj(t,a){if(t==="input"||t==="change")return Hi(a)}function _j(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var es=typeof Object.is=="function"?Object.is:_j;function Mo(t,a){if(es(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),o=Object.keys(a);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!fe.call(a,u)||!es(t[u],a[u]))return!1}return!0}function Nh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jh(t,a){var r=Nh(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=a&&o>=a)return{node:r,offset:a-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nh(r)}}function _h(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?_h(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Sh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Di(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=Di(t.document)}return a}function bd(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Sj=Ws&&"documentMode"in document&&11>=document.documentMode,Cn=null,vd=null,Po=null,yd=!1;function wh(t,a,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yd||Cn==null||Cn!==Di(o)||(o=Cn,"selectionStart"in o&&bd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Po&&Mo(Po,o)||(Po=o,o=Ll(vd,"onSelect"),0<o.length&&(a=new Vi("onSelect","select",null,a,r),t.push({event:a,listeners:o}),a.target=Cn)))}function Xr(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var An={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},Nd={},Th={};Ws&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete An.animationend.animation,delete An.animationiteration.animation,delete An.animationstart.animation),"TransitionEvent"in window||delete An.transitionend.transition);function Qr(t){if(Nd[t])return Nd[t];if(!An[t])return t;var a=An[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Th)return Nd[t]=a[r];return t}var kh=Qr("animationend"),Ch=Qr("animationiteration"),Ah=Qr("animationstart"),wj=Qr("transitionrun"),Tj=Qr("transitionstart"),kj=Qr("transitioncancel"),Eh=Qr("transitionend"),Rh=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function _s(t,a){Rh.set(t,a),at(a,[t])}var $i=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ms=[],En=0,_d=0;function Gi(){for(var t=En,a=_d=En=0;a<t;){var r=ms[a];ms[a++]=null;var o=ms[a];ms[a++]=null;var u=ms[a];ms[a++]=null;var p=ms[a];if(ms[a++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}p!==0&&Lh(r,u,p)}}function Wi(t,a,r,o){ms[En++]=t,ms[En++]=a,ms[En++]=r,ms[En++]=o,_d|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Sd(t,a,r,o){return Wi(t,a,r,o),Ki(t)}function Zr(t,a){return Wi(t,null,null,a),Ki(t)}function Lh(t,a,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var u=!1,p=t.return;p!==null;)p.childLanes|=r,o=p.alternate,o!==null&&(o.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(u=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,u&&a!==null&&(u=31-de(r),t=p.hiddenUpdates,o=t[u],o===null?t[u]=[a]:o.push(a),a.lane=r|536870912),p):null}function Ki(t){if(50<ai)throw ai=0,Mu=null,Error(l(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Rn={};function Cj(t,a,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(t,a,r,o){return new Cj(t,a,r,o)}function wd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ks(t,a){var r=t.alternate;return r===null?(r=ts(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Mh(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Yi(t,a,r,o,u,p){var y=0;if(o=t,typeof t=="function")wd(t)&&(y=1);else if(typeof t=="string")y=M_(t,r,A.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case be:return t=ts(31,r,a,u),t.elementType=be,t.lanes=p,t;case w:return Jr(r.children,u,p,a);case C:y=8,u|=24;break;case E:return t=ts(12,r,a,u|2),t.elementType=E,t.lanes=p,t;case J:return t=ts(13,r,a,u),t.elementType=J,t.lanes=p,t;case ie:return t=ts(19,r,a,u),t.elementType=ie,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L:y=10;break e;case D:y=9;break e;case V:y=11;break e;case I:y=14;break e;case k:y=16,o=null;break e}y=29,r=Error(l(130,t===null?"null":typeof t,"")),o=null}return a=ts(y,r,a,u),a.elementType=t,a.type=o,a.lanes=p,a}function Jr(t,a,r,o){return t=ts(7,t,o,a),t.lanes=r,t}function Td(t,a,r){return t=ts(6,t,null,a),t.lanes=r,t}function Ph(t){var a=ts(18,null,null,0);return a.stateNode=t,a}function kd(t,a,r){return a=ts(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Ih=new WeakMap;function ps(t,a){if(typeof t=="object"&&t!==null){var r=Ih.get(t);return r!==void 0?r:(a={value:t,source:a,stack:jt(a)},Ih.set(t,a),a)}return{value:t,source:a,stack:jt(a)}}var Ln=[],Mn=0,Xi=null,Io=0,hs=[],xs=0,vr=null,Rs=1,Ls="";function Ys(t,a){Ln[Mn++]=Io,Ln[Mn++]=Xi,Xi=t,Io=a}function Oh(t,a,r){hs[xs++]=Rs,hs[xs++]=Ls,hs[xs++]=vr,vr=t;var o=Rs;t=Ls;var u=32-de(o)-1;o&=~(1<<u),r+=1;var p=32-de(a)+u;if(30<p){var y=u-u%5;p=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Rs=1<<32-de(a)+u|r<<u|o,Ls=p+t}else Rs=1<<p|r<<u|o,Ls=t}function Cd(t){t.return!==null&&(Ys(t,1),Oh(t,1,0))}function Ad(t){for(;t===Xi;)Xi=Ln[--Mn],Ln[Mn]=null,Io=Ln[--Mn],Ln[Mn]=null;for(;t===vr;)vr=hs[--xs],hs[xs]=null,Ls=hs[--xs],hs[xs]=null,Rs=hs[--xs],hs[xs]=null}function Dh(t,a){hs[xs++]=Rs,hs[xs++]=Ls,hs[xs++]=vr,Rs=a.id,Ls=a.overflow,vr=t}var za=null,ga=null,Yt=!1,yr=null,fs=!1,Ed=Error(l(519));function Nr(t){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(ps(a,t)),Ed}function zh(t){var a=t.stateNode,r=t.type,o=t.memoizedProps;switch(a[Je]=t,a[ot]=o,r){case"dialog":$t("cancel",a),$t("close",a);break;case"iframe":case"object":case"embed":$t("load",a);break;case"video":case"audio":for(r=0;r<ri.length;r++)$t(ri[r],a);break;case"source":$t("error",a);break;case"img":case"image":case"link":$t("error",a),$t("load",a);break;case"details":$t("toggle",a);break;case"input":$t("invalid",a),Qp(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":$t("invalid",a);break;case"textarea":$t("invalid",a),Jp(a,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||o.suppressHydrationWarning===!0||tf(a.textContent,r)?(o.popover!=null&&($t("beforetoggle",a),$t("toggle",a)),o.onScroll!=null&&$t("scroll",a),o.onScrollEnd!=null&&$t("scrollend",a),o.onClick!=null&&(a.onclick=Gs),a=!0):a=!1,a||Nr(t,!0)}function qh(t){for(za=t.return;za;)switch(za.tag){case 5:case 31:case 13:fs=!1;return;case 27:case 3:fs=!0;return;default:za=za.return}}function Pn(t){if(t!==za)return!1;if(!Yt)return qh(t),Yt=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Ku(t.type,t.memoizedProps)),r=!r),r&&ga&&Nr(t),qh(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ga=uf(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ga=uf(t)}else a===27?(a=ga,Ir(t.type)?(t=Ju,Ju=null,ga=t):ga=a):ga=za?bs(t.stateNode.nextSibling):null;return!0}function en(){ga=za=null,Yt=!1}function Rd(){var t=yr;return t!==null&&(Qa===null?Qa=t:Qa.push.apply(Qa,t),yr=null),t}function Oo(t){yr===null?yr=[t]:yr.push(t)}var Ld=T(null),tn=null,Xs=null;function jr(t,a,r){re(Ld,a._currentValue),a._currentValue=r}function Qs(t){t._currentValue=Ld.current,W(Ld)}function Md(t,a,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===r)break;t=t.return}}function Pd(t,a,r,o){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var p=u.dependencies;if(p!==null){var y=u.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=u;for(var H=0;H<a.length;H++)if(S.context===a[H]){p.lanes|=r,S=p.alternate,S!==null&&(S.lanes|=r),Md(p.return,r,t),o||(y=null);break e}p=S.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(l(341));y.lanes|=r,p=y.alternate,p!==null&&(p.lanes|=r),Md(y,r,t),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===t){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function In(t,a,r,o){t=null;for(var u=a,p=!1;u!==null;){if(!p){if((u.flags&524288)!==0)p=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var S=u.type;es(u.pendingProps.value,y.value)||(t!==null?t.push(S):t=[S])}}else if(u===O.current){if(y=u.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(ci):t=[ci])}u=u.return}t!==null&&Pd(a,t,r,o),a.flags|=262144}function Qi(t){for(t=t.firstContext;t!==null;){if(!es(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function an(t){tn=t,Xs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qa(t){return Uh(tn,t)}function Zi(t,a){return tn===null&&an(t),Uh(t,a)}function Uh(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Xs===null){if(t===null)throw Error(l(308));Xs=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Xs=Xs.next=a;return r}var Aj=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},Ej=s.unstable_scheduleCallback,Rj=s.unstable_NormalPriority,Ca={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Id(){return{controller:new Aj,data:new Map,refCount:0}}function Do(t){t.refCount--,t.refCount===0&&Ej(Rj,function(){t.controller.abort()})}var zo=null,Od=0,On=0,Dn=null;function Lj(t,a){if(zo===null){var r=zo=[];Od=0,On=qu(),Dn={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Od++,a.then(Bh,Bh),a}function Bh(){if(--Od===0&&zo!==null){Dn!==null&&(Dn.status="fulfilled");var t=zo;zo=null,On=0,Dn=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Mj(t,a){var r=[],o={status:"pending",value:null,reason:null,then:function(u){r.push(u)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var u=0;u<r.length;u++)(0,r[u])(a)},function(u){for(o.status="rejected",o.reason=u,u=0;u<r.length;u++)(0,r[u])(void 0)}),o}var Vh=P.S;P.S=function(t,a){w0=_e(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Lj(t,a),Vh!==null&&Vh(t,a)};var sn=T(null);function Dd(){var t=sn.current;return t!==null?t:ha.pooledCache}function Ji(t,a){a===null?re(sn,sn.current):re(sn,a.pool)}function Fh(){var t=Dd();return t===null?null:{parent:Ca._currentValue,pool:t}}var zn=Error(l(460)),zd=Error(l(474)),el=Error(l(542)),tl={then:function(){}};function Hh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $h(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Gs,Gs),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Wh(t),t;default:if(typeof a.status=="string")a.then(Gs,Gs);else{if(t=ha,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var u=a;u.status="fulfilled",u.value=o}},function(o){if(a.status==="pending"){var u=a;u.status="rejected",u.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Wh(t),t}throw nn=a,zn}}function rn(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(nn=r,zn):r}}var nn=null;function Gh(){if(nn===null)throw Error(l(459));var t=nn;return nn=null,t}function Wh(t){if(t===zn||t===el)throw Error(l(483))}var qn=null,qo=0;function al(t){var a=qo;return qo+=1,qn===null&&(qn=[]),$h(qn,t,a)}function Uo(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function sl(t,a){throw a.$$typeof===N?Error(l(525)):(t=Object.prototype.toString.call(a),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Kh(t){function a(le,ee){if(t){var pe=le.deletions;pe===null?(le.deletions=[ee],le.flags|=16):pe.push(ee)}}function r(le,ee){if(!t)return null;for(;ee!==null;)a(le,ee),ee=ee.sibling;return null}function o(le){for(var ee=new Map;le!==null;)le.key!==null?ee.set(le.key,le):ee.set(le.index,le),le=le.sibling;return ee}function u(le,ee){return le=Ks(le,ee),le.index=0,le.sibling=null,le}function p(le,ee,pe){return le.index=pe,t?(pe=le.alternate,pe!==null?(pe=pe.index,pe<ee?(le.flags|=67108866,ee):pe):(le.flags|=67108866,ee)):(le.flags|=1048576,ee)}function y(le){return t&&le.alternate===null&&(le.flags|=67108866),le}function S(le,ee,pe,Ae){return ee===null||ee.tag!==6?(ee=Td(pe,le.mode,Ae),ee.return=le,ee):(ee=u(ee,pe),ee.return=le,ee)}function H(le,ee,pe,Ae){var Et=pe.type;return Et===w?Te(le,ee,pe.props.children,Ae,pe.key):ee!==null&&(ee.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===k&&rn(Et)===ee.type)?(ee=u(ee,pe.props),Uo(ee,pe),ee.return=le,ee):(ee=Yi(pe.type,pe.key,pe.props,null,le.mode,Ae),Uo(ee,pe),ee.return=le,ee)}function he(le,ee,pe,Ae){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==pe.containerInfo||ee.stateNode.implementation!==pe.implementation?(ee=kd(pe,le.mode,Ae),ee.return=le,ee):(ee=u(ee,pe.children||[]),ee.return=le,ee)}function Te(le,ee,pe,Ae,Et){return ee===null||ee.tag!==7?(ee=Jr(pe,le.mode,Ae,Et),ee.return=le,ee):(ee=u(ee,pe),ee.return=le,ee)}function Le(le,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Td(""+ee,le.mode,pe),ee.return=le,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:return pe=Yi(ee.type,ee.key,ee.props,null,le.mode,pe),Uo(pe,ee),pe.return=le,pe;case _:return ee=kd(ee,le.mode,pe),ee.return=le,ee;case k:return ee=rn(ee),Le(le,ee,pe)}if(Ee(ee)||oe(ee))return ee=Jr(ee,le.mode,pe,null),ee.return=le,ee;if(typeof ee.then=="function")return Le(le,al(ee),pe);if(ee.$$typeof===L)return Le(le,Zi(le,ee),pe);sl(le,ee)}return null}function xe(le,ee,pe,Ae){var Et=ee!==null?ee.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Et!==null?null:S(le,ee,""+pe,Ae);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case j:return pe.key===Et?H(le,ee,pe,Ae):null;case _:return pe.key===Et?he(le,ee,pe,Ae):null;case k:return pe=rn(pe),xe(le,ee,pe,Ae)}if(Ee(pe)||oe(pe))return Et!==null?null:Te(le,ee,pe,Ae,null);if(typeof pe.then=="function")return xe(le,ee,al(pe),Ae);if(pe.$$typeof===L)return xe(le,ee,Zi(le,pe),Ae);sl(le,pe)}return null}function Ne(le,ee,pe,Ae,Et){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return le=le.get(pe)||null,S(ee,le,""+Ae,Et);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case j:return le=le.get(Ae.key===null?pe:Ae.key)||null,H(ee,le,Ae,Et);case _:return le=le.get(Ae.key===null?pe:Ae.key)||null,he(ee,le,Ae,Et);case k:return Ae=rn(Ae),Ne(le,ee,pe,Ae,Et)}if(Ee(Ae)||oe(Ae))return le=le.get(pe)||null,Te(ee,le,Ae,Et,null);if(typeof Ae.then=="function")return Ne(le,ee,pe,al(Ae),Et);if(Ae.$$typeof===L)return Ne(le,ee,pe,Zi(ee,Ae),Et);sl(ee,Ae)}return null}function bt(le,ee,pe,Ae){for(var Et=null,ea=null,wt=ee,Bt=ee=0,Wt=null;wt!==null&&Bt<pe.length;Bt++){wt.index>Bt?(Wt=wt,wt=null):Wt=wt.sibling;var ta=xe(le,wt,pe[Bt],Ae);if(ta===null){wt===null&&(wt=Wt);break}t&&wt&&ta.alternate===null&&a(le,wt),ee=p(ta,ee,Bt),ea===null?Et=ta:ea.sibling=ta,ea=ta,wt=Wt}if(Bt===pe.length)return r(le,wt),Yt&&Ys(le,Bt),Et;if(wt===null){for(;Bt<pe.length;Bt++)wt=Le(le,pe[Bt],Ae),wt!==null&&(ee=p(wt,ee,Bt),ea===null?Et=wt:ea.sibling=wt,ea=wt);return Yt&&Ys(le,Bt),Et}for(wt=o(wt);Bt<pe.length;Bt++)Wt=Ne(wt,le,Bt,pe[Bt],Ae),Wt!==null&&(t&&Wt.alternate!==null&&wt.delete(Wt.key===null?Bt:Wt.key),ee=p(Wt,ee,Bt),ea===null?Et=Wt:ea.sibling=Wt,ea=Wt);return t&&wt.forEach(function(Ur){return a(le,Ur)}),Yt&&Ys(le,Bt),Et}function Mt(le,ee,pe,Ae){if(pe==null)throw Error(l(151));for(var Et=null,ea=null,wt=ee,Bt=ee=0,Wt=null,ta=pe.next();wt!==null&&!ta.done;Bt++,ta=pe.next()){wt.index>Bt?(Wt=wt,wt=null):Wt=wt.sibling;var Ur=xe(le,wt,ta.value,Ae);if(Ur===null){wt===null&&(wt=Wt);break}t&&wt&&Ur.alternate===null&&a(le,wt),ee=p(Ur,ee,Bt),ea===null?Et=Ur:ea.sibling=Ur,ea=Ur,wt=Wt}if(ta.done)return r(le,wt),Yt&&Ys(le,Bt),Et;if(wt===null){for(;!ta.done;Bt++,ta=pe.next())ta=Le(le,ta.value,Ae),ta!==null&&(ee=p(ta,ee,Bt),ea===null?Et=ta:ea.sibling=ta,ea=ta);return Yt&&Ys(le,Bt),Et}for(wt=o(wt);!ta.done;Bt++,ta=pe.next())ta=Ne(wt,le,Bt,ta.value,Ae),ta!==null&&(t&&ta.alternate!==null&&wt.delete(ta.key===null?Bt:ta.key),ee=p(ta,ee,Bt),ea===null?Et=ta:ea.sibling=ta,ea=ta);return t&&wt.forEach(function(H_){return a(le,H_)}),Yt&&Ys(le,Bt),Et}function ma(le,ee,pe,Ae){if(typeof pe=="object"&&pe!==null&&pe.type===w&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case j:e:{for(var Et=pe.key;ee!==null;){if(ee.key===Et){if(Et=pe.type,Et===w){if(ee.tag===7){r(le,ee.sibling),Ae=u(ee,pe.props.children),Ae.return=le,le=Ae;break e}}else if(ee.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===k&&rn(Et)===ee.type){r(le,ee.sibling),Ae=u(ee,pe.props),Uo(Ae,pe),Ae.return=le,le=Ae;break e}r(le,ee);break}else a(le,ee);ee=ee.sibling}pe.type===w?(Ae=Jr(pe.props.children,le.mode,Ae,pe.key),Ae.return=le,le=Ae):(Ae=Yi(pe.type,pe.key,pe.props,null,le.mode,Ae),Uo(Ae,pe),Ae.return=le,le=Ae)}return y(le);case _:e:{for(Et=pe.key;ee!==null;){if(ee.key===Et)if(ee.tag===4&&ee.stateNode.containerInfo===pe.containerInfo&&ee.stateNode.implementation===pe.implementation){r(le,ee.sibling),Ae=u(ee,pe.children||[]),Ae.return=le,le=Ae;break e}else{r(le,ee);break}else a(le,ee);ee=ee.sibling}Ae=kd(pe,le.mode,Ae),Ae.return=le,le=Ae}return y(le);case k:return pe=rn(pe),ma(le,ee,pe,Ae)}if(Ee(pe))return bt(le,ee,pe,Ae);if(oe(pe)){if(Et=oe(pe),typeof Et!="function")throw Error(l(150));return pe=Et.call(pe),Mt(le,ee,pe,Ae)}if(typeof pe.then=="function")return ma(le,ee,al(pe),Ae);if(pe.$$typeof===L)return ma(le,ee,Zi(le,pe),Ae);sl(le,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,ee!==null&&ee.tag===6?(r(le,ee.sibling),Ae=u(ee,pe),Ae.return=le,le=Ae):(r(le,ee),Ae=Td(pe,le.mode,Ae),Ae.return=le,le=Ae),y(le)):r(le,ee)}return function(le,ee,pe,Ae){try{qo=0;var Et=ma(le,ee,pe,Ae);return qn=null,Et}catch(wt){if(wt===zn||wt===el)throw wt;var ea=ts(29,wt,null,le.mode);return ea.lanes=Ae,ea.return=le,ea}finally{}}}var on=Kh(!0),Yh=Kh(!1),_r=!1;function qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Sr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wr(t,a,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(aa&2)!==0){var u=o.pending;return u===null?a.next=a:(a.next=u.next,u.next=a),o.pending=a,a=Ki(t),Lh(t,null,r),a}return Wi(t,o,a,r),Ki(t)}function Bo(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,r|=o,a.lanes=r,Ft(t,r)}}function Bd(t,a){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?u=p=y:p=p.next=y,r=r.next}while(r!==null);p===null?u=p=a:p=p.next=a}else u=p=a;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var Vd=!1;function Vo(){if(Vd){var t=Dn;if(t!==null)throw t}}function Fo(t,a,r,o){Vd=!1;var u=t.updateQueue;_r=!1;var p=u.firstBaseUpdate,y=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var H=S,he=H.next;H.next=null,y===null?p=he:y.next=he,y=H;var Te=t.alternate;Te!==null&&(Te=Te.updateQueue,S=Te.lastBaseUpdate,S!==y&&(S===null?Te.firstBaseUpdate=he:S.next=he,Te.lastBaseUpdate=H))}if(p!==null){var Le=u.baseState;y=0,Te=he=H=null,S=p;do{var xe=S.lane&-536870913,Ne=xe!==S.lane;if(Ne?(Gt&xe)===xe:(o&xe)===xe){xe!==0&&xe===On&&(Vd=!0),Te!==null&&(Te=Te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var bt=t,Mt=S;xe=a;var ma=r;switch(Mt.tag){case 1:if(bt=Mt.payload,typeof bt=="function"){Le=bt.call(ma,Le,xe);break e}Le=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Mt.payload,xe=typeof bt=="function"?bt.call(ma,Le,xe):bt,xe==null)break e;Le=f({},Le,xe);break e;case 2:_r=!0}}xe=S.callback,xe!==null&&(t.flags|=64,Ne&&(t.flags|=8192),Ne=u.callbacks,Ne===null?u.callbacks=[xe]:Ne.push(xe))}else Ne={lane:xe,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Te===null?(he=Te=Ne,H=Le):Te=Te.next=Ne,y|=xe;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;Ne=S,S=Ne.next,Ne.next=null,u.lastBaseUpdate=Ne,u.shared.pending=null}}while(!0);Te===null&&(H=Le),u.baseState=H,u.firstBaseUpdate=he,u.lastBaseUpdate=Te,p===null&&(u.shared.lanes=0),Er|=y,t.lanes=y,t.memoizedState=Le}}function Xh(t,a){if(typeof t!="function")throw Error(l(191,t));t.call(a)}function Qh(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Xh(r[t],a)}var Un=T(null),rl=T(0);function Zh(t,a){t=or,re(rl,t),re(Un,a),or=t|a.baseLanes}function Fd(){re(rl,or),re(Un,Un.current)}function Hd(){or=rl.current,W(Un),W(rl)}var as=T(null),gs=null;function Tr(t){var a=t.alternate;re(wa,wa.current&1),re(as,t),gs===null&&(a===null||Un.current!==null||a.memoizedState!==null)&&(gs=t)}function $d(t){re(wa,wa.current),re(as,t),gs===null&&(gs=t)}function Jh(t){t.tag===22?(re(wa,wa.current),re(as,t),gs===null&&(gs=t)):kr()}function kr(){re(wa,wa.current),re(as,as.current)}function ss(t){W(as),gs===t&&(gs=null),W(wa)}var wa=T(0);function nl(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Qu(r)||Zu(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zs=0,Ut=null,da=null,Aa=null,ol=!1,Bn=!1,ln=!1,il=0,Ho=0,Vn=null,Pj=0;function ja(){throw Error(l(321))}function Gd(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!es(t[r],a[r]))return!1;return!0}function Wd(t,a,r,o,u,p){return Zs=p,Ut=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=t===null||t.memoizedState===null?Ox:lu,ln=!1,p=r(o,u),ln=!1,Bn&&(p=tx(a,r,o,u)),ex(t),p}function ex(t){P.H=Wo;var a=da!==null&&da.next!==null;if(Zs=0,Aa=da=Ut=null,ol=!1,Ho=0,Vn=null,a)throw Error(l(300));t===null||Ea||(t=t.dependencies,t!==null&&Qi(t)&&(Ea=!0))}function tx(t,a,r,o){Ut=t;var u=0;do{if(Bn&&(Vn=null),Ho=0,Bn=!1,25<=u)throw Error(l(301));if(u+=1,Aa=da=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}P.H=Dx,p=a(r,o)}while(Bn);return p}function Ij(){var t=P.H,a=t.useState()[0];return a=typeof a.then=="function"?$o(a):a,t=t.useState()[0],(da!==null?da.memoizedState:null)!==t&&(Ut.flags|=1024),a}function Kd(){var t=il!==0;return il=0,t}function Yd(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function Xd(t){if(ol){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}ol=!1}Zs=0,Aa=da=Ut=null,Bn=!1,Ho=il=0,Vn=null}function Ha(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Aa===null?Ut.memoizedState=Aa=t:Aa=Aa.next=t,Aa}function Ta(){if(da===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=da.next;var a=Aa===null?Ut.memoizedState:Aa.next;if(a!==null)Aa=a,da=t;else{if(t===null)throw Ut.alternate===null?Error(l(467)):Error(l(310));da=t,t={memoizedState:da.memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},Aa===null?Ut.memoizedState=Aa=t:Aa=Aa.next=t}return Aa}function ll(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(t){var a=Ho;return Ho+=1,Vn===null&&(Vn=[]),t=$h(Vn,t,a),a=Ut,(Aa===null?a.memoizedState:Aa.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Ox:lu),t}function cl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $o(t);if(t.$$typeof===L)return qa(t)}throw Error(l(438,String(t)))}function Qd(t){var a=null,r=Ut.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var o=Ut.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(u){return u.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=ll(),Ut.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),o=0;o<t;o++)r[o]=te;return a.index++,r}function Js(t,a){return typeof a=="function"?a(t):a}function dl(t){var a=Ta();return Zd(a,da,t)}function Zd(t,a,r){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var u=t.baseQueue,p=o.pending;if(p!==null){if(u!==null){var y=u.next;u.next=p.next,p.next=y}a.baseQueue=u=p,o.pending=null}if(p=t.baseState,u===null)t.memoizedState=p;else{a=u.next;var S=y=null,H=null,he=a,Te=!1;do{var Le=he.lane&-536870913;if(Le!==he.lane?(Gt&Le)===Le:(Zs&Le)===Le){var xe=he.revertLane;if(xe===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Le===On&&(Te=!0);else if((Zs&xe)===xe){he=he.next,xe===On&&(Te=!0);continue}else Le={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},H===null?(S=H=Le,y=p):H=H.next=Le,Ut.lanes|=xe,Er|=xe;Le=he.action,ln&&r(p,Le),p=he.hasEagerState?he.eagerState:r(p,Le)}else xe={lane:Le,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},H===null?(S=H=xe,y=p):H=H.next=xe,Ut.lanes|=Le,Er|=Le;he=he.next}while(he!==null&&he!==a);if(H===null?y=p:H.next=S,!es(p,t.memoizedState)&&(Ea=!0,Te&&(r=Dn,r!==null)))throw r;t.memoizedState=p,t.baseState=y,t.baseQueue=H,o.lastRenderedState=p}return u===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Jd(t){var a=Ta(),r=a.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,p=a.memoizedState;if(u!==null){r.pending=null;var y=u=u.next;do p=t(p,y.action),y=y.next;while(y!==u);es(p,a.memoizedState)||(Ea=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,o]}function ax(t,a,r){var o=Ut,u=Ta(),p=Yt;if(p){if(r===void 0)throw Error(l(407));r=r()}else r=a();var y=!es((da||u).memoizedState,r);if(y&&(u.memoizedState=r,Ea=!0),u=u.queue,au(nx.bind(null,o,u,t),[t]),u.getSnapshot!==a||y||Aa!==null&&Aa.memoizedState.tag&1){if(o.flags|=2048,Fn(9,{destroy:void 0},rx.bind(null,o,u,r,a),null),ha===null)throw Error(l(349));p||(Zs&127)!==0||sx(o,a,r)}return r}function sx(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=Ut.updateQueue,a===null?(a=ll(),Ut.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function rx(t,a,r,o){a.value=r,a.getSnapshot=o,ox(a)&&ix(t)}function nx(t,a,r){return r(function(){ox(a)&&ix(t)})}function ox(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!es(t,r)}catch{return!0}}function ix(t){var a=Zr(t,2);a!==null&&Za(a,t,2)}function eu(t){var a=Ha();if(typeof t=="function"){var r=t;if(t=r(),ln){Ve(!0);try{r()}finally{Ve(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},a}function lx(t,a,r,o){return t.baseState=r,Zd(t,da,typeof o=="function"?o:Js)}function Oj(t,a,r,o,u){if(pl(t))throw Error(l(485));if(t=a.action,t!==null){var p={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){p.listeners.push(y)}};P.T!==null?r(!0):p.isTransition=!1,o(p),r=a.pending,r===null?(p.next=a.pending=p,cx(a,p)):(p.next=r.next,a.pending=r.next=p)}}function cx(t,a){var r=a.action,o=a.payload,u=t.state;if(a.isTransition){var p=P.T,y={};P.T=y;try{var S=r(u,o),H=P.S;H!==null&&H(y,S),dx(t,a,S)}catch(he){tu(t,a,he)}finally{p!==null&&y.types!==null&&(p.types=y.types),P.T=p}}else try{p=r(u,o),dx(t,a,p)}catch(he){tu(t,a,he)}}function dx(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){ux(t,a,o)},function(o){return tu(t,a,o)}):ux(t,a,r)}function ux(t,a,r){a.status="fulfilled",a.value=r,mx(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,cx(t,r)))}function tu(t,a,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=r,mx(a),a=a.next;while(a!==o)}t.action=null}function mx(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function px(t,a){return a}function hx(t,a){if(Yt){var r=ha.formState;if(r!==null){e:{var o=Ut;if(Yt){if(ga){t:{for(var u=ga,p=fs;u.nodeType!==8;){if(!p){u=null;break t}if(u=bs(u.nextSibling),u===null){u=null;break t}}p=u.data,u=p==="F!"||p==="F"?u:null}if(u){ga=bs(u.nextSibling),o=u.data==="F!";break e}}Nr(o)}o=!1}o&&(a=r[0])}}return r=Ha(),r.memoizedState=r.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:px,lastRenderedState:a},r.queue=o,r=Mx.bind(null,Ut,o),o.dispatch=r,o=eu(!1),p=iu.bind(null,Ut,!1,o.queue),o=Ha(),u={state:a,dispatch:null,action:t,pending:null},o.queue=u,r=Oj.bind(null,Ut,u,p,r),u.dispatch=r,o.memoizedState=t,[a,r,!1]}function xx(t){var a=Ta();return fx(a,da,t)}function fx(t,a,r){if(a=Zd(t,a,px)[0],t=dl(Js)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=$o(a)}catch(y){throw y===zn?el:y}else o=a;a=Ta();var u=a.queue,p=u.dispatch;return r!==a.memoizedState&&(Ut.flags|=2048,Fn(9,{destroy:void 0},Dj.bind(null,u,r),null)),[o,p,t]}function Dj(t,a){t.action=a}function gx(t){var a=Ta(),r=da;if(r!==null)return fx(a,r,t);Ta(),a=a.memoizedState,r=Ta();var o=r.queue.dispatch;return r.memoizedState=t,[a,o,!1]}function Fn(t,a,r,o){return t={tag:t,create:r,deps:o,inst:a,next:null},a=Ut.updateQueue,a===null&&(a=ll(),Ut.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,a.lastEffect=t),t}function bx(){return Ta().memoizedState}function ul(t,a,r,o){var u=Ha();Ut.flags|=t,u.memoizedState=Fn(1|a,{destroy:void 0},r,o===void 0?null:o)}function ml(t,a,r,o){var u=Ta();o=o===void 0?null:o;var p=u.memoizedState.inst;da!==null&&o!==null&&Gd(o,da.memoizedState.deps)?u.memoizedState=Fn(a,p,r,o):(Ut.flags|=t,u.memoizedState=Fn(1|a,p,r,o))}function vx(t,a){ul(8390656,8,t,a)}function au(t,a){ml(2048,8,t,a)}function zj(t){Ut.flags|=4;var a=Ut.updateQueue;if(a===null)a=ll(),Ut.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function yx(t){var a=Ta().memoizedState;return zj({ref:a,nextImpl:t}),function(){if((aa&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function Nx(t,a){return ml(4,2,t,a)}function jx(t,a){return ml(4,4,t,a)}function _x(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Sx(t,a,r){r=r!=null?r.concat([t]):null,ml(4,4,_x.bind(null,a,t),r)}function su(){}function wx(t,a){var r=Ta();a=a===void 0?null:a;var o=r.memoizedState;return a!==null&&Gd(a,o[1])?o[0]:(r.memoizedState=[t,a],t)}function Tx(t,a){var r=Ta();a=a===void 0?null:a;var o=r.memoizedState;if(a!==null&&Gd(a,o[1]))return o[0];if(o=t(),ln){Ve(!0);try{t()}finally{Ve(!1)}}return r.memoizedState=[o,a],o}function ru(t,a,r){return r===void 0||(Zs&1073741824)!==0&&(Gt&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=k0(),Ut.lanes|=t,Er|=t,r)}function kx(t,a,r,o){return es(r,a)?r:Un.current!==null?(t=ru(t,r,o),es(t,a)||(Ea=!0),t):(Zs&42)===0||(Zs&1073741824)!==0&&(Gt&261930)===0?(Ea=!0,t.memoizedState=r):(t=k0(),Ut.lanes|=t,Er|=t,a)}function Cx(t,a,r,o,u){var p=Q.p;Q.p=p!==0&&8>p?p:8;var y=P.T,S={};P.T=S,iu(t,!1,a,r);try{var H=u(),he=P.S;if(he!==null&&he(S,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var Te=Mj(H,o);Go(t,a,Te,os(t))}else Go(t,a,o,os(t))}catch(Le){Go(t,a,{then:function(){},status:"rejected",reason:Le},os())}finally{Q.p=p,y!==null&&S.types!==null&&(y.types=S.types),P.T=y}}function qj(){}function nu(t,a,r,o){if(t.tag!==5)throw Error(l(476));var u=Ax(t).queue;Cx(t,u,a,F,r===null?qj:function(){return Ex(t),r(o)})}function Ax(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:F},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Ex(t){var a=Ax(t);a.next===null&&(a=t.alternate.memoizedState),Go(t,a.next.queue,{},os())}function ou(){return qa(ci)}function Rx(){return Ta().memoizedState}function Lx(){return Ta().memoizedState}function Uj(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=os();t=Sr(r);var o=wr(a,t,r);o!==null&&(Za(o,a,r),Bo(o,a,r)),a={cache:Id()},t.payload=a;return}a=a.return}}function Bj(t,a,r){var o=os();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},pl(t)?Px(a,r):(r=Sd(t,a,r,o),r!==null&&(Za(r,t,o),Ix(r,a,o)))}function Mx(t,a,r){var o=os();Go(t,a,r,o)}function Go(t,a,r,o){var u={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(pl(t))Px(a,u);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var y=a.lastRenderedState,S=p(y,r);if(u.hasEagerState=!0,u.eagerState=S,es(S,y))return Wi(t,a,u,0),ha===null&&Gi(),!1}catch{}finally{}if(r=Sd(t,a,u,o),r!==null)return Za(r,t,o),Ix(r,a,o),!0}return!1}function iu(t,a,r,o){if(o={lane:2,revertLane:qu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},pl(t)){if(a)throw Error(l(479))}else a=Sd(t,r,o,2),a!==null&&Za(a,t,2)}function pl(t){var a=t.alternate;return t===Ut||a!==null&&a===Ut}function Px(t,a){Bn=ol=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function Ix(t,a,r){if((r&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,r|=o,a.lanes=r,Ft(t,r)}}var Wo={readContext:qa,use:cl,useCallback:ja,useContext:ja,useEffect:ja,useImperativeHandle:ja,useLayoutEffect:ja,useInsertionEffect:ja,useMemo:ja,useReducer:ja,useRef:ja,useState:ja,useDebugValue:ja,useDeferredValue:ja,useTransition:ja,useSyncExternalStore:ja,useId:ja,useHostTransitionStatus:ja,useFormState:ja,useActionState:ja,useOptimistic:ja,useMemoCache:ja,useCacheRefresh:ja};Wo.useEffectEvent=ja;var Ox={readContext:qa,use:cl,useCallback:function(t,a){return Ha().memoizedState=[t,a===void 0?null:a],t},useContext:qa,useEffect:vx,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,ul(4194308,4,_x.bind(null,a,t),r)},useLayoutEffect:function(t,a){return ul(4194308,4,t,a)},useInsertionEffect:function(t,a){ul(4,2,t,a)},useMemo:function(t,a){var r=Ha();a=a===void 0?null:a;var o=t();if(ln){Ve(!0);try{t()}finally{Ve(!1)}}return r.memoizedState=[o,a],o},useReducer:function(t,a,r){var o=Ha();if(r!==void 0){var u=r(a);if(ln){Ve(!0);try{r(a)}finally{Ve(!1)}}}else u=a;return o.memoizedState=o.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},o.queue=t,t=t.dispatch=Bj.bind(null,Ut,t),[o.memoizedState,t]},useRef:function(t){var a=Ha();return t={current:t},a.memoizedState=t},useState:function(t){t=eu(t);var a=t.queue,r=Mx.bind(null,Ut,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:su,useDeferredValue:function(t,a){var r=Ha();return ru(r,t,a)},useTransition:function(){var t=eu(!1);return t=Cx.bind(null,Ut,t.queue,!0,!1),Ha().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var o=Ut,u=Ha();if(Yt){if(r===void 0)throw Error(l(407));r=r()}else{if(r=a(),ha===null)throw Error(l(349));(Gt&127)!==0||sx(o,a,r)}u.memoizedState=r;var p={value:r,getSnapshot:a};return u.queue=p,vx(nx.bind(null,o,p,t),[t]),o.flags|=2048,Fn(9,{destroy:void 0},rx.bind(null,o,p,r,a),null),r},useId:function(){var t=Ha(),a=ha.identifierPrefix;if(Yt){var r=Ls,o=Rs;r=(o&~(1<<32-de(o)-1)).toString(32)+r,a="_"+a+"R_"+r,r=il++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=Pj++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:ou,useFormState:hx,useActionState:hx,useOptimistic:function(t){var a=Ha();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=iu.bind(null,Ut,!0,r),r.dispatch=a,[t,a]},useMemoCache:Qd,useCacheRefresh:function(){return Ha().memoizedState=Uj.bind(null,Ut)},useEffectEvent:function(t){var a=Ha(),r={impl:t};return a.memoizedState=r,function(){if((aa&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},lu={readContext:qa,use:cl,useCallback:wx,useContext:qa,useEffect:au,useImperativeHandle:Sx,useInsertionEffect:Nx,useLayoutEffect:jx,useMemo:Tx,useReducer:dl,useRef:bx,useState:function(){return dl(Js)},useDebugValue:su,useDeferredValue:function(t,a){var r=Ta();return kx(r,da.memoizedState,t,a)},useTransition:function(){var t=dl(Js)[0],a=Ta().memoizedState;return[typeof t=="boolean"?t:$o(t),a]},useSyncExternalStore:ax,useId:Rx,useHostTransitionStatus:ou,useFormState:xx,useActionState:xx,useOptimistic:function(t,a){var r=Ta();return lx(r,da,t,a)},useMemoCache:Qd,useCacheRefresh:Lx};lu.useEffectEvent=yx;var Dx={readContext:qa,use:cl,useCallback:wx,useContext:qa,useEffect:au,useImperativeHandle:Sx,useInsertionEffect:Nx,useLayoutEffect:jx,useMemo:Tx,useReducer:Jd,useRef:bx,useState:function(){return Jd(Js)},useDebugValue:su,useDeferredValue:function(t,a){var r=Ta();return da===null?ru(r,t,a):kx(r,da.memoizedState,t,a)},useTransition:function(){var t=Jd(Js)[0],a=Ta().memoizedState;return[typeof t=="boolean"?t:$o(t),a]},useSyncExternalStore:ax,useId:Rx,useHostTransitionStatus:ou,useFormState:gx,useActionState:gx,useOptimistic:function(t,a){var r=Ta();return da!==null?lx(r,da,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Qd,useCacheRefresh:Lx};Dx.useEffectEvent=yx;function cu(t,a,r,o){a=t.memoizedState,r=r(o,a),r=r==null?a:f({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var du={enqueueSetState:function(t,a,r){t=t._reactInternals;var o=os(),u=Sr(o);u.payload=a,r!=null&&(u.callback=r),a=wr(t,u,o),a!==null&&(Za(a,t,o),Bo(a,t,o))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var o=os(),u=Sr(o);u.tag=1,u.payload=a,r!=null&&(u.callback=r),a=wr(t,u,o),a!==null&&(Za(a,t,o),Bo(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=os(),o=Sr(r);o.tag=2,a!=null&&(o.callback=a),a=wr(t,o,r),a!==null&&(Za(a,t,r),Bo(a,t,r))}};function zx(t,a,r,o,u,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,p,y):a.prototype&&a.prototype.isPureReactComponent?!Mo(r,o)||!Mo(u,p):!0}function qx(t,a,r,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,o),a.state!==t&&du.enqueueReplaceState(a,a.state,null)}function cn(t,a){var r=a;if("ref"in a){r={};for(var o in a)o!=="ref"&&(r[o]=a[o])}if(t=t.defaultProps){r===a&&(r=f({},r));for(var u in t)r[u]===void 0&&(r[u]=t[u])}return r}function Ux(t){$i(t)}function Bx(t){console.error(t)}function Vx(t){$i(t)}function hl(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Fx(t,a,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function uu(t,a,r){return r=Sr(r),r.tag=3,r.payload={element:null},r.callback=function(){hl(t,a)},r}function Hx(t){return t=Sr(t),t.tag=3,t}function $x(t,a,r,o){var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var p=o.value;t.payload=function(){return u(p)},t.callback=function(){Fx(a,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Fx(a,r,o),typeof u!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function Vj(t,a,r,o,u){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=r.alternate,a!==null&&In(a,r,u,!0),r=as.current,r!==null){switch(r.tag){case 31:case 13:return gs===null?Tl():r.alternate===null&&_a===0&&(_a=3),r.flags&=-257,r.flags|=65536,r.lanes=u,o===tl?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([o]):a.add(o),Ou(t,o,u)),!1;case 22:return r.flags|=65536,o===tl?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([o]):r.add(o)),Ou(t,o,u)),!1}throw Error(l(435,r.tag))}return Ou(t,o,u),Tl(),!1}if(Yt)return a=as.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=u,o!==Ed&&(t=Error(l(422),{cause:o}),Oo(ps(t,r)))):(o!==Ed&&(a=Error(l(423),{cause:o}),Oo(ps(a,r))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,o=ps(o,r),u=uu(t.stateNode,o,u),Bd(t,u),_a!==4&&(_a=2)),!1;var p=Error(l(520),{cause:o});if(p=ps(p,r),ti===null?ti=[p]:ti.push(p),_a!==4&&(_a=2),a===null)return!0;o=ps(o,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=u&-u,r.lanes|=t,t=uu(r.stateNode,o,t),Bd(r,t),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Rr===null||!Rr.has(p))))return r.flags|=65536,u&=-u,r.lanes|=u,u=Hx(u),$x(u,t,r,o),Bd(r,u),!1}r=r.return}while(r!==null);return!1}var mu=Error(l(461)),Ea=!1;function Ua(t,a,r,o){a.child=t===null?Yh(a,null,r,o):on(a,t.child,r,o)}function Gx(t,a,r,o,u){r=r.render;var p=a.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return an(a),o=Wd(t,a,r,y,p,u),S=Kd(),t!==null&&!Ea?(Yd(t,a,u),er(t,a,u)):(Yt&&S&&Cd(a),a.flags|=1,Ua(t,a,o,u),a.child)}function Wx(t,a,r,o,u){if(t===null){var p=r.type;return typeof p=="function"&&!wd(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,Kx(t,a,p,o,u)):(t=Yi(r.type,null,o,a,a.mode,u),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!yu(t,u)){var y=p.memoizedProps;if(r=r.compare,r=r!==null?r:Mo,r(y,o)&&t.ref===a.ref)return er(t,a,u)}return a.flags|=1,t=Ks(p,o),t.ref=a.ref,t.return=a,a.child=t}function Kx(t,a,r,o,u){if(t!==null){var p=t.memoizedProps;if(Mo(p,o)&&t.ref===a.ref)if(Ea=!1,a.pendingProps=o=p,yu(t,u))(t.flags&131072)!==0&&(Ea=!0);else return a.lanes=t.lanes,er(t,a,u)}return pu(t,a,r,o,u)}function Yx(t,a,r,o){var u=o.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(o=a.child=t.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~p}else o=0,a.child=null;return Xx(t,a,p,r,o)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ji(a,p!==null?p.cachePool:null),p!==null?Zh(a,p):Fd(),Jh(a);else return o=a.lanes=536870912,Xx(t,a,p!==null?p.baseLanes|r:r,r,o)}else p!==null?(Ji(a,p.cachePool),Zh(a,p),kr(),a.memoizedState=null):(t!==null&&Ji(a,null),Fd(),kr());return Ua(t,a,u,r),a.child}function Ko(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Xx(t,a,r,o,u){var p=Dd();return p=p===null?null:{parent:Ca._currentValue,pool:p},a.memoizedState={baseLanes:r,cachePool:p},t!==null&&Ji(a,null),Fd(),Jh(a),t!==null&&In(t,a,o,!0),a.childLanes=u,null}function xl(t,a){return a=gl({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Qx(t,a,r){return on(a,t.child,null,r),t=xl(a,a.pendingProps),t.flags|=2,ss(a),a.memoizedState=null,t}function Fj(t,a,r){var o=a.pendingProps,u=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Yt){if(o.mode==="hidden")return t=xl(a,o),a.lanes=536870912,Ko(null,t);if($d(a),(t=ga)?(t=df(t,fs),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:vr!==null?{id:Rs,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},r=Ph(t),r.return=a,a.child=r,za=a,ga=null)):t=null,t===null)throw Nr(a);return a.lanes=536870912,null}return xl(a,o)}var p=t.memoizedState;if(p!==null){var y=p.dehydrated;if($d(a),u)if(a.flags&256)a.flags&=-257,a=Qx(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(l(558));else if(Ea||In(t,a,r,!1),u=(r&t.childLanes)!==0,Ea||u){if(o=ha,o!==null&&(y=Zt(o,r),y!==0&&y!==p.retryLane))throw p.retryLane=y,Zr(t,y),Za(o,t,y),mu;Tl(),a=Qx(t,a,r)}else t=p.treeContext,ga=bs(y.nextSibling),za=a,Yt=!0,yr=null,fs=!1,t!==null&&Dh(a,t),a=xl(a,o),a.flags|=4096;return a}return t=Ks(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function fl(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function pu(t,a,r,o,u){return an(a),r=Wd(t,a,r,o,void 0,u),o=Kd(),t!==null&&!Ea?(Yd(t,a,u),er(t,a,u)):(Yt&&o&&Cd(a),a.flags|=1,Ua(t,a,r,u),a.child)}function Zx(t,a,r,o,u,p){return an(a),a.updateQueue=null,r=tx(a,o,r,u),ex(t),o=Kd(),t!==null&&!Ea?(Yd(t,a,p),er(t,a,p)):(Yt&&o&&Cd(a),a.flags|=1,Ua(t,a,r,p),a.child)}function Jx(t,a,r,o,u){if(an(a),a.stateNode===null){var p=Rn,y=r.contextType;typeof y=="object"&&y!==null&&(p=qa(y)),p=new r(o,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=du,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=o,p.state=a.memoizedState,p.refs={},qd(a),y=r.contextType,p.context=typeof y=="object"&&y!==null?qa(y):Rn,p.state=a.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(cu(a,r,y,o),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(y=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),y!==p.state&&du.enqueueReplaceState(p,p.state,null),Fo(a,o,p,u),Vo(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){p=a.stateNode;var S=a.memoizedProps,H=cn(r,S);p.props=H;var he=p.context,Te=r.contextType;y=Rn,typeof Te=="object"&&Te!==null&&(y=qa(Te));var Le=r.getDerivedStateFromProps;Te=typeof Le=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,Te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||he!==y)&&qx(a,p,o,y),_r=!1;var xe=a.memoizedState;p.state=xe,Fo(a,o,p,u),Vo(),he=a.memoizedState,S||xe!==he||_r?(typeof Le=="function"&&(cu(a,r,Le,o),he=a.memoizedState),(H=_r||zx(a,r,H,o,xe,he,y))?(Te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=he),p.props=o,p.state=he,p.context=y,o=H):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{p=a.stateNode,Ud(t,a),y=a.memoizedProps,Te=cn(r,y),p.props=Te,Le=a.pendingProps,xe=p.context,he=r.contextType,H=Rn,typeof he=="object"&&he!==null&&(H=qa(he)),S=r.getDerivedStateFromProps,(he=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==Le||xe!==H)&&qx(a,p,o,H),_r=!1,xe=a.memoizedState,p.state=xe,Fo(a,o,p,u),Vo();var Ne=a.memoizedState;y!==Le||xe!==Ne||_r||t!==null&&t.dependencies!==null&&Qi(t.dependencies)?(typeof S=="function"&&(cu(a,r,S,o),Ne=a.memoizedState),(Te=_r||zx(a,r,Te,o,xe,Ne,H)||t!==null&&t.dependencies!==null&&Qi(t.dependencies))?(he||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,Ne,H),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,Ne,H)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||y===t.memoizedProps&&xe===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&xe===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=Ne),p.props=o,p.state=Ne,p.context=H,o=Te):(typeof p.componentDidUpdate!="function"||y===t.memoizedProps&&xe===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&xe===t.memoizedState||(a.flags|=1024),o=!1)}return p=o,fl(t,a),o=(a.flags&128)!==0,p||o?(p=a.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&o?(a.child=on(a,t.child,null,u),a.child=on(a,null,r,u)):Ua(t,a,r,u),a.memoizedState=p.state,t=a.child):t=er(t,a,u),t}function e0(t,a,r,o){return en(),a.flags|=256,Ua(t,a,r,o),a.child}var hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xu(t){return{baseLanes:t,cachePool:Fh()}}function fu(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=ns),t}function t0(t,a,r){var o=a.pendingProps,u=!1,p=(a.flags&128)!==0,y;if((y=p)||(y=t!==null&&t.memoizedState===null?!1:(wa.current&2)!==0),y&&(u=!0,a.flags&=-129),y=(a.flags&32)!==0,a.flags&=-33,t===null){if(Yt){if(u?Tr(a):kr(),(t=ga)?(t=df(t,fs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:vr!==null?{id:Rs,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},r=Ph(t),r.return=a,a.child=r,za=a,ga=null)):t=null,t===null)throw Nr(a);return Zu(t)?a.lanes=32:a.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(kr(),u=a.mode,S=gl({mode:"hidden",children:S},u),o=Jr(o,u,r,null),S.return=a,o.return=a,S.sibling=o,a.child=S,o=a.child,o.memoizedState=xu(r),o.childLanes=fu(t,y,r),a.memoizedState=hu,Ko(null,o)):(Tr(a),gu(a,S))}var H=t.memoizedState;if(H!==null&&(S=H.dehydrated,S!==null)){if(p)a.flags&256?(Tr(a),a.flags&=-257,a=bu(t,a,r)):a.memoizedState!==null?(kr(),a.child=t.child,a.flags|=128,a=null):(kr(),S=o.fallback,u=a.mode,o=gl({mode:"visible",children:o.children},u),S=Jr(S,u,r,null),S.flags|=2,o.return=a,S.return=a,o.sibling=S,a.child=o,on(a,t.child,null,r),o=a.child,o.memoizedState=xu(r),o.childLanes=fu(t,y,r),a.memoizedState=hu,a=Ko(null,o));else if(Tr(a),Zu(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var he=y.dgst;y=he,o=Error(l(419)),o.stack="",o.digest=y,Oo({value:o,source:null,stack:null}),a=bu(t,a,r)}else if(Ea||In(t,a,r,!1),y=(r&t.childLanes)!==0,Ea||y){if(y=ha,y!==null&&(o=Zt(y,r),o!==0&&o!==H.retryLane))throw H.retryLane=o,Zr(t,o),Za(y,t,o),mu;Qu(S)||Tl(),a=bu(t,a,r)}else Qu(S)?(a.flags|=192,a.child=t.child,a=null):(t=H.treeContext,ga=bs(S.nextSibling),za=a,Yt=!0,yr=null,fs=!1,t!==null&&Dh(a,t),a=gu(a,o.children),a.flags|=4096);return a}return u?(kr(),S=o.fallback,u=a.mode,H=t.child,he=H.sibling,o=Ks(H,{mode:"hidden",children:o.children}),o.subtreeFlags=H.subtreeFlags&65011712,he!==null?S=Ks(he,S):(S=Jr(S,u,r,null),S.flags|=2),S.return=a,o.return=a,o.sibling=S,a.child=o,Ko(null,o),o=a.child,S=t.child.memoizedState,S===null?S=xu(r):(u=S.cachePool,u!==null?(H=Ca._currentValue,u=u.parent!==H?{parent:H,pool:H}:u):u=Fh(),S={baseLanes:S.baseLanes|r,cachePool:u}),o.memoizedState=S,o.childLanes=fu(t,y,r),a.memoizedState=hu,Ko(t.child,o)):(Tr(a),r=t.child,t=r.sibling,r=Ks(r,{mode:"visible",children:o.children}),r.return=a,r.sibling=null,t!==null&&(y=a.deletions,y===null?(a.deletions=[t],a.flags|=16):y.push(t)),a.child=r,a.memoizedState=null,r)}function gu(t,a){return a=gl({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function gl(t,a){return t=ts(22,t,null,a),t.lanes=0,t}function bu(t,a,r){return on(a,t.child,null,r),t=gu(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function a0(t,a,r){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),Md(t.return,a,r)}function vu(t,a,r,o,u,p){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,treeForkCount:p}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=r,y.tailMode=u,y.treeForkCount=p)}function s0(t,a,r){var o=a.pendingProps,u=o.revealOrder,p=o.tail;o=o.children;var y=wa.current,S=(y&2)!==0;if(S?(y=y&1|2,a.flags|=128):y&=1,re(wa,y),Ua(t,a,o,r),o=Yt?Io:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a0(t,r,a);else if(t.tag===19)a0(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(r=a.child,u=null;r!==null;)t=r.alternate,t!==null&&nl(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=a.child,a.child=null):(u=r.sibling,r.sibling=null),vu(a,!1,u,r,p,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,u=a.child,a.child=null;u!==null;){if(t=u.alternate,t!==null&&nl(t)===null){a.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}vu(a,!0,r,null,p,o);break;case"together":vu(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function er(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Er|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(In(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(l(153));if(a.child!==null){for(t=a.child,r=Ks(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Ks(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function yu(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Qi(t)))}function Hj(t,a,r){switch(a.tag){case 3:q(a,a.stateNode.containerInfo),jr(a,Ca,t.memoizedState.cache),en();break;case 27:case 5:ve(a);break;case 4:q(a,a.stateNode.containerInfo);break;case 10:jr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,$d(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Tr(a),a.flags|=128,null):(r&a.child.childLanes)!==0?t0(t,a,r):(Tr(a),t=er(t,a,r),t!==null?t.sibling:null);Tr(a);break;case 19:var u=(t.flags&128)!==0;if(o=(r&a.childLanes)!==0,o||(In(t,a,r,!1),o=(r&a.childLanes)!==0),u){if(o)return s0(t,a,r);a.flags|=128}if(u=a.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),re(wa,wa.current),o)break;return null;case 22:return a.lanes=0,Yx(t,a,r,a.pendingProps);case 24:jr(a,Ca,t.memoizedState.cache)}return er(t,a,r)}function r0(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ea=!0;else{if(!yu(t,r)&&(a.flags&128)===0)return Ea=!1,Hj(t,a,r);Ea=(t.flags&131072)!==0}else Ea=!1,Yt&&(a.flags&1048576)!==0&&Oh(a,Io,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=rn(a.elementType),a.type=t,typeof t=="function")wd(t)?(o=cn(t,o),a.tag=1,a=Jx(null,a,t,o,r)):(a.tag=0,a=pu(null,a,t,o,r));else{if(t!=null){var u=t.$$typeof;if(u===V){a.tag=11,a=Gx(null,a,t,o,r);break e}else if(u===I){a.tag=14,a=Wx(null,a,t,o,r);break e}}throw a=ke(t)||t,Error(l(306,a,""))}}return a;case 0:return pu(t,a,a.type,a.pendingProps,r);case 1:return o=a.type,u=cn(o,a.pendingProps),Jx(t,a,o,u,r);case 3:e:{if(q(a,a.stateNode.containerInfo),t===null)throw Error(l(387));o=a.pendingProps;var p=a.memoizedState;u=p.element,Ud(t,a),Fo(a,o,null,r);var y=a.memoizedState;if(o=y.cache,jr(a,Ca,o),o!==p.cache&&Pd(a,[Ca],r,!0),Vo(),o=y.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:y.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=e0(t,a,o,r);break e}else if(o!==u){u=ps(Error(l(424)),a),Oo(u),a=e0(t,a,o,r);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ga=bs(t.firstChild),za=a,Yt=!0,yr=null,fs=!0,r=Yh(a,null,o,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(en(),o===u){a=er(t,a,r);break e}Ua(t,a,o,r)}a=a.child}return a;case 26:return fl(t,a),t===null?(r=ff(a.type,null,a.pendingProps,null))?a.memoizedState=r:Yt||(r=a.type,t=a.pendingProps,o=Ml(M.current).createElement(r),o[Je]=a,o[ot]=t,Ba(o,r,t),ht(o),a.stateNode=o):a.memoizedState=ff(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return ve(a),t===null&&Yt&&(o=a.stateNode=pf(a.type,a.pendingProps,M.current),za=a,fs=!0,u=ga,Ir(a.type)?(Ju=u,ga=bs(o.firstChild)):ga=u),Ua(t,a,a.pendingProps.children,r),fl(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Yt&&((u=o=ga)&&(o=y_(o,a.type,a.pendingProps,fs),o!==null?(a.stateNode=o,za=a,ga=bs(o.firstChild),fs=!1,u=!0):u=!1),u||Nr(a)),ve(a),u=a.type,p=a.pendingProps,y=t!==null?t.memoizedProps:null,o=p.children,Ku(u,p)?o=null:y!==null&&Ku(u,y)&&(a.flags|=32),a.memoizedState!==null&&(u=Wd(t,a,Ij,null,null,r),ci._currentValue=u),fl(t,a),Ua(t,a,o,r),a.child;case 6:return t===null&&Yt&&((t=r=ga)&&(r=N_(r,a.pendingProps,fs),r!==null?(a.stateNode=r,za=a,ga=null,t=!0):t=!1),t||Nr(a)),null;case 13:return t0(t,a,r);case 4:return q(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=on(a,null,o,r):Ua(t,a,o,r),a.child;case 11:return Gx(t,a,a.type,a.pendingProps,r);case 7:return Ua(t,a,a.pendingProps,r),a.child;case 8:return Ua(t,a,a.pendingProps.children,r),a.child;case 12:return Ua(t,a,a.pendingProps.children,r),a.child;case 10:return o=a.pendingProps,jr(a,a.type,o.value),Ua(t,a,o.children,r),a.child;case 9:return u=a.type._context,o=a.pendingProps.children,an(a),u=qa(u),o=o(u),a.flags|=1,Ua(t,a,o,r),a.child;case 14:return Wx(t,a,a.type,a.pendingProps,r);case 15:return Kx(t,a,a.type,a.pendingProps,r);case 19:return s0(t,a,r);case 31:return Fj(t,a,r);case 22:return Yx(t,a,r,a.pendingProps);case 24:return an(a),o=qa(Ca),t===null?(u=Dd(),u===null&&(u=ha,p=Id(),u.pooledCache=p,p.refCount++,p!==null&&(u.pooledCacheLanes|=r),u=p),a.memoizedState={parent:o,cache:u},qd(a),jr(a,Ca,u)):((t.lanes&r)!==0&&(Ud(t,a),Fo(a,null,null,r),Vo()),u=t.memoizedState,p=a.memoizedState,u.parent!==o?(u={parent:o,cache:o},a.memoizedState=u,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=u),jr(a,Ca,o)):(o=p.cache,jr(a,Ca,o),o!==u.cache&&Pd(a,[Ca],r,!0))),Ua(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function tr(t){t.flags|=4}function Nu(t,a,r,o,u){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(R0())t.flags|=8192;else throw nn=tl,zd}else t.flags&=-16777217}function n0(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Nf(a))if(R0())t.flags|=8192;else throw nn=tl,zd}function bl(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?B():536870912,t.lanes|=a,Wn|=a)}function Yo(t,a){if(!Yt)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ba(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(a)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,a}function $j(t,a,r){var o=a.pendingProps;switch(Ad(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ba(a),null;case 1:return ba(a),null;case 3:return r=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Qs(Ca),$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pn(a)?tr(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Rd())),ba(a),null;case 26:var u=a.type,p=a.memoizedState;return t===null?(tr(a),p!==null?(ba(a),n0(a,p)):(ba(a),Nu(a,u,null,o,r))):p?p!==t.memoizedState?(tr(a),ba(a),n0(a,p)):(ba(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&tr(a),ba(a),Nu(a,u,t,o,r)),null;case 27:if(Z(a),r=M.current,u=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&tr(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return ba(a),null}t=A.current,Pn(a)?zh(a):(t=pf(u,o,r),a.stateNode=t,tr(a))}return ba(a),null;case 5:if(Z(a),u=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&tr(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return ba(a),null}if(p=A.current,Pn(a))zh(a);else{var y=Ml(M.current);switch(p){case 1:p=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:p=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":p=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":p=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":p=y.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?p.multiple=!0:o.size&&(p.size=o.size);break;default:p=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}p[Je]=a,p[ot]=o;e:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)p.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break e;for(;y.sibling===null;){if(y.return===null||y.return===a)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=p;e:switch(Ba(p,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&tr(a)}}return ba(a),Nu(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&tr(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(t=M.current,Pn(a)){if(t=a.stateNode,r=a.memoizedProps,o=null,u=za,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}t[Je]=a,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||tf(t.nodeValue,r)),t||Nr(a,!0)}else t=Ml(t).createTextNode(o),t[Je]=a,a.stateNode=t}return ba(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(o=Pn(a),r!==null){if(t===null){if(!o)throw Error(l(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[Je]=a}else en(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ba(a),t=!1}else r=Rd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(ss(a),a):(ss(a),null);if((a.flags&128)!==0)throw Error(l(558))}return ba(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=Pn(a),o!==null&&o.dehydrated!==null){if(t===null){if(!u)throw Error(l(318));if(u=a.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[Je]=a}else en(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ba(a),u=!1}else u=Rd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return a.flags&256?(ss(a),a):(ss(a),null)}return ss(a),(a.flags&128)!==0?(a.lanes=r,a):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=a.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),bl(a,a.updateQueue),ba(a),null);case 4:return $(),t===null&&Fu(a.stateNode.containerInfo),ba(a),null;case 10:return Qs(a.type),ba(a),null;case 19:if(W(wa),o=a.memoizedState,o===null)return ba(a),null;if(u=(a.flags&128)!==0,p=o.rendering,p===null)if(u)Yo(o,!1);else{if(_a!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=nl(t),p!==null){for(a.flags|=128,Yo(o,!1),t=p.updateQueue,a.updateQueue=t,bl(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)Mh(r,t),r=r.sibling;return re(wa,wa.current&1|2),Yt&&Ys(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&_e()>_l&&(a.flags|=128,u=!0,Yo(o,!1),a.lanes=4194304)}else{if(!u)if(t=nl(p),t!==null){if(a.flags|=128,u=!0,t=t.updateQueue,a.updateQueue=t,bl(a,t),Yo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!p.alternate&&!Yt)return ba(a),null}else 2*_e()-o.renderingStartTime>_l&&r!==536870912&&(a.flags|=128,u=!0,Yo(o,!1),a.lanes=4194304);o.isBackwards?(p.sibling=a.child,a.child=p):(t=o.last,t!==null?t.sibling=p:a.child=p,o.last=p)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=_e(),t.sibling=null,r=wa.current,re(wa,u?r&1|2:r&1),Yt&&Ys(a,o.treeForkCount),t):(ba(a),null);case 22:case 23:return ss(a),Hd(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(r&536870912)!==0&&(a.flags&128)===0&&(ba(a),a.subtreeFlags&6&&(a.flags|=8192)):ba(a),r=a.updateQueue,r!==null&&bl(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==r&&(a.flags|=2048),t!==null&&W(sn),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Qs(Ca),ba(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function Gj(t,a){switch(Ad(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Qs(Ca),$(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Z(a),null;case 31:if(a.memoizedState!==null){if(ss(a),a.alternate===null)throw Error(l(340));en()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ss(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(l(340));en()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return W(wa),null;case 4:return $(),null;case 10:return Qs(a.type),null;case 22:case 23:return ss(a),Hd(),t!==null&&W(sn),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Qs(Ca),null;case 25:return null;default:return null}}function o0(t,a){switch(Ad(a),a.tag){case 3:Qs(Ca),$();break;case 26:case 27:case 5:Z(a);break;case 4:$();break;case 31:a.memoizedState!==null&&ss(a);break;case 13:ss(a);break;case 19:W(wa);break;case 10:Qs(a.type);break;case 22:case 23:ss(a),Hd(),t!==null&&W(sn);break;case 24:Qs(Ca)}}function Xo(t,a){try{var r=a.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&t)===t){o=void 0;var p=r.create,y=r.inst;o=p(),y.destroy=o}r=r.next}while(r!==u)}}catch(S){ca(a,a.return,S)}}function Cr(t,a,r){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&t)===t){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,u=a;var H=r,he=S;try{he()}catch(Te){ca(u,H,Te)}}}o=o.next}while(o!==p)}}catch(Te){ca(a,a.return,Te)}}function i0(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{Qh(a,r)}catch(o){ca(t,t.return,o)}}}function l0(t,a,r){r.props=cn(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){ca(t,a,o)}}function Qo(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(u){ca(t,a,u)}}function Ms(t,a){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(u){ca(t,a,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(u){ca(t,a,u)}else r.current=null}function c0(t){var a=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(u){ca(t,t.return,u)}}function ju(t,a,r){try{var o=t.stateNode;h_(o,t.type,r,a),o[ot]=a}catch(u){ca(t,t.return,u)}}function d0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ir(t.type)||t.tag===4}function _u(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Su(t,a,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Gs));else if(o!==4&&(o===27&&Ir(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Su(t,a,r),t=t.sibling;t!==null;)Su(t,a,r),t=t.sibling}function vl(t,a,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(o!==4&&(o===27&&Ir(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(vl(t,a,r),t=t.sibling;t!==null;)vl(t,a,r),t=t.sibling}function u0(t){var a=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,u=a.attributes;u.length;)a.removeAttributeNode(u[0]);Ba(a,o,r),a[Je]=t,a[ot]=r}catch(p){ca(t,t.return,p)}}var ar=!1,Ra=!1,wu=!1,m0=typeof WeakSet=="function"?WeakSet:Set,Oa=null;function Wj(t,a){if(t=t.containerInfo,Gu=Ul,t=Sh(t),bd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var y=0,S=-1,H=-1,he=0,Te=0,Le=t,xe=null;t:for(;;){for(var Ne;Le!==r||u!==0&&Le.nodeType!==3||(S=y+u),Le!==p||o!==0&&Le.nodeType!==3||(H=y+o),Le.nodeType===3&&(y+=Le.nodeValue.length),(Ne=Le.firstChild)!==null;)xe=Le,Le=Ne;for(;;){if(Le===t)break t;if(xe===r&&++he===u&&(S=y),xe===p&&++Te===o&&(H=y),(Ne=Le.nextSibling)!==null)break;Le=xe,xe=Le.parentNode}Le=Ne}r=S===-1||H===-1?null:{start:S,end:H}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wu={focusedElem:t,selectionRange:r},Ul=!1,Oa=a;Oa!==null;)if(a=Oa,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Oa=t;else for(;Oa!==null;){switch(a=Oa,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)u=t[r],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=a,u=p.memoizedProps,p=p.memoizedState,o=r.stateNode;try{var bt=cn(r.type,u);t=o.getSnapshotBeforeUpdate(bt,p),o.__reactInternalSnapshotBeforeUpdate=t}catch(Mt){ca(r,r.return,Mt)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)Xu(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=a.sibling,t!==null){t.return=a.return,Oa=t;break}Oa=a.return}}function p0(t,a,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:rr(t,r),o&4&&Xo(5,r);break;case 1:if(rr(t,r),o&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(y){ca(r,r.return,y)}else{var u=cn(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(u,a,t.__reactInternalSnapshotBeforeUpdate)}catch(y){ca(r,r.return,y)}}o&64&&i0(r),o&512&&Qo(r,r.return);break;case 3:if(rr(t,r),o&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Qh(t,a)}catch(y){ca(r,r.return,y)}}break;case 27:a===null&&o&4&&u0(r);case 26:case 5:rr(t,r),a===null&&o&4&&c0(r),o&512&&Qo(r,r.return);break;case 12:rr(t,r);break;case 31:rr(t,r),o&4&&f0(t,r);break;case 13:rr(t,r),o&4&&g0(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=a_.bind(null,r),j_(t,r))));break;case 22:if(o=r.memoizedState!==null||ar,!o){a=a!==null&&a.memoizedState!==null||Ra,u=ar;var p=Ra;ar=o,(Ra=a)&&!p?nr(t,r,(r.subtreeFlags&8772)!==0):rr(t,r),ar=u,Ra=p}break;case 30:break;default:rr(t,r)}}function h0(t){var a=t.alternate;a!==null&&(t.alternate=null,h0(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&mt(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ya=null,Ka=!1;function sr(t,a,r){for(r=r.child;r!==null;)x0(t,a,r),r=r.sibling}function x0(t,a,r){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(R,r)}catch{}switch(r.tag){case 26:Ra||Ms(r,a),sr(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ra||Ms(r,a);var o=ya,u=Ka;Ir(r.type)&&(ya=r.stateNode,Ka=!1),sr(t,a,r),oi(r.stateNode),ya=o,Ka=u;break;case 5:Ra||Ms(r,a);case 6:if(o=ya,u=Ka,ya=null,sr(t,a,r),ya=o,Ka=u,ya!==null)if(Ka)try{(ya.nodeType===9?ya.body:ya.nodeName==="HTML"?ya.ownerDocument.body:ya).removeChild(r.stateNode)}catch(p){ca(r,a,p)}else try{ya.removeChild(r.stateNode)}catch(p){ca(r,a,p)}break;case 18:ya!==null&&(Ka?(t=ya,lf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),to(t)):lf(ya,r.stateNode));break;case 4:o=ya,u=Ka,ya=r.stateNode.containerInfo,Ka=!0,sr(t,a,r),ya=o,Ka=u;break;case 0:case 11:case 14:case 15:Cr(2,r,a),Ra||Cr(4,r,a),sr(t,a,r);break;case 1:Ra||(Ms(r,a),o=r.stateNode,typeof o.componentWillUnmount=="function"&&l0(r,a,o)),sr(t,a,r);break;case 21:sr(t,a,r);break;case 22:Ra=(o=Ra)||r.memoizedState!==null,sr(t,a,r),Ra=o;break;default:sr(t,a,r)}}function f0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{to(t)}catch(r){ca(a,a.return,r)}}}function g0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{to(t)}catch(r){ca(a,a.return,r)}}function Kj(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new m0),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new m0),a;default:throw Error(l(435,t.tag))}}function yl(t,a){var r=Kj(t);a.forEach(function(o){if(!r.has(o)){r.add(o);var u=s_.bind(null,t,o);o.then(u,u)}})}function Ya(t,a){var r=a.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o],p=t,y=a,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Ir(S.type)){ya=S.stateNode,Ka=!1;break e}break;case 5:ya=S.stateNode,Ka=!1;break e;case 3:case 4:ya=S.stateNode.containerInfo,Ka=!0;break e}S=S.return}if(ya===null)throw Error(l(160));x0(p,y,u),ya=null,Ka=!1,p=u.alternate,p!==null&&(p.return=null),u.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)b0(a,t),a=a.sibling}var Ss=null;function b0(t,a){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ya(a,t),Xa(t),o&4&&(Cr(3,t,t.return),Xo(3,t),Cr(5,t,t.return));break;case 1:Ya(a,t),Xa(t),o&512&&(Ra||r===null||Ms(r,r.return)),o&64&&ar&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var u=Ss;if(Ya(a,t),Xa(t),o&512&&(Ra||r===null||Ms(r,r.return)),o&4){var p=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":p=u.getElementsByTagName("title")[0],(!p||p[$e]||p[Je]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=u.createElement(o),u.head.insertBefore(p,u.querySelector("head > title"))),Ba(p,o,r),p[Je]=t,ht(p),o=p;break e;case"link":var y=vf("link","href",u).get(o+(r.href||""));if(y){for(var S=0;S<y.length;S++)if(p=y[S],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(S,1);break t}}p=u.createElement(o),Ba(p,o,r),u.head.appendChild(p);break;case"meta":if(y=vf("meta","content",u).get(o+(r.content||""))){for(S=0;S<y.length;S++)if(p=y[S],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(S,1);break t}}p=u.createElement(o),Ba(p,o,r),u.head.appendChild(p);break;default:throw Error(l(468,o))}p[Je]=t,ht(p),o=p}t.stateNode=o}else yf(u,t.type,t.stateNode);else t.stateNode=bf(u,o,t.memoizedProps);else p!==o?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,o===null?yf(u,t.type,t.stateNode):bf(u,o,t.memoizedProps)):o===null&&t.stateNode!==null&&ju(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ya(a,t),Xa(t),o&512&&(Ra||r===null||Ms(r,r.return)),r!==null&&o&4&&ju(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ya(a,t),Xa(t),o&512&&(Ra||r===null||Ms(r,r.return)),t.flags&32){u=t.stateNode;try{Sn(u,"")}catch(bt){ca(t,t.return,bt)}}o&4&&t.stateNode!=null&&(u=t.memoizedProps,ju(t,u,r!==null?r.memoizedProps:u)),o&1024&&(wu=!0);break;case 6:if(Ya(a,t),Xa(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(bt){ca(t,t.return,bt)}}break;case 3:if(Ol=null,u=Ss,Ss=Pl(a.containerInfo),Ya(a,t),Ss=u,Xa(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{to(a.containerInfo)}catch(bt){ca(t,t.return,bt)}wu&&(wu=!1,v0(t));break;case 4:o=Ss,Ss=Pl(t.stateNode.containerInfo),Ya(a,t),Xa(t),Ss=o;break;case 12:Ya(a,t),Xa(t);break;case 31:Ya(a,t),Xa(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,yl(t,o)));break;case 13:Ya(a,t),Xa(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(jl=_e()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,yl(t,o)));break;case 22:u=t.memoizedState!==null;var H=r!==null&&r.memoizedState!==null,he=ar,Te=Ra;if(ar=he||u,Ra=Te||H,Ya(a,t),Ra=Te,ar=he,Xa(t),o&8192)e:for(a=t.stateNode,a._visibility=u?a._visibility&-2:a._visibility|1,u&&(r===null||H||ar||Ra||dn(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){H=r=a;try{if(p=H.stateNode,u)y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=H.stateNode;var Le=H.memoizedProps.style,xe=Le!=null&&Le.hasOwnProperty("display")?Le.display:null;S.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(bt){ca(H,H.return,bt)}}}else if(a.tag===6){if(r===null){H=a;try{H.stateNode.nodeValue=u?"":H.memoizedProps}catch(bt){ca(H,H.return,bt)}}}else if(a.tag===18){if(r===null){H=a;try{var Ne=H.stateNode;u?cf(Ne,!0):cf(H.stateNode,!1)}catch(bt){ca(H,H.return,bt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,yl(t,r))));break;case 19:Ya(a,t),Xa(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,yl(t,o)));break;case 30:break;case 21:break;default:Ya(a,t),Xa(t)}}function Xa(t){var a=t.flags;if(a&2){try{for(var r,o=t.return;o!==null;){if(d0(o)){r=o;break}o=o.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var u=r.stateNode,p=_u(t);vl(t,p,u);break;case 5:var y=r.stateNode;r.flags&32&&(Sn(y,""),r.flags&=-33);var S=_u(t);vl(t,S,y);break;case 3:case 4:var H=r.stateNode.containerInfo,he=_u(t);Su(t,he,H);break;default:throw Error(l(161))}}catch(Te){ca(t,t.return,Te)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function v0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;v0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function rr(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)p0(t,a.alternate,a),a=a.sibling}function dn(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Cr(4,a,a.return),dn(a);break;case 1:Ms(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&l0(a,a.return,r),dn(a);break;case 27:oi(a.stateNode);case 26:case 5:Ms(a,a.return),dn(a);break;case 22:a.memoizedState===null&&dn(a);break;case 30:dn(a);break;default:dn(a)}t=t.sibling}}function nr(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,u=t,p=a,y=p.flags;switch(p.tag){case 0:case 11:case 15:nr(u,p,r),Xo(4,p);break;case 1:if(nr(u,p,r),o=p,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(he){ca(o,o.return,he)}if(o=p,u=o.updateQueue,u!==null){var S=o.stateNode;try{var H=u.shared.hiddenCallbacks;if(H!==null)for(u.shared.hiddenCallbacks=null,u=0;u<H.length;u++)Xh(H[u],S)}catch(he){ca(o,o.return,he)}}r&&y&64&&i0(p),Qo(p,p.return);break;case 27:u0(p);case 26:case 5:nr(u,p,r),r&&o===null&&y&4&&c0(p),Qo(p,p.return);break;case 12:nr(u,p,r);break;case 31:nr(u,p,r),r&&y&4&&f0(u,p);break;case 13:nr(u,p,r),r&&y&4&&g0(u,p);break;case 22:p.memoizedState===null&&nr(u,p,r),Qo(p,p.return);break;case 30:break;default:nr(u,p,r)}a=a.sibling}}function Tu(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Do(r))}function ku(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Do(t))}function ws(t,a,r,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)y0(t,a,r,o),a=a.sibling}function y0(t,a,r,o){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ws(t,a,r,o),u&2048&&Xo(9,a);break;case 1:ws(t,a,r,o);break;case 3:ws(t,a,r,o),u&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Do(t)));break;case 12:if(u&2048){ws(t,a,r,o),t=a.stateNode;try{var p=a.memoizedProps,y=p.id,S=p.onPostCommit;typeof S=="function"&&S(y,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){ca(a,a.return,H)}}else ws(t,a,r,o);break;case 31:ws(t,a,r,o);break;case 13:ws(t,a,r,o);break;case 23:break;case 22:p=a.stateNode,y=a.alternate,a.memoizedState!==null?p._visibility&2?ws(t,a,r,o):Zo(t,a):p._visibility&2?ws(t,a,r,o):(p._visibility|=2,Hn(t,a,r,o,(a.subtreeFlags&10256)!==0||!1)),u&2048&&Tu(y,a);break;case 24:ws(t,a,r,o),u&2048&&ku(a.alternate,a);break;default:ws(t,a,r,o)}}function Hn(t,a,r,o,u){for(u=u&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,y=a,S=r,H=o,he=y.flags;switch(y.tag){case 0:case 11:case 15:Hn(p,y,S,H,u),Xo(8,y);break;case 23:break;case 22:var Te=y.stateNode;y.memoizedState!==null?Te._visibility&2?Hn(p,y,S,H,u):Zo(p,y):(Te._visibility|=2,Hn(p,y,S,H,u)),u&&he&2048&&Tu(y.alternate,y);break;case 24:Hn(p,y,S,H,u),u&&he&2048&&ku(y.alternate,y);break;default:Hn(p,y,S,H,u)}a=a.sibling}}function Zo(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,o=a,u=o.flags;switch(o.tag){case 22:Zo(r,o),u&2048&&Tu(o.alternate,o);break;case 24:Zo(r,o),u&2048&&ku(o.alternate,o);break;default:Zo(r,o)}a=a.sibling}}var Jo=8192;function $n(t,a,r){if(t.subtreeFlags&Jo)for(t=t.child;t!==null;)N0(t,a,r),t=t.sibling}function N0(t,a,r){switch(t.tag){case 26:$n(t,a,r),t.flags&Jo&&t.memoizedState!==null&&P_(r,Ss,t.memoizedState,t.memoizedProps);break;case 5:$n(t,a,r);break;case 3:case 4:var o=Ss;Ss=Pl(t.stateNode.containerInfo),$n(t,a,r),Ss=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Jo,Jo=16777216,$n(t,a,r),Jo=o):$n(t,a,r));break;default:$n(t,a,r)}}function j0(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function ei(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];Oa=o,S0(o,t)}j0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_0(t),t=t.sibling}function _0(t){switch(t.tag){case 0:case 11:case 15:ei(t),t.flags&2048&&Cr(9,t,t.return);break;case 3:ei(t);break;case 12:ei(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Nl(t)):ei(t);break;default:ei(t)}}function Nl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];Oa=o,S0(o,t)}j0(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Cr(8,a,a.return),Nl(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Nl(a));break;default:Nl(a)}t=t.sibling}}function S0(t,a){for(;Oa!==null;){var r=Oa;switch(r.tag){case 0:case 11:case 15:Cr(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Do(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Oa=o;else e:for(r=t;Oa!==null;){o=Oa;var u=o.sibling,p=o.return;if(h0(o),o===r){Oa=null;break e}if(u!==null){u.return=p,Oa=u;break e}Oa=p}}}var Yj={getCacheForType:function(t){var a=qa(Ca),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return qa(Ca).controller.signal}},Xj=typeof WeakMap=="function"?WeakMap:Map,aa=0,ha=null,Ht=null,Gt=0,la=0,rs=null,Ar=!1,Gn=!1,Cu=!1,or=0,_a=0,Er=0,un=0,Au=0,ns=0,Wn=0,ti=null,Qa=null,Eu=!1,jl=0,w0=0,_l=1/0,Sl=null,Rr=null,Ma=0,Lr=null,Kn=null,ir=0,Ru=0,Lu=null,T0=null,ai=0,Mu=null;function os(){return(aa&2)!==0&&Gt!==0?Gt&-Gt:P.T!==null?qu():lt()}function k0(){if(ns===0)if((Gt&536870912)===0||Yt){var t=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),ns=t}else ns=536870912;return t=as.current,t!==null&&(t.flags|=32),ns}function Za(t,a,r){(t===ha&&(la===2||la===9)||t.cancelPendingCommit!==null)&&(Yn(t,0),Mr(t,Gt,ns,!1)),Dt(t,r),((aa&2)===0||t!==ha)&&(t===ha&&((aa&2)===0&&(un|=r),_a===4&&Mr(t,Gt,ns,!1)),Ps(t))}function C0(t,a,r){if((aa&6)!==0)throw Error(l(327));var o=!r&&(a&127)===0&&(a&t.expiredLanes)===0||gt(t,a),u=o?Jj(t,a):Iu(t,a,!0),p=o;do{if(u===0){Gn&&!o&&Mr(t,a,0,!1);break}else{if(r=t.current.alternate,p&&!Qj(r)){u=Iu(t,a,!1),p=!1;continue}if(u===2){if(p=a,t.errorRecoveryDisabledLanes&p)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){a=y;e:{var S=t;u=ti;var H=S.current.memoizedState.isDehydrated;if(H&&(Yn(S,y).flags|=256),y=Iu(S,y,!1),y!==2){if(Cu&&!H){S.errorRecoveryDisabledLanes|=p,un|=p,u=4;break e}p=Qa,Qa=u,p!==null&&(Qa===null?Qa=p:Qa.push.apply(Qa,p))}u=y}if(p=!1,u!==2)continue}}if(u===1){Yn(t,0),Mr(t,a,0,!0);break}e:{switch(o=t,p=u,p){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:Mr(o,a,ns,!Ar);break e;case 2:Qa=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(u=jl+300-_e(),10<u)){if(Mr(o,a,ns,!Ar),ye(o,0,!0)!==0)break e;ir=a,o.timeoutHandle=nf(A0.bind(null,o,r,Qa,Sl,Eu,a,ns,un,Wn,Ar,p,"Throttled",-0,0),u);break e}A0(o,r,Qa,Sl,Eu,a,ns,un,Wn,Ar,p,null,-0,0)}}break}while(!0);Ps(t)}function A0(t,a,r,o,u,p,y,S,H,he,Te,Le,xe,Ne){if(t.timeoutHandle=-1,Le=a.subtreeFlags,Le&8192||(Le&16785408)===16785408){Le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gs},N0(a,p,Le);var bt=(p&62914560)===p?jl-_e():(p&4194048)===p?w0-_e():0;if(bt=I_(Le,bt),bt!==null){ir=p,t.cancelPendingCommit=bt(D0.bind(null,t,a,p,r,o,u,y,S,H,Te,Le,null,xe,Ne)),Mr(t,p,y,!he);return}}D0(t,a,p,r,o,u,y,S,H)}function Qj(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var u=r[o],p=u.getSnapshot;u=u.value;try{if(!es(p(),u))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Mr(t,a,r,o){a&=~Au,a&=~un,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var u=a;0<u;){var p=31-de(u),y=1<<p;o[p]=-1,u&=~y}r!==0&&ge(t,r,a)}function wl(){return(aa&6)===0?(si(0),!1):!0}function Pu(){if(Ht!==null){if(la===0)var t=Ht.return;else t=Ht,Xs=tn=null,Xd(t),qn=null,qo=0,t=Ht;for(;t!==null;)o0(t.alternate,t),t=t.return;Ht=null}}function Yn(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,g_(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ir=0,Pu(),ha=t,Ht=r=Ks(t.current,null),Gt=a,la=0,rs=null,Ar=!1,Gn=gt(t,a),Cu=!1,Wn=ns=Au=un=Er=_a=0,Qa=ti=null,Eu=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var u=31-de(o),p=1<<u;a|=t[u],o&=~p}return or=a,Gi(),r}function E0(t,a){Ut=null,P.H=Wo,a===zn||a===el?(a=Gh(),la=3):a===zd?(a=Gh(),la=4):la=a===mu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,rs=a,Ht===null&&(_a=1,hl(t,ps(a,t.current)))}function R0(){var t=as.current;return t===null?!0:(Gt&4194048)===Gt?gs===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?t===gs:!1}function L0(){var t=P.H;return P.H=Wo,t===null?Wo:t}function M0(){var t=P.A;return P.A=Yj,t}function Tl(){_a=4,Ar||(Gt&4194048)!==Gt&&as.current!==null||(Gn=!0),(Er&134217727)===0&&(un&134217727)===0||ha===null||Mr(ha,Gt,ns,!1)}function Iu(t,a,r){var o=aa;aa|=2;var u=L0(),p=M0();(ha!==t||Gt!==a)&&(Sl=null,Yn(t,a)),a=!1;var y=_a;e:do try{if(la!==0&&Ht!==null){var S=Ht,H=rs;switch(la){case 8:Pu(),y=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(a=!0);var he=la;if(la=0,rs=null,Xn(t,S,H,he),r&&Gn){y=0;break e}break;default:he=la,la=0,rs=null,Xn(t,S,H,he)}}Zj(),y=_a;break}catch(Te){E0(t,Te)}while(!0);return a&&t.shellSuspendCounter++,Xs=tn=null,aa=o,P.H=u,P.A=p,Ht===null&&(ha=null,Gt=0,Gi()),y}function Zj(){for(;Ht!==null;)P0(Ht)}function Jj(t,a){var r=aa;aa|=2;var o=L0(),u=M0();ha!==t||Gt!==a?(Sl=null,_l=_e()+500,Yn(t,a)):Gn=gt(t,a);e:do try{if(la!==0&&Ht!==null){a=Ht;var p=rs;t:switch(la){case 1:la=0,rs=null,Xn(t,a,p,1);break;case 2:case 9:if(Hh(p)){la=0,rs=null,I0(a);break}a=function(){la!==2&&la!==9||ha!==t||(la=7),Ps(t)},p.then(a,a);break e;case 3:la=7;break e;case 4:la=5;break e;case 7:Hh(p)?(la=0,rs=null,I0(a)):(la=0,rs=null,Xn(t,a,p,7));break;case 5:var y=null;switch(Ht.tag){case 26:y=Ht.memoizedState;case 5:case 27:var S=Ht;if(y?Nf(y):S.stateNode.complete){la=0,rs=null;var H=S.sibling;if(H!==null)Ht=H;else{var he=S.return;he!==null?(Ht=he,kl(he)):Ht=null}break t}}la=0,rs=null,Xn(t,a,p,5);break;case 6:la=0,rs=null,Xn(t,a,p,6);break;case 8:Pu(),_a=6;break e;default:throw Error(l(462))}}e_();break}catch(Te){E0(t,Te)}while(!0);return Xs=tn=null,P.H=o,P.A=u,aa=r,Ht!==null?0:(ha=null,Gt=0,Gi(),_a)}function e_(){for(;Ht!==null&&!Ge();)P0(Ht)}function P0(t){var a=r0(t.alternate,t,or);t.memoizedProps=t.pendingProps,a===null?kl(t):Ht=a}function I0(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Zx(r,a,a.pendingProps,a.type,void 0,Gt);break;case 11:a=Zx(r,a,a.pendingProps,a.type.render,a.ref,Gt);break;case 5:Xd(a);default:o0(r,a),a=Ht=Mh(a,or),a=r0(r,a,or)}t.memoizedProps=t.pendingProps,a===null?kl(t):Ht=a}function Xn(t,a,r,o){Xs=tn=null,Xd(a),qn=null,qo=0;var u=a.return;try{if(Vj(t,u,a,r,Gt)){_a=1,hl(t,ps(r,t.current)),Ht=null;return}}catch(p){if(u!==null)throw Ht=u,p;_a=1,hl(t,ps(r,t.current)),Ht=null;return}a.flags&32768?(Yt||o===1?t=!0:Gn||(Gt&536870912)!==0?t=!1:(Ar=t=!0,(o===2||o===9||o===3||o===6)&&(o=as.current,o!==null&&o.tag===13&&(o.flags|=16384))),O0(a,t)):kl(a)}function kl(t){var a=t;do{if((a.flags&32768)!==0){O0(a,Ar);return}t=a.return;var r=$j(a.alternate,a,or);if(r!==null){Ht=r;return}if(a=a.sibling,a!==null){Ht=a;return}Ht=a=t}while(a!==null);_a===0&&(_a=5)}function O0(t,a){do{var r=Gj(t.alternate,t);if(r!==null){r.flags&=32767,Ht=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){Ht=t;return}Ht=t=r}while(t!==null);_a=6,Ht=null}function D0(t,a,r,o,u,p,y,S,H){t.cancelPendingCommit=null;do Cl();while(Ma!==0);if((aa&6)!==0)throw Error(l(327));if(a!==null){if(a===t.current)throw Error(l(177));if(p=a.lanes|a.childLanes,p|=_d,Ke(t,r,p,y,S,H),t===ha&&(Ht=ha=null,Gt=0),Kn=a,Lr=t,ir=r,Ru=p,Lu=u,T0=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,r_(Ot,function(){return V0(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=P.T,P.T=null,u=Q.p,Q.p=2,y=aa,aa|=4;try{Wj(t,a,r)}finally{aa=y,Q.p=u,P.T=o}}Ma=1,z0(),q0(),U0()}}function z0(){if(Ma===1){Ma=0;var t=Lr,a=Kn,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var o=Q.p;Q.p=2;var u=aa;aa|=4;try{b0(a,t);var p=Wu,y=Sh(t.containerInfo),S=p.focusedElem,H=p.selectionRange;if(y!==S&&S&&S.ownerDocument&&_h(S.ownerDocument.documentElement,S)){if(H!==null&&bd(S)){var he=H.start,Te=H.end;if(Te===void 0&&(Te=he),"selectionStart"in S)S.selectionStart=he,S.selectionEnd=Math.min(Te,S.value.length);else{var Le=S.ownerDocument||document,xe=Le&&Le.defaultView||window;if(xe.getSelection){var Ne=xe.getSelection(),bt=S.textContent.length,Mt=Math.min(H.start,bt),ma=H.end===void 0?Mt:Math.min(H.end,bt);!Ne.extend&&Mt>ma&&(y=ma,ma=Mt,Mt=y);var le=jh(S,Mt),ee=jh(S,ma);if(le&&ee&&(Ne.rangeCount!==1||Ne.anchorNode!==le.node||Ne.anchorOffset!==le.offset||Ne.focusNode!==ee.node||Ne.focusOffset!==ee.offset)){var pe=Le.createRange();pe.setStart(le.node,le.offset),Ne.removeAllRanges(),Mt>ma?(Ne.addRange(pe),Ne.extend(ee.node,ee.offset)):(pe.setEnd(ee.node,ee.offset),Ne.addRange(pe))}}}}for(Le=[],Ne=S;Ne=Ne.parentNode;)Ne.nodeType===1&&Le.push({element:Ne,left:Ne.scrollLeft,top:Ne.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Le.length;S++){var Ae=Le[S];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}Ul=!!Gu,Wu=Gu=null}finally{aa=u,Q.p=o,P.T=r}}t.current=a,Ma=2}}function q0(){if(Ma===2){Ma=0;var t=Lr,a=Kn,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var o=Q.p;Q.p=2;var u=aa;aa|=4;try{p0(t,a.alternate,a)}finally{aa=u,Q.p=o,P.T=r}}Ma=3}}function U0(){if(Ma===4||Ma===3){Ma=0,ze();var t=Lr,a=Kn,r=ir,o=T0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ma=5:(Ma=0,Kn=Lr=null,B0(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Rr=null),zt(r),a=a.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(R,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=P.T,u=Q.p,Q.p=2,P.T=null;try{for(var p=t.onRecoverableError,y=0;y<o.length;y++){var S=o[y];p(S.value,{componentStack:S.stack})}}finally{P.T=a,Q.p=u}}(ir&3)!==0&&Cl(),Ps(t),u=t.pendingLanes,(r&261930)!==0&&(u&42)!==0?t===Mu?ai++:(ai=0,Mu=t):ai=0,si(0)}}function B0(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Do(a)))}function Cl(){return z0(),q0(),U0(),V0()}function V0(){if(Ma!==5)return!1;var t=Lr,a=Ru;Ru=0;var r=zt(ir),o=P.T,u=Q.p;try{Q.p=32>r?32:r,P.T=null,r=Lu,Lu=null;var p=Lr,y=ir;if(Ma=0,Kn=Lr=null,ir=0,(aa&6)!==0)throw Error(l(331));var S=aa;if(aa|=4,_0(p.current),y0(p,p.current,y,r),aa=S,si(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(R,p)}catch{}return!0}finally{Q.p=u,P.T=o,B0(t,a)}}function F0(t,a,r){a=ps(r,a),a=uu(t.stateNode,a,2),t=wr(t,a,2),t!==null&&(Dt(t,2),Ps(t))}function ca(t,a,r){if(t.tag===3)F0(t,t,r);else for(;a!==null;){if(a.tag===3){F0(a,t,r);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Rr===null||!Rr.has(o))){t=ps(r,t),r=Hx(2),o=wr(a,r,2),o!==null&&($x(r,o,a,t),Dt(o,2),Ps(o));break}}a=a.return}}function Ou(t,a,r){var o=t.pingCache;if(o===null){o=t.pingCache=new Xj;var u=new Set;o.set(a,u)}else u=o.get(a),u===void 0&&(u=new Set,o.set(a,u));u.has(r)||(Cu=!0,u.add(r),t=t_.bind(null,t,a,r),a.then(t,t))}function t_(t,a,r){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,ha===t&&(Gt&r)===r&&(_a===4||_a===3&&(Gt&62914560)===Gt&&300>_e()-jl?(aa&2)===0&&Yn(t,0):Au|=r,Wn===Gt&&(Wn=0)),Ps(t)}function H0(t,a){a===0&&(a=B()),t=Zr(t,a),t!==null&&(Dt(t,a),Ps(t))}function a_(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),H0(t,r)}function s_(t,a){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),H0(t,r)}function r_(t,a){return Me(t,a)}var Al=null,Qn=null,Du=!1,El=!1,zu=!1,Pr=0;function Ps(t){t!==Qn&&t.next===null&&(Qn===null?Al=Qn=t:Qn=Qn.next=t),El=!0,Du||(Du=!0,o_())}function si(t,a){if(!zu&&El){zu=!0;do for(var r=!1,o=Al;o!==null;){if(t!==0){var u=o.pendingLanes;if(u===0)var p=0;else{var y=o.suspendedLanes,S=o.pingedLanes;p=(1<<31-de(42|t)+1)-1,p&=u&~(y&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,K0(o,p))}else p=Gt,p=ye(o,o===ha?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(p&3)===0||gt(o,p)||(r=!0,K0(o,p));o=o.next}while(r);zu=!1}}function n_(){$0()}function $0(){El=Du=!1;var t=0;Pr!==0&&f_()&&(t=Pr);for(var a=_e(),r=null,o=Al;o!==null;){var u=o.next,p=G0(o,a);p===0?(o.next=null,r===null?Al=u:r.next=u,u===null&&(Qn=r)):(r=o,(t!==0||(p&3)!==0)&&(El=!0)),o=u}Ma!==0&&Ma!==5||si(t),Pr!==0&&(Pr=0)}function G0(t,a){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var y=31-de(p),S=1<<y,H=u[y];H===-1?((S&r)===0||(S&o)!==0)&&(u[y]=Fe(S,a)):H<=a&&(t.expiredLanes|=S),p&=~S}if(a=ha,r=Gt,r=ye(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===a&&(la===2||la===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&De(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||gt(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(o!==null&&De(o),zt(r)){case 2:case 8:r=xt;break;case 32:r=Ot;break;case 268435456:r=Ue;break;default:r=Ot}return o=W0.bind(null,t),r=Me(r,o),t.callbackPriority=a,t.callbackNode=r,a}return o!==null&&o!==null&&De(o),t.callbackPriority=2,t.callbackNode=null,2}function W0(t,a){if(Ma!==0&&Ma!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Cl()&&t.callbackNode!==r)return null;var o=Gt;return o=ye(t,t===ha?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(C0(t,o,a),G0(t,_e()),t.callbackNode!=null&&t.callbackNode===r?W0.bind(null,t):null)}function K0(t,a){if(Cl())return null;C0(t,a,!0)}function o_(){b_(function(){(aa&6)!==0?Me(We,n_):$0()})}function qu(){if(Pr===0){var t=On;t===0&&(t=tt,tt<<=1,(tt&261888)===0&&(tt=256)),Pr=t}return Pr}function Y0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:zi(""+t)}function X0(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function i_(t,a,r,o,u){if(a==="submit"&&r&&r.stateNode===u){var p=Y0((u[ot]||null).action),y=o.submitter;y&&(a=(a=y[ot]||null)?Y0(a.formAction):y.getAttribute("formAction"),a!==null&&(p=a,y=null));var S=new Vi("action","action",null,o,u);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Pr!==0){var H=y?X0(u,y):new FormData(u);nu(r,{pending:!0,data:H,method:u.method,action:p},null,H)}}else typeof p=="function"&&(S.preventDefault(),H=y?X0(u,y):new FormData(u),nu(r,{pending:!0,data:H,method:u.method,action:p},p,H))},currentTarget:u}]})}}for(var Uu=0;Uu<jd.length;Uu++){var Bu=jd[Uu],l_=Bu.toLowerCase(),c_=Bu[0].toUpperCase()+Bu.slice(1);_s(l_,"on"+c_)}_s(kh,"onAnimationEnd"),_s(Ch,"onAnimationIteration"),_s(Ah,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(wj,"onTransitionRun"),_s(Tj,"onTransitionStart"),_s(kj,"onTransitionCancel"),_s(Eh,"onTransitionEnd"),Y("onMouseEnter",["mouseout","mouseover"]),Y("onMouseLeave",["mouseout","mouseover"]),Y("onPointerEnter",["pointerout","pointerover"]),Y("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ri));function Q0(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var p=void 0;if(a)for(var y=o.length-1;0<=y;y--){var S=o[y],H=S.instance,he=S.currentTarget;if(S=S.listener,H!==p&&u.isPropagationStopped())break e;p=S,u.currentTarget=he;try{p(u)}catch(Te){$i(Te)}u.currentTarget=null,p=H}else for(y=0;y<o.length;y++){if(S=o[y],H=S.instance,he=S.currentTarget,S=S.listener,H!==p&&u.isPropagationStopped())break e;p=S,u.currentTarget=he;try{p(u)}catch(Te){$i(Te)}u.currentTarget=null,p=H}}}}function $t(t,a){var r=a[Ie];r===void 0&&(r=a[Ie]=new Set);var o=t+"__bubble";r.has(o)||(Z0(a,t,2,!1),r.add(o))}function Vu(t,a,r){var o=0;a&&(o|=4),Z0(r,t,o,a)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function Fu(t){if(!t[Rl]){t[Rl]=!0,Lt.forEach(function(r){r!=="selectionchange"&&(d_.has(r)||Vu(r,!1,t),Vu(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Rl]||(a[Rl]=!0,Vu("selectionchange",!1,a))}}function Z0(t,a,r,o){switch(Cf(a)){case 2:var u=z_;break;case 8:u=q_;break;default:u=rm}r=u.bind(null,a,r,t),u=void 0,!cd||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(a,r,{capture:!0,passive:u}):t.addEventListener(a,r,!0):u!==void 0?t.addEventListener(a,r,{passive:u}):t.addEventListener(a,r,!1)}function Hu(t,a,r,o,u){var p=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===u)break;if(y===4)for(y=o.return;y!==null;){var H=y.tag;if((H===3||H===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;S!==null;){if(y=Jt(S),y===null)return;if(H=y.tag,H===5||H===6||H===26||H===27){o=p=y;continue e}S=S.parentNode}}o=o.return}sh(function(){var he=p,Te=id(r),Le=[];e:{var xe=Rh.get(t);if(xe!==void 0){var Ne=Vi,bt=t;switch(t){case"keypress":if(Ui(r)===0)break e;case"keydown":case"keyup":Ne=sj;break;case"focusin":bt="focus",Ne=pd;break;case"focusout":bt="blur",Ne=pd;break;case"beforeblur":case"afterblur":Ne=pd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=$N;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=oj;break;case kh:case Ch:case Ah:Ne=KN;break;case Eh:Ne=lj;break;case"scroll":case"scrollend":Ne=FN;break;case"wheel":Ne=dj;break;case"copy":case"cut":case"paste":Ne=XN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=lh;break;case"toggle":case"beforetoggle":Ne=mj}var Mt=(a&4)!==0,ma=!Mt&&(t==="scroll"||t==="scrollend"),le=Mt?xe!==null?xe+"Capture":null:xe;Mt=[];for(var ee=he,pe;ee!==null;){var Ae=ee;if(pe=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||pe===null||le===null||(Ae=To(ee,le),Ae!=null&&Mt.push(ni(ee,Ae,pe))),ma)break;ee=ee.return}0<Mt.length&&(xe=new Ne(xe,bt,null,r,Te),Le.push({event:xe,listeners:Mt}))}}if((a&7)===0){e:{if(xe=t==="mouseover"||t==="pointerover",Ne=t==="mouseout"||t==="pointerout",xe&&r!==od&&(bt=r.relatedTarget||r.fromElement)&&(Jt(bt)||bt[X]))break e;if((Ne||xe)&&(xe=Te.window===Te?Te:(xe=Te.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ne?(bt=r.relatedTarget||r.toElement,Ne=he,bt=bt?Jt(bt):null,bt!==null&&(ma=m(bt),Mt=bt.tag,bt!==ma||Mt!==5&&Mt!==27&&Mt!==6)&&(bt=null)):(Ne=null,bt=he),Ne!==bt)){if(Mt=oh,Ae="onMouseLeave",le="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(Mt=lh,Ae="onPointerLeave",le="onPointerEnter",ee="pointer"),ma=Ne==null?xe:je(Ne),pe=bt==null?xe:je(bt),xe=new Mt(Ae,ee+"leave",Ne,r,Te),xe.target=ma,xe.relatedTarget=pe,Ae=null,Jt(Te)===he&&(Mt=new Mt(le,ee+"enter",bt,r,Te),Mt.target=pe,Mt.relatedTarget=ma,Ae=Mt),ma=Ae,Ne&&bt)t:{for(Mt=u_,le=Ne,ee=bt,pe=0,Ae=le;Ae;Ae=Mt(Ae))pe++;Ae=0;for(var Et=ee;Et;Et=Mt(Et))Ae++;for(;0<pe-Ae;)le=Mt(le),pe--;for(;0<Ae-pe;)ee=Mt(ee),Ae--;for(;pe--;){if(le===ee||ee!==null&&le===ee.alternate){Mt=le;break t}le=Mt(le),ee=Mt(ee)}Mt=null}else Mt=null;Ne!==null&&J0(Le,xe,Ne,Mt,!1),bt!==null&&ma!==null&&J0(Le,ma,bt,Mt,!0)}}e:{if(xe=he?je(he):window,Ne=xe.nodeName&&xe.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&xe.type==="file")var ea=fh;else if(hh(xe))if(gh)ea=jj;else{ea=yj;var wt=vj}else Ne=xe.nodeName,!Ne||Ne.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?he&&nd(he.elementType)&&(ea=fh):ea=Nj;if(ea&&(ea=ea(t,he))){xh(Le,ea,r,Te);break e}wt&&wt(t,xe,he),t==="focusout"&&he&&xe.type==="number"&&he.memoizedProps.value!=null&&rd(xe,"number",xe.value)}switch(wt=he?je(he):window,t){case"focusin":(hh(wt)||wt.contentEditable==="true")&&(Cn=wt,vd=he,Po=null);break;case"focusout":Po=vd=Cn=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,wh(Le,r,Te);break;case"selectionchange":if(Sj)break;case"keydown":case"keyup":wh(Le,r,Te)}var Bt;if(xd)e:{switch(t){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else kn?mh(t,r)&&(Wt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Wt="onCompositionStart");Wt&&(ch&&r.locale!=="ko"&&(kn||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&kn&&(Bt=rh()):(br=Te,dd="value"in br?br.value:br.textContent,kn=!0)),wt=Ll(he,Wt),0<wt.length&&(Wt=new ih(Wt,t,null,r,Te),Le.push({event:Wt,listeners:wt}),Bt?Wt.data=Bt:(Bt=ph(r),Bt!==null&&(Wt.data=Bt)))),(Bt=hj?xj(t,r):fj(t,r))&&(Wt=Ll(he,"onBeforeInput"),0<Wt.length&&(wt=new ih("onBeforeInput","beforeinput",null,r,Te),Le.push({event:wt,listeners:Wt}),wt.data=Bt)),i_(Le,t,he,r,Te)}Q0(Le,a)})}function ni(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Ll(t,a){for(var r=a+"Capture",o=[];t!==null;){var u=t,p=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||p===null||(u=To(t,r),u!=null&&o.unshift(ni(t,u,p)),u=To(t,a),u!=null&&o.push(ni(t,u,p))),t.tag===3)return o;t=t.return}return[]}function u_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function J0(t,a,r,o,u){for(var p=a._reactName,y=[];r!==null&&r!==o;){var S=r,H=S.alternate,he=S.stateNode;if(S=S.tag,H!==null&&H===o)break;S!==5&&S!==26&&S!==27||he===null||(H=he,u?(he=To(r,p),he!=null&&y.unshift(ni(r,he,H))):u||(he=To(r,p),he!=null&&y.push(ni(r,he,H)))),r=r.return}y.length!==0&&t.push({event:a,listeners:y})}var m_=/\r\n?/g,p_=/\u0000|\uFFFD/g;function ef(t){return(typeof t=="string"?t:""+t).replace(m_,`
`).replace(p_,"")}function tf(t,a){return a=ef(a),ef(t)===a}function ua(t,a,r,o,u,p){switch(r){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Sn(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Sn(t,""+o);break;case"className":Na(t,"class",o);break;case"tabIndex":Na(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Na(t,r,o);break;case"style":th(t,o,p);break;case"data":if(a!=="object"){Na(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=zi(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&ua(t,a,"name",u.name,u,null),ua(t,a,"formEncType",u.formEncType,u,null),ua(t,a,"formMethod",u.formMethod,u,null),ua(t,a,"formTarget",u.formTarget,u,null)):(ua(t,a,"encType",u.encType,u,null),ua(t,a,"method",u.method,u,null),ua(t,a,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=zi(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Gs);break;case"onScroll":o!=null&&$t("scroll",t);break;case"onScrollEnd":o!=null&&$t("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=zi(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":$t("beforetoggle",t),$t("toggle",t),Tt(t,"popover",o);break;case"xlinkActuate":La(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":La(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":La(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":La(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":La(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":La(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":La(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":La(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":La(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Tt(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=BN.get(r)||r,Tt(t,r,o))}}function $u(t,a,r,o,u,p){switch(r){case"style":th(t,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(u.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"children":typeof o=="string"?Sn(t,o):(typeof o=="number"||typeof o=="bigint")&&Sn(t,""+o);break;case"onScroll":o!=null&&$t("scroll",t);break;case"onScrollEnd":o!=null&&$t("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Gs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ut.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(u=r.endsWith("Capture"),a=r.slice(2,u?r.length-7:void 0),p=t[ot]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(a,p,u),typeof o=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,o,u);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):Tt(t,r,o)}}}function Ba(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",t),$t("load",t);var o=!1,u=!1,p;for(p in r)if(r.hasOwnProperty(p)){var y=r[p];if(y!=null)switch(p){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:ua(t,a,p,y,r,null)}}u&&ua(t,a,"srcSet",r.srcSet,r,null),o&&ua(t,a,"src",r.src,r,null);return;case"input":$t("invalid",t);var S=p=y=u=null,H=null,he=null;for(o in r)if(r.hasOwnProperty(o)){var Te=r[o];if(Te!=null)switch(o){case"name":u=Te;break;case"type":y=Te;break;case"checked":H=Te;break;case"defaultChecked":he=Te;break;case"value":p=Te;break;case"defaultValue":S=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(l(137,a));break;default:ua(t,a,o,Te,r,null)}}Qp(t,p,S,H,he,y,u,!1);return;case"select":$t("invalid",t),o=y=p=null;for(u in r)if(r.hasOwnProperty(u)&&(S=r[u],S!=null))switch(u){case"value":p=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:ua(t,a,u,S,r,null)}a=p,r=y,t.multiple=!!o,a!=null?_n(t,!!o,a,!1):r!=null&&_n(t,!!o,r,!0);return;case"textarea":$t("invalid",t),p=u=o=null;for(y in r)if(r.hasOwnProperty(y)&&(S=r[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":u=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:ua(t,a,y,S,r,null)}Jp(t,o,u,p);return;case"option":for(H in r)if(r.hasOwnProperty(H)&&(o=r[H],o!=null))switch(H){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ua(t,a,H,o,r,null)}return;case"dialog":$t("beforetoggle",t),$t("toggle",t),$t("cancel",t),$t("close",t);break;case"iframe":case"object":$t("load",t);break;case"video":case"audio":for(o=0;o<ri.length;o++)$t(ri[o],t);break;case"image":$t("error",t),$t("load",t);break;case"details":$t("toggle",t);break;case"embed":case"source":case"link":$t("error",t),$t("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in r)if(r.hasOwnProperty(he)&&(o=r[he],o!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:ua(t,a,he,o,r,null)}return;default:if(nd(a)){for(Te in r)r.hasOwnProperty(Te)&&(o=r[Te],o!==void 0&&$u(t,a,Te,o,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(o=r[S],o!=null&&ua(t,a,S,o,r,null))}function h_(t,a,r,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,p=null,y=null,S=null,H=null,he=null,Te=null;for(Ne in r){var Le=r[Ne];if(r.hasOwnProperty(Ne)&&Le!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":H=Le;default:o.hasOwnProperty(Ne)||ua(t,a,Ne,null,o,Le)}}for(var xe in o){var Ne=o[xe];if(Le=r[xe],o.hasOwnProperty(xe)&&(Ne!=null||Le!=null))switch(xe){case"type":p=Ne;break;case"name":u=Ne;break;case"checked":he=Ne;break;case"defaultChecked":Te=Ne;break;case"value":y=Ne;break;case"defaultValue":S=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(l(137,a));break;default:Ne!==Le&&ua(t,a,xe,Ne,o,Le)}}sd(t,y,S,H,he,Te,p,u);return;case"select":Ne=y=S=xe=null;for(p in r)if(H=r[p],r.hasOwnProperty(p)&&H!=null)switch(p){case"value":break;case"multiple":Ne=H;default:o.hasOwnProperty(p)||ua(t,a,p,null,o,H)}for(u in o)if(p=o[u],H=r[u],o.hasOwnProperty(u)&&(p!=null||H!=null))switch(u){case"value":xe=p;break;case"defaultValue":S=p;break;case"multiple":y=p;default:p!==H&&ua(t,a,u,p,o,H)}a=S,r=y,o=Ne,xe!=null?_n(t,!!r,xe,!1):!!o!=!!r&&(a!=null?_n(t,!!r,a,!0):_n(t,!!r,r?[]:"",!1));return;case"textarea":Ne=xe=null;for(S in r)if(u=r[S],r.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ua(t,a,S,null,o,u)}for(y in o)if(u=o[y],p=r[y],o.hasOwnProperty(y)&&(u!=null||p!=null))switch(y){case"value":xe=u;break;case"defaultValue":Ne=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==p&&ua(t,a,y,u,o,p)}Zp(t,xe,Ne);return;case"option":for(var bt in r)if(xe=r[bt],r.hasOwnProperty(bt)&&xe!=null&&!o.hasOwnProperty(bt))switch(bt){case"selected":t.selected=!1;break;default:ua(t,a,bt,null,o,xe)}for(H in o)if(xe=o[H],Ne=r[H],o.hasOwnProperty(H)&&xe!==Ne&&(xe!=null||Ne!=null))switch(H){case"selected":t.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:ua(t,a,H,xe,o,Ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in r)xe=r[Mt],r.hasOwnProperty(Mt)&&xe!=null&&!o.hasOwnProperty(Mt)&&ua(t,a,Mt,null,o,xe);for(he in o)if(xe=o[he],Ne=r[he],o.hasOwnProperty(he)&&xe!==Ne&&(xe!=null||Ne!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(l(137,a));break;default:ua(t,a,he,xe,o,Ne)}return;default:if(nd(a)){for(var ma in r)xe=r[ma],r.hasOwnProperty(ma)&&xe!==void 0&&!o.hasOwnProperty(ma)&&$u(t,a,ma,void 0,o,xe);for(Te in o)xe=o[Te],Ne=r[Te],!o.hasOwnProperty(Te)||xe===Ne||xe===void 0&&Ne===void 0||$u(t,a,Te,xe,o,Ne);return}}for(var le in r)xe=r[le],r.hasOwnProperty(le)&&xe!=null&&!o.hasOwnProperty(le)&&ua(t,a,le,null,o,xe);for(Le in o)xe=o[Le],Ne=r[Le],!o.hasOwnProperty(Le)||xe===Ne||xe==null&&Ne==null||ua(t,a,Le,xe,o,Ne)}function af(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var u=r[o],p=u.transferSize,y=u.initiatorType,S=u.duration;if(p&&S&&af(y)){for(y=0,S=u.responseEnd,o+=1;o<r.length;o++){var H=r[o],he=H.startTime;if(he>S)break;var Te=H.transferSize,Le=H.initiatorType;Te&&af(Le)&&(H=H.responseEnd,y+=Te*(H<S?1:(S-he)/(H-he)))}if(--o,a+=8*(p+y)/(u.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gu=null,Wu=null;function Ml(t){return t.nodeType===9?t:t.ownerDocument}function sf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rf(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Ku(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Yu=null;function f_(){var t=window.event;return t&&t.type==="popstate"?t===Yu?!1:(Yu=t,!0):(Yu=null,!1)}var nf=typeof setTimeout=="function"?setTimeout:void 0,g_=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(t){return of.resolve(null).then(t).catch(v_)}:nf;function v_(t){setTimeout(function(){throw t})}function Ir(t){return t==="head"}function lf(t,a){var r=a,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(u),to(a);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")oi(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,oi(r);for(var p=r.firstChild;p;){var y=p.nextSibling,S=p.nodeName;p[$e]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=y}}else r==="body"&&oi(t.ownerDocument.body);r=u}while(r);to(a)}function cf(t,a){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Xu(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Xu(r),mt(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function y_(t,a,r,o){for(;t.nodeType===1;){var u=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[$e])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=bs(t.nextSibling),t===null)break}return null}function N_(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=bs(t.nextSibling),t===null))return null;return t}function df(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=bs(t.nextSibling),t===null))return null;return t}function Qu(t){return t.data==="$?"||t.data==="$~"}function Zu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function j_(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var o=function(){a(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function bs(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Ju=null;function uf(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return bs(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function mf(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function pf(t,a,r){switch(a=Ml(r),t){case"html":if(t=a.documentElement,!t)throw Error(l(452));return t;case"head":if(t=a.head,!t)throw Error(l(453));return t;case"body":if(t=a.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function oi(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);mt(t)}var vs=new Map,hf=new Set;function Pl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var lr=Q.d;Q.d={f:__,r:S_,D:w_,C:T_,L:k_,m:C_,X:E_,S:A_,M:R_};function __(){var t=lr.f(),a=wl();return t||a}function S_(t){var a=pa(t);a!==null&&a.tag===5&&a.type==="form"?Ex(a):lr.r(t)}var Zn=typeof document>"u"?null:document;function xf(t,a,r){var o=Zn;if(o&&typeof a=="string"&&a){var u=us(a);u='link[rel="'+t+'"][href="'+u+'"]',typeof r=="string"&&(u+='[crossorigin="'+r+'"]'),hf.has(u)||(hf.add(u),t={rel:t,crossOrigin:r,href:a},o.querySelector(u)===null&&(a=o.createElement("link"),Ba(a,"link",t),ht(a),o.head.appendChild(a)))}}function w_(t){lr.D(t),xf("dns-prefetch",t,null)}function T_(t,a){lr.C(t,a),xf("preconnect",t,a)}function k_(t,a,r){lr.L(t,a,r);var o=Zn;if(o&&t&&a){var u='link[rel="preload"][as="'+us(a)+'"]';a==="image"&&r&&r.imageSrcSet?(u+='[imagesrcset="'+us(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(u+='[imagesizes="'+us(r.imageSizes)+'"]')):u+='[href="'+us(t)+'"]';var p=u;switch(a){case"style":p=Jn(t);break;case"script":p=eo(t)}vs.has(p)||(t=f({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),vs.set(p,t),o.querySelector(u)!==null||a==="style"&&o.querySelector(ii(p))||a==="script"&&o.querySelector(li(p))||(a=o.createElement("link"),Ba(a,"link",t),ht(a),o.head.appendChild(a)))}}function C_(t,a){lr.m(t,a);var r=Zn;if(r&&t){var o=a&&typeof a.as=="string"?a.as:"script",u='link[rel="modulepreload"][as="'+us(o)+'"][href="'+us(t)+'"]',p=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=eo(t)}if(!vs.has(p)&&(t=f({rel:"modulepreload",href:t},a),vs.set(p,t),r.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(li(p)))return}o=r.createElement("link"),Ba(o,"link",t),ht(o),r.head.appendChild(o)}}}function A_(t,a,r){lr.S(t,a,r);var o=Zn;if(o&&t){var u=He(o).hoistableStyles,p=Jn(t);a=a||"default";var y=u.get(p);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(ii(p)))S.loading=5;else{t=f({rel:"stylesheet",href:t,"data-precedence":a},r),(r=vs.get(p))&&em(t,r);var H=y=o.createElement("link");ht(H),Ba(H,"link",t),H._p=new Promise(function(he,Te){H.onload=he,H.onerror=Te}),H.addEventListener("load",function(){S.loading|=1}),H.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Il(y,a,o)}y={type:"stylesheet",instance:y,count:1,state:S},u.set(p,y)}}}function E_(t,a){lr.X(t,a);var r=Zn;if(r&&t){var o=He(r).hoistableScripts,u=eo(t),p=o.get(u);p||(p=r.querySelector(li(u)),p||(t=f({src:t,async:!0},a),(a=vs.get(u))&&tm(t,a),p=r.createElement("script"),ht(p),Ba(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(u,p))}}function R_(t,a){lr.M(t,a);var r=Zn;if(r&&t){var o=He(r).hoistableScripts,u=eo(t),p=o.get(u);p||(p=r.querySelector(li(u)),p||(t=f({src:t,async:!0,type:"module"},a),(a=vs.get(u))&&tm(t,a),p=r.createElement("script"),ht(p),Ba(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(u,p))}}function ff(t,a,r,o){var u=(u=M.current)?Pl(u):null;if(!u)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Jn(r.href),r=He(u).hoistableStyles,o=r.get(a),o||(o={type:"style",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Jn(r.href);var p=He(u).hoistableStyles,y=p.get(t);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,y),(p=u.querySelector(ii(t)))&&!p._p&&(y.instance=p,y.state.loading=5),vs.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},vs.set(t,r),p||L_(u,t,r,y.state))),a&&o===null)throw Error(l(528,""));return y}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=eo(r),r=He(u).hoistableScripts,o=r.get(a),o||(o={type:"script",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Jn(t){return'href="'+us(t)+'"'}function ii(t){return'link[rel="stylesheet"]['+t+"]"}function gf(t){return f({},t,{"data-precedence":t.precedence,precedence:null})}function L_(t,a,r,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),Ba(a,"link",r),ht(a),t.head.appendChild(a))}function eo(t){return'[src="'+us(t)+'"]'}function li(t){return"script[async]"+t}function bf(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+us(r.href)+'"]');if(o)return a.instance=o,ht(o),o;var u=f({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),ht(o),Ba(o,"style",u),Il(o,r.precedence,t),a.instance=o;case"stylesheet":u=Jn(r.href);var p=t.querySelector(ii(u));if(p)return a.state.loading|=4,a.instance=p,ht(p),p;o=gf(r),(u=vs.get(u))&&em(o,u),p=(t.ownerDocument||t).createElement("link"),ht(p);var y=p;return y._p=new Promise(function(S,H){y.onload=S,y.onerror=H}),Ba(p,"link",o),a.state.loading|=4,Il(p,r.precedence,t),a.instance=p;case"script":return p=eo(r.src),(u=t.querySelector(li(p)))?(a.instance=u,ht(u),u):(o=r,(u=vs.get(p))&&(o=f({},r),tm(o,u)),t=t.ownerDocument||t,u=t.createElement("script"),ht(u),Ba(u,"link",o),t.head.appendChild(u),a.instance=u);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Il(o,r.precedence,t));return a.instance}function Il(t,a,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,p=u,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===a)p=S;else if(p!==u)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function em(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function tm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Ol=null;function vf(t,a,r){if(Ol===null){var o=new Map,u=Ol=new Map;u.set(r,o)}else u=Ol,o=u.get(r),o||(o=new Map,u.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),u=0;u<r.length;u++){var p=r[u];if(!(p[$e]||p[Je]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var y=p.getAttribute(a)||"";y=t+y;var S=o.get(y);S?S.push(p):o.set(y,[p])}}return o}function yf(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function M_(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Nf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function P_(t,a,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=Jn(o.href),p=a.querySelector(ii(u));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Dl.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=p,ht(p);return}p=a.ownerDocument||a,o=gf(o),(u=vs.get(u))&&em(o,u),p=p.createElement("link"),ht(p);var y=p;y._p=new Promise(function(S,H){y.onload=S,y.onerror=H}),Ba(p,"link",o),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Dl.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var am=0;function I_(t,a){return t.stylesheets&&t.count===0&&ql(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&ql(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&am===0&&(am=62500*x_());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ql(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>am?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Dl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ql(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zl=null;function ql(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zl=new Map,a.forEach(O_,t),zl=null,Dl.call(t))}function O_(t,a){if(!(a.state.loading&4)){var r=zl.get(t);if(r)var o=r.get(null);else{r=new Map,zl.set(t,r);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<u.length;p++){var y=u[p];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}u=a.instance,y=u.getAttribute("data-precedence"),p=r.get(y)||o,p===o&&r.set(null,u),r.set(y,u),this.count++,o=Dl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),p?p.parentNode.insertBefore(u,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),a.state.loading|=4}}var ci={$$typeof:L,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function D_(t,a,r,o,u,p,y,S,H){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=p,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function jf(t,a,r,o,u,p,y,S,H,he,Te,Le){return t=new D_(t,a,r,y,H,he,Te,Le,S),a=1,p===!0&&(a|=24),p=ts(3,null,null,a),t.current=p,p.stateNode=t,a=Id(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:o,isDehydrated:r,cache:a},qd(p),t}function _f(t){return t?(t=Rn,t):Rn}function Sf(t,a,r,o,u,p){u=_f(u),o.context===null?o.context=u:o.pendingContext=u,o=Sr(a),o.payload={element:r},p=p===void 0?null:p,p!==null&&(o.callback=p),r=wr(t,o,a),r!==null&&(Za(r,t,a),Bo(r,t,a))}function wf(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function sm(t,a){wf(t,a),(t=t.alternate)&&wf(t,a)}function Tf(t){if(t.tag===13||t.tag===31){var a=Zr(t,67108864);a!==null&&Za(a,t,67108864),sm(t,67108864)}}function kf(t){if(t.tag===13||t.tag===31){var a=os();a=pt(a);var r=Zr(t,a);r!==null&&Za(r,t,a),sm(t,a)}}var Ul=!0;function z_(t,a,r,o){var u=P.T;P.T=null;var p=Q.p;try{Q.p=2,rm(t,a,r,o)}finally{Q.p=p,P.T=u}}function q_(t,a,r,o){var u=P.T;P.T=null;var p=Q.p;try{Q.p=8,rm(t,a,r,o)}finally{Q.p=p,P.T=u}}function rm(t,a,r,o){if(Ul){var u=nm(o);if(u===null)Hu(t,a,o,Bl,r),Af(t,o);else if(B_(u,t,a,r,o))o.stopPropagation();else if(Af(t,o),a&4&&-1<U_.indexOf(t)){for(;u!==null;){var p=pa(u);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var y=Ct(p.pendingLanes);if(y!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var H=1<<31-de(y);S.entanglements[1]|=H,y&=~H}Ps(p),(aa&6)===0&&(_l=_e()+500,si(0))}}break;case 31:case 13:S=Zr(p,2),S!==null&&Za(S,p,2),wl(),sm(p,2)}if(p=nm(o),p===null&&Hu(t,a,o,Bl,r),p===u)break;u=p}u!==null&&o.stopPropagation()}else Hu(t,a,o,null,r)}}function nm(t){return t=id(t),om(t)}var Bl=null;function om(t){if(Bl=null,t=Jt(t),t!==null){var a=m(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=h(a),t!==null)return t;t=null}else if(r===31){if(t=x(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Bl=t,null}function Cf(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case We:return 2;case xt:return 8;case Ot:case It:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var im=!1,Or=null,Dr=null,zr=null,di=new Map,ui=new Map,qr=[],U_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Af(t,a){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":di.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ui.delete(a.pointerId)}}function mi(t,a,r,o,u,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:r,eventSystemFlags:o,nativeEvent:p,targetContainers:[u]},a!==null&&(a=pa(a),a!==null&&Tf(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,u!==null&&a.indexOf(u)===-1&&a.push(u),t)}function B_(t,a,r,o,u){switch(a){case"focusin":return Or=mi(Or,t,a,r,o,u),!0;case"dragenter":return Dr=mi(Dr,t,a,r,o,u),!0;case"mouseover":return zr=mi(zr,t,a,r,o,u),!0;case"pointerover":var p=u.pointerId;return di.set(p,mi(di.get(p)||null,t,a,r,o,u)),!0;case"gotpointercapture":return p=u.pointerId,ui.set(p,mi(ui.get(p)||null,t,a,r,o,u)),!0}return!1}function Ef(t){var a=Jt(t.target);if(a!==null){var r=m(a);if(r!==null){if(a=r.tag,a===13){if(a=h(r),a!==null){t.blockedOn=a,Be(t.priority,function(){kf(r)});return}}else if(a===31){if(a=x(r),a!==null){t.blockedOn=a,Be(t.priority,function(){kf(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=nm(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);od=o,r.target.dispatchEvent(o),od=null}else return a=pa(r),a!==null&&Tf(a),t.blockedOn=r,!1;a.shift()}return!0}function Rf(t,a,r){Vl(t)&&r.delete(a)}function V_(){im=!1,Or!==null&&Vl(Or)&&(Or=null),Dr!==null&&Vl(Dr)&&(Dr=null),zr!==null&&Vl(zr)&&(zr=null),di.forEach(Rf),ui.forEach(Rf)}function Fl(t,a){t.blockedOn===a&&(t.blockedOn=null,im||(im=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,V_)))}var Hl=null;function Lf(t){Hl!==t&&(Hl=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hl===t&&(Hl=null);for(var a=0;a<t.length;a+=3){var r=t[a],o=t[a+1],u=t[a+2];if(typeof o!="function"){if(om(o||r)===null)continue;break}var p=pa(r);p!==null&&(t.splice(a,3),a-=3,nu(p,{pending:!0,data:u,method:r.method,action:o},o,u))}}))}function to(t){function a(H){return Fl(H,t)}Or!==null&&Fl(Or,t),Dr!==null&&Fl(Dr,t),zr!==null&&Fl(zr,t),di.forEach(a),ui.forEach(a);for(var r=0;r<qr.length;r++){var o=qr[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<qr.length&&(r=qr[0],r.blockedOn===null);)Ef(r),r.blockedOn===null&&qr.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var u=r[o],p=r[o+1],y=u[ot]||null;if(typeof p=="function")y||Lf(r);else if(y){var S=null;if(p&&p.hasAttribute("formAction")){if(u=p,y=p[ot]||null)S=y.formAction;else if(om(u)!==null)continue}else S=y.action;typeof S=="function"?r[o+1]=S:(r.splice(o,3),o-=3),Lf(r)}}}function Mf(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function a(){u!==null&&(u(),u=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),u!==null&&(u(),u=null)}}}function lm(t){this._internalRoot=t}$l.prototype.render=lm.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(l(409));var r=a.current,o=os();Sf(r,o,t,a,null,null)},$l.prototype.unmount=lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Sf(t.current,2,null,t,null,null),wl(),a[X]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var a=lt();t={blockedOn:null,target:t,priority:a};for(var r=0;r<qr.length&&a!==0&&a<qr[r].priority;r++);qr.splice(r,0,t),r===0&&Ef(t)}};var Pf=i.version;if(Pf!=="19.2.0")throw Error(l(527,Pf,"19.2.0"));Q.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=b(a),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var F_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{R=Gl.inject(F_),ne=Gl}catch{}}return hi.createRoot=function(t,a){if(!d(t))throw Error(l(299));var r=!1,o="",u=Ux,p=Bx,y=Vx;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=jf(t,1,!1,null,null,r,o,null,u,p,y,Mf),t[X]=a.current,Fu(t),new lm(a)},hi.hydrateRoot=function(t,a,r){if(!d(t))throw Error(l(299));var o=!1,u="",p=Ux,y=Bx,S=Vx,H=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(H=r.formState)),a=jf(t,1,!0,a,r??null,o,u,H,p,y,S,Mf),a.context=_f(null),r=a.current,o=os(),o=pt(o),u=Sr(o),u.callback=null,wr(r,u,o),r=o,a.current.lanes=r,Dt(a,r),Ps(a),t[X]=a.current,Fu(t),new $l(a)},hi.version="19.2.0",hi}var Hf;function J_(){if(Hf)return um.exports;Hf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}return s(),um.exports=Z_(),um.exports}var eS=J_();const io=new WeakMap,oc=new WeakMap,mc={current:[]};let xm=!1,Ni=0;const vi=new Set,Wl=new Map;function Wg(s){const i=Array.from(s).sort((n,l)=>n instanceof lo&&n.options.deps.includes(l)?1:l instanceof lo&&l.options.deps.includes(n)?-1:0);for(const n of i){if(mc.current.includes(n))continue;mc.current.push(n),n.recompute();const l=oc.get(n);if(l)for(const d of l){const m=io.get(d);m&&Wg(m)}}}function tS(s){const i={prevVal:s.prevState,currentVal:s.state};for(const n of s.listeners)n(i)}function aS(s){const i={prevVal:s.prevState,currentVal:s.state};for(const n of s.listeners)n(i)}function Kg(s){if(Ni>0&&!Wl.has(s)&&Wl.set(s,s.prevState),vi.add(s),!(Ni>0)&&!xm)try{for(xm=!0;vi.size>0;){const i=Array.from(vi);vi.clear();for(const n of i){const l=Wl.get(n)??n.prevState;n.prevState=l,tS(n)}for(const n of i){const l=io.get(n);l&&(mc.current.push(n),Wg(l))}for(const n of i){const l=io.get(n);if(l)for(const d of l)aS(d)}}}finally{xm=!1,mc.current=[],Wl.clear()}}function ji(s){Ni++;try{s()}finally{if(Ni--,Ni===0){const i=vi.values().next().value;i&&Kg(i)}}}function sS(s){return typeof s=="function"}class Dm{constructor(i,n){this.listeners=new Set,this.subscribe=l=>{var d,m;this.listeners.add(l);const h=(m=(d=this.options)==null?void 0:d.onSubscribe)==null?void 0:m.call(d,l,this);return()=>{this.listeners.delete(l),h?.()}},this.prevState=i,this.state=i,this.options=n}setState(i){var n,l,d;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(i):sS(i)?this.state=i(this.prevState):this.state=i,(d=(l=this.options)==null?void 0:l.onUpdate)==null||d.call(l),Kg(this)}}class lo{constructor(i){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=this.options.deps.length,l=new Array(n),d=new Array(n);for(let m=0;m<n;m++){const h=this.options.deps[m];l[m]=h.prevState,d[m]=h.state}return this.lastSeenDepValues=d,{prevDepVals:l,currDepVals:d,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,l;this.prevState=this.state;const d=this.getDepVals();this.state=this.options.fn(d),(l=(n=this.options).onUpdate)==null||l.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const m of this.options.deps)m instanceof lo&&m.checkIfRecalculationNeededDeeply();let n=!1;const l=this.lastSeenDepValues,{currDepVals:d}=this.getDepVals();for(let m=0;m<d.length;m++)if(d[m]!==l[m]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var l,d;this.listeners.add(n);const m=(d=(l=this.options).onSubscribe)==null?void 0:d.call(l,n,this);return()=>{this.listeners.delete(n),m?.()}},this.options=i,this.state=i.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(i=this.options.deps){for(const n of i)if(n instanceof lo)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof Dm){let l=io.get(n);l||(l=new Set,io.set(n,l)),l.add(this);let d=oc.get(this);d||(d=new Set,oc.set(this,d)),d.add(n)}}unregisterFromGraph(i=this.options.deps){for(const n of i)if(n instanceof lo)this.unregisterFromGraph(n.options.deps);else if(n instanceof Dm){const l=io.get(n);l&&l.delete(this);const d=oc.get(this);d&&d.delete(n)}}}const Hr="__TSR_index",$f="popstate",Gf="beforeunload";function rS(s){let i=s.getLocation();const n=new Set,l=h=>{i=s.getLocation(),n.forEach(x=>x({location:i,action:h}))},d=h=>{s.notifyOnIndexChange??!0?l(h):i=s.getLocation()},m=async({task:h,navigateOpts:x,...g})=>{if(x?.ignoreBlocker??!1){h();return}const v=s.getBlockers?.()??[],f=g.type==="PUSH"||g.type==="REPLACE";if(typeof document<"u"&&v.length&&f)for(const N of v){const j=pc(g.path,g.state);if(await N.blockerFn({currentLocation:i,nextLocation:j,action:g.type})){s.onBlocked?.();return}}h()};return{get location(){return i},get length(){return s.getLength()},subscribers:n,subscribe:h=>(n.add(h),()=>{n.delete(h)}),push:(h,x,g)=>{const b=i.state[Hr];x=Wf(b+1,x),m({task:()=>{s.pushState(h,x),l({type:"PUSH"})},navigateOpts:g,type:"PUSH",path:h,state:x})},replace:(h,x,g)=>{const b=i.state[Hr];x=Wf(b,x),m({task:()=>{s.replaceState(h,x),l({type:"REPLACE"})},navigateOpts:g,type:"REPLACE",path:h,state:x})},go:(h,x)=>{m({task:()=>{s.go(h),d({type:"GO",index:h})},navigateOpts:x,type:"GO"})},back:h=>{m({task:()=>{s.back(h?.ignoreBlocker??!1),d({type:"BACK"})},navigateOpts:h,type:"BACK"})},forward:h=>{m({task:()=>{s.forward(h?.ignoreBlocker??!1),d({type:"FORWARD"})},navigateOpts:h,type:"FORWARD"})},canGoBack:()=>i.state[Hr]!==0,createHref:h=>s.createHref(h),block:h=>{if(!s.setBlockers)return()=>{};const x=s.getBlockers?.()??[];return s.setBlockers([...x,h]),()=>{const g=s.getBlockers?.()??[];s.setBlockers?.(g.filter(b=>b!==h))}},flush:()=>s.flush?.(),destroy:()=>s.destroy?.(),notify:l}}function Wf(s,i){i||(i={});const n=rp();return{...i,key:n,__TSR_key:n,[Hr]:s}}function nS(s){const i=typeof document<"u"?window:void 0,n=i.history.pushState,l=i.history.replaceState;let d=[];const m=()=>d,h=k=>d=k,x=(k=>k),g=(()=>pc(`${i.location.pathname}${i.location.search}${i.location.hash}`,i.history.state));if(!i.history.state?.__TSR_key&&!i.history.state?.key){const k=rp();i.history.replaceState({[Hr]:0,key:k,__TSR_key:k},"")}let b=g(),v,f=!1,N=!1,j=!1,_=!1;const w=()=>b;let C,E;const D=()=>{C&&(I._ignoreSubscribers=!0,(C.isPush?i.history.pushState:i.history.replaceState)(C.state,"",C.href),I._ignoreSubscribers=!1,C=void 0,E=void 0,v=void 0)},L=(k,be,te)=>{const G=x(be);E||(v=b),b=pc(be,te),C={href:G,state:te,isPush:C?.isPush||k==="push"},E||(E=Promise.resolve().then(()=>D()))},V=k=>{b=g(),I.notify({type:k})},J=async()=>{if(N){N=!1;return}const k=g(),be=k.state[Hr]-b.state[Hr],te=be===1,G=be===-1,oe=!te&&!G||f;f=!1;const Ce=oe?"GO":G?"BACK":"FORWARD",ke=oe?{type:"GO",index:be}:{type:G?"BACK":"FORWARD"};if(j)j=!1;else{const Ee=m();if(typeof document<"u"&&Ee.length){for(const P of Ee)if(await P.blockerFn({currentLocation:b,nextLocation:k,action:Ce})){N=!0,i.history.go(1),I.notify(ke);return}}}b=g(),I.notify(ke)},ie=k=>{if(_){_=!1;return}let be=!1;const te=m();if(typeof document<"u"&&te.length)for(const G of te){const oe=G.enableBeforeUnload??!0;if(oe===!0){be=!0;break}if(typeof oe=="function"&&oe()===!0){be=!0;break}}if(be)return k.preventDefault(),k.returnValue=""},I=rS({getLocation:w,getLength:()=>i.history.length,pushState:(k,be)=>L("push",k,be),replaceState:(k,be)=>L("replace",k,be),back:k=>(k&&(j=!0),_=!0,i.history.back()),forward:k=>{k&&(j=!0),_=!0,i.history.forward()},go:k=>{f=!0,i.history.go(k)},createHref:k=>x(k),flush:D,destroy:()=>{i.history.pushState=n,i.history.replaceState=l,i.removeEventListener(Gf,ie,{capture:!0}),i.removeEventListener($f,J)},onBlocked:()=>{v&&b!==v&&(b=v)},getBlockers:m,setBlockers:h,notifyOnIndexChange:!1});return i.addEventListener(Gf,ie,{capture:!0}),i.addEventListener($f,J),i.history.pushState=function(...k){const be=n.apply(i.history,k);return I._ignoreSubscribers||V("PUSH"),be},i.history.replaceState=function(...k){const be=l.apply(i.history,k);return I._ignoreSubscribers||V("REPLACE"),be},I}function pc(s,i){const n=s.indexOf("#"),l=s.indexOf("?"),d=rp();return{href:s,pathname:s.substring(0,n>0?l>0?Math.min(n,l):n:l>0?l:s.length),hash:n>-1?s.substring(n):"",search:l>-1?s.slice(l,n===-1?void 0:n):"",state:i||{[Hr]:0,key:d,__TSR_key:d}}}function rp(){return(Math.random()+1).toString(36).substring(7)}function zm(s){return s[s.length-1]}function oS(s){return typeof s=="function"}function pn(s,i){return oS(s)?s(i):s}const iS=Object.prototype.hasOwnProperty;function ys(s,i){if(s===i)return s;const n=i,l=Xf(s)&&Xf(n);if(!l&&!(hc(s)&&hc(n)))return n;const d=l?s:Kf(s);if(!d)return n;const m=l?n:Kf(n);if(!m)return n;const h=d.length,x=m.length,g=l?new Array(x):{};let b=0;for(let v=0;v<x;v++){const f=l?v:m[v],N=s[f],j=n[f];if(N===j){g[f]=N,(l?v<h:iS.call(s,f))&&b++;continue}if(N===null||j===null||typeof N!="object"||typeof j!="object"){g[f]=j;continue}const _=ys(N,j);g[f]=_,_===N&&b++}return h===x&&b===h?s:g}function Kf(s){const i=[],n=Object.getOwnPropertyNames(s);for(const d of n){if(!Object.prototype.propertyIsEnumerable.call(s,d))return!1;i.push(d)}const l=Object.getOwnPropertySymbols(s);for(const d of l){if(!Object.prototype.propertyIsEnumerable.call(s,d))return!1;i.push(d)}return i}function hc(s){if(!Yf(s))return!1;const i=s.constructor;if(typeof i>"u")return!0;const n=i.prototype;return!(!Yf(n)||!n.hasOwnProperty("isPrototypeOf"))}function Yf(s){return Object.prototype.toString.call(s)==="[object Object]"}function Xf(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function hn(s,i,n){if(s===i)return!0;if(typeof s!=typeof i)return!1;if(Array.isArray(s)&&Array.isArray(i)){if(s.length!==i.length)return!1;for(let l=0,d=s.length;l<d;l++)if(!hn(s[l],i[l],n))return!1;return!0}if(hc(s)&&hc(i)){const l=n?.ignoreUndefined??!0;if(n?.partial){for(const h in i)if((!l||i[h]!==void 0)&&!hn(s[h],i[h],n))return!1;return!0}let d=0;if(!l)d=Object.keys(s).length;else for(const h in s)s[h]!==void 0&&d++;let m=0;for(const h in i)if((!l||i[h]!==void 0)&&(m++,m>d||!hn(s[h],i[h],n)))return!1;return d===m}return!1}function po(s){let i,n;const l=new Promise((d,m)=>{i=d,n=m});return l.status="pending",l.resolve=d=>{l.status="resolved",l.value=d,i(d),s?.(d)},l.reject=d=>{l.status="rejected",n(d)},l}function $r(s){return!!(s&&typeof s=="object"&&typeof s.then=="function")}var lS="Invariant failed";function mr(s,i){if(!s)throw new Error(lS)}const Ja="__root__",zs=0,fn=1,ho=2,xo=3;function ur(s){return np(s.filter(i=>i!==void 0).join("/"))}function np(s){return s.replace(/\/{2,}/g,"/")}function op(s){return s==="/"?s:s.replace(/^\/{1,}/,"")}function Gr(s){return s==="/"?s:s.replace(/\/{1,}$/,"")}function ic(s){return Gr(op(s))}function xc(s,i){return s?.endsWith("/")&&s!=="/"&&s!==`${i}/`?s.slice(0,-1):s}function cS(s,i,n){return xc(s,n)===xc(i,n)}function dS(s){const{type:i,value:n}=s;if(i===zs)return n;const{prefixSegment:l,suffixSegment:d}=s;if(i===fn){const m=n.substring(1);if(l&&d)return`${l}{$${m}}${d}`;if(l)return`${l}{$${m}}`;if(d)return`{$${m}}${d}`}if(i===xo){const m=n.substring(1);return l&&d?`${l}{-$${m}}${d}`:l?`${l}{-$${m}}`:d?`{-$${m}}${d}`:`{-$${m}}`}if(i===ho){if(l&&d)return`${l}{$}${d}`;if(l)return`${l}{$}`;if(d)return`{$}${d}`}return n}function uS({base:s,to:i,trailingSlash:n="never",parseCache:l}){let d=Yg(s,l).slice();const m=Cc(i,l);d.length>1&&zm(d)?.value==="/"&&d.pop();for(let g=0,b=m.length;g<b;g++){const v=m[g],f=v.value;f==="/"?g?g===b-1&&d.push(v):d=[v]:f===".."?d.pop():f==="."||d.push(v)}d.length>1&&(zm(d).value==="/"?n==="never"&&d.pop():n==="always"&&d.push({type:zs,value:"/"}));const h=d.map(dS);return ur(h)}const Yg=(s,i)=>Xg(s,i,!0),Cc=(s,i)=>Xg(s,i,!1),Xg=(s,i,n)=>{if(!s)return[];const l=i?.get(s);if(l)return l;const d=gS(s,n);return i?.set(s,d),d},mS=/^\$.{1,}$/,pS=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,hS=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,xS=/^\$$/,fS=/^(.*?)\{\$\}(.*)$/;function gS(s,i){s=np(s);const n=[];if(s.slice(0,1)==="/"&&(s=s.substring(1),n.push({type:zs,value:"/"})),!s)return n;const l=s.split("/").filter(Boolean);return n.push(...l.map(d=>{const m=!i&&d!==Ja&&d.slice(-1)==="_"?d.slice(0,-1):d,h=m.match(fS);if(h){const b=h[1],v=h[2];return{type:ho,value:"$",prefixSegment:b||void 0,suffixSegment:v||void 0}}const x=m.match(hS);if(x){const b=x[1],v=x[2],f=x[3];return{type:xo,value:v,prefixSegment:b||void 0,suffixSegment:f||void 0}}const g=m.match(pS);if(g){const b=g[1],v=g[2],f=g[3];return{type:fn,value:""+v,prefixSegment:b||void 0,suffixSegment:f||void 0}}if(mS.test(m)){const b=m.substring(1);return{type:fn,value:"$"+b,prefixSegment:void 0,suffixSegment:void 0}}return xS.test(m)?{type:ho,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:zs,value:m.includes("%25")?m.split("%25").map(b=>decodeURI(b)).join("%25"):decodeURI(m)}})),s.slice(-1)==="/"&&(s=s.substring(1),n.push({type:zs,value:"/"})),n}function Kl({path:s,params:i,leaveWildcards:n,leaveParams:l,decodeCharMap:d,parseCache:m}){const h=Cc(s,m);function x(f){const N=i[f],j=typeof N=="string";return f==="*"||f==="_splat"?j?encodeURI(N):N:j?bS(N,d):N}let g=!1;const b={},v=ur(h.map(f=>{if(f.type===zs)return f.value;if(f.type===ho){b._splat=i._splat,b["*"]=i._splat;const N=f.prefixSegment||"",j=f.suffixSegment||"";if(!("_splat"in i))return g=!0,n?`${N}${f.value}${j}`:N||j?`${N}${j}`:void 0;const _=x("_splat");return n?`${N}${f.value}${_??""}${j}`:`${N}${_}${j}`}if(f.type===fn){const N=f.value.substring(1);!g&&!(N in i)&&(g=!0),b[N]=i[N];const j=f.prefixSegment||"",_=f.suffixSegment||"";if(l){const w=x(f.value);return`${j}${f.value}${w??""}${_}`}return`${j}${x(N)??"undefined"}${_}`}if(f.type===xo){const N=f.value.substring(1),j=f.prefixSegment||"",_=f.suffixSegment||"";if(!(N in i)||i[N]==null)return n?`${j}${N}${_}`:j||_?`${j}${_}`:void 0;if(b[N]=i[N],l){const w=x(f.value);return`${j}${f.value}${w??""}${_}`}return n?`${j}${N}${x(N)??""}${_}`:`${j}${x(N)??""}${_}`}return f.value}));return{usedParams:b,interpolatedPath:v,isMissingParams:g}}function bS(s,i){let n=encodeURIComponent(s);if(i)for(const[l,d]of i)n=n.replaceAll(l,d);return n}function qm(s,i,n){const l=vS(s,i,n);if(!(i.to&&!l))return l??{}}function vS(s,{to:i,fuzzy:n,caseSensitive:l},d){const m=i,h=Yg(s.startsWith("/")?s:`/${s}`,d),x=Cc(m.startsWith("/")?m:`/${m}`,d),g={};return yS(h,x,g,n,l)?g:void 0}function yS(s,i,n,l,d){let m=0,h=0;for(;m<s.length||h<i.length;){const x=s[m],g=i[h];if(g){if(g.type===ho){const b=s.slice(m);let v;if(g.prefixSegment||g.suffixSegment){if(!x)return!1;const f=g.prefixSegment||"",N=g.suffixSegment||"",j=x.value;if("prefixSegment"in g&&!j.startsWith(f)||"suffixSegment"in g&&!s[s.length-1]?.value.endsWith(N))return!1;let _=decodeURI(ur(b.map(w=>w.value)));f&&_.startsWith(f)&&(_=_.slice(f.length)),N&&_.endsWith(N)&&(_=_.slice(0,_.length-N.length)),v=_}else v=decodeURI(ur(b.map(f=>f.value)));return n["*"]=v,n._splat=v,!0}if(g.type===zs){if(g.value==="/"&&!x?.value){h++;continue}if(x){if(d){if(g.value!==x.value)return!1}else if(g.value.toLowerCase()!==x.value.toLowerCase())return!1;m++,h++;continue}else return!1}if(g.type===fn){if(!x||x.value==="/")return!1;let b="",v=!1;if(g.prefixSegment||g.suffixSegment){const f=g.prefixSegment||"",N=g.suffixSegment||"",j=x.value;if(f&&!j.startsWith(f)||N&&!j.endsWith(N))return!1;let _=j;f&&_.startsWith(f)&&(_=_.slice(f.length)),N&&_.endsWith(N)&&(_=_.slice(0,_.length-N.length)),b=decodeURIComponent(_),v=!0}else b=decodeURIComponent(x.value),v=!0;v&&(n[g.value.substring(1)]=b,m++),h++;continue}if(g.type===xo){if(!x){h++;continue}if(x.value==="/"){h++;continue}let b="",v=!1;if(g.prefixSegment||g.suffixSegment){const f=g.prefixSegment||"",N=g.suffixSegment||"",j=x.value;if((!f||j.startsWith(f))&&(!N||j.endsWith(N))){let _=j;f&&_.startsWith(f)&&(_=_.slice(f.length)),N&&_.endsWith(N)&&(_=_.slice(0,_.length-N.length)),b=decodeURIComponent(_),v=!0}}else{let f=!0;for(let N=h+1;N<i.length;N++){const j=i[N];if(j?.type===zs&&j.value===x.value){f=!1;break}if(j?.type===fn||j?.type===ho){s.length<i.length&&(f=!1);break}}f&&(b=decodeURIComponent(x.value),v=!0)}v&&(n[g.value.substring(1)]=b,m++),h++;continue}}if(m<s.length&&h>=i.length)return n["**"]=ur(s.slice(m).map(b=>b.value)),!!l&&i[i.length-1]?.value!=="/";if(h<i.length&&m>=s.length){for(let b=h;b<i.length;b++)if(i[b]?.type!==xo)return!1;break}break}return!0}const NS=.75,jS=1,_S=.5,SS=.4,wS=.25,TS=.2,kS=.05,CS=.02,AS=.01,Qf=2e-4,Zf=1e-4;function Jf(s,i){return s.prefixSegment&&s.suffixSegment?i+kS+Qf*s.prefixSegment.length+Zf*s.suffixSegment.length:s.prefixSegment?i+CS+Qf*s.prefixSegment.length:s.suffixSegment?i+AS+Zf*s.suffixSegment.length:i}function ES(s){const i=[];return s.forEach((l,d)=>{if(l.isRoot||!l.path)return;const m=op(l.fullPath);let h=Cc(m),x=0;for(;h.length>x+1&&h[x]?.value==="/";)x++;x>0&&(h=h.slice(x));let g=0,b=!1;const v=h.map((f,N)=>{if(f.value==="/")return NS;if(f.type===zs)return jS;let j;f.type===fn?j=_S:f.type===xo?(j=SS,g++):j=wS;for(let _=N+1;_<h.length;_++){const w=h[_];if(w.type===zs&&w.value!=="/")return b=!0,Jf(f,j+TS)}return Jf(f,j)});i.push({child:l,trimmed:m,parsed:h,index:d,scores:v,optionalParamCount:g,hasStaticAfter:b})}),i.sort((l,d)=>{const m=Math.min(l.scores.length,d.scores.length);for(let h=0;h<m;h++)if(l.scores[h]!==d.scores[h])return d.scores[h]-l.scores[h];if(l.scores.length!==d.scores.length){if(l.optionalParamCount!==d.optionalParamCount){if(l.hasStaticAfter===d.hasStaticAfter)return l.optionalParamCount-d.optionalParamCount;if(l.hasStaticAfter&&!d.hasStaticAfter)return-1;if(!l.hasStaticAfter&&d.hasStaticAfter)return 1}return d.scores.length-l.scores.length}for(let h=0;h<m;h++)if(l.parsed[h].value!==d.parsed[h].value)return l.parsed[h].value>d.parsed[h].value?1:-1;return l.index-d.index}).map((l,d)=>(l.child.rank=d,l.child))}function RS({routeTree:s,initRoute:i}){const n={},l={},d=h=>{h.forEach((x,g)=>{i?.(x,g);const b=n[x.id];if(mr(!b,`Duplicate routes found with id: ${String(x.id)}`),n[x.id]=x,!x.isRoot&&x.path){const f=Gr(x.fullPath);(!l[f]||x.fullPath.endsWith("/"))&&(l[f]=x)}const v=x.children;v?.length&&d(v)})};d([s]);const m=ES(Object.values(n));return{routesById:n,routesByPath:l,flatRoutes:m}}function Vs(s){return!!s?.isNotFound}function LS(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const fc="tsr-scroll-restoration-v1_3",MS=(s,i)=>{let n;return(...l)=>{n||(n=setTimeout(()=>{s(...l),n=null},i))}};function PS(){const s=LS();if(!s)return null;const i=s.getItem(fc);let n=i?JSON.parse(i):{};return{state:n,set:l=>(n=pn(l,n)||n,s.setItem(fc,JSON.stringify(n)))}}const Yl=PS(),Um=s=>s.state.__TSR_key||s.href;function IS(s){const i=[];let n;for(;n=s.parentNode;)i.push(`${s.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,s)+1})`),s=n;return`${i.reverse().join(" > ")}`.toLowerCase()}let gc=!1;function Qg({storageKey:s,key:i,behavior:n,shouldScrollRestoration:l,scrollToTopSelectors:d,location:m}){let h;try{h=JSON.parse(sessionStorage.getItem(s)||"{}")}catch(b){console.error(b);return}const x=i||window.history.state?.__TSR_key,g=h[x];gc=!0;e:{if(l&&g&&Object.keys(g).length>0){for(const f in g){const N=g[f];if(f==="window")window.scrollTo({top:N.scrollY,left:N.scrollX,behavior:n});else if(f){const j=document.querySelector(f);j&&(j.scrollLeft=N.scrollX,j.scrollTop=N.scrollY)}}break e}const b=(m??window.location).hash.split("#",2)[1];if(b){const f=window.history.state?.__hashScrollIntoViewOptions??!0;if(f){const N=document.getElementById(b);N&&N.scrollIntoView(f)}break e}const v={top:0,left:0,behavior:n};if(window.scrollTo(v),d)for(const f of d){if(f==="window")continue;const N=typeof f=="function"?f():document.querySelector(f);N&&N.scrollTo(v)}}gc=!1}function OS(s,i){if(!Yl&&!s.isServer||((s.options.scrollRestoration??!1)&&(s.isScrollRestoring=!0),s.isServer||s.isScrollRestorationSetup||!Yl))return;s.isScrollRestorationSetup=!0,gc=!1;const l=s.options.getScrollRestorationKey||Um;window.history.scrollRestoration="manual";const d=m=>{if(gc||!s.isScrollRestoring)return;let h="";if(m.target===document||m.target===window)h="window";else{const g=m.target.getAttribute("data-scroll-restoration-id");g?h=`[data-scroll-restoration-id="${g}"]`:h=IS(m.target)}const x=l(s.state.location);Yl.set(g=>{const b=g[x]||={},v=b[h]||={};if(h==="window")v.scrollX=window.scrollX||0,v.scrollY=window.scrollY||0;else if(h){const f=document.querySelector(h);f&&(v.scrollX=f.scrollLeft||0,v.scrollY=f.scrollTop||0)}return g})};typeof document<"u"&&document.addEventListener("scroll",MS(d,100),!0),s.subscribe("onRendered",m=>{const h=l(m.toLocation);if(!s.resetNextScroll){s.resetNextScroll=!0;return}typeof s.options.scrollRestoration=="function"&&!s.options.scrollRestoration({location:s.latestLocation})||(Qg({storageKey:fc,key:h,behavior:s.options.scrollRestorationBehavior,shouldScrollRestoration:s.isScrollRestoring,scrollToTopSelectors:s.options.scrollToTopSelectors,location:s.history.location}),s.isScrollRestoring&&Yl.set(x=>(x[h]||={},x)))})}function DS(s){if(typeof document<"u"&&document.querySelector){const i=s.state.location.state.__hashScrollIntoViewOptions??!0;if(i&&s.state.location.hash!==""){const n=document.getElementById(s.state.location.hash);n&&n.scrollIntoView(i)}}}function zS(s,i=String){const n=new URLSearchParams;for(const l in s){const d=s[l];d!==void 0&&n.set(l,i(d))}return n.toString()}function fm(s){return s?s==="false"?!1:s==="true"?!0:+s*0===0&&+s+""===s?+s:s:""}function qS(s){const i=new URLSearchParams(s),n={};for(const[l,d]of i.entries()){const m=n[l];m==null?n[l]=fm(d):Array.isArray(m)?m.push(fm(d)):n[l]=[m,fm(d)]}return n}const US=VS(JSON.parse),BS=FS(JSON.stringify,JSON.parse);function VS(s){return i=>{i[0]==="?"&&(i=i.substring(1));const n=qS(i);for(const l in n){const d=n[l];if(typeof d=="string")try{n[l]=s(d)}catch{}}return n}}function FS(s,i){const n=typeof i=="function";function l(d){if(typeof d=="object"&&d!==null)try{return s(d)}catch{}else if(n&&typeof d=="string")try{return i(d),s(d)}catch{}return d}return d=>{const m=zS(d,l);return m?`?${m}`:""}}function HS(s){if(s.statusCode=s.statusCode||s.code||307,!s.reloadDocument&&typeof s.href=="string")try{new URL(s.href),s.reloadDocument=!0}catch{}const i=new Headers(s.headers);s.href&&i.get("Location")===null&&i.set("Location",s.href);const n=new Response(null,{status:s.statusCode,headers:i});if(n.options=s,s.throw)throw n;return n}function Os(s){return s instanceof Response&&!!s.options}function $S(s){const i=new Map;let n,l;const d=m=>{m.next&&(m.prev?(m.prev.next=m.next,m.next.prev=m.prev,m.next=void 0,l&&(l.next=m,m.prev=l)):(m.next.prev=void 0,n=m.next,m.next=void 0,l&&(m.prev=l,l.next=m)),l=m)};return{get(m){const h=i.get(m);if(h)return d(h),h.value},set(m,h){if(i.size>=s&&n){const g=n;i.delete(g.key),g.next&&(n=g.next,g.next.prev=void 0),g===l&&(l=void 0)}const x=i.get(m);if(x)x.value=h,d(x);else{const g={key:m,value:h,prev:l};l&&(l.next=g),l=g,n||(n=g),i.set(m,g)}}}}const lc=s=>{if(!s.rendered)return s.rendered=!0,s.onReady?.()},Ac=(s,i)=>!!(s.preload&&!s.router.state.matches.some(n=>n.id===i)),Zg=(s,i)=>{const n=s.router.routesById[i.routeId??""]??s.router.routeTree;!n.options.notFoundComponent&&s.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=s.router.options.defaultNotFoundComponent),mr(n.options.notFoundComponent);const l=s.matches.find(d=>d.routeId===n.id);mr(l,"Could not find match for route: "+n.id),s.updateMatch(l.id,d=>({...d,status:"notFound",error:i,isFetching:!1})),i.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(i.routeId=n.parentRoute.id,Zg(s,i))},Fr=(s,i,n)=>{if(!(!Os(n)&&!Vs(n))){if(Os(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(i){i._nonReactive.beforeLoadPromise?.resolve(),i._nonReactive.loaderPromise?.resolve(),i._nonReactive.beforeLoadPromise=void 0,i._nonReactive.loaderPromise=void 0;const l=Os(n)?"redirected":"notFound";s.updateMatch(i.id,d=>({...d,status:l,isFetching:!1,error:n})),Vs(n)&&!n.routeId&&(n.routeId=i.routeId),i._nonReactive.loadPromise?.resolve()}throw Os(n)?(s.rendered=!0,n.options._fromLocation=s.location,n.redirectHandled=!0,n=s.router.resolveRedirect(n),n):(Zg(s,n),n)}},Jg=(s,i)=>{const n=s.router.getMatch(i);return!!(!s.router.isServer&&n._nonReactive.dehydrated||s.router.isServer&&n.ssr===!1)},xi=(s,i,n,l)=>{const{id:d,routeId:m}=s.matches[i],h=s.router.looseRoutesById[m];if(n instanceof Promise)throw n;n.routerCode=l,s.firstBadMatchIndex??=i,Fr(s,s.router.getMatch(d),n);try{h.options.onError?.(n)}catch(x){n=x,Fr(s,s.router.getMatch(d),n)}s.updateMatch(d,x=>(x._nonReactive.beforeLoadPromise?.resolve(),x._nonReactive.beforeLoadPromise=void 0,x._nonReactive.loadPromise?.resolve(),{...x,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},GS=(s,i,n,l)=>{const d=s.router.getMatch(i),m=s.matches[n-1]?.id,h=m?s.router.getMatch(m):void 0;if(s.router.isShell()){d.ssr=i===Ja;return}if(h?.ssr===!1){d.ssr=!1;return}const x=j=>j===!0&&h?.ssr==="data-only"?"data-only":j,g=s.router.options.defaultSsr??!0;if(l.options.ssr===void 0){d.ssr=x(g);return}if(typeof l.options.ssr!="function"){d.ssr=x(l.options.ssr);return}const{search:b,params:v}=d,f={search:Xl(b,d.searchError),params:Xl(v,d.paramsError),location:s.location,matches:s.matches.map(j=>({index:j.index,pathname:j.pathname,fullPath:j.fullPath,staticData:j.staticData,id:j.id,routeId:j.routeId,search:Xl(j.search,j.searchError),params:Xl(j.params,j.paramsError),ssr:j.ssr}))},N=l.options.ssr(f);if($r(N))return N.then(j=>{d.ssr=x(j??g)});d.ssr=x(N??g)},eb=(s,i,n,l)=>{if(l._nonReactive.pendingTimeout!==void 0)return;const d=n.options.pendingMs??s.router.options.defaultPendingMs;if(!!(s.onReady&&!s.router.isServer&&!Ac(s,i)&&(n.options.loader||n.options.beforeLoad||sb(n))&&typeof d=="number"&&d!==1/0&&(n.options.pendingComponent??s.router.options?.defaultPendingComponent))){const h=setTimeout(()=>{lc(s)},d);l._nonReactive.pendingTimeout=h}},WS=(s,i,n)=>{const l=s.router.getMatch(i);if(!l._nonReactive.beforeLoadPromise&&!l._nonReactive.loaderPromise)return;eb(s,i,n,l);const d=()=>{const m=s.router.getMatch(i);m.preload&&(m.status==="redirected"||m.status==="notFound")&&Fr(s,m,m.error)};return l._nonReactive.beforeLoadPromise?l._nonReactive.beforeLoadPromise.then(d):d()},KS=(s,i,n,l)=>{const d=s.router.getMatch(i),m=d._nonReactive.loadPromise;d._nonReactive.loadPromise=po(()=>{m?.resolve()});const{paramsError:h,searchError:x}=d;h&&xi(s,n,h,"PARSE_PARAMS"),x&&xi(s,n,x,"VALIDATE_SEARCH"),eb(s,i,l,d);const g=new AbortController,b=s.matches[n-1]?.id,N={...(b?s.router.getMatch(b):void 0)?.context??s.router.options.context??void 0,...d.__routeContext};let j=!1;const _=()=>{j||(j=!0,s.updateMatch(i,I=>({...I,isFetching:"beforeLoad",fetchCount:I.fetchCount+1,abortController:g,context:N})))},w=()=>{d._nonReactive.beforeLoadPromise?.resolve(),d._nonReactive.beforeLoadPromise=void 0,s.updateMatch(i,I=>({...I,isFetching:!1}))};if(!l.options.beforeLoad){ji(()=>{_(),w()});return}d._nonReactive.beforeLoadPromise=po();const{search:C,params:E,cause:D}=d,L=Ac(s,i),V={search:C,abortController:g,params:E,preload:L,context:N,location:s.location,navigate:I=>s.router.navigate({...I,_fromLocation:s.location}),buildLocation:s.router.buildLocation,cause:L?"preload":D,matches:s.matches,...s.router.options.additionalContext},J=I=>{if(I===void 0){ji(()=>{_(),w()});return}(Os(I)||Vs(I))&&(_(),xi(s,n,I,"BEFORE_LOAD")),ji(()=>{_(),s.updateMatch(i,k=>({...k,__beforeLoadContext:I,context:{...k.context,...I}})),w()})};let ie;try{if(ie=l.options.beforeLoad(V),$r(ie))return _(),ie.catch(I=>{xi(s,n,I,"BEFORE_LOAD")}).then(J)}catch(I){_(),xi(s,n,I,"BEFORE_LOAD")}J(ie)},YS=(s,i)=>{const{id:n,routeId:l}=s.matches[i],d=s.router.looseRoutesById[l],m=()=>{if(s.router.isServer){const g=GS(s,n,i,d);if($r(g))return g.then(x)}return x()},h=()=>KS(s,n,i,d),x=()=>{if(Jg(s,n))return;const g=WS(s,n,d);return $r(g)?g.then(h):h()};return m()},_i=(s,i,n)=>{const l=s.router.getMatch(i);if(!l||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const d={matches:s.matches,match:l,params:l.params,loaderData:l.loaderData};return Promise.all([n.options.head?.(d),n.options.scripts?.(d),n.options.headers?.(d)]).then(([m,h,x])=>{const g=m?.meta,b=m?.links,v=m?.scripts,f=m?.styles;return{meta:g,links:b,headScripts:v,headers:x,scripts:h,styles:f}})},tb=(s,i,n,l)=>{const d=s.matchPromises[n-1],{params:m,loaderDeps:h,abortController:x,context:g,cause:b}=s.router.getMatch(i),v=Ac(s,i);return{params:m,deps:h,preload:!!v,parentMatchPromise:d,abortController:x,context:g,location:s.location,navigate:f=>s.router.navigate({...f,_fromLocation:s.location}),cause:v?"preload":b,route:l,...s.router.options.additionalContext}},eg=async(s,i,n,l)=>{try{const d=s.router.getMatch(i);try{(!s.router.isServer||d.ssr===!0)&&ab(l);const m=l.options.loader?.(tb(s,i,n,l)),h=l.options.loader&&$r(m);if(!!(h||l._lazyPromise||l._componentsPromise||l.options.head||l.options.scripts||l.options.headers||d._nonReactive.minPendingPromise)&&s.updateMatch(i,f=>({...f,isFetching:"loader"})),l.options.loader){const f=h?await m:m;Fr(s,s.router.getMatch(i),f),f!==void 0&&s.updateMatch(i,N=>({...N,loaderData:f}))}l._lazyPromise&&await l._lazyPromise;const g=_i(s,i,l),b=g?await g:void 0,v=d._nonReactive.minPendingPromise;v&&await v,l._componentsPromise&&await l._componentsPromise,s.updateMatch(i,f=>({...f,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...b}))}catch(m){let h=m;const x=d._nonReactive.minPendingPromise;x&&await x,Fr(s,s.router.getMatch(i),m);try{l.options.onError?.(m)}catch(v){h=v,Fr(s,s.router.getMatch(i),v)}const g=_i(s,i,l),b=g?await g:void 0;s.updateMatch(i,v=>({...v,error:h,status:"error",isFetching:!1,...b}))}}catch(d){const m=s.router.getMatch(i);if(m){const h=_i(s,i,l);if(h){const x=await h;s.updateMatch(i,g=>({...g,...x}))}m._nonReactive.loaderPromise=void 0}Fr(s,m,d)}},XS=async(s,i)=>{const{id:n,routeId:l}=s.matches[i];let d=!1,m=!1;const h=s.router.looseRoutesById[l];if(Jg(s,n)){if(s.router.isServer){const b=_i(s,n,h);if(b){const v=await b;s.updateMatch(n,f=>({...f,...v}))}return s.router.getMatch(n)}}else{const b=s.router.getMatch(n);if(b._nonReactive.loaderPromise){if(b.status==="success"&&!s.sync&&!b.preload)return b;await b._nonReactive.loaderPromise;const v=s.router.getMatch(n);v.error&&Fr(s,v,v.error)}else{const v=Date.now()-b.updatedAt,f=Ac(s,n),N=f?h.options.preloadStaleTime??s.router.options.defaultPreloadStaleTime??3e4:h.options.staleTime??s.router.options.defaultStaleTime??0,j=h.options.shouldReload,_=typeof j=="function"?j(tb(s,n,i,h)):j,w=!!f&&!s.router.state.matches.some(L=>L.id===n),C=s.router.getMatch(n);C._nonReactive.loaderPromise=po(),w!==C.preload&&s.updateMatch(n,L=>({...L,preload:w}));const{status:E,invalid:D}=C;if(d=E==="success"&&(D||(_??v>N)),!(f&&h.options.preload===!1))if(d&&!s.sync)m=!0,(async()=>{try{await eg(s,n,i,h);const L=s.router.getMatch(n);L._nonReactive.loaderPromise?.resolve(),L._nonReactive.loadPromise?.resolve(),L._nonReactive.loaderPromise=void 0}catch(L){Os(L)&&await s.router.navigate(L.options)}})();else if(E!=="success"||d&&s.sync)await eg(s,n,i,h);else{const L=_i(s,n,h);if(L){const V=await L;s.updateMatch(n,J=>({...J,...V}))}}}}const x=s.router.getMatch(n);m||(x._nonReactive.loaderPromise?.resolve(),x._nonReactive.loadPromise?.resolve()),clearTimeout(x._nonReactive.pendingTimeout),x._nonReactive.pendingTimeout=void 0,m||(x._nonReactive.loaderPromise=void 0),x._nonReactive.dehydrated=void 0;const g=m?x.isFetching:!1;return g!==x.isFetching||x.invalid!==!1?(s.updateMatch(n,b=>({...b,isFetching:g,invalid:!1})),s.router.getMatch(n)):x};async function tg(s){const i=Object.assign(s,{matchPromises:[]});!i.router.isServer&&i.router.state.matches.some(n=>n._forcePending)&&lc(i);try{for(let d=0;d<i.matches.length;d++){const m=YS(i,d);$r(m)&&await m}const n=i.firstBadMatchIndex??i.matches.length;for(let d=0;d<n;d++)i.matchPromises.push(XS(i,d));await Promise.all(i.matchPromises);const l=lc(i);$r(l)&&await l}catch(n){if(Vs(n)&&!i.preload){const l=lc(i);throw $r(l)&&await l,n}if(Os(n))throw n}return i.matches}async function ab(s){if(!s._lazyLoaded&&s._lazyPromise===void 0&&(s.lazyFn?s._lazyPromise=s.lazyFn().then(i=>{const{id:n,...l}=i.options;Object.assign(s.options,l),s._lazyLoaded=!0,s._lazyPromise=void 0}):s._lazyLoaded=!0),!s._componentsLoaded&&s._componentsPromise===void 0){const i=()=>{const n=[];for(const l of rb){const d=s.options[l]?.preload;d&&n.push(d())}if(n.length)return Promise.all(n).then(()=>{s._componentsLoaded=!0,s._componentsPromise=void 0});s._componentsLoaded=!0,s._componentsPromise=void 0};s._componentsPromise=s._lazyPromise?s._lazyPromise.then(i):i()}return s._componentsPromise}function Xl(s,i){return i?{status:"error",error:i}:{status:"success",value:s}}function sb(s){for(const i of rb)if(s.options[i]?.preload)return!0;return!1}const rb=["component","errorComponent","pendingComponent","notFoundComponent"];function QS(s){return{input:({url:i})=>{for(const n of s)i=nb(n,i);return i},output:({url:i})=>{for(let n=s.length-1;n>=0;n--)i=ob(s[n],i);return i}}}function ZS(s){const i=ic(s.basepath),n=`/${i}`,l=`${n}/`,d=s.caseSensitive?n:n.toLowerCase(),m=s.caseSensitive?l:l.toLowerCase();return{input:({url:h})=>{const x=s.caseSensitive?h.pathname:h.pathname.toLowerCase();return x===d?h.pathname="/":x.startsWith(m)&&(h.pathname=h.pathname.slice(n.length)),h},output:({url:h})=>(h.pathname=ur(["/",i,h.pathname]),h)}}function nb(s,i){const n=s?.input?.({url:i});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return i}function ob(s,i){const n=s?.output?.({url:i});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return i}function xn(s){const i=s.resolvedLocation,n=s.location,l=i?.pathname!==n.pathname,d=i?.href!==n.href,m=i?.hash!==n.hash;return{fromLocation:i,toLocation:n,pathChanged:l,hrefChanged:d,hashChanged:m}}class JS{constructor(i){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const l=this.options,d=this.basepath??l?.basepath??"/",m=this.basepath===void 0,h=l?.rewrite;this.options={...l,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(N=>[encodeURIComponent(N),N])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=nS())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new Dm(tw(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(N=>!["redirected"].includes(N.status))}}}),OS(this));let x=!1;const g=this.options.basepath??"/",b=this.options.rewrite;if(m||d!==g||h!==b){this.basepath=g;const N=[];ic(g)!==""&&N.push(ZS({basepath:g})),b&&N.push(b),this.rewrite=N.length===0?void 0:N.length===1?N[0]:QS(N),this.history&&this.updateLatestLocation(),x=!0}x&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:l,flatRoutes:d}=RS({routeTree:this.routeTree,initRoute:(h,x)=>{h.init({originalIndex:x})}});this.routesById=n,this.routesByPath=l,this.flatRoutes=d;const m=this.options.notFoundRoute;m&&(m.init({originalIndex:99999999999}),this.routesById[m.id]=m)},this.subscribe=(n,l)=>{const d={eventType:n,fn:l};return this.subscribers.add(d),()=>{this.subscribers.delete(d)}},this.emit=n=>{this.subscribers.forEach(l=>{l.eventType===n.type&&l.fn(n)})},this.parseLocation=(n,l)=>{const d=({href:g,state:b})=>{const v=new URL(g,this.origin),f=nb(this.rewrite,v),N=this.options.parseSearch(f.search),j=this.options.stringifySearch(N);f.search=j;const _=f.href.replace(f.origin,""),{pathname:w,hash:C}=f;return{href:_,publicHref:g,url:f.href,pathname:w,searchStr:j,search:ys(l?.search,N),hash:C.split("#").reverse()[0]??"",state:ys(l?.state,b)}},m=d(n),{__tempLocation:h,__tempKey:x}=m.state;if(h&&(!x||x===this.tempLocationKey)){const g=d(h);return g.state.key=m.state.key,g.state.__TSR_key=m.state.__TSR_key,delete g.state.__tempLocation,{...g,maskedLocation:m}}return m},this.resolvePathWithBase=(n,l)=>uS({base:n,to:np(l),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(n,l,d)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:l},d):this.matchRoutesInternal(n,l),this.parsePathnameCache=$S(1e3),this.getMatchedRoutes=(n,l)=>aw({pathname:n,routePathname:l,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=n=>{const l=this.getMatch(n);l&&(l.abortController.abort(),clearTimeout(l._nonReactive.pendingTimeout),l._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{this.state.pendingMatches?.forEach(n=>{this.cancelMatch(n.id)})},this.buildLocation=n=>{const l=(m={})=>{const h=m._fromLocation||this.latestLocation,x=this.matchRoutes(h,{_buildLocation:!0}),g=zm(x);m.from;const b=m.unsafeRelative==="path"?h.pathname:m.from??g.fullPath,v=this.resolvePathWithBase(b,"."),f=g.search,N={...g.params},j=m.to?this.resolvePathWithBase(v,`${m.to}`):this.resolvePathWithBase(v,"."),_=m.params===!1||m.params===null?{}:(m.params??!0)===!0?N:Object.assign(N,pn(m.params,N)),w=Kl({path:j,params:_,parseCache:this.parsePathnameCache}).interpolatedPath,C=this.matchRoutes(w,void 0,{_buildLocation:!0}).map(te=>this.looseRoutesById[te.routeId]);if(Object.keys(_).length>0)for(const te of C){const G=te.options.params?.stringify??te.options.stringifyParams;G&&Object.assign(_,G(_))}const E=Kl({path:j,params:_,leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let D=f;if(n._includeValidateSearch&&this.options.search?.strict){const te={};C.forEach(G=>{if(G.options.validateSearch)try{Object.assign(te,Bm(G.options.validateSearch,{...te,...D}))}catch{}}),D=te}D=sw({search:D,dest:m,destRoutes:C,_includeValidateSearch:n._includeValidateSearch}),D=ys(f,D);const L=this.options.stringifySearch(D),V=m.hash===!0?h.hash:m.hash?pn(m.hash,h.hash):void 0,J=V?`#${V}`:"";let ie=m.state===!0?h.state:m.state?pn(m.state,h.state):{};ie=ys(h.state,ie);const I=`${E}${L}${J}`,k=new URL(I,this.origin),be=ob(this.rewrite,k);return{publicHref:be.pathname+be.search+be.hash,href:I,url:be.href,pathname:E,search:D,searchStr:L,state:ie,hash:V??"",unmaskOnReload:m.unmaskOnReload}},d=(m={},h)=>{const x=l(m);let g=h?l(h):void 0;if(!g){let b={};const v=this.options.routeMasks?.find(f=>{const N=qm(x.pathname,{to:f.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return N?(b=N,!0):!1});if(v){const{from:f,...N}=v;h={from:n.from,...N,params:b},g=l(h)}}return g&&(x.maskedLocation=g),x};return n.mask?d(n,{from:n.from,...n.mask}):d(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:l,...d})=>{const m=()=>{const g=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];g.forEach(v=>{d.state[v]=this.latestLocation.state[v]});const b=hn(d.state,this.latestLocation.state);return g.forEach(v=>{delete d.state[v]}),b},h=Gr(this.latestLocation.href)===Gr(d.href),x=this.commitLocationPromise;if(this.commitLocationPromise=po(()=>{x?.resolve()}),h&&m())this.load();else{let{maskedLocation:g,hashScrollIntoView:b,...v}=d;g&&(v={...g,state:{...g.state,__tempKey:void 0,__tempLocation:{...v,search:v.searchStr,state:{...v.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(v.unmaskOnReload??this.options.unmaskOnReload??!1)&&(v.state.__tempKey=this.tempLocationKey)),v.state.__hashScrollIntoViewOptions=b??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[d.replace?"replace":"push"](v.publicHref,v.state,{ignoreBlocker:l})}return this.resetNextScroll=d.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:l,hashScrollIntoView:d,viewTransition:m,ignoreBlocker:h,href:x,...g}={})=>{if(x){const v=this.history.location.state.__TSR_index,f=pc(x,{__TSR_index:n?v:v+1});g.to=f.pathname,g.search=this.options.parseSearch(f.search),g.hash=f.hash.slice(1)}const b=this.buildLocation({...g,_includeValidateSearch:!0});return this.commitLocation({...b,viewTransition:m,replace:n,resetScroll:l,hashScrollIntoView:d,ignoreBlocker:h})},this.navigate=({to:n,reloadDocument:l,href:d,...m})=>{if(!l&&d)try{new URL(`${d}`),l=!0}catch{}return l?(d||(d=this.buildLocation({to:n,...m}).url),m.replace?window.location.replace(d):window.location.href=d,Promise.resolve()):this.buildAndCommitLocation({...m,href:d,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const l=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),d=m=>{try{return encodeURI(decodeURI(m))}catch{return m}};if(ic(d(this.latestLocation.href))!==ic(d(l.href))){let m=l.url;throw this.origin&&m.startsWith(this.origin)&&(m=m.replace(this.origin,"")||"/"),HS({href:m})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(l=>({...l,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:l.cachedMatches.filter(d=>!n.some(m=>m.id===d.id))}))},this.load=async n=>{let l,d,m;for(m=new Promise(h=>{this.startTransition(async()=>{try{this.beforeLoad();const x=this.latestLocation,g=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...xn({resolvedLocation:g,location:x})}),this.emit({type:"onBeforeLoad",...xn({resolvedLocation:g,location:x})}),await tg({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:x,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let b,v,f;ji(()=>{this.__store.setState(N=>{const j=N.matches,_=N.pendingMatches||N.matches;return b=j.filter(w=>!_.some(C=>C.id===w.id)),v=_.filter(w=>!j.some(C=>C.id===w.id)),f=j.filter(w=>_.some(C=>C.id===w.id)),{...N,isLoading:!1,loadedAt:Date.now(),matches:_,pendingMatches:void 0,cachedMatches:[...N.cachedMatches,...b.filter(w=>w.status!=="error")]}}),this.clearExpiredCache()}),[[b,"onLeave"],[v,"onEnter"],[f,"onStay"]].forEach(([N,j])=>{N.forEach(_=>{this.looseRoutesById[_.routeId].options[j]?.(_)})})})}})}catch(x){Os(x)?(l=x,this.isServer||this.navigate({...l.options,replace:!0,ignoreBlocker:!0})):Vs(x)&&(d=x),this.__store.setState(g=>({...g,statusCode:l?l.status:d?404:g.matches.some(b=>b.status==="error")?500:200,redirect:l}))}this.latestLoadPromise===m&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),h()})}),this.latestLoadPromise=m,await m;this.latestLoadPromise&&m!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(h=>({...h,statusCode:404}))},this.startViewTransition=n=>{const l=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,l&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let d;if(typeof l=="object"&&this.isViewTransitionTypesSupported){const m=this.latestLocation,h=this.state.resolvedLocation,x=typeof l.types=="function"?l.types(xn({resolvedLocation:h,location:m})):l.types;if(x===!1){n();return}d={update:n,types:x}}else d=n;document.startViewTransition(d)}else n()},this.updateMatch=(n,l)=>{const d=this.state.pendingMatches?.some(m=>m.id===n)?"pendingMatches":this.state.matches.some(m=>m.id===n)?"matches":this.state.cachedMatches.some(m=>m.id===n)?"cachedMatches":"";d&&this.__store.setState(m=>({...m,[d]:m[d]?.map(h=>h.id===n?l(h):h)}))},this.getMatch=n=>{const l=d=>d.id===n;return this.state.cachedMatches.find(l)??this.state.pendingMatches?.find(l)??this.state.matches.find(l)},this.invalidate=n=>{const l=d=>n?.filter?.(d)??!0?{...d,invalid:!0,...n?.forcePending||d.status==="error"?{status:"pending",error:void 0}:void 0}:d;return this.__store.setState(d=>({...d,matches:d.matches.map(l),cachedMatches:d.cachedMatches.map(l),pendingMatches:d.pendingMatches?.map(l)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.resolveRedirect=n=>{if(!n.options.href){const l=this.buildLocation(n.options);let d=l.url;this.origin&&d.startsWith(this.origin)&&(d=d.replace(this.origin,"")||"/"),n.options.href=l.href,n.headers.set("Location",d)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const l=n?.filter;l!==void 0?this.__store.setState(d=>({...d,cachedMatches:d.cachedMatches.filter(m=>!l(m))})):this.__store.setState(d=>({...d,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=l=>{const d=this.looseRoutesById[l.routeId];if(!d.options.loader)return!0;const m=(l.preload?d.options.preloadGcTime??this.options.defaultPreloadGcTime:d.options.gcTime??this.options.defaultGcTime)??300*1e3;return l.status==="error"?!0:Date.now()-l.updatedAt>=m};this.clearCache({filter:n})},this.loadRouteChunk=ab,this.preloadRoute=async n=>{const l=this.buildLocation(n);let d=this.matchRoutes(l,{throwOnError:!0,preload:!0,dest:n});const m=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(x=>x.id)),h=new Set([...m,...this.state.cachedMatches.map(x=>x.id)]);ji(()=>{d.forEach(x=>{h.has(x.id)||this.__store.setState(g=>({...g,cachedMatches:[...g.cachedMatches,x]}))})});try{return d=await tg({router:this,matches:d,location:l,preload:!0,updateMatch:(x,g)=>{m.has(x)?d=d.map(b=>b.id===x?g(b):b):this.updateMatch(x,g)}}),d}catch(x){if(Os(x))return x.options.reloadDocument?void 0:await this.preloadRoute({...x.options,_fromLocation:l});Vs(x)||console.error(x);return}},this.matchRoute=(n,l)=>{const d={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},m=this.buildLocation(d);if(l?.pending&&this.state.status!=="pending")return!1;const x=(l?.pending===void 0?!this.state.isLoading:l.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,g=qm(x.pathname,{...l,to:m.pathname},this.parsePathnameCache);return!g||n.params&&!hn(g,n.params,{partial:!0})?!1:g&&(l?.includeSearch??!0)?hn(x.search,m.search,{partial:!0})?g:!1:g},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...i,caseSensitive:i.caseSensitive??!1,notFoundMode:i.notFoundMode??"fuzzy",stringifySearch:i.stringifySearch??BS,parseSearch:i.parseSearch??US}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(i,n){const{foundRoute:l,matchedRoutes:d,routeParams:m}=this.getMatchedRoutes(i.pathname,n?.dest?.to);let h=!1;(l?l.path!=="/"&&m["**"]:Gr(i.pathname))&&(this.options.notFoundRoute?d.push(this.options.notFoundRoute):h=!0);const x=(()=>{if(h){if(this.options.notFoundMode!=="root")for(let v=d.length-1;v>=0;v--){const f=d[v];if(f.children)return f.id}return Ja}})(),g=[],b=v=>v?.id?v.context??this.options.context??void 0:this.options.context??void 0;return d.forEach((v,f)=>{const N=g[f-1],[j,_,w]=(()=>{const oe=N?.search??i.search,Ce=N?._strictSearch??void 0;try{const ke=Bm(v.options.validateSearch,{...oe})??void 0;return[{...oe,...ke},{...Ce,...ke},void 0]}catch(ke){let Ee=ke;if(ke instanceof bc||(Ee=new bc(ke.message,{cause:ke})),n?.throwOnError)throw Ee;return[oe,{},Ee]}})(),C=v.options.loaderDeps?.({search:j})??"",E=C?JSON.stringify(C):"",{interpolatedPath:D,usedParams:L}=Kl({path:v.fullPath,params:m,decodeCharMap:this.pathParamsDecodeCharMap}),V=Kl({path:v.id,params:m,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+E,J=this.getMatch(V),ie=this.state.matches.find(oe=>oe.routeId===v.id),I=J?._strictParams??L;let k;if(!J){const oe=v.options.params?.parse??v.options.parseParams;if(oe)try{Object.assign(I,oe(I))}catch(Ce){if(k=new ew(Ce.message,{cause:Ce}),n?.throwOnError)throw k}}Object.assign(m,I);const be=ie?"stay":"enter";let te;if(J)te={...J,cause:be,params:ie?ys(ie.params,m):m,_strictParams:I,search:ys(ie?ie.search:J.search,j),_strictSearch:_};else{const oe=v.options.loader||v.options.beforeLoad||v.lazyFn||sb(v)?"pending":"success";te={id:V,index:f,routeId:v.id,params:ie?ys(ie.params,m):m,_strictParams:I,pathname:D,updatedAt:Date.now(),search:ie?ys(ie.search,j):j,_strictSearch:_,searchError:void 0,status:oe,isFetching:!1,error:void 0,paramsError:k,__routeContext:void 0,_nonReactive:{loadPromise:po()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:be,loaderDeps:ie?ys(ie.loaderDeps,C):C,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:v.options.staticData||{},fullPath:v.fullPath}}n?.preload||(te.globalNotFound=x===v.id),te.searchError=w;const G=b(N);te.context={...G,...te.__routeContext,...te.__beforeLoadContext},g.push(te)}),g.forEach((v,f)=>{const N=this.looseRoutesById[v.routeId];if(!this.getMatch(v.id)&&n?._buildLocation!==!0){const _=g[f-1],w=b(_);if(N.options.context){const C={deps:v.loaderDeps,params:v.params,context:w??{},location:i,navigate:E=>this.navigate({...E,_fromLocation:i}),buildLocation:this.buildLocation,cause:v.cause,abortController:v.abortController,preload:!!v.preload,matches:g};v.__routeContext=N.options.context(C)??void 0}v.context={...w,...v.__routeContext,...v.__beforeLoadContext}}}),g}}class bc extends Error{}class ew extends Error{}function tw(s){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:s,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Bm(s,i){if(s==null)return{};if("~standard"in s){const n=s["~standard"].validate(i);if(n instanceof Promise)throw new bc("Async validation not supported");if(n.issues)throw new bc(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in s?s.parse(i):typeof s=="function"?s(i):{}}function aw({pathname:s,routePathname:i,caseSensitive:n,routesByPath:l,routesById:d,flatRoutes:m,parseCache:h}){let x={};const g=Gr(s),b=j=>qm(g,{to:j.fullPath,caseSensitive:j.options?.caseSensitive??n,fuzzy:!0},h);let v=i!==void 0?l[i]:void 0;if(v)x=b(v);else{let j;for(const _ of m){const w=b(_);if(w)if(_.path!=="/"&&w["**"])j||(j={foundRoute:_,routeParams:w});else{v=_,x=w;break}}!v&&j&&(v=j.foundRoute,x=j.routeParams)}let f=v||d[Ja];const N=[f];for(;f.parentRoute;)f=f.parentRoute,N.push(f);return N.reverse(),{matchedRoutes:N,routeParams:x,foundRoute:v}}function sw({search:s,dest:i,destRoutes:n,_includeValidateSearch:l}){const d=n.reduce((x,g)=>{const b=[];if("search"in g.options)g.options.search?.middlewares&&b.push(...g.options.search.middlewares);else if(g.options.preSearchFilters||g.options.postSearchFilters){const v=({search:f,next:N})=>{let j=f;"preSearchFilters"in g.options&&g.options.preSearchFilters&&(j=g.options.preSearchFilters.reduce((w,C)=>C(w),f));const _=N(j);return"postSearchFilters"in g.options&&g.options.postSearchFilters?g.options.postSearchFilters.reduce((w,C)=>C(w),_):_};b.push(v)}if(l&&g.options.validateSearch){const v=({search:f,next:N})=>{const j=N(f);try{return{...j,...Bm(g.options.validateSearch,j)??void 0}}catch{return j}};b.push(v)}return x.concat(b)},[])??[],m=({search:x})=>i.search?i.search===!0?x:pn(i.search,x):{};d.push(m);const h=(x,g)=>{if(x>=d.length)return g;const b=d[x];return b({search:g,next:f=>h(x+1,f)})};return h(0,s)}const rw="Error preloading route! ";class ib{constructor(i){if(this.init=n=>{this.originalIndex=n.originalIndex;const l=this.options,d=!l?.path&&!l?.id;this.parentRoute=this.options.getParentRoute?.(),d?this._path=Ja:this.parentRoute||mr(!1);let m=d?Ja:l?.path;m&&m!=="/"&&(m=op(m));const h=l?.id||m;let x=d?Ja:ur([this.parentRoute.id===Ja?"":this.parentRoute.id,h]);m===Ja&&(m="/"),x!==Ja&&(x=ur(["/",x]));const g=x===Ja?"/":ur([this.parentRoute.fullPath,m]);this._path=m,this._id=x,this._fullPath=g,this._to=g},this.clone=n=>{this._path=n._path,this._id=n._id,this._fullPath=n._fullPath,this._to=n._to,this.options.getParentRoute=n.options.getParentRoute,this.children=n.children},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=i||{},this.isRoot=!i?.getParentRoute,i?.id&&i?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class nw extends ib{constructor(i){super(i)}}function ip(s){const i=s.errorComponent??Ec;return e.jsx(ow,{getResetKey:s.getResetKey,onCatch:s.onCatch,children:({error:n,reset:l})=>n?c.createElement(i,{error:n,reset:l}):s.children})}class ow extends c.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(i){return{resetKey:i.getResetKey()}}static getDerivedStateFromError(i){return{error:i}}reset(){this.setState({error:null})}componentDidUpdate(i,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(i,n){this.props.onCatch&&this.props.onCatch(i,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ec({error:s}){const[i,n]=c.useState(!1);return e.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[e.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),e.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(l=>!l),children:i?"Hide Error":"Show Error"})]}),e.jsx("div",{style:{height:".25rem"}}),i?e.jsx("div",{children:e.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:s.message?e.jsx("code",{children:s.message}):null})}):null]})}function iw({children:s,fallback:i=null}){return lw()?e.jsx(fa.Fragment,{children:s}):e.jsx(fa.Fragment,{children:i})}function lw(){return fa.useSyncExternalStore(cw,()=>!0,()=>!1)}function cw(){return()=>{}}var gm={exports:{}},bm={},vm={exports:{}},ym={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function dw(){if(ag)return ym;ag=1;var s=Ei();function i(f,N){return f===N&&(f!==0||1/f===1/N)||f!==f&&N!==N}var n=typeof Object.is=="function"?Object.is:i,l=s.useState,d=s.useEffect,m=s.useLayoutEffect,h=s.useDebugValue;function x(f,N){var j=N(),_=l({inst:{value:j,getSnapshot:N}}),w=_[0].inst,C=_[1];return m(function(){w.value=j,w.getSnapshot=N,g(w)&&C({inst:w})},[f,j,N]),d(function(){return g(w)&&C({inst:w}),f(function(){g(w)&&C({inst:w})})},[f]),h(j),j}function g(f){var N=f.getSnapshot;f=f.value;try{var j=N();return!n(f,j)}catch{return!0}}function b(f,N){return N()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b:x;return ym.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:v,ym}var sg;function uw(){return sg||(sg=1,vm.exports=dw()),vm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function mw(){if(rg)return bm;rg=1;var s=Ei(),i=uw();function n(b,v){return b===v&&(b!==0||1/b===1/v)||b!==b&&v!==v}var l=typeof Object.is=="function"?Object.is:n,d=i.useSyncExternalStore,m=s.useRef,h=s.useEffect,x=s.useMemo,g=s.useDebugValue;return bm.useSyncExternalStoreWithSelector=function(b,v,f,N,j){var _=m(null);if(_.current===null){var w={hasValue:!1,value:null};_.current=w}else w=_.current;_=x(function(){function E(ie){if(!D){if(D=!0,L=ie,ie=N(ie),j!==void 0&&w.hasValue){var I=w.value;if(j(I,ie))return V=I}return V=ie}if(I=V,l(L,ie))return I;var k=N(ie);return j!==void 0&&j(I,k)?(L=ie,I):(L=ie,V=k)}var D=!1,L,V,J=f===void 0?null:f;return[function(){return E(v())},J===null?void 0:function(){return E(J())}]},[v,f,N,j]);var C=d(b,_[0],_[1]);return h(function(){w.hasValue=!0,w.value=C},[C]),g(C),C},bm}var ng;function pw(){return ng||(ng=1,gm.exports=mw()),gm.exports}var hw=pw();function xw(s,i=n=>n){return hw.useSyncExternalStoreWithSelector(s.subscribe,()=>s.state,()=>s.state,i,fw)}function fw(s,i){if(Object.is(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;if(s instanceof Map&&i instanceof Map){if(s.size!==i.size)return!1;for(const[l,d]of s)if(!i.has(l)||!Object.is(d,i.get(l)))return!1;return!0}if(s instanceof Set&&i instanceof Set){if(s.size!==i.size)return!1;for(const l of s)if(!i.has(l))return!1;return!0}if(s instanceof Date&&i instanceof Date)return s.getTime()===i.getTime();const n=og(s);if(n.length!==og(i).length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(i,n[l])||!Object.is(s[n[l]],i[n[l]]))return!1;return!0}function og(s){return Object.keys(s).concat(Object.getOwnPropertySymbols(s))}const Nm=c.createContext(null);function lb(){return typeof document>"u"?Nm:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Nm,Nm)}function cs(s){const i=c.useContext(lb());return s?.warn,i}function $a(s){const i=cs({warn:s?.router===void 0}),n=s?.router||i,l=c.useRef(void 0);return xw(n.__store,d=>{if(s?.select){if(s.structuralSharing??n.options.defaultStructuralSharing){const m=ys(l.current,s.select(d));return l.current=m,m}return s.select(d)}return d})}const Rc=c.createContext(void 0),gw=c.createContext(void 0);function Fs(s){const i=c.useContext(s.from?gw:Rc);return $a({select:l=>{const d=l.matches.find(m=>s.from?s.from===m.routeId:m.id===i);if(mr(!((s.shouldThrow??!0)&&!d),`Could not find ${s.from?`an active match from "${s.from}"`:"a nearest match!"}`),d!==void 0)return s.select?s.select(d):d},structuralSharing:s.structuralSharing})}function lp(s){return Fs({from:s.from,strict:s.strict,structuralSharing:s.structuralSharing,select:i=>s.select?s.select(i.loaderData):i.loaderData})}function cp(s){const{select:i,...n}=s;return Fs({...n,select:l=>i?i(l.loaderDeps):l.loaderDeps})}function dp(s){return Fs({from:s.from,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,strict:s.strict,select:i=>{const n=s.strict===!1?i.params:i._strictParams;return s.select?s.select(n):n}})}function up(s){return Fs({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:i=>s.select?s.select(i.search):i.search})}function mp(s){const i=cs();return c.useCallback(n=>i.navigate({...n,from:n.from??s?.from}),[s?.from,i])}var Lc=Gg();const bw=Hg(Lc),Ql=typeof window<"u"?c.useLayoutEffect:c.useEffect;function jm(s){const i=c.useRef({value:s,prev:null}),n=i.current.value;return s!==n&&(i.current={value:s,prev:n}),i.current.prev}function vw(s,i,n={},l={}){c.useEffect(()=>{if(!s.current||l.disabled||typeof IntersectionObserver!="function")return;const d=new IntersectionObserver(([m])=>{i(m)},n);return d.observe(s.current),()=>{d.disconnect()}},[i,n,l.disabled,s])}function yw(s){const i=c.useRef(null);return c.useImperativeHandle(s,()=>i.current,[]),i}function Nw(s,i){const n=cs(),[l,d]=c.useState(!1),m=c.useRef(!1),h=yw(i),{activeProps:x,inactiveProps:g,activeOptions:b,to:v,preload:f,preloadDelay:N,hashScrollIntoView:j,replace:_,startTransition:w,resetScroll:C,viewTransition:E,children:D,target:L,disabled:V,style:J,className:ie,onClick:I,onFocus:k,onMouseEnter:be,onMouseLeave:te,onTouchStart:G,ignoreBlocker:oe,params:Ce,search:ke,hash:Ee,state:P,mask:Q,reloadDocument:F,unsafeRelative:ue,from:qe,_fromLocation:T,...W}=s,re=$a({select:ze=>ze.location.search,structuralSharing:!0}),A=s.from,K=c.useMemo(()=>({...s,from:A}),[n,re,A,s._fromLocation,s.hash,s.to,s.search,s.params,s.state,s.mask,s.unsafeRelative]),M=c.useMemo(()=>n.buildLocation({...K}),[n,K]),O=c.useMemo(()=>{if(V)return;let ze=M.maskedLocation?M.maskedLocation.url:M.url,_e=!1;return n.origin&&(ze.startsWith(n.origin)?ze=n.history.createHref(ze.replace(n.origin,""))||"/":_e=!0),{href:ze,external:_e}},[V,M.maskedLocation,M.url,n.origin,n.history]),q=c.useMemo(()=>{if(O?.external)return O.href;try{return new URL(v),v}catch{}},[v,O]),$=s.reloadDocument||q?!1:f??n.options.defaultPreload,ve=N??n.options.defaultPreloadDelay??0,Z=$a({select:ze=>{if(q)return!1;if(b?.exact){if(!cS(ze.location.pathname,M.pathname,n.basepath))return!1}else{const _e=xc(ze.location.pathname,n.basepath),Xe=xc(M.pathname,n.basepath);if(!(_e.startsWith(Xe)&&(_e.length===Xe.length||_e[Xe.length]==="/")))return!1}return(b?.includeSearch??!0)&&!hn(ze.location.search,M.search,{partial:!b?.exact,ignoreUndefined:!b?.explicitUndefined})?!1:b?.includeHash?ze.location.hash===M.hash:!0}}),z=c.useCallback(()=>{n.preloadRoute({...K}).catch(ze=>{console.warn(ze),console.warn(rw)})},[n,K]),Oe=c.useCallback(ze=>{ze?.isIntersecting&&z()},[z]);vw(h,Oe,Tw,{disabled:!!V||$!=="viewport"}),c.useEffect(()=>{m.current||!V&&$==="render"&&(z(),m.current=!0)},[V,z,$]);const Re=ze=>{const _e=ze.currentTarget.target,Xe=L!==void 0?L:_e;if(!V&&!kw(ze)&&!ze.defaultPrevented&&(!Xe||Xe==="_self")&&ze.button===0){ze.preventDefault(),Lc.flushSync(()=>{d(!0)});const We=n.subscribe("onResolved",()=>{We(),d(!1)});n.navigate({...K,replace:_,resetScroll:C,hashScrollIntoView:j,startTransition:w,viewTransition:E,ignoreBlocker:oe})}};if(q)return{...W,ref:h,href:q,...D&&{children:D},...L&&{target:L},...V&&{disabled:V},...J&&{style:J},...ie&&{className:ie},...I&&{onClick:I},...k&&{onFocus:k},...be&&{onMouseEnter:be},...te&&{onMouseLeave:te},...G&&{onTouchStart:G}};const ae=ze=>{V||$&&z()},se=ae,rt=ze=>{if(!(V||!$))if(!ve)z();else{const _e=ze.target;if(fi.has(_e))return;const Xe=setTimeout(()=>{fi.delete(_e),z()},ve);fi.set(_e,Xe)}},jt=ze=>{if(V||!$||!ve)return;const _e=ze.target,Xe=fi.get(_e);Xe&&(clearTimeout(Xe),fi.delete(_e))},fe=Z?pn(x,{})??jw:_m,Me=Z?_m:pn(g,{})??_m,De=[ie,fe.className,Me.className].filter(Boolean).join(" "),Ge=(J||fe.style||Me.style)&&{...J,...fe.style,...Me.style};return{...W,...fe,...Me,href:O?.href,ref:h,onClick:gi([I,Re]),onFocus:gi([k,ae]),onMouseEnter:gi([be,rt]),onMouseLeave:gi([te,jt]),onTouchStart:gi([G,se]),disabled:!!V,target:L,...Ge&&{style:Ge},...De&&{className:De},...V&&_w,...Z&&Sw,...l&&ww}}const _m={},jw={className:"active"},_w={role:"link","aria-disabled":!0},Sw={"data-status":"active","aria-current":"page"},ww={"data-transitioning":"transitioning"},fi=new WeakMap,Tw={rootMargin:"100px"},gi=s=>i=>{for(const n of s)if(n){if(i.defaultPrevented)return;n(i)}},qs=c.forwardRef((s,i)=>{const{_asChild:n,...l}=s,{type:d,ref:m,...h}=Nw(l,i),x=typeof l.children=="function"?l.children({isActive:h["data-status"]==="active"}):l.children;return n===void 0&&delete h.disabled,c.createElement(n||"a",{...h,ref:m},x)});function kw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}let Cw=class extends ib{constructor(i){super(i),this.useMatch=n=>Fs({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Fs({...n,from:this.id,select:l=>n?.select?n.select(l.context):l.context}),this.useSearch=n=>up({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>dp({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>cp({...n,from:this.id}),this.useLoaderData=n=>lp({...n,from:this.id}),this.useNavigate=()=>mp({from:this.fullPath}),this.Link=fa.forwardRef((n,l)=>e.jsx(qs,{ref:l,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}};function Aw(s){return new Cw(s)}class Ew extends nw{constructor(i){super(i),this.useMatch=n=>Fs({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Fs({...n,from:this.id,select:l=>n?.select?n.select(l.context):l.context}),this.useSearch=n=>up({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>dp({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>cp({...n,from:this.id}),this.useLoaderData=n=>lp({...n,from:this.id}),this.useNavigate=()=>mp({from:this.fullPath}),this.Link=fa.forwardRef((n,l)=>e.jsx(qs,{ref:l,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function Rw(s){return new Ew(s)}function Sa(s){return typeof s=="object"?new ig(s,{silent:!0}).createRoute(s):new ig(s,{silent:!0}).createRoute}class ig{constructor(i,n){this.path=i,this.createRoute=l=>{this.silent;const d=Aw(l);return d.isRoot=!1,d},this.silent=n?.silent}}class lg{constructor(i){this.useMatch=n=>Fs({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Fs({from:this.options.id,select:l=>n?.select?n.select(l.context):l.context}),this.useSearch=n=>up({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>dp({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>cp({...n,from:this.options.id}),this.useLoaderData=n=>lp({...n,from:this.options.id}),this.useNavigate=()=>{const n=cs();return mp({from:n.routesById[this.options.id].fullPath})},this.options=i,this.$$typeof=Symbol.for("react.memo")}}function cg(s){return typeof s=="object"?new lg(s):i=>new lg({id:s,...i})}function Lw(){const s=cs(),i=c.useRef({router:s,mounted:!1}),[n,l]=c.useState(!1),{hasPendingMatches:d,isLoading:m}=$a({select:f=>({isLoading:f.isLoading,hasPendingMatches:f.matches.some(N=>N.status==="pending")}),structuralSharing:!0}),h=jm(m),x=m||n||d,g=jm(x),b=m||d,v=jm(b);return s.startTransition=f=>{l(!0),c.startTransition(()=>{f(),l(!1)})},c.useEffect(()=>{const f=s.history.subscribe(s.load),N=s.buildLocation({to:s.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Gr(s.latestLocation.href)!==Gr(N.href)&&s.commitLocation({...N,replace:!0}),()=>{f()}},[s,s.history]),Ql(()=>{if(typeof window<"u"&&s.ssr||i.current.router===s&&i.current.mounted)return;i.current={router:s,mounted:!0},(async()=>{try{await s.load()}catch(N){console.error(N)}})()},[s]),Ql(()=>{h&&!m&&s.emit({type:"onLoad",...xn(s.state)})},[h,s,m]),Ql(()=>{v&&!b&&s.emit({type:"onBeforeRouteMount",...xn(s.state)})},[b,v,s]),Ql(()=>{g&&!x&&(s.emit({type:"onResolved",...xn(s.state)}),s.__store.setState(f=>({...f,status:"idle",resolvedLocation:f.location})),DS(s))},[x,g,s]),null}function Mw(s){const i=$a({select:n=>`not-found-${n.location.pathname}-${n.status}`});return e.jsx(ip,{getResetKey:()=>i,onCatch:(n,l)=>{if(Vs(n))s.onCatch?.(n,l);else throw n},errorComponent:({error:n})=>{if(Vs(n))return s.fallback?.(n);throw n},children:s.children})}function Pw(){return e.jsx("p",{children:"Not Found"})}function oo(s){return e.jsx(e.Fragment,{children:s.children})}function cb(s,i,n){return i.options.notFoundComponent?e.jsx(i.options.notFoundComponent,{data:n}):s.options.defaultNotFoundComponent?e.jsx(s.options.defaultNotFoundComponent,{data:n}):e.jsx(Pw,{})}function Iw({children:s}){const i=cs();return i.isServer?e.jsx("script",{nonce:i.options.ssr?.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[s].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function Ow(){const s=cs();if(!s.isScrollRestoring||!s.isServer||typeof s.options.scrollRestoration=="function"&&!s.options.scrollRestoration({location:s.latestLocation}))return null;const n=(s.options.getScrollRestorationKey||Um)(s.latestLocation),l=n!==Um(s.latestLocation)?n:void 0,d={storageKey:fc,shouldScrollRestoration:!0};return l&&(d.key=l),e.jsx(Iw,{children:`(${Qg.toString()})(${JSON.stringify(d)})`})}const db=c.memo(function({matchId:i}){const n=cs(),l=$a({select:E=>{const D=E.matches.find(L=>L.id===i);return mr(D),{routeId:D.routeId,ssr:D.ssr,_displayPending:D._displayPending}},structuralSharing:!0}),d=n.routesById[l.routeId],m=d.options.pendingComponent??n.options.defaultPendingComponent,h=m?e.jsx(m,{}):null,x=d.options.errorComponent??n.options.defaultErrorComponent,g=d.options.onCatch??n.options.defaultOnCatch,b=d.isRoot?d.options.notFoundComponent??n.options.notFoundRoute?.options.component:d.options.notFoundComponent,v=l.ssr===!1||l.ssr==="data-only",f=(!d.isRoot||d.options.wrapInSuspense||v)&&(d.options.wrapInSuspense??m??(d.options.errorComponent?.preload||v))?c.Suspense:oo,N=x?ip:oo,j=b?Mw:oo,_=$a({select:E=>E.loadedAt}),w=$a({select:E=>{const D=E.matches.findIndex(L=>L.id===i);return E.matches[D-1]?.routeId}}),C=d.isRoot?d.options.shellComponent??oo:oo;return e.jsxs(C,{children:[e.jsx(Rc.Provider,{value:i,children:e.jsx(f,{fallback:h,children:e.jsx(N,{getResetKey:()=>_,errorComponent:x||Ec,onCatch:(E,D)=>{if(Vs(E))throw E;g?.(E,D)},children:e.jsx(j,{fallback:E=>{if(!b||E.routeId&&E.routeId!==l.routeId||!E.routeId&&!d.isRoot)throw E;return c.createElement(b,E)},children:v||l._displayPending?e.jsx(iw,{fallback:h,children:e.jsx(dg,{matchId:i})}):e.jsx(dg,{matchId:i})})})})}),w===Ja&&n.options.scrollRestoration?e.jsxs(e.Fragment,{children:[e.jsx(Dw,{}),e.jsx(Ow,{})]}):null]})});function Dw(){const s=cs(),i=c.useRef(void 0);return e.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(i.current===void 0||i.current.href!==s.latestLocation.href)&&(s.emit({type:"onRendered",...xn(s.state)}),i.current=s.latestLocation)}},s.latestLocation.state.__TSR_key)}const dg=c.memo(function({matchId:i}){const n=cs(),{match:l,key:d,routeId:m}=$a({select:g=>{const b=g.matches.find(_=>_.id===i),v=b.routeId,N=(n.routesById[v].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:v,loaderDeps:b.loaderDeps,params:b._strictParams,search:b._strictSearch});return{key:N?JSON.stringify(N):void 0,routeId:v,match:{id:b.id,status:b.status,error:b.error,_forcePending:b._forcePending,_displayPending:b._displayPending}}},structuralSharing:!0}),h=n.routesById[m],x=c.useMemo(()=>{const g=h.options.component??n.options.defaultComponent;return g?e.jsx(g,{},d):e.jsx(ub,{})},[d,h.options.component,n.options.defaultComponent]);if(l._displayPending)throw n.getMatch(l.id)?._nonReactive.displayPendingPromise;if(l._forcePending)throw n.getMatch(l.id)?._nonReactive.minPendingPromise;if(l.status==="pending"){const g=h.options.pendingMinMs??n.options.defaultPendingMinMs;if(g){const b=n.getMatch(l.id);if(b&&!b._nonReactive.minPendingPromise&&!n.isServer){const v=po();b._nonReactive.minPendingPromise=v,setTimeout(()=>{v.resolve(),b._nonReactive.minPendingPromise=void 0},g)}}throw n.getMatch(l.id)?._nonReactive.loadPromise}if(l.status==="notFound")return mr(Vs(l.error)),cb(n,h,l.error);if(l.status==="redirected")throw mr(Os(l.error)),n.getMatch(l.id)?._nonReactive.loadPromise;if(l.status==="error"){if(n.isServer){const g=(h.options.errorComponent??n.options.defaultErrorComponent)||Ec;return e.jsx(g,{error:l.error,reset:void 0,info:{componentStack:""}})}throw l.error}return x}),ub=c.memo(function(){const i=cs(),n=c.useContext(Rc),l=$a({select:b=>b.matches.find(v=>v.id===n)?.routeId}),d=i.routesById[l],m=$a({select:b=>{const f=b.matches.find(N=>N.id===n);return mr(f),f.globalNotFound}}),h=$a({select:b=>{const v=b.matches,f=v.findIndex(N=>N.id===n);return v[f+1]?.id}}),x=i.options.defaultPendingComponent?e.jsx(i.options.defaultPendingComponent,{}):null;if(m)return cb(i,d,void 0);if(!h)return null;const g=e.jsx(db,{matchId:h});return n===Ja?e.jsx(c.Suspense,{fallback:x,children:g}):g});function zw(){const s=cs(),n=s.routesById[Ja].options.pendingComponent??s.options.defaultPendingComponent,l=n?e.jsx(n,{}):null,d=s.isServer||typeof document<"u"&&s.ssr?oo:c.Suspense,m=e.jsxs(d,{fallback:l,children:[!s.isServer&&e.jsx(Lw,{}),e.jsx(qw,{})]});return s.options.InnerWrap?e.jsx(s.options.InnerWrap,{children:m}):m}function qw(){const s=cs(),i=$a({select:d=>d.matches[0]?.id}),n=$a({select:d=>d.loadedAt}),l=i?e.jsx(db,{matchId:i}):null;return e.jsx(Rc.Provider,{value:i,children:s.options.disableGlobalCatchBoundary?l:e.jsx(ip,{getResetKey:()=>n,errorComponent:Ec,onCatch:d=>{d.message||d.toString()},children:l})})}const Uw=s=>new Bw(s);class Bw extends JS{constructor(i){super(i)}}typeof globalThis<"u"?(globalThis.createFileRoute=Sa,globalThis.createLazyFileRoute=cg):typeof window<"u"&&(window.createFileRoute=Sa,window.createLazyFileRoute=cg);function Vw({router:s,children:i,...n}){Object.keys(n).length>0&&s.update({...s.options,...n,context:{...s.options.context,...n.context}});const l=lb(),d=e.jsx(l.Provider,{value:s,children:i});return s.options.Wrap?e.jsx(s.options.Wrap,{children:d}):d}function Fw({router:s,...i}){return e.jsx(Vw,{router:s,...i,children:e.jsx(zw,{})})}function Hw(s){return $a({select:i=>s?.select?s.select(i.location):i.location})}function ug(s,i){if(typeof s=="function")return s(i);s!=null&&(s.current=i)}function Mc(...s){return i=>{let n=!1;const l=s.map(d=>{const m=ug(d,i);return!n&&typeof m=="function"&&(n=!0),m});if(n)return()=>{for(let d=0;d<l.length;d++){const m=l[d];typeof m=="function"?m():ug(s[d],null)}}}}function xa(...s){return c.useCallback(Mc(...s),s)}function fo(s){const i=$w(s),n=c.forwardRef((l,d)=>{const{children:m,...h}=l,x=c.Children.toArray(m),g=x.find(Ww);if(g){const b=g.props.children,v=x.map(f=>f===g?c.Children.count(b)>1?c.Children.only(null):c.isValidElement(b)?b.props.children:null:f);return e.jsx(i,{...h,ref:d,children:c.isValidElement(b)?c.cloneElement(b,void 0,v):null})}return e.jsx(i,{...h,ref:d,children:m})});return n.displayName=`${s}.Slot`,n}var pp=fo("Slot");function $w(s){const i=c.forwardRef((n,l)=>{const{children:d,...m}=n;if(c.isValidElement(d)){const h=Yw(d),x=Kw(m,d.props);return d.type!==c.Fragment&&(x.ref=l?Mc(l,h):h),c.cloneElement(d,x)}return c.Children.count(d)>1?c.Children.only(null):null});return i.displayName=`${s}.SlotClone`,i}var mb=Symbol("radix.slottable");function Gw(s){const i=({children:n})=>e.jsx(e.Fragment,{children:n});return i.displayName=`${s}.Slottable`,i.__radixId=mb,i}function Ww(s){return c.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===mb}function Kw(s,i){const n={...i};for(const l in i){const d=s[l],m=i[l];/^on[A-Z]/.test(l)?d&&m?n[l]=(...x)=>{const g=m(...x);return d(...x),g}:d&&(n[l]=d):l==="style"?n[l]={...d,...m}:l==="className"&&(n[l]=[d,m].filter(Boolean).join(" "))}return{...s,...n}}function Yw(s){let i=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=i&&"isReactWarning"in i&&i.isReactWarning;return n?s.ref:(i=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=i&&"isReactWarning"in i&&i.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}function pb(s){var i,n,l="";if(typeof s=="string"||typeof s=="number")l+=s;else if(typeof s=="object")if(Array.isArray(s)){var d=s.length;for(i=0;i<d;i++)s[i]&&(n=pb(s[i]))&&(l&&(l+=" "),l+=n)}else for(n in s)s[n]&&(l&&(l+=" "),l+=n);return l}function hb(){for(var s,i,n=0,l="",d=arguments.length;n<d;n++)(s=arguments[n])&&(i=pb(s))&&(l&&(l+=" "),l+=i);return l}const mg=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,pg=hb,Xw=(s,i)=>n=>{var l;if(i?.variants==null)return pg(s,n?.class,n?.className);const{variants:d,defaultVariants:m}=i,h=Object.keys(d).map(b=>{const v=n?.[b],f=m?.[b];if(v===null)return null;const N=mg(v)||mg(f);return d[b][N]}),x=n&&Object.entries(n).reduce((b,v)=>{let[f,N]=v;return N===void 0||(b[f]=N),b},{}),g=i==null||(l=i.compoundVariants)===null||l===void 0?void 0:l.reduce((b,v)=>{let{class:f,className:N,...j}=v;return Object.entries(j).every(_=>{let[w,C]=_;return Array.isArray(C)?C.includes({...m,...x}[w]):{...m,...x}[w]===C})?[...b,f,N]:b},[]);return pg(s,h,g,n?.class,n?.className)};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,n,l)=>l?l.toUpperCase():n.toLowerCase()),hg=s=>{const i=Zw(s);return i.charAt(0).toUpperCase()+i.slice(1)},xb=(...s)=>s.filter((i,n,l)=>!!i&&i.trim()!==""&&l.indexOf(i)===n).join(" ").trim(),Jw=s=>{for(const i in s)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=c.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:m,iconNode:h,...x},g)=>c.createElement("svg",{ref:g,...e1,width:i,height:i,stroke:s,strokeWidth:l?Number(n)*24/Number(i):n,className:xb("lucide",d),...!m&&!Jw(x)&&{"aria-hidden":"true"},...x},[...h.map(([b,v])=>c.createElement(b,v)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=(s,i)=>{const n=c.forwardRef(({className:l,...d},m)=>c.createElement(t1,{ref:m,iconNode:i,className:xb(`lucide-${Qw(hg(s))}`,`lucide-${s}`,l),...d}));return n.displayName=hg(s),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ia=va("book-open",a1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],r1=va("chevron-down",s1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fb=va("chevron-right",n1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gb=va("circle-alert",o1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xg=va("circle-check-big",i1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],c1=va("circle-x",l1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],oa=va("code",d1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],bb=va("database",u1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Va=va("file-text",m1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],h1=va("house",p1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],f1=va("info",x1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],b1=va("lightbulb",g1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vb=va("lock",v1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M5 12h14",key:"1ays0h"}]],go=va("minus",y1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ct=va("pause",N1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nt=va("play",j1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dr=va("plus",_1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],it=va("rotate-ccw",S1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pc=va("settings",w1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],k1=va("shield",T1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vn=va("trending-down",C1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yn=va("triangle-alert",A1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yb=va("users",E1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],L1=va("x",R1);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hp=va("zap",M1),xp="-",P1=s=>{const i=O1(s),{conflictingClassGroups:n,conflictingClassGroupModifiers:l}=s;return{getClassGroupId:h=>{const x=h.split(xp);return x[0]===""&&x.length!==1&&x.shift(),Nb(x,i)||I1(h)},getConflictingClassGroupIds:(h,x)=>{const g=n[h]||[];return x&&l[h]?[...g,...l[h]]:g}}},Nb=(s,i)=>{if(s.length===0)return i.classGroupId;const n=s[0],l=i.nextPart.get(n),d=l?Nb(s.slice(1),l):void 0;if(d)return d;if(i.validators.length===0)return;const m=s.join(xp);return i.validators.find(({validator:h})=>h(m))?.classGroupId},fg=/^\[(.+)\]$/,I1=s=>{if(fg.test(s)){const i=fg.exec(s)[1],n=i?.substring(0,i.indexOf(":"));if(n)return"arbitrary.."+n}},O1=s=>{const{theme:i,classGroups:n}=s,l={nextPart:new Map,validators:[]};for(const d in n)Vm(n[d],l,d,i);return l},Vm=(s,i,n,l)=>{s.forEach(d=>{if(typeof d=="string"){const m=d===""?i:gg(i,d);m.classGroupId=n;return}if(typeof d=="function"){if(D1(d)){Vm(d(l),i,n,l);return}i.validators.push({validator:d,classGroupId:n});return}Object.entries(d).forEach(([m,h])=>{Vm(h,gg(i,m),n,l)})})},gg=(s,i)=>{let n=s;return i.split(xp).forEach(l=>{n.nextPart.has(l)||n.nextPart.set(l,{nextPart:new Map,validators:[]}),n=n.nextPart.get(l)}),n},D1=s=>s.isThemeGetter,z1=s=>{if(s<1)return{get:()=>{},set:()=>{}};let i=0,n=new Map,l=new Map;const d=(m,h)=>{n.set(m,h),i++,i>s&&(i=0,l=n,n=new Map)};return{get(m){let h=n.get(m);if(h!==void 0)return h;if((h=l.get(m))!==void 0)return d(m,h),h},set(m,h){n.has(m)?n.set(m,h):d(m,h)}}},Fm="!",Hm=":",q1=Hm.length,U1=s=>{const{prefix:i,experimentalParseClassName:n}=s;let l=d=>{const m=[];let h=0,x=0,g=0,b;for(let _=0;_<d.length;_++){let w=d[_];if(h===0&&x===0){if(w===Hm){m.push(d.slice(g,_)),g=_+q1;continue}if(w==="/"){b=_;continue}}w==="["?h++:w==="]"?h--:w==="("?x++:w===")"&&x--}const v=m.length===0?d:d.substring(g),f=B1(v),N=f!==v,j=b&&b>g?b-g:void 0;return{modifiers:m,hasImportantModifier:N,baseClassName:f,maybePostfixModifierPosition:j}};if(i){const d=i+Hm,m=l;l=h=>h.startsWith(d)?m(h.substring(d.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:h,maybePostfixModifierPosition:void 0}}if(n){const d=l;l=m=>n({className:m,parseClassName:d})}return l},B1=s=>s.endsWith(Fm)?s.substring(0,s.length-1):s.startsWith(Fm)?s.substring(1):s,V1=s=>{const i=Object.fromEntries(s.orderSensitiveModifiers.map(l=>[l,!0]));return l=>{if(l.length<=1)return l;const d=[];let m=[];return l.forEach(h=>{h[0]==="["||i[h]?(d.push(...m.sort(),h),m=[]):m.push(h)}),d.push(...m.sort()),d}},F1=s=>({cache:z1(s.cacheSize),parseClassName:U1(s),sortModifiers:V1(s),...P1(s)}),H1=/\s+/,$1=(s,i)=>{const{parseClassName:n,getClassGroupId:l,getConflictingClassGroupIds:d,sortModifiers:m}=i,h=[],x=s.trim().split(H1);let g="";for(let b=x.length-1;b>=0;b-=1){const v=x[b],{isExternal:f,modifiers:N,hasImportantModifier:j,baseClassName:_,maybePostfixModifierPosition:w}=n(v);if(f){g=v+(g.length>0?" "+g:g);continue}let C=!!w,E=l(C?_.substring(0,w):_);if(!E){if(!C){g=v+(g.length>0?" "+g:g);continue}if(E=l(_),!E){g=v+(g.length>0?" "+g:g);continue}C=!1}const D=m(N).join(":"),L=j?D+Fm:D,V=L+E;if(h.includes(V))continue;h.push(V);const J=d(E,C);for(let ie=0;ie<J.length;++ie){const I=J[ie];h.push(L+I)}g=v+(g.length>0?" "+g:g)}return g};function G1(){let s=0,i,n,l="";for(;s<arguments.length;)(i=arguments[s++])&&(n=jb(i))&&(l&&(l+=" "),l+=n);return l}const jb=s=>{if(typeof s=="string")return s;let i,n="";for(let l=0;l<s.length;l++)s[l]&&(i=jb(s[l]))&&(n&&(n+=" "),n+=i);return n};function W1(s,...i){let n,l,d,m=h;function h(g){const b=i.reduce((v,f)=>f(v),s());return n=F1(b),l=n.cache.get,d=n.cache.set,m=x,x(g)}function x(g){const b=l(g);if(b)return b;const v=$1(g,n);return d(g,v),v}return function(){return m(G1.apply(null,arguments))}}const Pa=s=>{const i=n=>n[s]||[];return i.isThemeGetter=!0,i},_b=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Sb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,K1=/^\d+\/\d+$/,Y1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,X1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Z1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,J1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ao=s=>K1.test(s),Vt=s=>!!s&&!Number.isNaN(Number(s)),Br=s=>!!s&&Number.isInteger(Number(s)),Sm=s=>s.endsWith("%")&&Vt(s.slice(0,-1)),cr=s=>Y1.test(s),e4=()=>!0,t4=s=>X1.test(s)&&!Q1.test(s),wb=()=>!1,a4=s=>Z1.test(s),s4=s=>J1.test(s),r4=s=>!yt(s)&&!Nt(s),n4=s=>yo(s,Cb,wb),yt=s=>_b.test(s),mn=s=>yo(s,Ab,t4),wm=s=>yo(s,d4,Vt),bg=s=>yo(s,Tb,wb),o4=s=>yo(s,kb,s4),Zl=s=>yo(s,Eb,a4),Nt=s=>Sb.test(s),bi=s=>No(s,Ab),i4=s=>No(s,u4),vg=s=>No(s,Tb),l4=s=>No(s,Cb),c4=s=>No(s,kb),Jl=s=>No(s,Eb,!0),yo=(s,i,n)=>{const l=_b.exec(s);return l?l[1]?i(l[1]):n(l[2]):!1},No=(s,i,n=!1)=>{const l=Sb.exec(s);return l?l[1]?i(l[1]):n:!1},Tb=s=>s==="position"||s==="percentage",kb=s=>s==="image"||s==="url",Cb=s=>s==="length"||s==="size"||s==="bg-size",Ab=s=>s==="length",d4=s=>s==="number",u4=s=>s==="family-name",Eb=s=>s==="shadow",m4=()=>{const s=Pa("color"),i=Pa("font"),n=Pa("text"),l=Pa("font-weight"),d=Pa("tracking"),m=Pa("leading"),h=Pa("breakpoint"),x=Pa("container"),g=Pa("spacing"),b=Pa("radius"),v=Pa("shadow"),f=Pa("inset-shadow"),N=Pa("text-shadow"),j=Pa("drop-shadow"),_=Pa("blur"),w=Pa("perspective"),C=Pa("aspect"),E=Pa("ease"),D=Pa("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...V(),Nt,yt],ie=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],k=()=>[Nt,yt,g],be=()=>[ao,"full","auto",...k()],te=()=>[Br,"none","subgrid",Nt,yt],G=()=>["auto",{span:["full",Br,Nt,yt]},Br,Nt,yt],oe=()=>[Br,"auto",Nt,yt],Ce=()=>["auto","min","max","fr",Nt,yt],ke=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...k()],Q=()=>[ao,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],F=()=>[s,Nt,yt],ue=()=>[...V(),vg,bg,{position:[Nt,yt]}],qe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],T=()=>["auto","cover","contain",l4,n4,{size:[Nt,yt]}],W=()=>[Sm,bi,mn],re=()=>["","none","full",b,Nt,yt],A=()=>["",Vt,bi,mn],K=()=>["solid","dashed","dotted","double"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>[Vt,Sm,vg,bg],q=()=>["","none",_,Nt,yt],$=()=>["none",Vt,Nt,yt],ve=()=>["none",Vt,Nt,yt],Z=()=>[Vt,Nt,yt],z=()=>[ao,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cr],breakpoint:[cr],color:[e4],container:[cr],"drop-shadow":[cr],ease:["in","out","in-out"],font:[r4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cr],shadow:[cr],spacing:["px",Vt],text:[cr],"text-shadow":[cr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ao,yt,Nt,C]}],container:["container"],columns:[{columns:[Vt,yt,Nt,x]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:be()}],"inset-x":[{"inset-x":be()}],"inset-y":[{"inset-y":be()}],start:[{start:be()}],end:[{end:be()}],top:[{top:be()}],right:[{right:be()}],bottom:[{bottom:be()}],left:[{left:be()}],visibility:["visible","invisible","collapse"],z:[{z:[Br,"auto",Nt,yt]}],basis:[{basis:[ao,"full","auto",x,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Vt,ao,"auto","initial","none",yt]}],grow:[{grow:["",Vt,Nt,yt]}],shrink:[{shrink:["",Vt,Nt,yt]}],order:[{order:[Br,"first","last","none",Nt,yt]}],"grid-cols":[{"grid-cols":te()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":te()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ce()}],"auto-rows":[{"auto-rows":Ce()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...ke(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...ke()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":ke()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:Q()}],w:[{w:[x,"screen",...Q()]}],"min-w":[{"min-w":[x,"screen","none",...Q()]}],"max-w":[{"max-w":[x,"screen","none","prose",{screen:[h]},...Q()]}],h:[{h:["screen","lh",...Q()]}],"min-h":[{"min-h":["screen","lh","none",...Q()]}],"max-h":[{"max-h":["screen","lh",...Q()]}],"font-size":[{text:["base",n,bi,mn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,Nt,wm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sm,yt]}],"font-family":[{font:[i4,yt,i]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,Nt,yt]}],"line-clamp":[{"line-clamp":[Vt,"none",Nt,wm]}],leading:[{leading:[m,...k()]}],"list-image":[{"list-image":["none",Nt,yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Nt,yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[Vt,"from-font","auto",Nt,mn]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Vt,"auto",Nt,yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Nt,yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Nt,yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:qe()}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Br,Nt,yt],radial:["",Nt,yt],conic:[Br,Nt,yt]},c4,o4]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:A()}],"border-w-x":[{"border-x":A()}],"border-w-y":[{"border-y":A()}],"border-w-s":[{"border-s":A()}],"border-w-e":[{"border-e":A()}],"border-w-t":[{"border-t":A()}],"border-w-r":[{"border-r":A()}],"border-w-b":[{"border-b":A()}],"border-w-l":[{"border-l":A()}],"divide-x":[{"divide-x":A()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":A()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Vt,Nt,yt]}],"outline-w":[{outline:["",Vt,bi,mn]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",v,Jl,Zl]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",f,Jl,Zl]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Vt,mn]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":A()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",N,Jl,Zl]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Vt,Nt,yt]}],"mix-blend":[{"mix-blend":[...M(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":M()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Vt]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Nt,yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[Vt]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:qe()}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Nt,yt]}],filter:[{filter:["","none",Nt,yt]}],blur:[{blur:q()}],brightness:[{brightness:[Vt,Nt,yt]}],contrast:[{contrast:[Vt,Nt,yt]}],"drop-shadow":[{"drop-shadow":["","none",j,Jl,Zl]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Vt,Nt,yt]}],"hue-rotate":[{"hue-rotate":[Vt,Nt,yt]}],invert:[{invert:["",Vt,Nt,yt]}],saturate:[{saturate:[Vt,Nt,yt]}],sepia:[{sepia:["",Vt,Nt,yt]}],"backdrop-filter":[{"backdrop-filter":["","none",Nt,yt]}],"backdrop-blur":[{"backdrop-blur":q()}],"backdrop-brightness":[{"backdrop-brightness":[Vt,Nt,yt]}],"backdrop-contrast":[{"backdrop-contrast":[Vt,Nt,yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Vt,Nt,yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Vt,Nt,yt]}],"backdrop-invert":[{"backdrop-invert":["",Vt,Nt,yt]}],"backdrop-opacity":[{"backdrop-opacity":[Vt,Nt,yt]}],"backdrop-saturate":[{"backdrop-saturate":[Vt,Nt,yt]}],"backdrop-sepia":[{"backdrop-sepia":["",Vt,Nt,yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Nt,yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Vt,"initial",Nt,yt]}],ease:[{ease:["linear","initial",E,Nt,yt]}],delay:[{delay:[Vt,Nt,yt]}],animate:[{animate:["none",D,Nt,yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Nt,yt]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:$()}],"rotate-x":[{"rotate-x":$()}],"rotate-y":[{"rotate-y":$()}],"rotate-z":[{"rotate-z":$()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:Z()}],"skew-x":[{"skew-x":Z()}],"skew-y":[{"skew-y":Z()}],transform:[{transform:[Nt,yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Nt,yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Nt,yt]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Vt,bi,mn,wm]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},p4=W1(m4);function Xt(...s){return p4(hb(s))}const Tm=768;function h4(){const[s,i]=c.useState(void 0);return c.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Tm-1}px)`),l=()=>{i(window.innerWidth<Tm)};return n.addEventListener("change",l),i(window.innerWidth<Tm),()=>n.removeEventListener("change",l)},[]),!!s}var x4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kt=x4.reduce((s,i)=>{const n=fo(`Primitive.${i}`),l=c.forwardRef((d,m)=>{const{asChild:h,...x}=d,g=h?n:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...x,ref:m})});return l.displayName=`Primitive.${i}`,{...s,[i]:l}},{});function Rb(s,i){s&&Lc.flushSync(()=>s.dispatchEvent(i))}function At(s,i,{checkForDefaultPrevented:n=!0}={}){return function(d){if(s?.(d),n===!1||!d.defaultPrevented)return i?.(d)}}function f4(s,i){const n=c.createContext(i),l=m=>{const{children:h,...x}=m,g=c.useMemo(()=>x,Object.values(x));return e.jsx(n.Provider,{value:g,children:h})};l.displayName=s+"Provider";function d(m){const h=c.useContext(n);if(h)return h;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[l,d]}function Cs(s,i=[]){let n=[];function l(m,h){const x=c.createContext(h),g=n.length;n=[...n,h];const b=f=>{const{scope:N,children:j,..._}=f,w=N?.[s]?.[g]||x,C=c.useMemo(()=>_,Object.values(_));return e.jsx(w.Provider,{value:C,children:j})};b.displayName=m+"Provider";function v(f,N){const j=N?.[s]?.[g]||x,_=c.useContext(j);if(_)return _;if(h!==void 0)return h;throw new Error(`\`${f}\` must be used within \`${m}\``)}return[b,v]}const d=()=>{const m=n.map(h=>c.createContext(h));return function(x){const g=x?.[s]||m;return c.useMemo(()=>({[`__scope${s}`]:{...x,[s]:g}}),[x,g])}};return d.scopeName=s,[l,g4(d,...i)]}function g4(...s){const i=s[0];if(s.length===1)return i;const n=()=>{const l=s.map(d=>({useScope:d(),scopeName:d.scopeName}));return function(m){const h=l.reduce((x,{useScope:g,scopeName:b})=>{const f=g(m)[`__scope${b}`];return{...x,...f}},{});return c.useMemo(()=>({[`__scope${i.scopeName}`]:h}),[h])}};return n.scopeName=i.scopeName,n}var pr=globalThis?.document?c.useLayoutEffect:()=>{},b4=$g[" useId ".trim().toString()]||(()=>{}),v4=0;function Us(s){const[i,n]=c.useState(b4());return pr(()=>{n(l=>l??String(v4++))},[s]),i?`radix-${i}`:""}var y4=$g[" useInsertionEffect ".trim().toString()]||pr;function gr({prop:s,defaultProp:i,onChange:n=()=>{},caller:l}){const[d,m,h]=N4({defaultProp:i,onChange:n}),x=s!==void 0,g=x?s:d;{const v=c.useRef(s!==void 0);c.useEffect(()=>{const f=v.current;f!==x&&console.warn(`${l} is changing from ${f?"controlled":"uncontrolled"} to ${x?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=x},[x,l])}const b=c.useCallback(v=>{if(x){const f=j4(v)?v(s):v;f!==s&&h.current?.(f)}else m(v)},[x,s,m,h]);return[g,b]}function N4({defaultProp:s,onChange:i}){const[n,l]=c.useState(s),d=c.useRef(n),m=c.useRef(i);return y4(()=>{m.current=i},[i]),c.useEffect(()=>{d.current!==n&&(m.current?.(n),d.current=n)},[n,d]),[n,l,m]}function j4(s){return typeof s=="function"}function hr(s){const i=c.useRef(s);return c.useEffect(()=>{i.current=s}),c.useMemo(()=>(...n)=>i.current?.(...n),[])}function _4(s,i=globalThis?.document){const n=hr(s);c.useEffect(()=>{const l=d=>{d.key==="Escape"&&n(d)};return i.addEventListener("keydown",l,{capture:!0}),()=>i.removeEventListener("keydown",l,{capture:!0})},[n,i])}var S4="DismissableLayer",$m="dismissableLayer.update",w4="dismissableLayer.pointerDownOutside",T4="dismissableLayer.focusOutside",yg,Lb=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ic=c.forwardRef((s,i)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:h,onDismiss:x,...g}=s,b=c.useContext(Lb),[v,f]=c.useState(null),N=v?.ownerDocument??globalThis?.document,[,j]=c.useState({}),_=xa(i,I=>f(I)),w=Array.from(b.layers),[C]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(C),D=v?w.indexOf(v):-1,L=b.layersWithOutsidePointerEventsDisabled.size>0,V=D>=E,J=A4(I=>{const k=I.target,be=[...b.branches].some(te=>te.contains(k));!V||be||(d?.(I),h?.(I),I.defaultPrevented||x?.())},N),ie=E4(I=>{const k=I.target;[...b.branches].some(te=>te.contains(k))||(m?.(I),h?.(I),I.defaultPrevented||x?.())},N);return _4(I=>{D===b.layers.size-1&&(l?.(I),!I.defaultPrevented&&x&&(I.preventDefault(),x()))},N),c.useEffect(()=>{if(v)return n&&(b.layersWithOutsidePointerEventsDisabled.size===0&&(yg=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(v)),b.layers.add(v),Ng(),()=>{n&&b.layersWithOutsidePointerEventsDisabled.size===1&&(N.body.style.pointerEvents=yg)}},[v,N,n,b]),c.useEffect(()=>()=>{v&&(b.layers.delete(v),b.layersWithOutsidePointerEventsDisabled.delete(v),Ng())},[v,b]),c.useEffect(()=>{const I=()=>j({});return document.addEventListener($m,I),()=>document.removeEventListener($m,I)},[]),e.jsx(Kt.div,{...g,ref:_,style:{pointerEvents:L?V?"auto":"none":void 0,...s.style},onFocusCapture:At(s.onFocusCapture,ie.onFocusCapture),onBlurCapture:At(s.onBlurCapture,ie.onBlurCapture),onPointerDownCapture:At(s.onPointerDownCapture,J.onPointerDownCapture)})});Ic.displayName=S4;var k4="DismissableLayerBranch",C4=c.forwardRef((s,i)=>{const n=c.useContext(Lb),l=c.useRef(null),d=xa(i,l);return c.useEffect(()=>{const m=l.current;if(m)return n.branches.add(m),()=>{n.branches.delete(m)}},[n.branches]),e.jsx(Kt.div,{...s,ref:d})});C4.displayName=k4;function A4(s,i=globalThis?.document){const n=hr(s),l=c.useRef(!1),d=c.useRef(()=>{});return c.useEffect(()=>{const m=x=>{if(x.target&&!l.current){let g=function(){Mb(w4,n,b,{discrete:!0})};const b={originalEvent:x};x.pointerType==="touch"?(i.removeEventListener("click",d.current),d.current=g,i.addEventListener("click",d.current,{once:!0})):g()}else i.removeEventListener("click",d.current);l.current=!1},h=window.setTimeout(()=>{i.addEventListener("pointerdown",m)},0);return()=>{window.clearTimeout(h),i.removeEventListener("pointerdown",m),i.removeEventListener("click",d.current)}},[i,n]),{onPointerDownCapture:()=>l.current=!0}}function E4(s,i=globalThis?.document){const n=hr(s),l=c.useRef(!1);return c.useEffect(()=>{const d=m=>{m.target&&!l.current&&Mb(T4,n,{originalEvent:m},{discrete:!1})};return i.addEventListener("focusin",d),()=>i.removeEventListener("focusin",d)},[i,n]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Ng(){const s=new CustomEvent($m);document.dispatchEvent(s)}function Mb(s,i,n,{discrete:l}){const d=n.originalEvent.target,m=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});i&&d.addEventListener(s,i,{once:!0}),l?Rb(d,m):d.dispatchEvent(m)}var km="focusScope.autoFocusOnMount",Cm="focusScope.autoFocusOnUnmount",jg={bubbles:!1,cancelable:!0},R4="FocusScope",fp=c.forwardRef((s,i)=>{const{loop:n=!1,trapped:l=!1,onMountAutoFocus:d,onUnmountAutoFocus:m,...h}=s,[x,g]=c.useState(null),b=hr(d),v=hr(m),f=c.useRef(null),N=xa(i,w=>g(w)),j=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(l){let w=function(L){if(j.paused||!x)return;const V=L.target;x.contains(V)?f.current=V:Vr(f.current,{select:!0})},C=function(L){if(j.paused||!x)return;const V=L.relatedTarget;V!==null&&(x.contains(V)||Vr(f.current,{select:!0}))},E=function(L){if(document.activeElement===document.body)for(const J of L)J.removedNodes.length>0&&Vr(x)};document.addEventListener("focusin",w),document.addEventListener("focusout",C);const D=new MutationObserver(E);return x&&D.observe(x,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",C),D.disconnect()}}},[l,x,j.paused]),c.useEffect(()=>{if(x){Sg.add(j);const w=document.activeElement;if(!x.contains(w)){const E=new CustomEvent(km,jg);x.addEventListener(km,b),x.dispatchEvent(E),E.defaultPrevented||(L4(D4(Pb(x)),{select:!0}),document.activeElement===w&&Vr(x))}return()=>{x.removeEventListener(km,b),setTimeout(()=>{const E=new CustomEvent(Cm,jg);x.addEventListener(Cm,v),x.dispatchEvent(E),E.defaultPrevented||Vr(w??document.body,{select:!0}),x.removeEventListener(Cm,v),Sg.remove(j)},0)}}},[x,b,v,j]);const _=c.useCallback(w=>{if(!n&&!l||j.paused)return;const C=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(C&&E){const D=w.currentTarget,[L,V]=M4(D);L&&V?!w.shiftKey&&E===V?(w.preventDefault(),n&&Vr(L,{select:!0})):w.shiftKey&&E===L&&(w.preventDefault(),n&&Vr(V,{select:!0})):E===D&&w.preventDefault()}},[n,l,j.paused]);return e.jsx(Kt.div,{tabIndex:-1,...h,ref:N,onKeyDown:_})});fp.displayName=R4;function L4(s,{select:i=!1}={}){const n=document.activeElement;for(const l of s)if(Vr(l,{select:i}),document.activeElement!==n)return}function M4(s){const i=Pb(s),n=_g(i,s),l=_g(i.reverse(),s);return[n,l]}function Pb(s){const i=[],n=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const d=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||d?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)i.push(n.currentNode);return i}function _g(s,i){for(const n of s)if(!P4(n,{upTo:i}))return n}function P4(s,{upTo:i}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(i!==void 0&&s===i)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function I4(s){return s instanceof HTMLInputElement&&"select"in s}function Vr(s,{select:i=!1}={}){if(s&&s.focus){const n=document.activeElement;s.focus({preventScroll:!0}),s!==n&&I4(s)&&i&&s.select()}}var Sg=O4();function O4(){let s=[];return{add(i){const n=s[0];i!==n&&n?.pause(),s=wg(s,i),s.unshift(i)},remove(i){s=wg(s,i),s[0]?.resume()}}}function wg(s,i){const n=[...s],l=n.indexOf(i);return l!==-1&&n.splice(l,1),n}function D4(s){return s.filter(i=>i.tagName!=="A")}var z4="Portal",Oc=c.forwardRef((s,i)=>{const{container:n,...l}=s,[d,m]=c.useState(!1);pr(()=>m(!0),[]);const h=n||d&&globalThis?.document?.body;return h?bw.createPortal(e.jsx(Kt.div,{...l,ref:i}),h):null});Oc.displayName=z4;function q4(s,i){return c.useReducer((n,l)=>i[n][l]??n,s)}var js=s=>{const{present:i,children:n}=s,l=U4(i),d=typeof n=="function"?n({present:l.isPresent}):c.Children.only(n),m=xa(l.ref,B4(d));return typeof n=="function"||l.isPresent?c.cloneElement(d,{ref:m}):null};js.displayName="Presence";function U4(s){const[i,n]=c.useState(),l=c.useRef(null),d=c.useRef(s),m=c.useRef("none"),h=s?"mounted":"unmounted",[x,g]=q4(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const b=ec(l.current);m.current=x==="mounted"?b:"none"},[x]),pr(()=>{const b=l.current,v=d.current;if(v!==s){const N=m.current,j=ec(b);s?g("MOUNT"):j==="none"||b?.display==="none"?g("UNMOUNT"):g(v&&N!==j?"ANIMATION_OUT":"UNMOUNT"),d.current=s}},[s,g]),pr(()=>{if(i){let b;const v=i.ownerDocument.defaultView??window,f=j=>{const w=ec(l.current).includes(CSS.escape(j.animationName));if(j.target===i&&w&&(g("ANIMATION_END"),!d.current)){const C=i.style.animationFillMode;i.style.animationFillMode="forwards",b=v.setTimeout(()=>{i.style.animationFillMode==="forwards"&&(i.style.animationFillMode=C)})}},N=j=>{j.target===i&&(m.current=ec(l.current))};return i.addEventListener("animationstart",N),i.addEventListener("animationcancel",f),i.addEventListener("animationend",f),()=>{v.clearTimeout(b),i.removeEventListener("animationstart",N),i.removeEventListener("animationcancel",f),i.removeEventListener("animationend",f)}}else g("ANIMATION_END")},[i,g]),{isPresent:["mounted","unmountSuspended"].includes(x),ref:c.useCallback(b=>{l.current=b?getComputedStyle(b):null,n(b)},[])}}function ec(s){return s?.animationName||"none"}function B4(s){let i=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=i&&"isReactWarning"in i&&i.isReactWarning;return n?s.ref:(i=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=i&&"isReactWarning"in i&&i.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var Am=0;function Ib(){c.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Tg()),document.body.insertAdjacentElement("beforeend",s[1]??Tg()),Am++,()=>{Am===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),Am--}},[])}function Tg(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Is=function(){return Is=Object.assign||function(i){for(var n,l=1,d=arguments.length;l<d;l++){n=arguments[l];for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(i[m]=n[m])}return i},Is.apply(this,arguments)};function Ob(s,i){var n={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&i.indexOf(l)<0&&(n[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(s);d<l.length;d++)i.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(s,l[d])&&(n[l[d]]=s[l[d]]);return n}function V4(s,i,n){if(n||arguments.length===2)for(var l=0,d=i.length,m;l<d;l++)(m||!(l in i))&&(m||(m=Array.prototype.slice.call(i,0,l)),m[l]=i[l]);return s.concat(m||Array.prototype.slice.call(i))}var cc="right-scroll-bar-position",dc="width-before-scroll-bar",F4="with-scroll-bars-hidden",H4="--removed-body-scroll-bar-size";function Em(s,i){return typeof s=="function"?s(i):s&&(s.current=i),s}function $4(s,i){var n=c.useState(function(){return{value:s,callback:i,facade:{get current(){return n.value},set current(l){var d=n.value;d!==l&&(n.value=l,n.callback(l,d))}}}})[0];return n.callback=i,n.facade}var G4=typeof window<"u"?c.useLayoutEffect:c.useEffect,kg=new WeakMap;function W4(s,i){var n=$4(null,function(l){return s.forEach(function(d){return Em(d,l)})});return G4(function(){var l=kg.get(n);if(l){var d=new Set(l),m=new Set(s),h=n.current;d.forEach(function(x){m.has(x)||Em(x,null)}),m.forEach(function(x){d.has(x)||Em(x,h)})}kg.set(n,s)},[s]),n}function K4(s){return s}function Y4(s,i){i===void 0&&(i=K4);var n=[],l=!1,d={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:s},useMedium:function(m){var h=i(m,l);return n.push(h),function(){n=n.filter(function(x){return x!==h})}},assignSyncMedium:function(m){for(l=!0;n.length;){var h=n;n=[],h.forEach(m)}n={push:function(x){return m(x)},filter:function(){return n}}},assignMedium:function(m){l=!0;var h=[];if(n.length){var x=n;n=[],x.forEach(m),h=n}var g=function(){var v=h;h=[],v.forEach(m)},b=function(){return Promise.resolve().then(g)};b(),n={push:function(v){h.push(v),b()},filter:function(v){return h=h.filter(v),n}}}};return d}function X4(s){s===void 0&&(s={});var i=Y4(null);return i.options=Is({async:!0,ssr:!1},s),i}var Db=function(s){var i=s.sideCar,n=Ob(s,["sideCar"]);if(!i)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=i.read();if(!l)throw new Error("Sidecar medium not found");return c.createElement(l,Is({},n))};Db.isSideCarExport=!0;function Q4(s,i){return s.useMedium(i),Db}var zb=X4(),Rm=function(){},Dc=c.forwardRef(function(s,i){var n=c.useRef(null),l=c.useState({onScrollCapture:Rm,onWheelCapture:Rm,onTouchMoveCapture:Rm}),d=l[0],m=l[1],h=s.forwardProps,x=s.children,g=s.className,b=s.removeScrollBar,v=s.enabled,f=s.shards,N=s.sideCar,j=s.noRelative,_=s.noIsolation,w=s.inert,C=s.allowPinchZoom,E=s.as,D=E===void 0?"div":E,L=s.gapMode,V=Ob(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),J=N,ie=W4([n,i]),I=Is(Is({},V),d);return c.createElement(c.Fragment,null,v&&c.createElement(J,{sideCar:zb,removeScrollBar:b,shards:f,noRelative:j,noIsolation:_,inert:w,setCallbacks:m,allowPinchZoom:!!C,lockRef:n,gapMode:L}),h?c.cloneElement(c.Children.only(x),Is(Is({},I),{ref:ie})):c.createElement(D,Is({},I,{className:g,ref:ie}),x))});Dc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dc.classNames={fullWidth:dc,zeroRight:cc};var Z4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function J4(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var i=Z4();return i&&s.setAttribute("nonce",i),s}function eT(s,i){s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}function tT(s){var i=document.head||document.getElementsByTagName("head")[0];i.appendChild(s)}var aT=function(){var s=0,i=null;return{add:function(n){s==0&&(i=J4())&&(eT(i,n),tT(i)),s++},remove:function(){s--,!s&&i&&(i.parentNode&&i.parentNode.removeChild(i),i=null)}}},sT=function(){var s=aT();return function(i,n){c.useEffect(function(){return s.add(i),function(){s.remove()}},[i&&n])}},qb=function(){var s=sT(),i=function(n){var l=n.styles,d=n.dynamic;return s(l,d),null};return i},rT={left:0,top:0,right:0,gap:0},Lm=function(s){return parseInt(s||"",10)||0},nT=function(s){var i=window.getComputedStyle(document.body),n=i[s==="padding"?"paddingLeft":"marginLeft"],l=i[s==="padding"?"paddingTop":"marginTop"],d=i[s==="padding"?"paddingRight":"marginRight"];return[Lm(n),Lm(l),Lm(d)]},oT=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return rT;var i=nT(s),n=document.documentElement.clientWidth,l=window.innerWidth;return{left:i[0],top:i[1],right:i[2],gap:Math.max(0,l-n+i[2]-i[0])}},iT=qb(),co="data-scroll-locked",lT=function(s,i,n,l){var d=s.left,m=s.top,h=s.right,x=s.gap;return n===void 0&&(n="margin"),`
  .`.concat(F4,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(x,"px ").concat(l,`;
  }
  body[`).concat(co,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([i&&"position: relative ".concat(l,";"),n==="margin"&&`
    padding-left: `.concat(d,`px;
    padding-top: `).concat(m,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(x,"px ").concat(l,`;
    `),n==="padding"&&"padding-right: ".concat(x,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cc,` {
    right: `).concat(x,"px ").concat(l,`;
  }
  
  .`).concat(dc,` {
    margin-right: `).concat(x,"px ").concat(l,`;
  }
  
  .`).concat(cc," .").concat(cc,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(dc," .").concat(dc,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(co,`] {
    `).concat(H4,": ").concat(x,`px;
  }
`)},Cg=function(){var s=parseInt(document.body.getAttribute(co)||"0",10);return isFinite(s)?s:0},cT=function(){c.useEffect(function(){return document.body.setAttribute(co,(Cg()+1).toString()),function(){var s=Cg()-1;s<=0?document.body.removeAttribute(co):document.body.setAttribute(co,s.toString())}},[])},dT=function(s){var i=s.noRelative,n=s.noImportant,l=s.gapMode,d=l===void 0?"margin":l;cT();var m=c.useMemo(function(){return oT(d)},[d]);return c.createElement(iT,{styles:lT(m,!i,d,n?"":"!important")})},Gm=!1;if(typeof window<"u")try{var tc=Object.defineProperty({},"passive",{get:function(){return Gm=!0,!0}});window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{Gm=!1}var so=Gm?{passive:!1}:!1,uT=function(s){return s.tagName==="TEXTAREA"},Ub=function(s,i){if(!(s instanceof Element))return!1;var n=window.getComputedStyle(s);return n[i]!=="hidden"&&!(n.overflowY===n.overflowX&&!uT(s)&&n[i]==="visible")},mT=function(s){return Ub(s,"overflowY")},pT=function(s){return Ub(s,"overflowX")},Ag=function(s,i){var n=i.ownerDocument,l=i;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var d=Bb(s,l);if(d){var m=Vb(s,l),h=m[1],x=m[2];if(h>x)return!0}l=l.parentNode}while(l&&l!==n.body);return!1},hT=function(s){var i=s.scrollTop,n=s.scrollHeight,l=s.clientHeight;return[i,n,l]},xT=function(s){var i=s.scrollLeft,n=s.scrollWidth,l=s.clientWidth;return[i,n,l]},Bb=function(s,i){return s==="v"?mT(i):pT(i)},Vb=function(s,i){return s==="v"?hT(i):xT(i)},fT=function(s,i){return s==="h"&&i==="rtl"?-1:1},gT=function(s,i,n,l,d){var m=fT(s,window.getComputedStyle(i).direction),h=m*l,x=n.target,g=i.contains(x),b=!1,v=h>0,f=0,N=0;do{if(!x)break;var j=Vb(s,x),_=j[0],w=j[1],C=j[2],E=w-C-m*_;(_||E)&&Bb(s,x)&&(f+=E,N+=_);var D=x.parentNode;x=D&&D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?D.host:D}while(!g&&x!==document.body||g&&(i.contains(x)||i===x));return(v&&Math.abs(f)<1||!v&&Math.abs(N)<1)&&(b=!0),b},ac=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Eg=function(s){return[s.deltaX,s.deltaY]},Rg=function(s){return s&&"current"in s?s.current:s},bT=function(s,i){return s[0]===i[0]&&s[1]===i[1]},vT=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},yT=0,ro=[];function NT(s){var i=c.useRef([]),n=c.useRef([0,0]),l=c.useRef(),d=c.useState(yT++)[0],m=c.useState(qb)[0],h=c.useRef(s);c.useEffect(function(){h.current=s},[s]),c.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(d));var w=V4([s.lockRef.current],(s.shards||[]).map(Rg),!0).filter(Boolean);return w.forEach(function(C){return C.classList.add("allow-interactivity-".concat(d))}),function(){document.body.classList.remove("block-interactivity-".concat(d)),w.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(d))})}}},[s.inert,s.lockRef.current,s.shards]);var x=c.useCallback(function(w,C){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!h.current.allowPinchZoom;var E=ac(w),D=n.current,L="deltaX"in w?w.deltaX:D[0]-E[0],V="deltaY"in w?w.deltaY:D[1]-E[1],J,ie=w.target,I=Math.abs(L)>Math.abs(V)?"h":"v";if("touches"in w&&I==="h"&&ie.type==="range")return!1;var k=Ag(I,ie);if(!k)return!0;if(k?J=I:(J=I==="v"?"h":"v",k=Ag(I,ie)),!k)return!1;if(!l.current&&"changedTouches"in w&&(L||V)&&(l.current=J),!J)return!0;var be=l.current||J;return gT(be,C,w,be==="h"?L:V)},[]),g=c.useCallback(function(w){var C=w;if(!(!ro.length||ro[ro.length-1]!==m)){var E="deltaY"in C?Eg(C):ac(C),D=i.current.filter(function(J){return J.name===C.type&&(J.target===C.target||C.target===J.shadowParent)&&bT(J.delta,E)})[0];if(D&&D.should){C.cancelable&&C.preventDefault();return}if(!D){var L=(h.current.shards||[]).map(Rg).filter(Boolean).filter(function(J){return J.contains(C.target)}),V=L.length>0?x(C,L[0]):!h.current.noIsolation;V&&C.cancelable&&C.preventDefault()}}},[]),b=c.useCallback(function(w,C,E,D){var L={name:w,delta:C,target:E,should:D,shadowParent:jT(E)};i.current.push(L),setTimeout(function(){i.current=i.current.filter(function(V){return V!==L})},1)},[]),v=c.useCallback(function(w){n.current=ac(w),l.current=void 0},[]),f=c.useCallback(function(w){b(w.type,Eg(w),w.target,x(w,s.lockRef.current))},[]),N=c.useCallback(function(w){b(w.type,ac(w),w.target,x(w,s.lockRef.current))},[]);c.useEffect(function(){return ro.push(m),s.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:N}),document.addEventListener("wheel",g,so),document.addEventListener("touchmove",g,so),document.addEventListener("touchstart",v,so),function(){ro=ro.filter(function(w){return w!==m}),document.removeEventListener("wheel",g,so),document.removeEventListener("touchmove",g,so),document.removeEventListener("touchstart",v,so)}},[]);var j=s.removeScrollBar,_=s.inert;return c.createElement(c.Fragment,null,_?c.createElement(m,{styles:vT(d)}):null,j?c.createElement(dT,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function jT(s){for(var i=null;s!==null;)s instanceof ShadowRoot&&(i=s.host,s=s.host),s=s.parentNode;return i}const _T=Q4(zb,NT);var gp=c.forwardRef(function(s,i){return c.createElement(Dc,Is({},s,{ref:i,sideCar:_T}))});gp.classNames=Dc.classNames;var ST=function(s){if(typeof document>"u")return null;var i=Array.isArray(s)?s[0]:s;return i.ownerDocument.body},no=new WeakMap,sc=new WeakMap,rc={},Mm=0,Fb=function(s){return s&&(s.host||Fb(s.parentNode))},wT=function(s,i){return i.map(function(n){if(s.contains(n))return n;var l=Fb(n);return l&&s.contains(l)?l:(console.error("aria-hidden",n,"in not contained inside",s,". Doing nothing"),null)}).filter(function(n){return!!n})},TT=function(s,i,n,l){var d=wT(i,Array.isArray(s)?s:[s]);rc[n]||(rc[n]=new WeakMap);var m=rc[n],h=[],x=new Set,g=new Set(d),b=function(f){!f||x.has(f)||(x.add(f),b(f.parentNode))};d.forEach(b);var v=function(f){!f||g.has(f)||Array.prototype.forEach.call(f.children,function(N){if(x.has(N))v(N);else try{var j=N.getAttribute(l),_=j!==null&&j!=="false",w=(no.get(N)||0)+1,C=(m.get(N)||0)+1;no.set(N,w),m.set(N,C),h.push(N),w===1&&_&&sc.set(N,!0),C===1&&N.setAttribute(n,"true"),_||N.setAttribute(l,"true")}catch(E){console.error("aria-hidden: cannot operate on ",N,E)}})};return v(i),x.clear(),Mm++,function(){h.forEach(function(f){var N=no.get(f)-1,j=m.get(f)-1;no.set(f,N),m.set(f,j),N||(sc.has(f)||f.removeAttribute(l),sc.delete(f)),j||f.removeAttribute(n)}),Mm--,Mm||(no=new WeakMap,no=new WeakMap,sc=new WeakMap,rc={})}},Hb=function(s,i,n){n===void 0&&(n="data-aria-hidden");var l=Array.from(Array.isArray(s)?s:[s]),d=ST(s);return d?(l.push.apply(l,Array.from(d.querySelectorAll("[aria-live], script"))),TT(l,d,n,"aria-hidden")):function(){return null}},zc="Dialog",[$b]=Cs(zc),[kT,As]=$b(zc),Gb=s=>{const{__scopeDialog:i,children:n,open:l,defaultOpen:d,onOpenChange:m,modal:h=!0}=s,x=c.useRef(null),g=c.useRef(null),[b,v]=gr({prop:l,defaultProp:d??!1,onChange:m,caller:zc});return e.jsx(kT,{scope:i,triggerRef:x,contentRef:g,contentId:Us(),titleId:Us(),descriptionId:Us(),open:b,onOpenChange:v,onOpenToggle:c.useCallback(()=>v(f=>!f),[v]),modal:h,children:n})};Gb.displayName=zc;var Wb="DialogTrigger",CT=c.forwardRef((s,i)=>{const{__scopeDialog:n,...l}=s,d=As(Wb,n),m=xa(i,d.triggerRef);return e.jsx(Kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":d.open,"aria-controls":d.contentId,"data-state":yp(d.open),...l,ref:m,onClick:At(s.onClick,d.onOpenToggle)})});CT.displayName=Wb;var bp="DialogPortal",[AT,Kb]=$b(bp,{forceMount:void 0}),Yb=s=>{const{__scopeDialog:i,forceMount:n,children:l,container:d}=s,m=As(bp,i);return e.jsx(AT,{scope:i,forceMount:n,children:c.Children.map(l,h=>e.jsx(js,{present:n||m.open,children:e.jsx(Oc,{asChild:!0,container:d,children:h})}))})};Yb.displayName=bp;var vc="DialogOverlay",Xb=c.forwardRef((s,i)=>{const n=Kb(vc,s.__scopeDialog),{forceMount:l=n.forceMount,...d}=s,m=As(vc,s.__scopeDialog);return m.modal?e.jsx(js,{present:l||m.open,children:e.jsx(RT,{...d,ref:i})}):null});Xb.displayName=vc;var ET=fo("DialogOverlay.RemoveScroll"),RT=c.forwardRef((s,i)=>{const{__scopeDialog:n,...l}=s,d=As(vc,n);return e.jsx(gp,{as:ET,allowPinchZoom:!0,shards:[d.contentRef],children:e.jsx(Kt.div,{"data-state":yp(d.open),...l,ref:i,style:{pointerEvents:"auto",...l.style}})})}),gn="DialogContent",Qb=c.forwardRef((s,i)=>{const n=Kb(gn,s.__scopeDialog),{forceMount:l=n.forceMount,...d}=s,m=As(gn,s.__scopeDialog);return e.jsx(js,{present:l||m.open,children:m.modal?e.jsx(LT,{...d,ref:i}):e.jsx(MT,{...d,ref:i})})});Qb.displayName=gn;var LT=c.forwardRef((s,i)=>{const n=As(gn,s.__scopeDialog),l=c.useRef(null),d=xa(i,n.contentRef,l);return c.useEffect(()=>{const m=l.current;if(m)return Hb(m)},[]),e.jsx(Zb,{...s,ref:d,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:At(s.onCloseAutoFocus,m=>{m.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:At(s.onPointerDownOutside,m=>{const h=m.detail.originalEvent,x=h.button===0&&h.ctrlKey===!0;(h.button===2||x)&&m.preventDefault()}),onFocusOutside:At(s.onFocusOutside,m=>m.preventDefault())})}),MT=c.forwardRef((s,i)=>{const n=As(gn,s.__scopeDialog),l=c.useRef(!1),d=c.useRef(!1);return e.jsx(Zb,{...s,ref:i,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:m=>{s.onCloseAutoFocus?.(m),m.defaultPrevented||(l.current||n.triggerRef.current?.focus(),m.preventDefault()),l.current=!1,d.current=!1},onInteractOutside:m=>{s.onInteractOutside?.(m),m.defaultPrevented||(l.current=!0,m.detail.originalEvent.type==="pointerdown"&&(d.current=!0));const h=m.target;n.triggerRef.current?.contains(h)&&m.preventDefault(),m.detail.originalEvent.type==="focusin"&&d.current&&m.preventDefault()}})}),Zb=c.forwardRef((s,i)=>{const{__scopeDialog:n,trapFocus:l,onOpenAutoFocus:d,onCloseAutoFocus:m,...h}=s,x=As(gn,n),g=c.useRef(null),b=xa(i,g);return Ib(),e.jsxs(e.Fragment,{children:[e.jsx(fp,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:d,onUnmountAutoFocus:m,children:e.jsx(Ic,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":yp(x.open),...h,ref:b,onDismiss:()=>x.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(PT,{titleId:x.titleId}),e.jsx(OT,{contentRef:g,descriptionId:x.descriptionId})]})]})}),vp="DialogTitle",Jb=c.forwardRef((s,i)=>{const{__scopeDialog:n,...l}=s,d=As(vp,n);return e.jsx(Kt.h2,{id:d.titleId,...l,ref:i})});Jb.displayName=vp;var ev="DialogDescription",tv=c.forwardRef((s,i)=>{const{__scopeDialog:n,...l}=s,d=As(ev,n);return e.jsx(Kt.p,{id:d.descriptionId,...l,ref:i})});tv.displayName=ev;var av="DialogClose",sv=c.forwardRef((s,i)=>{const{__scopeDialog:n,...l}=s,d=As(av,n);return e.jsx(Kt.button,{type:"button",...l,ref:i,onClick:At(s.onClick,()=>d.onOpenChange(!1))})});sv.displayName=av;function yp(s){return s?"open":"closed"}var rv="DialogTitleWarning",[D2,nv]=f4(rv,{contentName:gn,titleName:vp,docsSlug:"dialog"}),PT=({titleId:s})=>{const i=nv(rv),n=`\`${i.contentName}\` requires a \`${i.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${i.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${i.docsSlug}`;return c.useEffect(()=>{s&&(document.getElementById(s)||console.error(n))},[n,s]),null},IT="DialogDescriptionWarning",OT=({contentRef:s,descriptionId:i})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nv(IT).contentName}}.`;return c.useEffect(()=>{const d=s.current?.getAttribute("aria-describedby");i&&d&&(document.getElementById(i)||console.warn(l))},[l,s,i]),null},DT=Gb,zT=Yb,ov=Xb,iv=Qb,lv=Jb,cv=tv,qT=sv;const UT=DT,BT=zT,dv=c.forwardRef(({className:s,...i},n)=>e.jsx(ov,{className:Xt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i,ref:n}));dv.displayName=ov.displayName;const VT={side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},uv=c.forwardRef(({side:s="right",className:i,children:n,...l},d)=>e.jsxs(BT,{children:[e.jsx(dv,{}),e.jsxs(iv,{ref:d,className:Xt("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",VT.side[s],i),...l,children:[n,e.jsxs(qT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100",children:[e.jsx(L1,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));uv.displayName=iv.displayName;const mv=({className:s,...i})=>e.jsx("div",{className:Xt("flex flex-col space-y-2 text-center sm:text-left",s),...i});mv.displayName="SheetHeader";const pv=c.forwardRef(({className:s,...i},n)=>e.jsx(lv,{ref:n,className:Xt("text-lg font-semibold text-gray-950",s),...i}));pv.displayName=lv.displayName;const hv=c.forwardRef(({className:s,...i},n)=>e.jsx(cv,{ref:n,className:Xt("text-sm text-gray-500",s),...i}));hv.displayName=cv.displayName;const FT=["top","right","bottom","left"],Wr=Math.min,is=Math.max,yc=Math.round,nc=Math.floor,Bs=s=>({x:s,y:s}),HT={left:"right",right:"left",bottom:"top",top:"bottom"},$T={start:"end",end:"start"};function Wm(s,i,n){return is(s,Wr(i,n))}function xr(s,i){return typeof s=="function"?s(i):s}function fr(s){return s.split("-")[0]}function jo(s){return s.split("-")[1]}function Np(s){return s==="x"?"y":"x"}function jp(s){return s==="y"?"height":"width"}const GT=new Set(["top","bottom"]);function Ds(s){return GT.has(fr(s))?"y":"x"}function _p(s){return Np(Ds(s))}function WT(s,i,n){n===void 0&&(n=!1);const l=jo(s),d=_p(s),m=jp(d);let h=d==="x"?l===(n?"end":"start")?"right":"left":l==="start"?"bottom":"top";return i.reference[m]>i.floating[m]&&(h=Nc(h)),[h,Nc(h)]}function KT(s){const i=Nc(s);return[Km(s),i,Km(i)]}function Km(s){return s.replace(/start|end/g,i=>$T[i])}const Lg=["left","right"],Mg=["right","left"],YT=["top","bottom"],XT=["bottom","top"];function QT(s,i,n){switch(s){case"top":case"bottom":return n?i?Mg:Lg:i?Lg:Mg;case"left":case"right":return i?YT:XT;default:return[]}}function ZT(s,i,n,l){const d=jo(s);let m=QT(fr(s),n==="start",l);return d&&(m=m.map(h=>h+"-"+d),i&&(m=m.concat(m.map(Km)))),m}function Nc(s){return s.replace(/left|right|bottom|top/g,i=>HT[i])}function JT(s){return{top:0,right:0,bottom:0,left:0,...s}}function xv(s){return typeof s!="number"?JT(s):{top:s,right:s,bottom:s,left:s}}function jc(s){const{x:i,y:n,width:l,height:d}=s;return{width:l,height:d,top:n,left:i,right:i+l,bottom:n+d,x:i,y:n}}function Pg(s,i,n){let{reference:l,floating:d}=s;const m=Ds(i),h=_p(i),x=jp(h),g=fr(i),b=m==="y",v=l.x+l.width/2-d.width/2,f=l.y+l.height/2-d.height/2,N=l[x]/2-d[x]/2;let j;switch(g){case"top":j={x:v,y:l.y-d.height};break;case"bottom":j={x:v,y:l.y+l.height};break;case"right":j={x:l.x+l.width,y:f};break;case"left":j={x:l.x-d.width,y:f};break;default:j={x:l.x,y:l.y}}switch(jo(i)){case"start":j[h]-=N*(n&&b?-1:1);break;case"end":j[h]+=N*(n&&b?-1:1);break}return j}const ek=async(s,i,n)=>{const{placement:l="bottom",strategy:d="absolute",middleware:m=[],platform:h}=n,x=m.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(i));let b=await h.getElementRects({reference:s,floating:i,strategy:d}),{x:v,y:f}=Pg(b,l,g),N=l,j={},_=0;for(let w=0;w<x.length;w++){const{name:C,fn:E}=x[w],{x:D,y:L,data:V,reset:J}=await E({x:v,y:f,initialPlacement:l,placement:N,strategy:d,middlewareData:j,rects:b,platform:h,elements:{reference:s,floating:i}});v=D??v,f=L??f,j={...j,[C]:{...j[C],...V}},J&&_<=50&&(_++,typeof J=="object"&&(J.placement&&(N=J.placement),J.rects&&(b=J.rects===!0?await h.getElementRects({reference:s,floating:i,strategy:d}):J.rects),{x:v,y:f}=Pg(b,N,g)),w=-1)}return{x:v,y:f,placement:N,strategy:d,middlewareData:j}};async function wi(s,i){var n;i===void 0&&(i={});const{x:l,y:d,platform:m,rects:h,elements:x,strategy:g}=s,{boundary:b="clippingAncestors",rootBoundary:v="viewport",elementContext:f="floating",altBoundary:N=!1,padding:j=0}=xr(i,s),_=xv(j),C=x[N?f==="floating"?"reference":"floating":f],E=jc(await m.getClippingRect({element:(n=await(m.isElement==null?void 0:m.isElement(C)))==null||n?C:C.contextElement||await(m.getDocumentElement==null?void 0:m.getDocumentElement(x.floating)),boundary:b,rootBoundary:v,strategy:g})),D=f==="floating"?{x:l,y:d,width:h.floating.width,height:h.floating.height}:h.reference,L=await(m.getOffsetParent==null?void 0:m.getOffsetParent(x.floating)),V=await(m.isElement==null?void 0:m.isElement(L))?await(m.getScale==null?void 0:m.getScale(L))||{x:1,y:1}:{x:1,y:1},J=jc(m.convertOffsetParentRelativeRectToViewportRelativeRect?await m.convertOffsetParentRelativeRectToViewportRelativeRect({elements:x,rect:D,offsetParent:L,strategy:g}):D);return{top:(E.top-J.top+_.top)/V.y,bottom:(J.bottom-E.bottom+_.bottom)/V.y,left:(E.left-J.left+_.left)/V.x,right:(J.right-E.right+_.right)/V.x}}const tk=s=>({name:"arrow",options:s,async fn(i){const{x:n,y:l,placement:d,rects:m,platform:h,elements:x,middlewareData:g}=i,{element:b,padding:v=0}=xr(s,i)||{};if(b==null)return{};const f=xv(v),N={x:n,y:l},j=_p(d),_=jp(j),w=await h.getDimensions(b),C=j==="y",E=C?"top":"left",D=C?"bottom":"right",L=C?"clientHeight":"clientWidth",V=m.reference[_]+m.reference[j]-N[j]-m.floating[_],J=N[j]-m.reference[j],ie=await(h.getOffsetParent==null?void 0:h.getOffsetParent(b));let I=ie?ie[L]:0;(!I||!await(h.isElement==null?void 0:h.isElement(ie)))&&(I=x.floating[L]||m.floating[_]);const k=V/2-J/2,be=I/2-w[_]/2-1,te=Wr(f[E],be),G=Wr(f[D],be),oe=te,Ce=I-w[_]-G,ke=I/2-w[_]/2+k,Ee=Wm(oe,ke,Ce),P=!g.arrow&&jo(d)!=null&&ke!==Ee&&m.reference[_]/2-(ke<oe?te:G)-w[_]/2<0,Q=P?ke<oe?ke-oe:ke-Ce:0;return{[j]:N[j]+Q,data:{[j]:Ee,centerOffset:ke-Ee-Q,...P&&{alignmentOffset:Q}},reset:P}}}),ak=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(i){var n,l;const{placement:d,middlewareData:m,rects:h,initialPlacement:x,platform:g,elements:b}=i,{mainAxis:v=!0,crossAxis:f=!0,fallbackPlacements:N,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:w=!0,...C}=xr(s,i);if((n=m.arrow)!=null&&n.alignmentOffset)return{};const E=fr(d),D=Ds(x),L=fr(x)===x,V=await(g.isRTL==null?void 0:g.isRTL(b.floating)),J=N||(L||!w?[Nc(x)]:KT(x)),ie=_!=="none";!N&&ie&&J.push(...ZT(x,w,_,V));const I=[x,...J],k=await wi(i,C),be=[];let te=((l=m.flip)==null?void 0:l.overflows)||[];if(v&&be.push(k[E]),f){const ke=WT(d,h,V);be.push(k[ke[0]],k[ke[1]])}if(te=[...te,{placement:d,overflows:be}],!be.every(ke=>ke<=0)){var G,oe;const ke=(((G=m.flip)==null?void 0:G.index)||0)+1,Ee=I[ke];if(Ee&&(!(f==="alignment"?D!==Ds(Ee):!1)||te.every(F=>Ds(F.placement)===D?F.overflows[0]>0:!0)))return{data:{index:ke,overflows:te},reset:{placement:Ee}};let P=(oe=te.filter(Q=>Q.overflows[0]<=0).sort((Q,F)=>Q.overflows[1]-F.overflows[1])[0])==null?void 0:oe.placement;if(!P)switch(j){case"bestFit":{var Ce;const Q=(Ce=te.filter(F=>{if(ie){const ue=Ds(F.placement);return ue===D||ue==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(ue=>ue>0).reduce((ue,qe)=>ue+qe,0)]).sort((F,ue)=>F[1]-ue[1])[0])==null?void 0:Ce[0];Q&&(P=Q);break}case"initialPlacement":P=x;break}if(d!==P)return{reset:{placement:P}}}return{}}}};function Ig(s,i){return{top:s.top-i.height,right:s.right-i.width,bottom:s.bottom-i.height,left:s.left-i.width}}function Og(s){return FT.some(i=>s[i]>=0)}const sk=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(i){const{rects:n}=i,{strategy:l="referenceHidden",...d}=xr(s,i);switch(l){case"referenceHidden":{const m=await wi(i,{...d,elementContext:"reference"}),h=Ig(m,n.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:Og(h)}}}case"escaped":{const m=await wi(i,{...d,altBoundary:!0}),h=Ig(m,n.floating);return{data:{escapedOffsets:h,escaped:Og(h)}}}default:return{}}}}},fv=new Set(["left","top"]);async function rk(s,i){const{placement:n,platform:l,elements:d}=s,m=await(l.isRTL==null?void 0:l.isRTL(d.floating)),h=fr(n),x=jo(n),g=Ds(n)==="y",b=fv.has(h)?-1:1,v=m&&g?-1:1,f=xr(i,s);let{mainAxis:N,crossAxis:j,alignmentAxis:_}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return x&&typeof _=="number"&&(j=x==="end"?_*-1:_),g?{x:j*v,y:N*b}:{x:N*b,y:j*v}}const nk=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(i){var n,l;const{x:d,y:m,placement:h,middlewareData:x}=i,g=await rk(i,s);return h===((n=x.offset)==null?void 0:n.placement)&&(l=x.arrow)!=null&&l.alignmentOffset?{}:{x:d+g.x,y:m+g.y,data:{...g,placement:h}}}}},ok=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(i){const{x:n,y:l,placement:d}=i,{mainAxis:m=!0,crossAxis:h=!1,limiter:x={fn:C=>{let{x:E,y:D}=C;return{x:E,y:D}}},...g}=xr(s,i),b={x:n,y:l},v=await wi(i,g),f=Ds(fr(d)),N=Np(f);let j=b[N],_=b[f];if(m){const C=N==="y"?"top":"left",E=N==="y"?"bottom":"right",D=j+v[C],L=j-v[E];j=Wm(D,j,L)}if(h){const C=f==="y"?"top":"left",E=f==="y"?"bottom":"right",D=_+v[C],L=_-v[E];_=Wm(D,_,L)}const w=x.fn({...i,[N]:j,[f]:_});return{...w,data:{x:w.x-n,y:w.y-l,enabled:{[N]:m,[f]:h}}}}}},ik=function(s){return s===void 0&&(s={}),{options:s,fn(i){const{x:n,y:l,placement:d,rects:m,middlewareData:h}=i,{offset:x=0,mainAxis:g=!0,crossAxis:b=!0}=xr(s,i),v={x:n,y:l},f=Ds(d),N=Np(f);let j=v[N],_=v[f];const w=xr(x,i),C=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(g){const L=N==="y"?"height":"width",V=m.reference[N]-m.floating[L]+C.mainAxis,J=m.reference[N]+m.reference[L]-C.mainAxis;j<V?j=V:j>J&&(j=J)}if(b){var E,D;const L=N==="y"?"width":"height",V=fv.has(fr(d)),J=m.reference[f]-m.floating[L]+(V&&((E=h.offset)==null?void 0:E[f])||0)+(V?0:C.crossAxis),ie=m.reference[f]+m.reference[L]+(V?0:((D=h.offset)==null?void 0:D[f])||0)-(V?C.crossAxis:0);_<J?_=J:_>ie&&(_=ie)}return{[N]:j,[f]:_}}}},lk=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(i){var n,l;const{placement:d,rects:m,platform:h,elements:x}=i,{apply:g=()=>{},...b}=xr(s,i),v=await wi(i,b),f=fr(d),N=jo(d),j=Ds(d)==="y",{width:_,height:w}=m.floating;let C,E;f==="top"||f==="bottom"?(C=f,E=N===(await(h.isRTL==null?void 0:h.isRTL(x.floating))?"start":"end")?"left":"right"):(E=f,C=N==="end"?"top":"bottom");const D=w-v.top-v.bottom,L=_-v.left-v.right,V=Wr(w-v[C],D),J=Wr(_-v[E],L),ie=!i.middlewareData.shift;let I=V,k=J;if((n=i.middlewareData.shift)!=null&&n.enabled.x&&(k=L),(l=i.middlewareData.shift)!=null&&l.enabled.y&&(I=D),ie&&!N){const te=is(v.left,0),G=is(v.right,0),oe=is(v.top,0),Ce=is(v.bottom,0);j?k=_-2*(te!==0||G!==0?te+G:is(v.left,v.right)):I=w-2*(oe!==0||Ce!==0?oe+Ce:is(v.top,v.bottom))}await g({...i,availableWidth:k,availableHeight:I});const be=await h.getDimensions(x.floating);return _!==be.width||w!==be.height?{reset:{rects:!0}}:{}}}};function qc(){return typeof window<"u"}function _o(s){return gv(s)?(s.nodeName||"").toLowerCase():"#document"}function ls(s){var i;return(s==null||(i=s.ownerDocument)==null?void 0:i.defaultView)||window}function $s(s){var i;return(i=(gv(s)?s.ownerDocument:s.document)||window.document)==null?void 0:i.documentElement}function gv(s){return qc()?s instanceof Node||s instanceof ls(s).Node:!1}function Ts(s){return qc()?s instanceof Element||s instanceof ls(s).Element:!1}function Hs(s){return qc()?s instanceof HTMLElement||s instanceof ls(s).HTMLElement:!1}function Dg(s){return!qc()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof ls(s).ShadowRoot}const ck=new Set(["inline","contents"]);function Ri(s){const{overflow:i,overflowX:n,overflowY:l,display:d}=ks(s);return/auto|scroll|overlay|hidden|clip/.test(i+l+n)&&!ck.has(d)}const dk=new Set(["table","td","th"]);function uk(s){return dk.has(_o(s))}const mk=[":popover-open",":modal"];function Uc(s){return mk.some(i=>{try{return s.matches(i)}catch{return!1}})}const pk=["transform","translate","scale","rotate","perspective"],hk=["transform","translate","scale","rotate","perspective","filter"],xk=["paint","layout","strict","content"];function Sp(s){const i=wp(),n=Ts(s)?ks(s):s;return pk.some(l=>n[l]?n[l]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!i&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!i&&(n.filter?n.filter!=="none":!1)||hk.some(l=>(n.willChange||"").includes(l))||xk.some(l=>(n.contain||"").includes(l))}function fk(s){let i=Kr(s);for(;Hs(i)&&!bo(i);){if(Sp(i))return i;if(Uc(i))return null;i=Kr(i)}return null}function wp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gk=new Set(["html","body","#document"]);function bo(s){return gk.has(_o(s))}function ks(s){return ls(s).getComputedStyle(s)}function Bc(s){return Ts(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Kr(s){if(_o(s)==="html")return s;const i=s.assignedSlot||s.parentNode||Dg(s)&&s.host||$s(s);return Dg(i)?i.host:i}function bv(s){const i=Kr(s);return bo(i)?s.ownerDocument?s.ownerDocument.body:s.body:Hs(i)&&Ri(i)?i:bv(i)}function Ti(s,i,n){var l;i===void 0&&(i=[]),n===void 0&&(n=!0);const d=bv(s),m=d===((l=s.ownerDocument)==null?void 0:l.body),h=ls(d);if(m){const x=Ym(h);return i.concat(h,h.visualViewport||[],Ri(d)?d:[],x&&n?Ti(x):[])}return i.concat(d,Ti(d,[],n))}function Ym(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function vv(s){const i=ks(s);let n=parseFloat(i.width)||0,l=parseFloat(i.height)||0;const d=Hs(s),m=d?s.offsetWidth:n,h=d?s.offsetHeight:l,x=yc(n)!==m||yc(l)!==h;return x&&(n=m,l=h),{width:n,height:l,$:x}}function Tp(s){return Ts(s)?s:s.contextElement}function uo(s){const i=Tp(s);if(!Hs(i))return Bs(1);const n=i.getBoundingClientRect(),{width:l,height:d,$:m}=vv(i);let h=(m?yc(n.width):n.width)/l,x=(m?yc(n.height):n.height)/d;return(!h||!Number.isFinite(h))&&(h=1),(!x||!Number.isFinite(x))&&(x=1),{x:h,y:x}}const bk=Bs(0);function yv(s){const i=ls(s);return!wp()||!i.visualViewport?bk:{x:i.visualViewport.offsetLeft,y:i.visualViewport.offsetTop}}function vk(s,i,n){return i===void 0&&(i=!1),!n||i&&n!==ls(s)?!1:i}function bn(s,i,n,l){i===void 0&&(i=!1),n===void 0&&(n=!1);const d=s.getBoundingClientRect(),m=Tp(s);let h=Bs(1);i&&(l?Ts(l)&&(h=uo(l)):h=uo(s));const x=vk(m,n,l)?yv(m):Bs(0);let g=(d.left+x.x)/h.x,b=(d.top+x.y)/h.y,v=d.width/h.x,f=d.height/h.y;if(m){const N=ls(m),j=l&&Ts(l)?ls(l):l;let _=N,w=Ym(_);for(;w&&l&&j!==_;){const C=uo(w),E=w.getBoundingClientRect(),D=ks(w),L=E.left+(w.clientLeft+parseFloat(D.paddingLeft))*C.x,V=E.top+(w.clientTop+parseFloat(D.paddingTop))*C.y;g*=C.x,b*=C.y,v*=C.x,f*=C.y,g+=L,b+=V,_=ls(w),w=Ym(_)}}return jc({width:v,height:f,x:g,y:b})}function Vc(s,i){const n=Bc(s).scrollLeft;return i?i.left+n:bn($s(s)).left+n}function Nv(s,i){const n=s.getBoundingClientRect(),l=n.left+i.scrollLeft-Vc(s,n),d=n.top+i.scrollTop;return{x:l,y:d}}function yk(s){let{elements:i,rect:n,offsetParent:l,strategy:d}=s;const m=d==="fixed",h=$s(l),x=i?Uc(i.floating):!1;if(l===h||x&&m)return n;let g={scrollLeft:0,scrollTop:0},b=Bs(1);const v=Bs(0),f=Hs(l);if((f||!f&&!m)&&((_o(l)!=="body"||Ri(h))&&(g=Bc(l)),Hs(l))){const j=bn(l);b=uo(l),v.x=j.x+l.clientLeft,v.y=j.y+l.clientTop}const N=h&&!f&&!m?Nv(h,g):Bs(0);return{width:n.width*b.x,height:n.height*b.y,x:n.x*b.x-g.scrollLeft*b.x+v.x+N.x,y:n.y*b.y-g.scrollTop*b.y+v.y+N.y}}function Nk(s){return Array.from(s.getClientRects())}function jk(s){const i=$s(s),n=Bc(s),l=s.ownerDocument.body,d=is(i.scrollWidth,i.clientWidth,l.scrollWidth,l.clientWidth),m=is(i.scrollHeight,i.clientHeight,l.scrollHeight,l.clientHeight);let h=-n.scrollLeft+Vc(s);const x=-n.scrollTop;return ks(l).direction==="rtl"&&(h+=is(i.clientWidth,l.clientWidth)-d),{width:d,height:m,x:h,y:x}}const zg=25;function _k(s,i){const n=ls(s),l=$s(s),d=n.visualViewport;let m=l.clientWidth,h=l.clientHeight,x=0,g=0;if(d){m=d.width,h=d.height;const v=wp();(!v||v&&i==="fixed")&&(x=d.offsetLeft,g=d.offsetTop)}const b=Vc(l);if(b<=0){const v=l.ownerDocument,f=v.body,N=getComputedStyle(f),j=v.compatMode==="CSS1Compat"&&parseFloat(N.marginLeft)+parseFloat(N.marginRight)||0,_=Math.abs(l.clientWidth-f.clientWidth-j);_<=zg&&(m-=_)}else b<=zg&&(m+=b);return{width:m,height:h,x,y:g}}const Sk=new Set(["absolute","fixed"]);function wk(s,i){const n=bn(s,!0,i==="fixed"),l=n.top+s.clientTop,d=n.left+s.clientLeft,m=Hs(s)?uo(s):Bs(1),h=s.clientWidth*m.x,x=s.clientHeight*m.y,g=d*m.x,b=l*m.y;return{width:h,height:x,x:g,y:b}}function qg(s,i,n){let l;if(i==="viewport")l=_k(s,n);else if(i==="document")l=jk($s(s));else if(Ts(i))l=wk(i,n);else{const d=yv(s);l={x:i.x-d.x,y:i.y-d.y,width:i.width,height:i.height}}return jc(l)}function jv(s,i){const n=Kr(s);return n===i||!Ts(n)||bo(n)?!1:ks(n).position==="fixed"||jv(n,i)}function Tk(s,i){const n=i.get(s);if(n)return n;let l=Ti(s,[],!1).filter(x=>Ts(x)&&_o(x)!=="body"),d=null;const m=ks(s).position==="fixed";let h=m?Kr(s):s;for(;Ts(h)&&!bo(h);){const x=ks(h),g=Sp(h);!g&&x.position==="fixed"&&(d=null),(m?!g&&!d:!g&&x.position==="static"&&!!d&&Sk.has(d.position)||Ri(h)&&!g&&jv(s,h))?l=l.filter(v=>v!==h):d=x,h=Kr(h)}return i.set(s,l),l}function kk(s){let{element:i,boundary:n,rootBoundary:l,strategy:d}=s;const h=[...n==="clippingAncestors"?Uc(i)?[]:Tk(i,this._c):[].concat(n),l],x=h[0],g=h.reduce((b,v)=>{const f=qg(i,v,d);return b.top=is(f.top,b.top),b.right=Wr(f.right,b.right),b.bottom=Wr(f.bottom,b.bottom),b.left=is(f.left,b.left),b},qg(i,x,d));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function Ck(s){const{width:i,height:n}=vv(s);return{width:i,height:n}}function Ak(s,i,n){const l=Hs(i),d=$s(i),m=n==="fixed",h=bn(s,!0,m,i);let x={scrollLeft:0,scrollTop:0};const g=Bs(0);function b(){g.x=Vc(d)}if(l||!l&&!m)if((_o(i)!=="body"||Ri(d))&&(x=Bc(i)),l){const j=bn(i,!0,m,i);g.x=j.x+i.clientLeft,g.y=j.y+i.clientTop}else d&&b();m&&!l&&d&&b();const v=d&&!l&&!m?Nv(d,x):Bs(0),f=h.left+x.scrollLeft-g.x-v.x,N=h.top+x.scrollTop-g.y-v.y;return{x:f,y:N,width:h.width,height:h.height}}function Pm(s){return ks(s).position==="static"}function Ug(s,i){if(!Hs(s)||ks(s).position==="fixed")return null;if(i)return i(s);let n=s.offsetParent;return $s(s)===n&&(n=n.ownerDocument.body),n}function _v(s,i){const n=ls(s);if(Uc(s))return n;if(!Hs(s)){let d=Kr(s);for(;d&&!bo(d);){if(Ts(d)&&!Pm(d))return d;d=Kr(d)}return n}let l=Ug(s,i);for(;l&&uk(l)&&Pm(l);)l=Ug(l,i);return l&&bo(l)&&Pm(l)&&!Sp(l)?n:l||fk(s)||n}const Ek=async function(s){const i=this.getOffsetParent||_v,n=this.getDimensions,l=await n(s.floating);return{reference:Ak(s.reference,await i(s.floating),s.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function Rk(s){return ks(s).direction==="rtl"}const Lk={convertOffsetParentRelativeRectToViewportRelativeRect:yk,getDocumentElement:$s,getClippingRect:kk,getOffsetParent:_v,getElementRects:Ek,getClientRects:Nk,getDimensions:Ck,getScale:uo,isElement:Ts,isRTL:Rk};function Sv(s,i){return s.x===i.x&&s.y===i.y&&s.width===i.width&&s.height===i.height}function Mk(s,i){let n=null,l;const d=$s(s);function m(){var x;clearTimeout(l),(x=n)==null||x.disconnect(),n=null}function h(x,g){x===void 0&&(x=!1),g===void 0&&(g=1),m();const b=s.getBoundingClientRect(),{left:v,top:f,width:N,height:j}=b;if(x||i(),!N||!j)return;const _=nc(f),w=nc(d.clientWidth-(v+N)),C=nc(d.clientHeight-(f+j)),E=nc(v),L={rootMargin:-_+"px "+-w+"px "+-C+"px "+-E+"px",threshold:is(0,Wr(1,g))||1};let V=!0;function J(ie){const I=ie[0].intersectionRatio;if(I!==g){if(!V)return h();I?h(!1,I):l=setTimeout(()=>{h(!1,1e-7)},1e3)}I===1&&!Sv(b,s.getBoundingClientRect())&&h(),V=!1}try{n=new IntersectionObserver(J,{...L,root:d.ownerDocument})}catch{n=new IntersectionObserver(J,L)}n.observe(s)}return h(!0),m}function Pk(s,i,n,l){l===void 0&&(l={});const{ancestorScroll:d=!0,ancestorResize:m=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:x=typeof IntersectionObserver=="function",animationFrame:g=!1}=l,b=Tp(s),v=d||m?[...b?Ti(b):[],...Ti(i)]:[];v.forEach(E=>{d&&E.addEventListener("scroll",n,{passive:!0}),m&&E.addEventListener("resize",n)});const f=b&&x?Mk(b,n):null;let N=-1,j=null;h&&(j=new ResizeObserver(E=>{let[D]=E;D&&D.target===b&&j&&(j.unobserve(i),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var L;(L=j)==null||L.observe(i)})),n()}),b&&!g&&j.observe(b),j.observe(i));let _,w=g?bn(s):null;g&&C();function C(){const E=bn(s);w&&!Sv(w,E)&&n(),w=E,_=requestAnimationFrame(C)}return n(),()=>{var E;v.forEach(D=>{d&&D.removeEventListener("scroll",n),m&&D.removeEventListener("resize",n)}),f?.(),(E=j)==null||E.disconnect(),j=null,g&&cancelAnimationFrame(_)}}const Ik=nk,Ok=ok,Dk=ak,zk=lk,qk=sk,Bg=tk,Uk=ik,Bk=(s,i,n)=>{const l=new Map,d={platform:Lk,...n},m={...d.platform,_c:l};return ek(s,i,{...d,platform:m})};var Vk=typeof document<"u",Fk=function(){},uc=Vk?c.useLayoutEffect:Fk;function _c(s,i){if(s===i)return!0;if(typeof s!=typeof i)return!1;if(typeof s=="function"&&s.toString()===i.toString())return!0;let n,l,d;if(s&&i&&typeof s=="object"){if(Array.isArray(s)){if(n=s.length,n!==i.length)return!1;for(l=n;l--!==0;)if(!_c(s[l],i[l]))return!1;return!0}if(d=Object.keys(s),n=d.length,n!==Object.keys(i).length)return!1;for(l=n;l--!==0;)if(!{}.hasOwnProperty.call(i,d[l]))return!1;for(l=n;l--!==0;){const m=d[l];if(!(m==="_owner"&&s.$$typeof)&&!_c(s[m],i[m]))return!1}return!0}return s!==s&&i!==i}function wv(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function Vg(s,i){const n=wv(s);return Math.round(i*n)/n}function Im(s){const i=c.useRef(s);return uc(()=>{i.current=s}),i}function Hk(s){s===void 0&&(s={});const{placement:i="bottom",strategy:n="absolute",middleware:l=[],platform:d,elements:{reference:m,floating:h}={},transform:x=!0,whileElementsMounted:g,open:b}=s,[v,f]=c.useState({x:0,y:0,strategy:n,placement:i,middlewareData:{},isPositioned:!1}),[N,j]=c.useState(l);_c(N,l)||j(l);const[_,w]=c.useState(null),[C,E]=c.useState(null),D=c.useCallback(F=>{F!==ie.current&&(ie.current=F,w(F))},[]),L=c.useCallback(F=>{F!==I.current&&(I.current=F,E(F))},[]),V=m||_,J=h||C,ie=c.useRef(null),I=c.useRef(null),k=c.useRef(v),be=g!=null,te=Im(g),G=Im(d),oe=Im(b),Ce=c.useCallback(()=>{if(!ie.current||!I.current)return;const F={placement:i,strategy:n,middleware:N};G.current&&(F.platform=G.current),Bk(ie.current,I.current,F).then(ue=>{const qe={...ue,isPositioned:oe.current!==!1};ke.current&&!_c(k.current,qe)&&(k.current=qe,Lc.flushSync(()=>{f(qe)}))})},[N,i,n,G,oe]);uc(()=>{b===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[b]);const ke=c.useRef(!1);uc(()=>(ke.current=!0,()=>{ke.current=!1}),[]),uc(()=>{if(V&&(ie.current=V),J&&(I.current=J),V&&J){if(te.current)return te.current(V,J,Ce);Ce()}},[V,J,Ce,te,be]);const Ee=c.useMemo(()=>({reference:ie,floating:I,setReference:D,setFloating:L}),[D,L]),P=c.useMemo(()=>({reference:V,floating:J}),[V,J]),Q=c.useMemo(()=>{const F={position:n,left:0,top:0};if(!P.floating)return F;const ue=Vg(P.floating,v.x),qe=Vg(P.floating,v.y);return x?{...F,transform:"translate("+ue+"px, "+qe+"px)",...wv(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:qe}},[n,x,P.floating,v.x,v.y]);return c.useMemo(()=>({...v,update:Ce,refs:Ee,elements:P,floatingStyles:Q}),[v,Ce,Ee,P,Q])}const $k=s=>{function i(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:s,fn(n){const{element:l,padding:d}=typeof s=="function"?s(n):s;return l&&i(l)?l.current!=null?Bg({element:l.current,padding:d}).fn(n):{}:l?Bg({element:l,padding:d}).fn(n):{}}}},Gk=(s,i)=>({...Ik(s),options:[s,i]}),Wk=(s,i)=>({...Ok(s),options:[s,i]}),Kk=(s,i)=>({...Uk(s),options:[s,i]}),Yk=(s,i)=>({...Dk(s),options:[s,i]}),Xk=(s,i)=>({...zk(s),options:[s,i]}),Qk=(s,i)=>({...qk(s),options:[s,i]}),Zk=(s,i)=>({...$k(s),options:[s,i]});var Jk="Arrow",Tv=c.forwardRef((s,i)=>{const{children:n,width:l=10,height:d=5,...m}=s;return e.jsx(Kt.svg,{...m,ref:i,width:l,height:d,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Tv.displayName=Jk;var eC=Tv;function kv(s){const[i,n]=c.useState(void 0);return pr(()=>{if(s){n({width:s.offsetWidth,height:s.offsetHeight});const l=new ResizeObserver(d=>{if(!Array.isArray(d)||!d.length)return;const m=d[0];let h,x;if("borderBoxSize"in m){const g=m.borderBoxSize,b=Array.isArray(g)?g[0]:g;h=b.inlineSize,x=b.blockSize}else h=s.offsetWidth,x=s.offsetHeight;n({width:h,height:x})});return l.observe(s,{box:"border-box"}),()=>l.unobserve(s)}else n(void 0)},[s]),i}var kp="Popper",[Cv,Fc]=Cs(kp),[tC,Av]=Cv(kp),Ev=s=>{const{__scopePopper:i,children:n}=s,[l,d]=c.useState(null);return e.jsx(tC,{scope:i,anchor:l,onAnchorChange:d,children:n})};Ev.displayName=kp;var Rv="PopperAnchor",Lv=c.forwardRef((s,i)=>{const{__scopePopper:n,virtualRef:l,...d}=s,m=Av(Rv,n),h=c.useRef(null),x=xa(i,h),g=c.useRef(null);return c.useEffect(()=>{const b=g.current;g.current=l?.current||h.current,b!==g.current&&m.onAnchorChange(g.current)}),l?null:e.jsx(Kt.div,{...d,ref:x})});Lv.displayName=Rv;var Cp="PopperContent",[aC,sC]=Cv(Cp),Mv=c.forwardRef((s,i)=>{const{__scopePopper:n,side:l="bottom",sideOffset:d=0,align:m="center",alignOffset:h=0,arrowPadding:x=0,avoidCollisions:g=!0,collisionBoundary:b=[],collisionPadding:v=0,sticky:f="partial",hideWhenDetached:N=!1,updatePositionStrategy:j="optimized",onPlaced:_,...w}=s,C=Av(Cp,n),[E,D]=c.useState(null),L=xa(i,O=>D(O)),[V,J]=c.useState(null),ie=kv(V),I=ie?.width??0,k=ie?.height??0,be=l+(m!=="center"?"-"+m:""),te=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},G=Array.isArray(b)?b:[b],oe=G.length>0,Ce={padding:te,boundary:G.filter(nC),altBoundary:oe},{refs:ke,floatingStyles:Ee,placement:P,isPositioned:Q,middlewareData:F}=Hk({strategy:"fixed",placement:be,whileElementsMounted:(...O)=>Pk(...O,{animationFrame:j==="always"}),elements:{reference:C.anchor},middleware:[Gk({mainAxis:d+k,alignmentAxis:h}),g&&Wk({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Kk():void 0,...Ce}),g&&Yk({...Ce}),Xk({...Ce,apply:({elements:O,rects:q,availableWidth:$,availableHeight:ve})=>{const{width:Z,height:z}=q.reference,Oe=O.floating.style;Oe.setProperty("--radix-popper-available-width",`${$}px`),Oe.setProperty("--radix-popper-available-height",`${ve}px`),Oe.setProperty("--radix-popper-anchor-width",`${Z}px`),Oe.setProperty("--radix-popper-anchor-height",`${z}px`)}}),V&&Zk({element:V,padding:x}),oC({arrowWidth:I,arrowHeight:k}),N&&Qk({strategy:"referenceHidden",...Ce})]}),[ue,qe]=Ov(P),T=hr(_);pr(()=>{Q&&T?.()},[Q,T]);const W=F.arrow?.x,re=F.arrow?.y,A=F.arrow?.centerOffset!==0,[K,M]=c.useState();return pr(()=>{E&&M(window.getComputedStyle(E).zIndex)},[E]),e.jsx("div",{ref:ke.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:Q?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:e.jsx(aC,{scope:n,placedSide:ue,onArrowChange:J,arrowX:W,arrowY:re,shouldHideArrow:A,children:e.jsx(Kt.div,{"data-side":ue,"data-align":qe,...w,ref:L,style:{...w.style,animation:Q?void 0:"none"}})})})});Mv.displayName=Cp;var Pv="PopperArrow",rC={top:"bottom",right:"left",bottom:"top",left:"right"},Iv=c.forwardRef(function(i,n){const{__scopePopper:l,...d}=i,m=sC(Pv,l),h=rC[m.placedSide];return e.jsx("span",{ref:m.onArrowChange,style:{position:"absolute",left:m.arrowX,top:m.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0},children:e.jsx(eC,{...d,ref:n,style:{...d.style,display:"block"}})})});Iv.displayName=Pv;function nC(s){return s!==null}var oC=s=>({name:"transformOrigin",options:s,fn(i){const{placement:n,rects:l,middlewareData:d}=i,h=d.arrow?.centerOffset!==0,x=h?0:s.arrowWidth,g=h?0:s.arrowHeight,[b,v]=Ov(n),f={start:"0%",center:"50%",end:"100%"}[v],N=(d.arrow?.x??0)+x/2,j=(d.arrow?.y??0)+g/2;let _="",w="";return b==="bottom"?(_=h?f:`${N}px`,w=`${-g}px`):b==="top"?(_=h?f:`${N}px`,w=`${l.floating.height+g}px`):b==="right"?(_=`${-g}px`,w=h?f:`${j}px`):b==="left"&&(_=`${l.floating.width+g}px`,w=h?f:`${j}px`),{data:{x:_,y:w}}}});function Ov(s){const[i,n="center"]=s.split("-");return[i,n]}var Dv=Ev,zv=Lv,qv=Mv,Uv=Iv,iC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lC="VisuallyHidden",Bv=c.forwardRef((s,i)=>e.jsx(Kt.span,{...s,ref:i,style:{...iC,...s.style}}));Bv.displayName=lC;var cC=Bv,[Hc]=Cs("Tooltip",[Fc]),$c=Fc(),Vv="TooltipProvider",dC=700,Xm="tooltip.open",[uC,Ap]=Hc(Vv),Fv=s=>{const{__scopeTooltip:i,delayDuration:n=dC,skipDelayDuration:l=300,disableHoverableContent:d=!1,children:m}=s,h=c.useRef(!0),x=c.useRef(!1),g=c.useRef(0);return c.useEffect(()=>{const b=g.current;return()=>window.clearTimeout(b)},[]),e.jsx(uC,{scope:i,isOpenDelayedRef:h,delayDuration:n,onOpen:c.useCallback(()=>{window.clearTimeout(g.current),h.current=!1},[]),onClose:c.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>h.current=!0,l)},[l]),isPointerInTransitRef:x,onPointerInTransitChange:c.useCallback(b=>{x.current=b},[]),disableHoverableContent:d,children:m})};Fv.displayName=Vv;var ki="Tooltip",[mC,Li]=Hc(ki),Hv=s=>{const{__scopeTooltip:i,children:n,open:l,defaultOpen:d,onOpenChange:m,disableHoverableContent:h,delayDuration:x}=s,g=Ap(ki,s.__scopeTooltip),b=$c(i),[v,f]=c.useState(null),N=Us(),j=c.useRef(0),_=h??g.disableHoverableContent,w=x??g.delayDuration,C=c.useRef(!1),[E,D]=gr({prop:l,defaultProp:d??!1,onChange:I=>{I?(g.onOpen(),document.dispatchEvent(new CustomEvent(Xm))):g.onClose(),m?.(I)},caller:ki}),L=c.useMemo(()=>E?C.current?"delayed-open":"instant-open":"closed",[E]),V=c.useCallback(()=>{window.clearTimeout(j.current),j.current=0,C.current=!1,D(!0)},[D]),J=c.useCallback(()=>{window.clearTimeout(j.current),j.current=0,D(!1)},[D]),ie=c.useCallback(()=>{window.clearTimeout(j.current),j.current=window.setTimeout(()=>{C.current=!0,D(!0),j.current=0},w)},[w,D]);return c.useEffect(()=>()=>{j.current&&(window.clearTimeout(j.current),j.current=0)},[]),e.jsx(Dv,{...b,children:e.jsx(mC,{scope:i,contentId:N,open:E,stateAttribute:L,trigger:v,onTriggerChange:f,onTriggerEnter:c.useCallback(()=>{g.isOpenDelayedRef.current?ie():V()},[g.isOpenDelayedRef,ie,V]),onTriggerLeave:c.useCallback(()=>{_?J():(window.clearTimeout(j.current),j.current=0)},[J,_]),onOpen:V,onClose:J,disableHoverableContent:_,children:n})})};Hv.displayName=ki;var Qm="TooltipTrigger",$v=c.forwardRef((s,i)=>{const{__scopeTooltip:n,...l}=s,d=Li(Qm,n),m=Ap(Qm,n),h=$c(n),x=c.useRef(null),g=xa(i,x,d.onTriggerChange),b=c.useRef(!1),v=c.useRef(!1),f=c.useCallback(()=>b.current=!1,[]);return c.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(zv,{asChild:!0,...h,children:e.jsx(Kt.button,{"aria-describedby":d.open?d.contentId:void 0,"data-state":d.stateAttribute,...l,ref:g,onPointerMove:At(s.onPointerMove,N=>{N.pointerType!=="touch"&&!v.current&&!m.isPointerInTransitRef.current&&(d.onTriggerEnter(),v.current=!0)}),onPointerLeave:At(s.onPointerLeave,()=>{d.onTriggerLeave(),v.current=!1}),onPointerDown:At(s.onPointerDown,()=>{d.open&&d.onClose(),b.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:At(s.onFocus,()=>{b.current||d.onOpen()}),onBlur:At(s.onBlur,d.onClose),onClick:At(s.onClick,d.onClose)})})});$v.displayName=Qm;var Ep="TooltipPortal",[pC,hC]=Hc(Ep,{forceMount:void 0}),Gv=s=>{const{__scopeTooltip:i,forceMount:n,children:l,container:d}=s,m=Li(Ep,i);return e.jsx(pC,{scope:i,forceMount:n,children:e.jsx(js,{present:n||m.open,children:e.jsx(Oc,{asChild:!0,container:d,children:l})})})};Gv.displayName=Ep;var vo="TooltipContent",Wv=c.forwardRef((s,i)=>{const n=hC(vo,s.__scopeTooltip),{forceMount:l=n.forceMount,side:d="top",...m}=s,h=Li(vo,s.__scopeTooltip);return e.jsx(js,{present:l||h.open,children:h.disableHoverableContent?e.jsx(Kv,{side:d,...m,ref:i}):e.jsx(xC,{side:d,...m,ref:i})})}),xC=c.forwardRef((s,i)=>{const n=Li(vo,s.__scopeTooltip),l=Ap(vo,s.__scopeTooltip),d=c.useRef(null),m=xa(i,d),[h,x]=c.useState(null),{trigger:g,onClose:b}=n,v=d.current,{onPointerInTransitChange:f}=l,N=c.useCallback(()=>{x(null),f(!1)},[f]),j=c.useCallback((_,w)=>{const C=_.currentTarget,E={x:_.clientX,y:_.clientY},D=yC(E,C.getBoundingClientRect()),L=NC(E,D),V=jC(w.getBoundingClientRect()),J=SC([...L,...V]);x(J),f(!0)},[f]);return c.useEffect(()=>()=>N(),[N]),c.useEffect(()=>{if(g&&v){const _=C=>j(C,v),w=C=>j(C,g);return g.addEventListener("pointerleave",_),v.addEventListener("pointerleave",w),()=>{g.removeEventListener("pointerleave",_),v.removeEventListener("pointerleave",w)}}},[g,v,j,N]),c.useEffect(()=>{if(h){const _=w=>{const C=w.target,E={x:w.clientX,y:w.clientY},D=g?.contains(C)||v?.contains(C),L=!_C(E,h);D?N():L&&(N(),b())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[g,v,h,b,N]),e.jsx(Kv,{...s,ref:m})}),[fC,gC]=Hc(ki,{isInside:!1}),bC=Gw("TooltipContent"),Kv=c.forwardRef((s,i)=>{const{__scopeTooltip:n,children:l,"aria-label":d,onEscapeKeyDown:m,onPointerDownOutside:h,...x}=s,g=Li(vo,n),b=$c(n),{onClose:v}=g;return c.useEffect(()=>(document.addEventListener(Xm,v),()=>document.removeEventListener(Xm,v)),[v]),c.useEffect(()=>{if(g.trigger){const f=N=>{N.target?.contains(g.trigger)&&v()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[g.trigger,v]),e.jsx(Ic,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:f=>f.preventDefault(),onDismiss:v,children:e.jsxs(qv,{"data-state":g.stateAttribute,...b,...x,ref:i,style:{...x.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(bC,{children:l}),e.jsx(fC,{scope:n,isInside:!0,children:e.jsx(cC,{id:g.contentId,role:"tooltip",children:d||l})})]})})});Wv.displayName=vo;var Yv="TooltipArrow",vC=c.forwardRef((s,i)=>{const{__scopeTooltip:n,...l}=s,d=$c(n);return gC(Yv,n).isInside?null:e.jsx(Uv,{...d,...l,ref:i})});vC.displayName=Yv;function yC(s,i){const n=Math.abs(i.top-s.y),l=Math.abs(i.bottom-s.y),d=Math.abs(i.right-s.x),m=Math.abs(i.left-s.x);switch(Math.min(n,l,d,m)){case m:return"left";case d:return"right";case n:return"top";case l:return"bottom";default:throw new Error("unreachable")}}function NC(s,i,n=5){const l=[];switch(i){case"top":l.push({x:s.x-n,y:s.y+n},{x:s.x+n,y:s.y+n});break;case"bottom":l.push({x:s.x-n,y:s.y-n},{x:s.x+n,y:s.y-n});break;case"left":l.push({x:s.x+n,y:s.y-n},{x:s.x+n,y:s.y+n});break;case"right":l.push({x:s.x-n,y:s.y-n},{x:s.x-n,y:s.y+n});break}return l}function jC(s){const{top:i,right:n,bottom:l,left:d}=s;return[{x:d,y:i},{x:n,y:i},{x:n,y:l},{x:d,y:l}]}function _C(s,i){const{x:n,y:l}=s;let d=!1;for(let m=0,h=i.length-1;m<i.length;h=m++){const x=i[m],g=i[h],b=x.x,v=x.y,f=g.x,N=g.y;v>l!=N>l&&n<(f-b)*(l-v)/(N-v)+b&&(d=!d)}return d}function SC(s){const i=s.slice();return i.sort((n,l)=>n.x<l.x?-1:n.x>l.x?1:n.y<l.y?-1:n.y>l.y?1:0),wC(i)}function wC(s){if(s.length<=1)return s.slice();const i=[];for(let l=0;l<s.length;l++){const d=s[l];for(;i.length>=2;){const m=i[i.length-1],h=i[i.length-2];if((m.x-h.x)*(d.y-h.y)>=(m.y-h.y)*(d.x-h.x))i.pop();else break}i.push(d)}i.pop();const n=[];for(let l=s.length-1;l>=0;l--){const d=s[l];for(;n.length>=2;){const m=n[n.length-1],h=n[n.length-2];if((m.x-h.x)*(d.y-h.y)>=(m.y-h.y)*(d.x-h.x))n.pop();else break}n.push(d)}return n.pop(),i.length===1&&n.length===1&&i[0].x===n[0].x&&i[0].y===n[0].y?i:i.concat(n)}var TC=Fv,kC=Hv,CC=$v,AC=Gv,EC=Wv;function Xv({delayDuration:s=0,...i}){return e.jsx(TC,{delayDuration:s,...i})}function RC({...s}){return e.jsx(Xv,{children:e.jsx(kC,{...s})})}function LC({...s}){return e.jsx(CC,{...s})}function MC({className:s,sideOffset:i=4,children:n,...l}){return e.jsx(AC,{children:e.jsx(EC,{sideOffset:i,className:Xt("z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-xs text-white animate-in fade-in-0 zoom-in-95",s),...l,children:n})})}const PC="sidebar_state",IC=3600*24*7,OC="16rem",DC="18rem",zC="3rem",qC="b",Qv=c.createContext(null);function So(){const s=c.useContext(Qv);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}function UC({defaultOpen:s=!0,open:i,onOpenChange:n,className:l,style:d,children:m,...h}){const x=h4(),[g,b]=c.useState(!1),[v,f]=c.useState(s),N=i??v,j=c.useCallback(E=>{const D=typeof E=="function"?E(N):E;n?n(D):f(D),document.cookie=`${PC}=${D}; path=/; max-age=${IC}`},[n,N]),_=c.useCallback(()=>x?b(E=>!E):j(E=>!E),[x,j,b]);c.useEffect(()=>{const E=D=>{D.key===qC&&(D.metaKey||D.ctrlKey)&&(D.preventDefault(),_())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[_]);const w=N?"expanded":"collapsed",C=c.useMemo(()=>({state:w,open:N,setOpen:j,isMobile:x,openMobile:g,setOpenMobile:b,toggleSidebar:_}),[w,N,j,x,g,b,_]);return e.jsx(Qv.Provider,{value:C,children:e.jsx(Xv,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":OC,"--sidebar-width-icon":zC,...d},className:Xt("group/sidebar-wrapper flex min-h-svh w-full",l),...h,children:m})})})}function BC({side:s="left",variant:i="sidebar",collapsible:n="offcanvas",className:l,children:d,...m}){const{isMobile:h,state:x,openMobile:g,setOpenMobile:b}=So();return n==="none"?e.jsx("div",{className:Xt("flex h-full w-(--sidebar-width) flex-col bg-gray-50 text-gray-950",l),...m,children:d}):h?e.jsx(UT,{open:g,onOpenChange:b,...m,children:e.jsxs(uv,{className:"w-(--sidebar-width) bg-gray-50 p-0 text-gray-950 [&>button]:hidden",style:{"--sidebar-width":DC},side:s,children:[e.jsxs(mv,{className:"sr-only",children:[e.jsx(pv,{children:"Sidebar"}),e.jsx(hv,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:d})]})}):e.jsxs("div",{className:"group peer hidden text-gray-950 md:block","data-state":x,"data-collapsible":x==="collapsed"?n:"","data-variant":i,"data-side":s,children:[e.jsx("div",{className:Xt("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",i==="floating"||i==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+1rem)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{className:Xt("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",i==="floating"||i==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+1rem+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",l),...m,children:e.jsx("div",{className:Xt("flex h-full w-full flex-col bg-gray-50",i==="floating"&&"rounded-lg border shadow-sm"),children:d})})]})}function VC({className:s,...i}){const{toggleSidebar:n}=So();return e.jsx("button",{"aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:Xt("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-gray-950 sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full hover:group-data-[collapsible=offcanvas]:bg-gray-100","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...i})}function FC({className:s,...i}){return e.jsx("div",{className:Xt("flex flex-col gap-2 p-2",s),...i})}function HC({className:s,...i}){return e.jsx("div",{className:Xt("flex flex-col gap-2 p-2",s),...i})}function $C({className:s,...i}){return e.jsx("div",{className:Xt("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...i})}function GC({className:s,...i}){return e.jsx("div",{className:Xt("relative flex w-full min-w-0 flex-col p-2",s),...i})}function WC({className:s,asChild:i=!1,...n}){const l=i?pp:"div";return e.jsx(l,{className:Xt("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-gray-600 outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...n})}function KC({className:s,...i}){return e.jsx("ul",{className:Xt("flex w-full min-w-0 flex-col gap-1",s),...i})}function Rp({className:s,...i}){return e.jsx("li",{className:Xt("group/menu-item relative",s),...i})}const YC=Xw("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden transition-[width,height,padding] hover:bg-gray-950 hover:text-gray-50 focus-visible:ring-2 active:bg-gray-950 active:text-gray-50 disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-gray-950 data-[active=true]:font-medium data-[active=true]:text-gray-50 data-[state=open]:hover:bg-gray-950 data-[state=open]:hover:text-gray-50 group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-gray-950 hover:text-gray-50",outline:"bg-white shadow-sm hover:bg-gray-950 hover:text-gray-50 border border-gray-200"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Sc({asChild:s=!1,isActive:i=!1,variant:n="default",size:l="default",tooltip:d,className:m,...h}){const x=s?pp:"button",{isMobile:g,state:b}=So(),v=e.jsx(x,{"data-size":l,"data-active":i,className:Xt(YC({variant:n,size:l}),m),...h});return d?(typeof d=="string"&&(d={children:d}),e.jsxs(RC,{children:[e.jsx(LC,{asChild:!0,children:v}),e.jsx(MC,{side:"right",align:"center",hidden:b!=="collapsed"||g,...d})]})):v}function XC({className:s,...i}){return e.jsx("ul",{className:Xt("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-gray-200 px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...i})}function QC({className:s,...i}){return e.jsx("li",{className:Xt("group/menu-sub-item relative",s),...i})}function ZC({asChild:s=!1,size:i="md",isActive:n=!1,className:l,...d}){const m=s?pp:"a";return e.jsx(m,{"data-size":i,"data-active":n,className:Xt("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-gray-950 outline-hidden transition-colors hover:bg-gray-950 hover:text-gray-50 focus-visible:ring-2 active:bg-gray-950 active:text-gray-50 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-gray-50","data-[active=true]:bg-gray-950 data-[active=true]:text-gray-50",i==="sm"&&"text-xs",i==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",l),...d})}var Gc="Collapsible",[JC,Zv]=Cs(Gc),[eA,Lp]=JC(Gc),Jv=c.forwardRef((s,i)=>{const{__scopeCollapsible:n,open:l,defaultOpen:d,disabled:m,onOpenChange:h,...x}=s,[g,b]=gr({prop:l,defaultProp:d??!1,onChange:h,caller:Gc});return e.jsx(eA,{scope:n,disabled:m,contentId:Us(),open:g,onOpenToggle:c.useCallback(()=>b(v=>!v),[b]),children:e.jsx(Kt.div,{"data-state":Op(g),"data-disabled":m?"":void 0,...x,ref:i})})});Jv.displayName=Gc;var ey="CollapsibleTrigger",Mp=c.forwardRef((s,i)=>{const{__scopeCollapsible:n,...l}=s,d=Lp(ey,n);return e.jsx(Kt.button,{type:"button","aria-controls":d.contentId,"aria-expanded":d.open||!1,"data-state":Op(d.open),"data-disabled":d.disabled?"":void 0,disabled:d.disabled,...l,ref:i,onClick:At(s.onClick,d.onOpenToggle)})});Mp.displayName=ey;var Pp="CollapsibleContent",Ip=c.forwardRef((s,i)=>{const{forceMount:n,...l}=s,d=Lp(Pp,s.__scopeCollapsible);return e.jsx(js,{present:n||d.open,children:({present:m})=>e.jsx(tA,{...l,ref:i,present:m})})});Ip.displayName=Pp;var tA=c.forwardRef((s,i)=>{const{__scopeCollapsible:n,present:l,children:d,...m}=s,h=Lp(Pp,n),[x,g]=c.useState(l),b=c.useRef(null),v=xa(i,b),f=c.useRef(0),N=f.current,j=c.useRef(0),_=j.current,w=h.open||x,C=c.useRef(w),E=c.useRef(void 0);return c.useEffect(()=>{const D=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(D)},[]),pr(()=>{const D=b.current;if(D){E.current=E.current||{transitionDuration:D.style.transitionDuration,animationName:D.style.animationName},D.style.transitionDuration="0s",D.style.animationName="none";const L=D.getBoundingClientRect();f.current=L.height,j.current=L.width,C.current||(D.style.transitionDuration=E.current.transitionDuration,D.style.animationName=E.current.animationName),g(l)}},[h.open,l]),e.jsx(Kt.div,{"data-state":Op(h.open),"data-disabled":h.disabled?"":void 0,id:h.contentId,hidden:!w,...m,ref:v,style:{"--radix-collapsible-content-height":N?`${N}px`:void 0,"--radix-collapsible-content-width":_?`${_}px`:void 0,...s.style},children:w&&d})});function Op(s){return s?"open":"closed"}var ty=Jv,aA=Mp,sA=Ip;const rA=ty,nA=Mp,oA=Ip;function Wc(s){const i=s+"CollectionProvider",[n,l]=Cs(i),[d,m]=n(i,{collectionRef:{current:null},itemMap:new Map}),h=w=>{const{scope:C,children:E}=w,D=fa.useRef(null),L=fa.useRef(new Map).current;return e.jsx(d,{scope:C,itemMap:L,collectionRef:D,children:E})};h.displayName=i;const x=s+"CollectionSlot",g=fo(x),b=fa.forwardRef((w,C)=>{const{scope:E,children:D}=w,L=m(x,E),V=xa(C,L.collectionRef);return e.jsx(g,{ref:V,children:D})});b.displayName=x;const v=s+"CollectionItemSlot",f="data-radix-collection-item",N=fo(v),j=fa.forwardRef((w,C)=>{const{scope:E,children:D,...L}=w,V=fa.useRef(null),J=xa(C,V),ie=m(v,E);return fa.useEffect(()=>(ie.itemMap.set(V,{ref:V,...L}),()=>void ie.itemMap.delete(V))),e.jsx(N,{[f]:"",ref:J,children:D})});j.displayName=v;function _(w){const C=m(s+"CollectionConsumer",w);return fa.useCallback(()=>{const D=C.collectionRef.current;if(!D)return[];const L=Array.from(D.querySelectorAll(`[${f}]`));return Array.from(C.itemMap.values()).sort((ie,I)=>L.indexOf(ie.ref.current)-L.indexOf(I.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:h,Slot:b,ItemSlot:j},_,l]}var iA=c.createContext(void 0);function Mi(s){const i=c.useContext(iA);return s||i||"ltr"}var Om="rovingFocusGroup.onEntryFocus",lA={bubbles:!1,cancelable:!0},Pi="RovingFocusGroup",[Zm,ay,cA]=Wc(Pi),[dA,Kc]=Cs(Pi,[cA]),[uA,mA]=dA(Pi),sy=c.forwardRef((s,i)=>e.jsx(Zm.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(Zm.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(pA,{...s,ref:i})})}));sy.displayName=Pi;var pA=c.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:n,orientation:l,loop:d=!1,dir:m,currentTabStopId:h,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:g,onEntryFocus:b,preventScrollOnEntryFocus:v=!1,...f}=s,N=c.useRef(null),j=xa(i,N),_=Mi(m),[w,C]=gr({prop:h,defaultProp:x??null,onChange:g,caller:Pi}),[E,D]=c.useState(!1),L=hr(b),V=ay(n),J=c.useRef(!1),[ie,I]=c.useState(0);return c.useEffect(()=>{const k=N.current;if(k)return k.addEventListener(Om,L),()=>k.removeEventListener(Om,L)},[L]),e.jsx(uA,{scope:n,orientation:l,dir:_,loop:d,currentTabStopId:w,onItemFocus:c.useCallback(k=>C(k),[C]),onItemShiftTab:c.useCallback(()=>D(!0),[]),onFocusableItemAdd:c.useCallback(()=>I(k=>k+1),[]),onFocusableItemRemove:c.useCallback(()=>I(k=>k-1),[]),children:e.jsx(Kt.div,{tabIndex:E||ie===0?-1:0,"data-orientation":l,...f,ref:j,style:{outline:"none",...s.style},onMouseDown:At(s.onMouseDown,()=>{J.current=!0}),onFocus:At(s.onFocus,k=>{const be=!J.current;if(k.target===k.currentTarget&&be&&!E){const te=new CustomEvent(Om,lA);if(k.currentTarget.dispatchEvent(te),!te.defaultPrevented){const G=V().filter(P=>P.focusable),oe=G.find(P=>P.active),Ce=G.find(P=>P.id===w),Ee=[oe,Ce,...G].filter(Boolean).map(P=>P.ref.current);oy(Ee,v)}}J.current=!1}),onBlur:At(s.onBlur,()=>D(!1))})})}),ry="RovingFocusGroupItem",ny=c.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:n,focusable:l=!0,active:d=!1,tabStopId:m,children:h,...x}=s,g=Us(),b=m||g,v=mA(ry,n),f=v.currentTabStopId===b,N=ay(n),{onFocusableItemAdd:j,onFocusableItemRemove:_,currentTabStopId:w}=v;return c.useEffect(()=>{if(l)return j(),()=>_()},[l,j,_]),e.jsx(Zm.ItemSlot,{scope:n,id:b,focusable:l,active:d,children:e.jsx(Kt.span,{tabIndex:f?0:-1,"data-orientation":v.orientation,...x,ref:i,onMouseDown:At(s.onMouseDown,C=>{l?v.onItemFocus(b):C.preventDefault()}),onFocus:At(s.onFocus,()=>v.onItemFocus(b)),onKeyDown:At(s.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){v.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const E=fA(C,v.orientation,v.dir);if(E!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let L=N().filter(V=>V.focusable).map(V=>V.ref.current);if(E==="last")L.reverse();else if(E==="prev"||E==="next"){E==="prev"&&L.reverse();const V=L.indexOf(C.currentTarget);L=v.loop?gA(L,V+1):L.slice(V+1)}setTimeout(()=>oy(L))}}),children:typeof h=="function"?h({isCurrentTabStop:f,hasTabStop:w!=null}):h})})});ny.displayName=ry;var hA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xA(s,i){return i!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function fA(s,i,n){const l=xA(s.key,n);if(!(i==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(i==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return hA[l]}function oy(s,i=!1){const n=document.activeElement;for(const l of s)if(l===n||(l.focus({preventScroll:i}),document.activeElement!==n))return}function gA(s,i){return s.map((n,l)=>s[(i+l)%s.length])}var iy=sy,ly=ny,Jm=["Enter"," "],bA=["ArrowDown","PageUp","Home"],cy=["ArrowUp","PageDown","End"],vA=[...bA,...cy],yA={ltr:[...Jm,"ArrowRight"],rtl:[...Jm,"ArrowLeft"]},NA={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ii="Menu",[Ci,jA,_A]=Wc(Ii),[Nn,dy]=Cs(Ii,[_A,Fc,Kc]),Yc=Fc(),uy=Kc(),[SA,jn]=Nn(Ii),[wA,Oi]=Nn(Ii),my=s=>{const{__scopeMenu:i,open:n=!1,children:l,dir:d,onOpenChange:m,modal:h=!0}=s,x=Yc(i),[g,b]=c.useState(null),v=c.useRef(!1),f=hr(m),N=Mi(d);return c.useEffect(()=>{const j=()=>{v.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>v.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),e.jsx(Dv,{...x,children:e.jsx(SA,{scope:i,open:n,onOpenChange:f,content:g,onContentChange:b,children:e.jsx(wA,{scope:i,onClose:c.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:v,dir:N,modal:h,children:l})})})};my.displayName=Ii;var TA="MenuAnchor",Dp=c.forwardRef((s,i)=>{const{__scopeMenu:n,...l}=s,d=Yc(n);return e.jsx(zv,{...d,...l,ref:i})});Dp.displayName=TA;var zp="MenuPortal",[kA,py]=Nn(zp,{forceMount:void 0}),hy=s=>{const{__scopeMenu:i,forceMount:n,children:l,container:d}=s,m=jn(zp,i);return e.jsx(kA,{scope:i,forceMount:n,children:e.jsx(js,{present:n||m.open,children:e.jsx(Oc,{asChild:!0,container:d,children:l})})})};hy.displayName=zp;var Ns="MenuContent",[CA,qp]=Nn(Ns),xy=c.forwardRef((s,i)=>{const n=py(Ns,s.__scopeMenu),{forceMount:l=n.forceMount,...d}=s,m=jn(Ns,s.__scopeMenu),h=Oi(Ns,s.__scopeMenu);return e.jsx(Ci.Provider,{scope:s.__scopeMenu,children:e.jsx(js,{present:l||m.open,children:e.jsx(Ci.Slot,{scope:s.__scopeMenu,children:h.modal?e.jsx(AA,{...d,ref:i}):e.jsx(EA,{...d,ref:i})})})})}),AA=c.forwardRef((s,i)=>{const n=jn(Ns,s.__scopeMenu),l=c.useRef(null),d=xa(i,l);return c.useEffect(()=>{const m=l.current;if(m)return Hb(m)},[]),e.jsx(Up,{...s,ref:d,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:At(s.onFocusOutside,m=>m.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),EA=c.forwardRef((s,i)=>{const n=jn(Ns,s.__scopeMenu);return e.jsx(Up,{...s,ref:i,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),RA=fo("MenuContent.ScrollLock"),Up=c.forwardRef((s,i)=>{const{__scopeMenu:n,loop:l=!1,trapFocus:d,onOpenAutoFocus:m,onCloseAutoFocus:h,disableOutsidePointerEvents:x,onEntryFocus:g,onEscapeKeyDown:b,onPointerDownOutside:v,onFocusOutside:f,onInteractOutside:N,onDismiss:j,disableOutsideScroll:_,...w}=s,C=jn(Ns,n),E=Oi(Ns,n),D=Yc(n),L=uy(n),V=jA(n),[J,ie]=c.useState(null),I=c.useRef(null),k=xa(i,I,C.onContentChange),be=c.useRef(0),te=c.useRef(""),G=c.useRef(0),oe=c.useRef(null),Ce=c.useRef("right"),ke=c.useRef(0),Ee=_?gp:c.Fragment,P=_?{as:RA,allowPinchZoom:!0}:void 0,Q=ue=>{const qe=te.current+ue,T=V().filter(O=>!O.disabled),W=document.activeElement,re=T.find(O=>O.ref.current===W)?.textValue,A=T.map(O=>O.textValue),K=FA(A,qe,re),M=T.find(O=>O.textValue===K)?.ref.current;(function O(q){te.current=q,window.clearTimeout(be.current),q!==""&&(be.current=window.setTimeout(()=>O(""),1e3))})(qe),M&&setTimeout(()=>M.focus())};c.useEffect(()=>()=>window.clearTimeout(be.current),[]),Ib();const F=c.useCallback(ue=>Ce.current===oe.current?.side&&$A(ue,oe.current?.area),[]);return e.jsx(CA,{scope:n,searchRef:te,onItemEnter:c.useCallback(ue=>{F(ue)&&ue.preventDefault()},[F]),onItemLeave:c.useCallback(ue=>{F(ue)||(I.current?.focus(),ie(null))},[F]),onTriggerLeave:c.useCallback(ue=>{F(ue)&&ue.preventDefault()},[F]),pointerGraceTimerRef:G,onPointerGraceIntentChange:c.useCallback(ue=>{oe.current=ue},[]),children:e.jsx(Ee,{...P,children:e.jsx(fp,{asChild:!0,trapped:d,onMountAutoFocus:At(m,ue=>{ue.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:h,children:e.jsx(Ic,{asChild:!0,disableOutsidePointerEvents:x,onEscapeKeyDown:b,onPointerDownOutside:v,onFocusOutside:f,onInteractOutside:N,onDismiss:j,children:e.jsx(iy,{asChild:!0,...L,dir:E.dir,orientation:"vertical",loop:l,currentTabStopId:J,onCurrentTabStopIdChange:ie,onEntryFocus:At(g,ue=>{E.isUsingKeyboardRef.current||ue.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(qv,{role:"menu","aria-orientation":"vertical","data-state":Ry(C.open),"data-radix-menu-content":"",dir:E.dir,...D,...w,ref:k,style:{outline:"none",...w.style},onKeyDown:At(w.onKeyDown,ue=>{const T=ue.target.closest("[data-radix-menu-content]")===ue.currentTarget,W=ue.ctrlKey||ue.altKey||ue.metaKey,re=ue.key.length===1;T&&(ue.key==="Tab"&&ue.preventDefault(),!W&&re&&Q(ue.key));const A=I.current;if(ue.target!==A||!vA.includes(ue.key))return;ue.preventDefault();const M=V().filter(O=>!O.disabled).map(O=>O.ref.current);cy.includes(ue.key)&&M.reverse(),BA(M)}),onBlur:At(s.onBlur,ue=>{ue.currentTarget.contains(ue.target)||(window.clearTimeout(be.current),te.current="")}),onPointerMove:At(s.onPointerMove,Ai(ue=>{const qe=ue.target,T=ke.current!==ue.clientX;if(ue.currentTarget.contains(qe)&&T){const W=ue.clientX>ke.current?"right":"left";Ce.current=W,ke.current=ue.clientX}}))})})})})})})});xy.displayName=Ns;var LA="MenuGroup",Bp=c.forwardRef((s,i)=>{const{__scopeMenu:n,...l}=s;return e.jsx(Kt.div,{role:"group",...l,ref:i})});Bp.displayName=LA;var MA="MenuLabel",fy=c.forwardRef((s,i)=>{const{__scopeMenu:n,...l}=s;return e.jsx(Kt.div,{...l,ref:i})});fy.displayName=MA;var wc="MenuItem",Fg="menu.itemSelect",Xc=c.forwardRef((s,i)=>{const{disabled:n=!1,onSelect:l,...d}=s,m=c.useRef(null),h=Oi(wc,s.__scopeMenu),x=qp(wc,s.__scopeMenu),g=xa(i,m),b=c.useRef(!1),v=()=>{const f=m.current;if(!n&&f){const N=new CustomEvent(Fg,{bubbles:!0,cancelable:!0});f.addEventListener(Fg,j=>l?.(j),{once:!0}),Rb(f,N),N.defaultPrevented?b.current=!1:h.onClose()}};return e.jsx(gy,{...d,ref:g,disabled:n,onClick:At(s.onClick,v),onPointerDown:f=>{s.onPointerDown?.(f),b.current=!0},onPointerUp:At(s.onPointerUp,f=>{b.current||f.currentTarget?.click()}),onKeyDown:At(s.onKeyDown,f=>{const N=x.searchRef.current!=="";n||N&&f.key===" "||Jm.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Xc.displayName=wc;var gy=c.forwardRef((s,i)=>{const{__scopeMenu:n,disabled:l=!1,textValue:d,...m}=s,h=qp(wc,n),x=uy(n),g=c.useRef(null),b=xa(i,g),[v,f]=c.useState(!1),[N,j]=c.useState("");return c.useEffect(()=>{const _=g.current;_&&j((_.textContent??"").trim())},[m.children]),e.jsx(Ci.ItemSlot,{scope:n,disabled:l,textValue:d??N,children:e.jsx(ly,{asChild:!0,...x,focusable:!l,children:e.jsx(Kt.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":l||void 0,"data-disabled":l?"":void 0,...m,ref:b,onPointerMove:At(s.onPointerMove,Ai(_=>{l?h.onItemLeave(_):(h.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:At(s.onPointerLeave,Ai(_=>h.onItemLeave(_))),onFocus:At(s.onFocus,()=>f(!0)),onBlur:At(s.onBlur,()=>f(!1))})})})}),PA="MenuCheckboxItem",by=c.forwardRef((s,i)=>{const{checked:n=!1,onCheckedChange:l,...d}=s;return e.jsx(_y,{scope:s.__scopeMenu,checked:n,children:e.jsx(Xc,{role:"menuitemcheckbox","aria-checked":Tc(n)?"mixed":n,...d,ref:i,"data-state":Fp(n),onSelect:At(d.onSelect,()=>l?.(Tc(n)?!0:!n),{checkForDefaultPrevented:!1})})})});by.displayName=PA;var vy="MenuRadioGroup",[IA,OA]=Nn(vy,{value:void 0,onValueChange:()=>{}}),yy=c.forwardRef((s,i)=>{const{value:n,onValueChange:l,...d}=s,m=hr(l);return e.jsx(IA,{scope:s.__scopeMenu,value:n,onValueChange:m,children:e.jsx(Bp,{...d,ref:i})})});yy.displayName=vy;var Ny="MenuRadioItem",jy=c.forwardRef((s,i)=>{const{value:n,...l}=s,d=OA(Ny,s.__scopeMenu),m=n===d.value;return e.jsx(_y,{scope:s.__scopeMenu,checked:m,children:e.jsx(Xc,{role:"menuitemradio","aria-checked":m,...l,ref:i,"data-state":Fp(m),onSelect:At(l.onSelect,()=>d.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});jy.displayName=Ny;var Vp="MenuItemIndicator",[_y,DA]=Nn(Vp,{checked:!1}),Sy=c.forwardRef((s,i)=>{const{__scopeMenu:n,forceMount:l,...d}=s,m=DA(Vp,n);return e.jsx(js,{present:l||Tc(m.checked)||m.checked===!0,children:e.jsx(Kt.span,{...d,ref:i,"data-state":Fp(m.checked)})})});Sy.displayName=Vp;var zA="MenuSeparator",wy=c.forwardRef((s,i)=>{const{__scopeMenu:n,...l}=s;return e.jsx(Kt.div,{role:"separator","aria-orientation":"horizontal",...l,ref:i})});wy.displayName=zA;var qA="MenuArrow",Ty=c.forwardRef((s,i)=>{const{__scopeMenu:n,...l}=s,d=Yc(n);return e.jsx(Uv,{...d,...l,ref:i})});Ty.displayName=qA;var UA="MenuSub",[z2,ky]=Nn(UA),yi="MenuSubTrigger",Cy=c.forwardRef((s,i)=>{const n=jn(yi,s.__scopeMenu),l=Oi(yi,s.__scopeMenu),d=ky(yi,s.__scopeMenu),m=qp(yi,s.__scopeMenu),h=c.useRef(null),{pointerGraceTimerRef:x,onPointerGraceIntentChange:g}=m,b={__scopeMenu:s.__scopeMenu},v=c.useCallback(()=>{h.current&&window.clearTimeout(h.current),h.current=null},[]);return c.useEffect(()=>v,[v]),c.useEffect(()=>{const f=x.current;return()=>{window.clearTimeout(f),g(null)}},[x,g]),e.jsx(Dp,{asChild:!0,...b,children:e.jsx(gy,{id:d.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":d.contentId,"data-state":Ry(n.open),...s,ref:Mc(i,d.onTriggerChange),onClick:f=>{s.onClick?.(f),!(s.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:At(s.onPointerMove,Ai(f=>{m.onItemEnter(f),!f.defaultPrevented&&!s.disabled&&!n.open&&!h.current&&(m.onPointerGraceIntentChange(null),h.current=window.setTimeout(()=>{n.onOpenChange(!0),v()},100))})),onPointerLeave:At(s.onPointerLeave,Ai(f=>{v();const N=n.content?.getBoundingClientRect();if(N){const j=n.content?.dataset.side,_=j==="right",w=_?-5:5,C=N[_?"left":"right"],E=N[_?"right":"left"];m.onPointerGraceIntentChange({area:[{x:f.clientX+w,y:f.clientY},{x:C,y:N.top},{x:E,y:N.top},{x:E,y:N.bottom},{x:C,y:N.bottom}],side:j}),window.clearTimeout(x.current),x.current=window.setTimeout(()=>m.onPointerGraceIntentChange(null),300)}else{if(m.onTriggerLeave(f),f.defaultPrevented)return;m.onPointerGraceIntentChange(null)}})),onKeyDown:At(s.onKeyDown,f=>{const N=m.searchRef.current!=="";s.disabled||N&&f.key===" "||yA[l.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});Cy.displayName=yi;var Ay="MenuSubContent",Ey=c.forwardRef((s,i)=>{const n=py(Ns,s.__scopeMenu),{forceMount:l=n.forceMount,...d}=s,m=jn(Ns,s.__scopeMenu),h=Oi(Ns,s.__scopeMenu),x=ky(Ay,s.__scopeMenu),g=c.useRef(null),b=xa(i,g);return e.jsx(Ci.Provider,{scope:s.__scopeMenu,children:e.jsx(js,{present:l||m.open,children:e.jsx(Ci.Slot,{scope:s.__scopeMenu,children:e.jsx(Up,{id:x.contentId,"aria-labelledby":x.triggerId,...d,ref:b,align:"start",side:h.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{h.isUsingKeyboardRef.current&&g.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:At(s.onFocusOutside,v=>{v.target!==x.trigger&&m.onOpenChange(!1)}),onEscapeKeyDown:At(s.onEscapeKeyDown,v=>{h.onClose(),v.preventDefault()}),onKeyDown:At(s.onKeyDown,v=>{const f=v.currentTarget.contains(v.target),N=NA[h.dir].includes(v.key);f&&N&&(m.onOpenChange(!1),x.trigger?.focus(),v.preventDefault())})})})})})});Ey.displayName=Ay;function Ry(s){return s?"open":"closed"}function Tc(s){return s==="indeterminate"}function Fp(s){return Tc(s)?"indeterminate":s?"checked":"unchecked"}function BA(s){const i=document.activeElement;for(const n of s)if(n===i||(n.focus(),document.activeElement!==i))return}function VA(s,i){return s.map((n,l)=>s[(i+l)%s.length])}function FA(s,i,n){const d=i.length>1&&Array.from(i).every(b=>b===i[0])?i[0]:i,m=n?s.indexOf(n):-1;let h=VA(s,Math.max(m,0));d.length===1&&(h=h.filter(b=>b!==n));const g=h.find(b=>b.toLowerCase().startsWith(d.toLowerCase()));return g!==n?g:void 0}function HA(s,i){const{x:n,y:l}=s;let d=!1;for(let m=0,h=i.length-1;m<i.length;h=m++){const x=i[m],g=i[h],b=x.x,v=x.y,f=g.x,N=g.y;v>l!=N>l&&n<(f-b)*(l-v)/(N-v)+b&&(d=!d)}return d}function $A(s,i){if(!i)return!1;const n={x:s.clientX,y:s.clientY};return HA(n,i)}function Ai(s){return i=>i.pointerType==="mouse"?s(i):void 0}var GA=my,WA=Dp,KA=hy,YA=xy,XA=Bp,QA=fy,ZA=Xc,JA=by,eE=yy,tE=jy,aE=Sy,sE=wy,rE=Ty,nE=Cy,oE=Ey,Qc="DropdownMenu",[iE]=Cs(Qc,[dy]),Ga=dy(),[lE,Ly]=iE(Qc),My=s=>{const{__scopeDropdownMenu:i,children:n,dir:l,open:d,defaultOpen:m,onOpenChange:h,modal:x=!0}=s,g=Ga(i),b=c.useRef(null),[v,f]=gr({prop:d,defaultProp:m??!1,onChange:h,caller:Qc});return e.jsx(lE,{scope:i,triggerId:Us(),triggerRef:b,contentId:Us(),open:v,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(N=>!N),[f]),modal:x,children:e.jsx(GA,{...g,open:v,onOpenChange:f,dir:l,modal:x,children:n})})};My.displayName=Qc;var Py="DropdownMenuTrigger",Iy=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,disabled:l=!1,...d}=s,m=Ly(Py,n),h=Ga(n);return e.jsx(WA,{asChild:!0,...h,children:e.jsx(Kt.button,{type:"button",id:m.triggerId,"aria-haspopup":"menu","aria-expanded":m.open,"aria-controls":m.open?m.contentId:void 0,"data-state":m.open?"open":"closed","data-disabled":l?"":void 0,disabled:l,...d,ref:Mc(i,m.triggerRef),onPointerDown:At(s.onPointerDown,x=>{!l&&x.button===0&&x.ctrlKey===!1&&(m.onOpenToggle(),m.open||x.preventDefault())}),onKeyDown:At(s.onKeyDown,x=>{l||(["Enter"," "].includes(x.key)&&m.onOpenToggle(),x.key==="ArrowDown"&&m.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(x.key)&&x.preventDefault())})})})});Iy.displayName=Py;var cE="DropdownMenuPortal",Oy=s=>{const{__scopeDropdownMenu:i,...n}=s,l=Ga(i);return e.jsx(KA,{...l,...n})};Oy.displayName=cE;var Dy="DropdownMenuContent",zy=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ly(Dy,n),m=Ga(n),h=c.useRef(!1);return e.jsx(YA,{id:d.contentId,"aria-labelledby":d.triggerId,...m,...l,ref:i,onCloseAutoFocus:At(s.onCloseAutoFocus,x=>{h.current||d.triggerRef.current?.focus(),h.current=!1,x.preventDefault()}),onInteractOutside:At(s.onInteractOutside,x=>{const g=x.detail.originalEvent,b=g.button===0&&g.ctrlKey===!0,v=g.button===2||b;(!d.modal||v)&&(h.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zy.displayName=Dy;var dE="DropdownMenuGroup",uE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(XA,{...d,...l,ref:i})});uE.displayName=dE;var mE="DropdownMenuLabel",qy=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(QA,{...d,...l,ref:i})});qy.displayName=mE;var pE="DropdownMenuItem",Uy=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(ZA,{...d,...l,ref:i})});Uy.displayName=pE;var hE="DropdownMenuCheckboxItem",xE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(JA,{...d,...l,ref:i})});xE.displayName=hE;var fE="DropdownMenuRadioGroup",gE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(eE,{...d,...l,ref:i})});gE.displayName=fE;var bE="DropdownMenuRadioItem",vE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(tE,{...d,...l,ref:i})});vE.displayName=bE;var yE="DropdownMenuItemIndicator",NE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(aE,{...d,...l,ref:i})});NE.displayName=yE;var jE="DropdownMenuSeparator",By=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(sE,{...d,...l,ref:i})});By.displayName=jE;var _E="DropdownMenuArrow",SE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(rE,{...d,...l,ref:i})});SE.displayName=_E;var wE="DropdownMenuSubTrigger",TE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(nE,{...d,...l,ref:i})});TE.displayName=wE;var kE="DropdownMenuSubContent",CE=c.forwardRef((s,i)=>{const{__scopeDropdownMenu:n,...l}=s,d=Ga(n);return e.jsx(oE,{...d,...l,ref:i,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CE.displayName=kE;var AE=My,EE=Iy,RE=Oy,Vy=zy,Fy=qy,Hy=Uy,$y=By;const LE=AE,ME=EE,Gy=c.forwardRef(({className:s,sideOffset:i=4,...n},l)=>e.jsx(RE,{children:e.jsx(Vy,{ref:l,sideOffset:i,className:Xt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-gray-950 shadow-md","animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));Gy.displayName=Vy.displayName;const Wy=c.forwardRef(({className:s,inset:i,...n},l)=>e.jsx(Hy,{ref:l,className:Xt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",i&&"pl-8",s),...n}));Wy.displayName=Hy.displayName;const Ky=c.forwardRef(({className:s,inset:i,...n},l)=>e.jsx(Fy,{ref:l,className:Xt("px-2 py-1.5 text-sm font-semibold",i&&"pl-8",s),...n}));Ky.displayName=Fy.displayName;const Yy=c.forwardRef(({className:s,...i},n)=>e.jsx($y,{ref:n,className:Xt("-mx-1 my-1 h-px bg-gray-200",s),...i}));Yy.displayName=$y.displayName;function PE({title:s,items:i}){const{state:n,isMobile:l}=So(),d=Hw({select:m=>m.href});return e.jsxs(GC,{children:[e.jsx(WC,{children:s}),e.jsx(KC,{children:i.map(m=>{const h=`${m.title}-${m.url}`;return m.items?n==="collapsed"&&!l?e.jsx(DE,{item:m,href:d},h):e.jsx(OE,{item:m,href:d},h):e.jsx(IE,{item:m,href:d},h)})})]})}const Si=({children:s})=>e.jsx("span",{className:"rounded-full bg-gray-950 px-2 py-0.5 text-xs text-gray-50",children:s}),IE=({item:s,href:i})=>{const{setOpenMobile:n}=So();return e.jsx(Rp,{children:e.jsx(Sc,{asChild:!0,isActive:mo(i,s),tooltip:s.title,children:e.jsxs(qs,{to:s.url,onClick:()=>n(!1),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(Si,{children:s.badge})]})})})},OE=({item:s,href:i})=>{const{setOpenMobile:n}=So(),l=()=>{s.url&&n(!1)};return e.jsx(rA,{asChild:!0,defaultOpen:mo(i,s,!0),className:"group/collapsible",children:e.jsxs(Rp,{children:[e.jsxs("div",{className:"flex items-center gap-0",children:[s.url&&e.jsx(Sc,{asChild:!0,isActive:mo(i,s),tooltip:s.title,className:"flex-1 rounded-r-none",children:e.jsxs(qs,{to:s.url,onClick:l,children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(Si,{children:s.badge})]})}),e.jsx(nA,{asChild:!0,children:e.jsxs(Sc,{tooltip:`Expandir ${s.title}`,className:s.url?"w-8 rounded-l-none border-l border-gray-700":"",children:[!s.url&&s.icon&&e.jsx(s.icon,{}),!s.url&&e.jsx("span",{children:s.title}),!s.url&&s.badge&&e.jsx(Si,{children:s.badge}),e.jsx(fb,{className:`${s.url?"":"ml-auto"} transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90`})]})})]}),e.jsx(oA,{className:"CollapsibleContent",children:e.jsx(XC,{children:s.items.map(d=>e.jsx(QC,{children:e.jsx(ZC,{asChild:!0,isActive:mo(i,d),children:e.jsxs(qs,{to:d.url,onClick:()=>n(!1),children:[d.icon&&e.jsx(d.icon,{}),e.jsx("span",{children:d.title}),d.badge&&e.jsx(Si,{children:d.badge})]})})},d.title))})})]})})},DE=({item:s,href:i})=>e.jsx(Rp,{children:e.jsxs(LE,{children:[e.jsx(ME,{asChild:!0,children:e.jsxs(Sc,{tooltip:s.title,isActive:mo(i,s),children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title}),s.badge&&e.jsx(Si,{children:s.badge}),e.jsx(fb,{className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),e.jsxs(Gy,{side:"right",align:"start",sideOffset:4,children:[e.jsxs(Ky,{children:[s.title," ",s.badge?`(${s.badge})`:""]}),e.jsx(Yy,{}),s.items.map(n=>e.jsx(Wy,{asChild:!0,children:e.jsxs(qs,{to:n.url,className:`${mo(i,n)?"bg-gray-950 text-white":""}`,children:[n.icon&&e.jsx(n.icon,{}),e.jsx("span",{className:"max-w-52 text-wrap",children:n.title}),n.badge&&e.jsx("span",{className:"ml-auto text-xs",children:n.badge})]})},`${n.title}-${n.url}`))]})]})});function mo(s,i,n=!1){return s===i.url||s.split("?")[0]===i.url||!!i?.items?.filter(l=>l.url===s).length||n&&s.split("/")[1]!==""&&s.split("/")[1]===i?.url?.split("/")[1]}const zE={title:"Actividades",items:[{title:"Inicio",url:"/ActividadesSeminarioSO",icon:h1},{title:"Actividad 11",url:"/ActividadesSeminarioSO/actividad11",icon:Va,items:[{title:"Condicin de Carrera",url:"/ActividadesSeminarioSO/actividad11/condicion-carrera",icon:Va},{title:"Deadlock",url:"/ActividadesSeminarioSO/actividad11/deadlock",icon:Va},{title:"Starvation",url:"/ActividadesSeminarioSO/actividad11/starvation",icon:Va},{title:"Livelock",url:"/ActividadesSeminarioSO/actividad11/livelock",icon:Va},{title:"Lectura/Escritura",url:"/ActividadesSeminarioSO/actividad11/lectura-escritura",icon:Va},{title:"Contencin de Recursos",url:"/ActividadesSeminarioSO/actividad11/contencion-recursos",icon:Va},{title:"Bloqueos Innecesarios",url:"/ActividadesSeminarioSO/actividad11/bloqueos-innecesarios",icon:Va},{title:"Eventos",url:"/ActividadesSeminarioSO/actividad11/eventos",icon:Va},{title:"Priority Inversion",url:"/ActividadesSeminarioSO/actividad11/priority-inversion",icon:Va},{title:"ABA",url:"/ActividadesSeminarioSO/actividad11/aba",icon:Va},{title:"Memory Consistency",url:"/ActividadesSeminarioSO/actividad11/memory-consistency",icon:Va},{title:"Thundering Herd",url:"/ActividadesSeminarioSO/actividad11/thundering-herd",icon:Va},{title:"Convoying",url:"/ActividadesSeminarioSO/actividad11/convoying",icon:Va},{title:"False Sharing",url:"/ActividadesSeminarioSO/actividad11/false-sharing",icon:Va},{title:"Lost Wakeup",url:"/ActividadesSeminarioSO/actividad11/lost-wakeup",icon:Va}]},{title:"Actividad 12",url:"/ActividadesSeminarioSO/actividad12",icon:yb},{title:"Actividad 13",url:"/ActividadesSeminarioSO/actividad13",icon:bb},{title:"Actividad 14",url:"/ActividadesSeminarioSO/actividad14",icon:Pc}]},qE={navGroups:[zE]};function UE({...s}){return e.jsxs(BC,{className:"bg-gray-50",collapsible:"icon",variant:"floating",...s,children:[e.jsx(FC,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[e.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-gray-950 text-gray-50",children:e.jsx("span",{className:"text-sm font-bold",children:"SO"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Seminario SO"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Actividades React"})]})]})}),e.jsx($C,{children:qE.navGroups.map(i=>!i.title||!i.items?null:e.jsx(PE,{...i},i.title))}),e.jsx(HC,{children:e.jsx("div",{className:"px-2 py-1",children:e.jsx("p",{className:"text-xs text-gray-500",children:" 2025 Joan Alejandro Pia Puga"})})}),e.jsx(VC,{})]})}const ka=Rw({component:BE});function BE(){return e.jsxs(UC,{defaultOpen:!0,children:[e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx(UE,{}),e.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(ub,{})})})]}),!1]})}function VE(){return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-r from-gray-50 to-gray-100 p-12 mb-8 shadow-sm",children:e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4 text-gray-900",children:"Bienvenido"}),e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-700",children:"Seminario de Solucin de Problemas de Uso, Adaptacin y Explotacin de Sistemas Operativos"}),e.jsx("p",{className:"text-lg mb-6 text-gray-600",children:"Este proyecto est diseado para visualizar y explorar las diferentes actividades de la materia."}),e.jsx("div",{className:"inline-block bg-gray-900 text-white px-4 py-2 rounded-full text-sm font-medium",children:"Autor: Joan Alejandro Pia Puga"})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-900",children:"Actividades Disponibles"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(qs,{to:"/ActividadesSeminarioSO/actividad11",className:"block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-lg hover:scale-105",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-green-100 text-green-600",children:e.jsx(Va,{className:"size-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Actividad 11"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Aplicaciones y soluciones de problemas de concurrencia"}),e.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium",children:"Disponible"})]})]})}),e.jsx(qs,{to:"/ActividadesSeminarioSO/actividad12",className:"block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-lg hover:scale-105",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-purple-100 text-purple-600",children:e.jsx(yb,{className:"size-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Actividad 12"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Problema Productor-Consumidor con semforos"}),e.jsx("span",{className:"inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-medium",children:"Disponible"})]})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm opacity-60",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-gray-100 text-gray-400",children:e.jsx(bb,{className:"size-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Actividad 13"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Prximamente..."}),e.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-medium",children:"Prximamente"})]})]})}),e.jsx(qs,{to:"/ActividadesSeminarioSO/actividad14",className:"block rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all hover:shadow-lg hover:scale-105",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-blue-100 text-blue-600",children:e.jsx(Pc,{className:"size-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Actividad 14"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Algoritmo del Banquero para prevencin de deadlock"}),e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium",children:"Disponible"})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 flex items-start gap-3",children:[e.jsx(f1,{className:"size-5 text-blue-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-blue-900",children:"Selecciona una actividad disponible del men lateral o de las tarjetas superiores para comenzar."})]})]})}const FE=Sa("/ActividadesSeminarioSO/")({component:VE});function HE(){const s=["A","B","C"],i=[10,5,7],n=[{id:0,max:[7,5,3],allocation:[0,1,0],need:[7,4,3],finished:!1},{id:1,max:[3,2,2],allocation:[2,0,0],need:[1,2,2],finished:!1},{id:2,max:[9,0,2],allocation:[3,0,2],need:[6,0,0],finished:!1},{id:3,max:[2,2,2],allocation:[2,1,1],need:[0,1,1],finished:!1},{id:4,max:[4,3,3],allocation:[0,0,2],need:[4,3,1],finished:!1}],[l,d]=c.useState(i),[m,h]=c.useState(n),[x,g]=c.useState([]),[b,v]=c.useState(null),[f,N]=c.useState([]),[j,_]=c.useState(0),[w,C]=c.useState([0,0,0]),E=te=>{N(G=>[...G,te])},D=(te,G)=>te.map((oe,Ce)=>oe-G[Ce]),L=(te,G)=>te.every((oe,Ce)=>oe<=G[Ce]),V=(te,G)=>{const oe=[...te],Ce=G.map(()=>!1),ke=[];E(" Iniciando algoritmo de seguridad..."),E(` Recursos disponibles: [${oe.join(", ")}]`);let Ee=!0;for(;Ee;){Ee=!1;for(let Q=0;Q<G.length;Q++)if(!Ce[Q]&&L(G[Q].need,oe)){E(` P${Q} puede terminar: Need[${G[Q].need.join(", ")}]  Work[${oe.join(", ")}]`);for(let F=0;F<oe.length;F++)oe[F]+=G[Q].allocation[F];E(`   Recursos liberados. Work = [${oe.join(", ")}]`),Ce[Q]=!0,ke.push(Q),Ee=!0;break}}if(Ce.every(Q=>Q))return E(" Estado SEGURO encontrado"),E(` Secuencia segura: ${ke.map(Q=>`P${Q}`).join("  ")}`),g(ke),v(!0),!0;{E(" Estado INSEGURO: No todos los procesos pueden terminar");const Q=Ce.map((F,ue)=>F?-1:ue).filter(F=>F!==-1);return E(`   Procesos bloqueados: ${Q.map(F=>`P${F}`).join(", ")}`),v(!1),!1}},J=()=>{N([]),g([]),v(null);const te=m.map(G=>({...G,need:D(G.max,G.allocation)}));h(te),V(l,te)},ie=()=>{N([]),g([]),v(null);const te=m[j];if(E(` Proceso P${j} solicita recursos: [${w.join(", ")}]`),w.some((P,Q)=>P>te.need[Q])){E(" ERROR: La solicitud excede la necesidad mxima declarada"),E(`   Need: [${te.need.join(", ")}], Request: [${w.join(", ")}]`),v(!1);return}if(w.some((P,Q)=>P>l[Q])){E(" No hay suficientes recursos disponibles"),E(`   Available: [${l.join(", ")}], Request: [${w.join(", ")}]`),E("   El proceso debe ESPERAR"),v(!1);return}E(" Verificaciones pasadas. Simulando asignacin...");const Ce=l.map((P,Q)=>P-w[Q]),ke=m.map((P,Q)=>{if(Q===j){const F=P.allocation.map((ue,qe)=>ue+w[qe]);return{...P,allocation:F,need:D(P.max,F)}}return P});E(" Nuevo estado simulado:"),E(`   Available: [${Ce.join(", ")}]`),E(`   P${j} Allocation: [${ke[j].allocation.join(", ")}]`),E(`   P${j} Need: [${ke[j].need.join(", ")}]`),V(Ce,ke)?(E(" Solicitud CONCEDIDA"),d(Ce),h(ke)):(E(" Solicitud RECHAZADA (llevara a estado inseguro)"),E(`   El proceso P${j} debe ESPERAR`))},I=()=>{d(i),h(n),g([]),v(null),N([]),_(0),C([0,0,0])},k=(te,G,oe)=>{const Ce=m.map((ke,Ee)=>{if(Ee===te){const P=[...ke.max];return P[G]=Math.max(0,oe),{...ke,max:P,need:D(P,ke.allocation)}}return ke});h(Ce)},be=(te,G,oe)=>{const Ce=m.map((P,Q)=>{if(Q===te){const F=[...P.allocation];return F[G]=Math.max(0,Math.min(oe,P.max[G])),{...P,allocation:F,need:D(P.max,F)}}return P});h(Ce);const ke=s.map((P,Q)=>Ce.reduce((F,ue)=>F+ue.allocation[Q],0)),Ee=i.map((P,Q)=>P-ke[Q]);d(Ee)};return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(nt,{className:"size-6 text-blue-400"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Demostracin Interactiva"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Recursos Disponibles (Available)"}),e.jsx("div",{className:"space-y-3",children:s.map((te,G)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-300 font-medium",children:["Recurso ",te,":"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-800 rounded-full h-2 w-32",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${l[G]/i[G]*100}%`}})}),e.jsx("span",{className:"text-2xl font-bold text-blue-400 w-12 text-right",children:l[G]})]})]},te))})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Estado del Sistema"}),b===null?e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx(yn,{className:"size-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Ejecuta el algoritmo para verificar seguridad"})]}):b?e.jsxs("div",{className:"text-green-400",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(xg,{className:"size-8"}),e.jsx("span",{className:"text-xl font-bold",children:"Estado SEGURO"})]}),e.jsxs("div",{className:"bg-green-900/30 border border-green-700 rounded p-3",children:[e.jsx("p",{className:"text-sm text-green-200 mb-2",children:"Secuencia segura encontrada:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((te,G)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"bg-green-600 text-white px-3 py-1 rounded font-bold",children:["P",te]}),G<x.length-1&&e.jsx("span",{className:"text-green-400",children:""})]},G))})]})]}):e.jsxs("div",{className:"text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(c1,{className:"size-8"}),e.jsx("span",{className:"text-xl font-bold",children:"Estado INSEGURO"})]}),e.jsx("div",{className:"bg-red-900/30 border border-red-700 rounded p-3",children:e.jsx("p",{className:"text-sm text-red-200",children:"No existe una secuencia segura. El sistema podra entrar en deadlock."})})]})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 overflow-x-auto",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Estado de Procesos"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{className:"text-left text-gray-300 p-2",children:"Proceso"}),e.jsx("th",{className:"text-center text-gray-300 p-2",colSpan:3,children:"Max"}),e.jsx("th",{className:"text-center text-gray-300 p-2",colSpan:3,children:"Allocation"}),e.jsx("th",{className:"text-center text-gray-300 p-2",colSpan:3,children:"Need"})]}),e.jsxs("tr",{className:"border-b border-gray-600 text-xs text-gray-400",children:[e.jsx("th",{className:"p-2"}),["A","B","C"].map(te=>e.jsx("th",{className:"p-1",children:te},`max-${te}`)),["A","B","C"].map(te=>e.jsx("th",{className:"p-1",children:te},`alloc-${te}`)),["A","B","C"].map(te=>e.jsx("th",{className:"p-1",children:te},`need-${te}`))]})]}),e.jsx("tbody",{children:m.map(te=>e.jsxs("tr",{className:"border-b border-gray-600 hover:bg-gray-600/50",children:[e.jsxs("td",{className:"text-white font-bold p-2",children:["P",te.id]}),te.max.map((G,oe)=>e.jsx("td",{className:"text-center p-1",children:e.jsx("input",{type:"number",min:"0",max:"20",value:G,onChange:Ce=>k(te.id,oe,Number(Ce.target.value)),className:"w-12 bg-gray-800 text-white text-center rounded px-1 py-0.5"})},`max-${oe}`)),te.allocation.map((G,oe)=>e.jsx("td",{className:"text-center p-1",children:e.jsx("input",{type:"number",min:"0",max:te.max[oe],value:G,onChange:Ce=>be(te.id,oe,Number(Ce.target.value)),className:"w-12 bg-gray-800 text-orange-400 text-center rounded px-1 py-0.5"})},`alloc-${oe}`)),te.need.map((G,oe)=>e.jsx("td",{className:"text-center text-purple-400 p-1",children:G},`need-${oe}`))]},te.id))})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pc,{className:"size-5 text-blue-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Solicitar Recursos"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300 block mb-2",children:"Proceso:"}),e.jsx("select",{value:j,onChange:te=>_(Number(te.target.value)),className:"w-full bg-gray-800 text-white rounded px-3 py-2",children:m.map(te=>e.jsxs("option",{value:te.id,children:["Proceso P",te.id]},te.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300 block mb-2",children:"Recursos a solicitar:"}),e.jsx("div",{className:"flex gap-2",children:s.map((te,G)=>e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:te}),e.jsx("input",{type:"number",min:"0",max:m[j].need[G],value:w[G],onChange:oe=>{const Ce=[...w];Ce[G]=Number(oe.target.value),C(Ce)},className:"w-full bg-gray-800 text-white rounded px-2 py-1 text-center"})]},te))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(nt,{className:"size-4"}),"Solicitar Recursos"]}),e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[e.jsx(xg,{className:"size-4"}),"Verificar Seguridad"]}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-3",children:"Registro de Ejecucin"}),e.jsx("div",{className:"bg-gray-900 rounded p-3 h-64 overflow-y-auto font-mono text-xs text-gray-300",children:f.length===0?e.jsx("div",{className:"text-gray-500 text-center py-8",children:"Ejecuta una operacin para ver el registro"}):f.map((te,G)=>e.jsx("div",{className:"mb-1",children:te},G))})]})]})}function $E(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 pb-12",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-blue-600 text-white",children:e.jsx(k1,{className:"size-6"})}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Algoritmo del Banquero"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Prevencin de interbloqueo mediante asignacin segura de recursos"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white text-gray-900 rounded-lg p-8 mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ia,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Planteamiento del Problema"})]}),e.jsxs("div",{className:"prose prose-gray max-w-none space-y-4",children:[e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["El ",e.jsx("strong",{className:"text-blue-600",children:"Algoritmo del Banquero"})," es un algoritmo de prevencin de interbloqueo (deadlock) propuesto por Edsger Dijkstra. Su nombre proviene de la analoga con un banquero que debe decidir si otorgar prstamos a clientes de manera que siempre pueda satisfacer todas las necesidades mximas de sus clientes sin quedarse sin recursos."]}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 my-4",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:" Objetivo del Algoritmo"}),e.jsxs("p",{className:"text-gray-700 text-sm",children:["Determinar si es ",e.jsx("strong",{children:"seguro"})," asignar recursos a un proceso en un momento dado. Un estado es seguro si existe al menos una secuencia de ejecucin que permite a todos los procesos completar su trabajo sin entrar en deadlock."]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-6 mb-3",children:"Conceptos Fundamentales"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-green-900 mb-2",children:" Estado Seguro"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Existe al menos una secuencia de procesos que permite completar todos sin deadlock. El sistema puede satisfacer todas las necesidades mximas de los procesos."})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-red-900 mb-2",children:" Estado Inseguro"}),e.jsx("p",{className:"text-sm text-gray-700",children:"No hay garanta de evitar deadlock. Puede llevar a un estado donde ningn proceso puede continuar por falta de recursos."})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-6 mb-3",children:"Estructuras de Datos"}),e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["El algoritmo mantiene cuatro estructuras principales para ",e.jsx("strong",{children:"n"})," procesos y ",e.jsx("strong",{children:"m"})," tipos de recursos:"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 my-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Available (Disponible)"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Vector de tamao ",e.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"m"}),". Indica cuntas instancias de cada tipo de recurso estn disponibles actualmente."]}),e.jsx("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded mt-1 inline-block",children:"Available[j] = k  hay k instancias del recurso j disponibles"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-green-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Max (Mximo)"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Matriz ",e.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"n  m"}),". Define la demanda mxima de cada proceso. Nmero mximo de instancias que cada proceso puede solicitar."]}),e.jsx("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded mt-1 inline-block",children:"Max[i][j] = k  proceso i puede solicitar mximo k instancias del recurso j"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-orange-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Allocation (Asignacin)"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Matriz ",e.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"n  m"}),". Define cuntas instancias de cada recurso estn actualmente asignadas a cada proceso."]}),e.jsx("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded mt-1 inline-block",children:"Allocation[i][j] = k  proceso i tiene asignadas k instancias del recurso j"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-purple-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"4"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Need (Necesidad)"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Matriz ",e.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"n  m"}),". Indica cuntos recursos adicionales puede necesitar cada proceso. Se calcula como: ",e.jsx("strong",{children:"Need = Max - Allocation"})]}),e.jsx("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded mt-1 inline-block",children:"Need[i][j] = Max[i][j] - Allocation[i][j]"})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-6 mb-3",children:"Algoritmo de Seguridad"}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:"Para determinar si un estado es seguro, el algoritmo sigue estos pasos:"}),e.jsxs("div",{className:"bg-blue-900/10 border border-blue-300 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"1."}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Inicializar ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Work = Available"})," y",e.jsx("code",{className:"bg-blue-100 px-1 rounded ml-1",children:"Finish[i] = false"})," para todos los procesos."]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"2."}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Buscar un proceso ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"i"})," tal que:",e.jsx("br",{})," ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Finish[i] = false"}),e.jsx("br",{})," ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Need[i]  Work"})," (puede completarse con recursos disponibles)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"3."}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Si se encuentra tal proceso:",e.jsx("br",{})," ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Work = Work + Allocation[i]"})," (libera recursos)",e.jsx("br",{})," ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Finish[i] = true"}),e.jsx("br",{})," Volver al paso 2"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"font-bold text-blue-900",children:"4."}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Si ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Finish[i] = true"})," para todos, el estado es ",e.jsx("strong",{className:"text-green-600",children:"SEGURO"}),".",e.jsx("br",{}),"Si no, el estado es ",e.jsx("strong",{className:"text-red-600",children:"INSEGURO"}),"."]})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mt-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gb,{className:"size-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-yellow-900 mb-1",children:"Decisin de Asignacin"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Cuando un proceso solicita recursos, el sistema simula la asignacin y ejecuta el algoritmo de seguridad. Solo si el nuevo estado es seguro, se concede la solicitud. De lo contrario, el proceso debe esperar hasta que sea seguro asignar los recursos."})]})]})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-6 mb-3",children:"Ventajas y Limitaciones"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-green-900 mb-2",children:" Ventajas"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Previene deadlock de forma proactiva"}),e.jsx("li",{children:"Garantiza que el sistema nunca entre en estado inseguro"}),e.jsx("li",{children:"Permite utilizacin eficiente de recursos"})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-orange-900 mb-2",children:" Limitaciones"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Requiere conocer de antemano las necesidades mximas"}),e.jsx("li",{children:"El nmero de procesos debe ser fijo"}),e.jsx("li",{children:"Puede ser conservador y rechazar solicitudes seguras"})]})]})]})]})]}),e.jsx(HE,{})]})]})}const GE=Sa("/ActividadesSeminarioSO/actividad14/")({component:$E});function WE(){return e.jsx("div",{children:e.jsx("h1",{children:"Actividad 13"})})}const KE=Sa("/ActividadesSeminarioSO/actividad13/")({component:WE});function YE(){const[s,i]=c.useState(5),[n,l]=c.useState(2),[d,m]=c.useState(2),[h,x]=c.useState(1e3),[g,b]=c.useState(1200),[v,f]=c.useState([]),[N,j]=c.useState(s),[_,w]=c.useState(0),[C,E]=c.useState(1),[D,L]=c.useState(!1),[V,J]=c.useState({produced:0,consumed:0,totalProduced:0,totalConsumed:0}),[ie,I]=c.useState([]),[k,be]=c.useState([]),[te,G]=c.useState([]),oe=c.useRef(null),Ce=c.useRef(null),[ke,Ee]=c.useState(!1),P=c.useRef(1),Q=c.useRef(1),F=c.useRef([]),ue=c.useRef([]);c.useEffect(()=>{!ke&&oe.current&&oe.current.scrollIntoView({behavior:"smooth"})},[te,ke]);const qe=()=>{if(!Ce.current)return;const{scrollTop:Z,scrollHeight:z,clientHeight:Oe}=Ce.current,Re=z-Z-Oe<10;Ee(!Re)};c.useEffect(()=>{I(Array(n).fill("idle")),be(Array(d).fill("idle"))},[n,d]),c.useEffect(()=>{if(!D){const Z=s-v.length;j(Z),w(v.length)}},[s,D,v.length]);const T=Z=>{const z=new Date().toLocaleTimeString();G(Oe=>[...Oe.slice(-49),`[${z}] ${Z}`])},W=(Z,z)=>{I(Oe=>{const Re=[...Oe];return Re[Z]=z,Re})},re=(Z,z)=>{be(Oe=>{const Re=[...Oe];return Re[Z]=z,Re})},A=async Z=>{if(!D)return;if(W(Z,"waiting_empty"),T(` Productor ${Z+1}: Esperando espacio vaco (empty=${N})`),await new Promise(Oe=>setTimeout(Oe,200)),N<=0){T(` Productor ${Z+1}: Buffer lleno, bloqueado`),W(Z,"blocked");return}if(j(Oe=>Oe-1),W(Z,"waiting_mutex"),T(` Productor ${Z+1}: Decrement empty a ${N-1}, esperando mutex`),await new Promise(Oe=>setTimeout(Oe,200)),C<=0){T(` Productor ${Z+1}: Esperando acceso exclusivo al buffer`),W(Z,"blocked"),j(Oe=>Oe+1);return}E(0),W(Z,"producing");const z={id:P.current++,value:Q.current++,producedBy:Z};await new Promise(Oe=>setTimeout(Oe,300)),f(Oe=>[...Oe,z]),T(` Productor ${Z+1}: Produjo item #${z.value} y lo agreg al buffer`),J(Oe=>({...Oe,produced:Oe.produced+1,totalProduced:Oe.totalProduced+1})),E(1),T(` Productor ${Z+1}: Liber mutex`),await new Promise(Oe=>setTimeout(Oe,100)),w(Oe=>Oe+1),T(` Productor ${Z+1}: Increment full a ${_+1}`),W(Z,"idle")},K=async Z=>{if(D){if(re(Z,"waiting_full"),T(` Consumidor ${Z+1}: Esperando item disponible (full=${_})`),await new Promise(z=>setTimeout(z,200)),_<=0){T(` Consumidor ${Z+1}: Buffer vaco, bloqueado`),re(Z,"blocked");return}if(w(z=>z-1),re(Z,"waiting_mutex"),T(` Consumidor ${Z+1}: Decrement full a ${_-1}, esperando mutex`),await new Promise(z=>setTimeout(z,200)),C<=0){T(` Consumidor ${Z+1}: Esperando acceso exclusivo al buffer`),re(Z,"blocked"),w(z=>z+1);return}E(0),re(Z,"consuming"),await new Promise(z=>setTimeout(z,300)),f(z=>{if(z.length===0)return z;const[Oe,...Re]=z;return T(` Consumidor ${Z+1}: Consumi item #${Oe.value} (del Productor ${Oe.producedBy+1})`),J(ae=>({...ae,consumed:ae.consumed+1,totalConsumed:ae.totalConsumed+1})),Re}),E(1),T(` Consumidor ${Z+1}: Liber mutex`),await new Promise(z=>setTimeout(z,100)),j(z=>z+1),T(` Consumidor ${Z+1}: Increment empty a ${N+1}`),re(Z,"idle")}};c.useEffect(()=>{if(D){F.current=[];for(let Z=0;Z<n;Z++){const z=setInterval(()=>{A(Z)},h);F.current.push(z)}return()=>{F.current.forEach(clearInterval)}}},[D,n,h,N,C]),c.useEffect(()=>{if(D){ue.current=[];for(let Z=0;Z<d;Z++){const z=setInterval(()=>{K(Z)},g);ue.current.push(z)}return()=>{ue.current.forEach(clearInterval)}}},[D,d,g,_,C]);const M=()=>{L(!0),T(" Simulacin iniciada")},O=()=>{L(!1),T(" Simulacin pausada")},q=()=>{L(!1),f([]),j(s),w(0),E(1),J({produced:0,consumed:0,totalProduced:0,totalConsumed:0}),I(Array(n).fill("idle")),be(Array(d).fill("idle")),G([]),Ee(!1),P.current=1,Q.current=1,T(" Sistema reiniciado")},$=Z=>{switch(Z){case"idle":return"bg-gray-400";case"waiting_empty":case"waiting_full":case"waiting_mutex":return"bg-yellow-500";case"blocked":return"bg-red-500";case"producing":case"consuming":return"bg-green-500";default:return"bg-gray-400"}},ve=Z=>({idle:"Inactivo",waiting_empty:"Esperando espacio",waiting_full:"Esperando item",waiting_mutex:"Esperando mutex",blocked:"Bloqueado",producing:"Produciendo",consuming:"Consumiendo"})[Z]||Z;return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(nt,{className:"size-6 text-purple-400"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Demostracin Interactiva"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pc,{className:"size-5 text-purple-400"}),e.jsx("h3",{className:"font-bold text-white",children:"Configuracin"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-300 block mb-1",children:["Tamao del Buffer: ",s]}),e.jsx("input",{type:"range",min:"3",max:"10",value:s,onChange:Z=>!D&&i(Number(Z.target.value)),disabled:D,className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-300 block mb-1",children:["Productores: ",n]}),e.jsx("input",{type:"range",min:"1",max:"4",value:n,onChange:Z=>!D&&l(Number(Z.target.value)),disabled:D,className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-300 block mb-1",children:["Consumidores: ",d]}),e.jsx("input",{type:"range",min:"1",max:"4",value:d,onChange:Z=>!D&&m(Number(Z.target.value)),disabled:D,className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-300 block mb-1",children:["Velocidad de Produccin: ",h,"ms"]}),e.jsx("input",{type:"range",min:"500",max:"3000",step:"100",value:h,onChange:Z=>x(Number(Z.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-300 block mb-1",children:["Velocidad de Consumo: ",g,"ms"]}),e.jsx("input",{type:"range",min:"500",max:"3000",step:"100",value:g,onChange:Z=>b(Number(Z.target.value)),className:"w-full"})]})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Estado de Semforos"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"empty (espacios vacos)"}),e.jsx("span",{className:"text-2xl font-bold text-blue-400",children:N})]}),e.jsx("div",{className:"mt-2 bg-gray-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${N/s*100}%`}})})]}),e.jsxs("div",{className:"bg-gray-600 rounded p-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"full (items disponibles)"}),e.jsx("span",{className:"text-2xl font-bold text-green-400",children:_})]}),e.jsx("div",{className:"mt-2 bg-gray-800 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${_/s*100}%`}})})]}),e.jsx("div",{className:"bg-gray-600 rounded p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"mutex (exclusin mutua)"}),e.jsx("span",{className:`text-2xl font-bold ${C===1?"text-green-400":"text-red-400"}`,children:C===1?"":""})]})})]})]})]}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs("button",{onClick:M,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]}),e.jsxs("button",{onClick:O,disabled:!D,className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"font-bold text-white mb-3",children:["Buffer (",v.length,"/",s,")"]}),e.jsx("div",{className:"flex gap-2 flex-wrap min-h-[80px] items-center",children:Array.from({length:s}).map((Z,z)=>e.jsx("div",{className:`w-16 h-16 rounded-lg flex items-center justify-center border-2 transition-all ${z<v.length?"bg-purple-600 border-purple-400 text-white font-bold":"bg-gray-800 border-gray-600 text-gray-500"}`,children:z<v.length?`#${v[z].value}`:""},z))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-3",children:"Productores"}),e.jsx("div",{className:"space-y-2",children:ie.map((Z,z)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`size-3 rounded-full ${$(Z)}`}),e.jsxs("span",{className:"text-gray-300",children:["Productor ",z+1,":"]}),e.jsx("span",{className:"text-white font-medium",children:ve(Z)})]},z))})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-3",children:"Consumidores"}),e.jsx("div",{className:"space-y-2",children:k.map((Z,z)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`size-3 rounded-full ${$(Z)}`}),e.jsxs("span",{className:"text-gray-300",children:["Consumidor ",z+1,":"]}),e.jsx("span",{className:"text-white font-medium",children:ve(Z)})]},z))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-blue-400 text-sm mb-1",children:"Items en Buffer"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:v.length})]}),e.jsxs("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-400 text-sm mb-1",children:"Total Producido"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:V.totalProduced})]}),e.jsxs("div",{className:"bg-orange-900/30 border border-orange-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-orange-400 text-sm mb-1",children:"Total Consumido"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:V.totalConsumed})]}),e.jsxs("div",{className:"bg-purple-900/30 border border-purple-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-purple-400 text-sm mb-1",children:"En Trnsito"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:V.totalProduced-V.totalConsumed})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-3",children:"Registro de Eventos"}),e.jsxs("div",{ref:Ce,onScroll:qe,className:"bg-gray-900 rounded p-3 h-64 overflow-y-auto font-mono text-xs text-gray-300",children:[te.length===0?e.jsx("div",{className:"text-gray-500 text-center py-8",children:'Presiona "Iniciar" para comenzar la simulacin'}):te.map((Z,z)=>e.jsx("div",{className:"mb-1",children:Z},z)),e.jsx("div",{ref:oe})]})]})]})}function XE(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 pb-12",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-purple-600 text-white",children:e.jsx(Ia,{className:"size-6"})}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Problema Productor-Consumidor"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Sincronizacin clsica con buffer limitado usando semforos"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white text-gray-900 rounded-lg p-8 mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ia,{className:"size-6 text-purple-600"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Planteamiento del Problema"})]}),e.jsxs("div",{className:"prose prose-gray max-w-none space-y-4",children:[e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["El problema del ",e.jsx("strong",{className:"text-purple-600",children:"Productor-Consumidor"})," es uno de los problemas clsicos de sincronizacin en sistemas concurrentes. En este escenario, uno o ms hilos productores generan datos que son depositados en un buffer compartido, mientras que uno o ms hilos consumidores retiran datos de ese buffer para procesarlos."]}),e.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 my-4",children:[e.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:" Objetivo del Problema"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Coordinar el acceso al buffer compartido de manera que:"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Los productores no intenten agregar elementos cuando el buffer est lleno"}),e.jsx("li",{children:"Los consumidores no intenten retirar elementos cuando el buffer est vaco"}),e.jsx("li",{children:"No ocurran condiciones de carrera al acceder al buffer"})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-6 mb-3",children:"Componentes del Sistema"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-2",children:" Productor"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Genera items y los deposita en el buffer compartido. Debe esperar si el buffer est lleno."})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-green-900 mb-2",children:" Buffer"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Estructura de datos compartida con capacidad limitada que almacena temporalmente los items."})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-orange-900 mb-2",children:" Consumidor"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Retira items del buffer para procesarlos. Debe esperar si el buffer est vaco."})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-6 mb-3",children:"Solucin con Semforos"}),e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Para resolver este problema utilizamos ",e.jsx("strong",{children:"tres semforos"})," que coordinan el acceso al buffer:"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 my-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-purple-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"mutex (binario)"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Garantiza exclusin mutua al acceder al buffer. Solo un hilo (productor o consumidor) puede modificar el buffer a la vez."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"empty (contador)"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Cuenta los espacios vacos en el buffer. Inicializado con el tamao del buffer. Los productores esperan (wait) en este semforo antes de agregar items."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-green-600 text-white rounded-full size-8 flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"full (contador)"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Cuenta los items disponibles en el buffer. Inicializado en 0. Los consumidores esperan (wait) en este semforo antes de retirar items."})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mt-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gb,{className:"size-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-yellow-900 mb-1",children:"Orden Crtico"}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Es crucial que los productores hagan ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"wait(empty)"})," antes de ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"wait(mutex)"}),", y los consumidores hagan"," ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"wait(full)"})," antes de"," ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"wait(mutex)"}),". De lo contrario, puede ocurrir un deadlock."]})]})]})})]})]}),e.jsx(YE,{})]})]})}const QE=Sa("/ActividadesSeminarioSO/actividad12/")({component:XE}),ZE=[{id:"condicion-carrera",titulo:"Condicin de Carrera",icon:"",color:"from-red-400 to-red-600"},{id:"deadlock",titulo:"Deadlock",icon:"",color:"from-orange-400 to-orange-600"},{id:"starvation",titulo:"Starvation",icon:"",color:"from-yellow-400 to-yellow-600"},{id:"livelock",titulo:"Livelock",icon:"",color:"from-green-400 to-green-600"},{id:"lectura-escritura",titulo:"Lectura/Escritura",icon:"",color:"from-teal-400 to-teal-600"},{id:"contencion-recursos",titulo:"Contencin de Recursos",icon:"",color:"from-cyan-400 to-cyan-600"},{id:"bloqueos-innecesarios",titulo:"Bloqueos Innecesarios",icon:"",color:"from-blue-400 to-blue-600"},{id:"eventos",titulo:"Eventos",icon:"",color:"from-indigo-400 to-indigo-600"},{id:"priority-inversion",titulo:"Priority Inversion",icon:"",color:"from-purple-400 to-purple-600"},{id:"aba-problem",titulo:"ABA Problem",icon:"",color:"from-pink-400 to-pink-600"},{id:"memory-consistency",titulo:"Memory Consistency",icon:"",color:"from-rose-400 to-rose-600"},{id:"thundering-herd",titulo:"Thundering Herd",icon:"",color:"from-amber-400 to-amber-600"},{id:"convoying",titulo:"Convoying",icon:"",color:"from-lime-400 to-lime-600"},{id:"false-sharing",titulo:"False Sharing",icon:"",color:"from-emerald-400 to-emerald-600"},{id:"lost-wakeup",titulo:"Lost Wakeup",icon:"",color:"from-sky-400 to-sky-600"}];function JE(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"flex size-12 items-center justify-center rounded-lg bg-gray-700 text-white",children:e.jsx(vb,{className:"size-6"})}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Aplicaciones y Solucin de Problemas de Concurrencia"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Anlisis de 15 problemas clsicos y sus soluciones"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white text-gray-900 rounded-lg p-8 mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ia,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Qu es la Concurrencia?"})]}),e.jsxs("div",{className:"prose prose-gray max-w-none",children:[e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:["La ",e.jsx("strong",{className:"text-blue-600",children:"concurrencia"})," es la capacidad de un sistema para ejecutar mltiples tareas aparentemente al mismo tiempo. En sistemas modernos, esto permite aprovechar procesadores multincleo y mejorar significativamente el rendimiento de las aplicaciones."]}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:["Sin embargo, la programacin concurrente introduce ",e.jsx("strong",{className:"text-red-600",children:"complejidad adicional"})," y diversos problemas que pueden afectar la correctitud y rendimiento del sistema. Estos problemas pueden ser sutiles, difciles de reproducir y detectar."]})]})]}),e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-8 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(yn,{className:"size-6 text-red-600"}),e.jsx("h2",{className:"text-2xl font-bold text-red-900",children:"Problemas Ms Comunes"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border-l-4 border-red-500 p-4 rounded shadow-sm",children:[e.jsx("h3",{className:"font-bold text-red-900 mb-2",children:" Condiciones de Carrera"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Mltiples threads acceden a datos compartidos simultneamente."})]}),e.jsxs("div",{className:"bg-white border-l-4 border-orange-500 p-4 rounded shadow-sm",children:[e.jsx("h3",{className:"font-bold text-orange-900 mb-2",children:" Deadlocks"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Procesos bloqueados esperando recursos mutuamente."})]}),e.jsxs("div",{className:"bg-white border-l-4 border-yellow-500 p-4 rounded shadow-sm",children:[e.jsx("h3",{className:"font-bold text-yellow-900 mb-2",children:" Starvation"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Un proceso nunca obtiene los recursos necesarios."})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(hp,{className:"size-6 text-blue-400"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"15 Problemas de Concurrencia"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:"A continuacin se presentan 15 problemas clsicos de concurrencia. Cada uno incluye una descripcin detallada y mltiples soluciones implementadas. Haz clic en cualquier problema para explorar su anlisis completo:"}),e.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-5 gap-4",children:ZE.map(s=>e.jsxs(qs,{to:`/actividad11/${s.id}`,className:`block rounded-lg bg-gradient-to-br ${s.color} p-6 shadow-lg transition-all hover:shadow-xl hover:scale-105`,children:[e.jsx("div",{className:"text-4xl mb-3",children:s.icon}),e.jsx("h3",{className:"text-lg font-bold text-white",children:s.titulo})]},s.id))})]}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(b1,{className:"size-5 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-blue-200",children:"Explora cada problema de concurrencia para entender sus causas, consecuencias y las diferentes estrategias para resolverlo de manera efectiva."})]})]})]})}const eR=Sa("/ActividadesSeminarioSO/actividad11/")({component:JE});var Es="Accordion",tR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Hp,aR,sR]=Wc(Es),[Zc]=Cs(Es,[sR,Zv]),$p=Zv(),Xy=fa.forwardRef((s,i)=>{const{type:n,...l}=s,d=l,m=l;return e.jsx(Hp.Provider,{scope:s.__scopeAccordion,children:n==="multiple"?e.jsx(iR,{...m,ref:i}):e.jsx(oR,{...d,ref:i})})});Xy.displayName=Es;var[Qy,rR]=Zc(Es),[Zy,nR]=Zc(Es,{collapsible:!1}),oR=fa.forwardRef((s,i)=>{const{value:n,defaultValue:l,onValueChange:d=()=>{},collapsible:m=!1,...h}=s,[x,g]=gr({prop:n,defaultProp:l??"",onChange:d,caller:Es});return e.jsx(Qy,{scope:s.__scopeAccordion,value:fa.useMemo(()=>x?[x]:[],[x]),onItemOpen:g,onItemClose:fa.useCallback(()=>m&&g(""),[m,g]),children:e.jsx(Zy,{scope:s.__scopeAccordion,collapsible:m,children:e.jsx(Jy,{...h,ref:i})})})}),iR=fa.forwardRef((s,i)=>{const{value:n,defaultValue:l,onValueChange:d=()=>{},...m}=s,[h,x]=gr({prop:n,defaultProp:l??[],onChange:d,caller:Es}),g=fa.useCallback(v=>x((f=[])=>[...f,v]),[x]),b=fa.useCallback(v=>x((f=[])=>f.filter(N=>N!==v)),[x]);return e.jsx(Qy,{scope:s.__scopeAccordion,value:h,onItemOpen:g,onItemClose:b,children:e.jsx(Zy,{scope:s.__scopeAccordion,collapsible:!0,children:e.jsx(Jy,{...m,ref:i})})})}),[lR,Jc]=Zc(Es),Jy=fa.forwardRef((s,i)=>{const{__scopeAccordion:n,disabled:l,dir:d,orientation:m="vertical",...h}=s,x=fa.useRef(null),g=xa(x,i),b=aR(n),f=Mi(d)==="ltr",N=At(s.onKeyDown,j=>{if(!tR.includes(j.key))return;const _=j.target,w=b().filter(k=>!k.ref.current?.disabled),C=w.findIndex(k=>k.ref.current===_),E=w.length;if(C===-1)return;j.preventDefault();let D=C;const L=0,V=E-1,J=()=>{D=C+1,D>V&&(D=L)},ie=()=>{D=C-1,D<L&&(D=V)};switch(j.key){case"Home":D=L;break;case"End":D=V;break;case"ArrowRight":m==="horizontal"&&(f?J():ie());break;case"ArrowDown":m==="vertical"&&J();break;case"ArrowLeft":m==="horizontal"&&(f?ie():J());break;case"ArrowUp":m==="vertical"&&ie();break}const I=D%E;w[I].ref.current?.focus()});return e.jsx(lR,{scope:n,disabled:l,direction:d,orientation:m,children:e.jsx(Hp.Slot,{scope:n,children:e.jsx(Kt.div,{...h,"data-orientation":m,ref:g,onKeyDown:l?void 0:N})})})}),kc="AccordionItem",[cR,Gp]=Zc(kc),eN=fa.forwardRef((s,i)=>{const{__scopeAccordion:n,value:l,...d}=s,m=Jc(kc,n),h=rR(kc,n),x=$p(n),g=Us(),b=l&&h.value.includes(l)||!1,v=m.disabled||s.disabled;return e.jsx(cR,{scope:n,open:b,disabled:v,triggerId:g,children:e.jsx(ty,{"data-orientation":m.orientation,"data-state":oN(b),...x,...d,ref:i,disabled:v,open:b,onOpenChange:f=>{f?h.onItemOpen(l):h.onItemClose(l)}})})});eN.displayName=kc;var tN="AccordionHeader",aN=fa.forwardRef((s,i)=>{const{__scopeAccordion:n,...l}=s,d=Jc(Es,n),m=Gp(tN,n);return e.jsx(Kt.h3,{"data-orientation":d.orientation,"data-state":oN(m.open),"data-disabled":m.disabled?"":void 0,...l,ref:i})});aN.displayName=tN;var ep="AccordionTrigger",sN=fa.forwardRef((s,i)=>{const{__scopeAccordion:n,...l}=s,d=Jc(Es,n),m=Gp(ep,n),h=nR(ep,n),x=$p(n);return e.jsx(Hp.ItemSlot,{scope:n,children:e.jsx(aA,{"aria-disabled":m.open&&!h.collapsible||void 0,"data-orientation":d.orientation,id:m.triggerId,...x,...l,ref:i})})});sN.displayName=ep;var rN="AccordionContent",nN=fa.forwardRef((s,i)=>{const{__scopeAccordion:n,...l}=s,d=Jc(Es,n),m=Gp(rN,n),h=$p(n);return e.jsx(sA,{role:"region","aria-labelledby":m.triggerId,"data-orientation":d.orientation,...h,...l,ref:i,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...s.style}})});nN.displayName=rN;function oN(s){return s?"open":"closed"}var dR=Xy,uR=eN,mR=aN,iN=sN,lN=nN;const Da=dR,sa=c.forwardRef(({className:s,...i},n)=>e.jsx(uR,{ref:n,className:Xt("border-b border-gray-700",s),...i}));sa.displayName="AccordionItem";const ra=c.forwardRef(({className:s,children:i,...n},l)=>e.jsx(mR,{className:"flex",children:e.jsxs(iN,{ref:l,className:Xt("flex flex-1 items-center justify-between py-4 px-6 font-medium transition-all hover:bg-gray-800/50 [&[data-state=open]>svg]:rotate-180",s),...n,children:[i,e.jsx(r1,{className:"size-5 shrink-0 transition-transform duration-200"})]})}));ra.displayName=iN.displayName;const na=c.forwardRef(({className:s,children:i,...n},l)=>e.jsx(lN,{ref:l,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:e.jsx("div",{className:Xt("pb-4 pt-0 px-6",s),children:i})}));na.displayName=lN.displayName;var ed="Tabs",[pR]=Cs(ed,[Kc]),cN=Kc(),[hR,Wp]=pR(ed),dN=c.forwardRef((s,i)=>{const{__scopeTabs:n,value:l,onValueChange:d,defaultValue:m,orientation:h="horizontal",dir:x,activationMode:g="automatic",...b}=s,v=Mi(x),[f,N]=gr({prop:l,onChange:d,defaultProp:m??"",caller:ed});return e.jsx(hR,{scope:n,baseId:Us(),value:f,onValueChange:N,orientation:h,dir:v,activationMode:g,children:e.jsx(Kt.div,{dir:v,"data-orientation":h,...b,ref:i})})});dN.displayName=ed;var uN="TabsList",mN=c.forwardRef((s,i)=>{const{__scopeTabs:n,loop:l=!0,...d}=s,m=Wp(uN,n),h=cN(n);return e.jsx(iy,{asChild:!0,...h,orientation:m.orientation,dir:m.dir,loop:l,children:e.jsx(Kt.div,{role:"tablist","aria-orientation":m.orientation,...d,ref:i})})});mN.displayName=uN;var pN="TabsTrigger",hN=c.forwardRef((s,i)=>{const{__scopeTabs:n,value:l,disabled:d=!1,...m}=s,h=Wp(pN,n),x=cN(n),g=gN(h.baseId,l),b=bN(h.baseId,l),v=l===h.value;return e.jsx(ly,{asChild:!0,...x,focusable:!d,active:v,children:e.jsx(Kt.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":b,"data-state":v?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:g,...m,ref:i,onMouseDown:At(s.onMouseDown,f=>{!d&&f.button===0&&f.ctrlKey===!1?h.onValueChange(l):f.preventDefault()}),onKeyDown:At(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&h.onValueChange(l)}),onFocus:At(s.onFocus,()=>{const f=h.activationMode!=="manual";!v&&!d&&f&&h.onValueChange(l)})})})});hN.displayName=pN;var xN="TabsContent",fN=c.forwardRef((s,i)=>{const{__scopeTabs:n,value:l,forceMount:d,children:m,...h}=s,x=Wp(xN,n),g=gN(x.baseId,l),b=bN(x.baseId,l),v=l===x.value,f=c.useRef(v);return c.useEffect(()=>{const N=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(N)},[]),e.jsx(js,{present:d||v,children:({present:N})=>e.jsx(Kt.div,{"data-state":v?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":g,hidden:!N,id:b,tabIndex:0,...h,ref:i,style:{...s.style,animationDuration:f.current?"0s":void 0},children:N&&m})})});fN.displayName=xN;function gN(s,i){return`${s}-trigger-${i}`}function bN(s,i){return`${s}-content-${i}`}var xR=dN,vN=mN,yN=hN,NN=fN;const ia=xR,Qt=c.forwardRef(({className:s,...i},n)=>e.jsx(vN,{ref:n,className:Xt("inline-flex h-10 items-center justify-center rounded-md bg-gray-800 p-1 text-gray-400",s),...i}));Qt.displayName=vN.displayName;const ce=c.forwardRef(({className:s,...i},n)=>e.jsx(yN,{ref:n,className:Xt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-2 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=inactive]:text-gray-400 cursor-pointer hover:bg-gray-700 hover:text-white",s),...i}));ce.displayName=yN.displayName;const me=c.forwardRef(({className:s,...i},n)=>e.jsx(NN,{ref:n,className:Xt("mt-2 ring-offset-gray-950 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:ring-offset-2",s),...i}));me.displayName=NN.displayName;function jN(s,[i,n]){return Math.min(n,Math.max(i,s))}function fR(s){const i=c.useRef({value:s,previous:s});return c.useMemo(()=>(i.current.value!==s&&(i.current.previous=i.current.value,i.current.value=s),i.current.previous),[s])}var _N=["PageUp","PageDown"],SN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wo="Slider",[tp,gR,bR]=Wc(wo),[TN]=Cs(wo,[bR]),[vR,td]=TN(wo),kN=c.forwardRef((s,i)=>{const{name:n,min:l=0,max:d=100,step:m=1,orientation:h="horizontal",disabled:x=!1,minStepsBetweenThumbs:g=0,defaultValue:b=[l],value:v,onValueChange:f=()=>{},onValueCommit:N=()=>{},inverted:j=!1,form:_,...w}=s,C=c.useRef(new Set),E=c.useRef(0),L=h==="horizontal"?yR:NR,[V=[],J]=gr({prop:v,defaultProp:b,onChange:G=>{[...C.current][E.current]?.focus(),f(G)}}),ie=c.useRef(V);function I(G){const oe=TR(V,G);te(G,oe)}function k(G){te(G,E.current)}function be(){const G=ie.current[E.current];V[E.current]!==G&&N(V)}function te(G,oe,{commit:Ce}={commit:!1}){const ke=ER(m),Ee=RR(Math.round((G-l)/m)*m+l,ke),P=jN(Ee,[l,d]);J((Q=[])=>{const F=SR(Q,P,oe);if(AR(F,g*m)){E.current=F.indexOf(P);const ue=String(F)!==String(Q);return ue&&Ce&&N(F),ue?F:Q}else return Q})}return e.jsx(vR,{scope:s.__scopeSlider,name:n,disabled:x,min:l,max:d,valueIndexToChangeRef:E,thumbs:C.current,values:V,orientation:h,form:_,children:e.jsx(tp.Provider,{scope:s.__scopeSlider,children:e.jsx(tp.Slot,{scope:s.__scopeSlider,children:e.jsx(L,{"aria-disabled":x,"data-disabled":x?"":void 0,...w,ref:i,onPointerDown:At(w.onPointerDown,()=>{x||(ie.current=V)}),min:l,max:d,inverted:j,onSlideStart:x?void 0:I,onSlideMove:x?void 0:k,onSlideEnd:x?void 0:be,onHomeKeyDown:()=>!x&&te(l,0,{commit:!0}),onEndKeyDown:()=>!x&&te(d,V.length-1,{commit:!0}),onStepKeyDown:({event:G,direction:oe})=>{if(!x){const Ee=_N.includes(G.key)||G.shiftKey&&SN.includes(G.key)?10:1,P=E.current,Q=V[P],F=m*Ee*oe;te(Q+F,P,{commit:!0})}}})})})})});kN.displayName=wo;var[CN,AN]=TN(wo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),yR=c.forwardRef((s,i)=>{const{min:n,max:l,dir:d,inverted:m,onSlideStart:h,onSlideMove:x,onSlideEnd:g,onStepKeyDown:b,...v}=s,[f,N]=c.useState(null),j=xa(i,L=>N(L)),_=c.useRef(void 0),w=Mi(d),C=w==="ltr",E=C&&!m||!C&&m;function D(L){const V=_.current||f.getBoundingClientRect(),J=[0,V.width],I=Kp(J,E?[n,l]:[l,n]);return _.current=V,I(L-V.left)}return e.jsx(CN,{scope:s.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:e.jsx(EN,{dir:w,"data-orientation":"horizontal",...v,ref:j,style:{...v.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:L=>{const V=D(L.clientX);h?.(V)},onSlideMove:L=>{const V=D(L.clientX);x?.(V)},onSlideEnd:()=>{_.current=void 0,g?.()},onStepKeyDown:L=>{const J=wN[E?"from-left":"from-right"].includes(L.key);b?.({event:L,direction:J?-1:1})}})})}),NR=c.forwardRef((s,i)=>{const{min:n,max:l,inverted:d,onSlideStart:m,onSlideMove:h,onSlideEnd:x,onStepKeyDown:g,...b}=s,v=c.useRef(null),f=xa(i,v),N=c.useRef(void 0),j=!d;function _(w){const C=N.current||v.current.getBoundingClientRect(),E=[0,C.height],L=Kp(E,j?[l,n]:[n,l]);return N.current=C,L(w-C.top)}return e.jsx(CN,{scope:s.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:e.jsx(EN,{"data-orientation":"vertical",...b,ref:f,style:{...b.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const C=_(w.clientY);m?.(C)},onSlideMove:w=>{const C=_(w.clientY);h?.(C)},onSlideEnd:()=>{N.current=void 0,x?.()},onStepKeyDown:w=>{const E=wN[j?"from-bottom":"from-top"].includes(w.key);g?.({event:w,direction:E?-1:1})}})})}),EN=c.forwardRef((s,i)=>{const{__scopeSlider:n,onSlideStart:l,onSlideMove:d,onSlideEnd:m,onHomeKeyDown:h,onEndKeyDown:x,onStepKeyDown:g,...b}=s,v=td(wo,n);return e.jsx(Kt.span,{...b,ref:i,onKeyDown:At(s.onKeyDown,f=>{f.key==="Home"?(h(f),f.preventDefault()):f.key==="End"?(x(f),f.preventDefault()):_N.concat(SN).includes(f.key)&&(g(f),f.preventDefault())}),onPointerDown:At(s.onPointerDown,f=>{const N=f.target;N.setPointerCapture(f.pointerId),f.preventDefault(),v.thumbs.has(N)?N.focus():l(f)}),onPointerMove:At(s.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&d(f)}),onPointerUp:At(s.onPointerUp,f=>{const N=f.target;N.hasPointerCapture(f.pointerId)&&(N.releasePointerCapture(f.pointerId),m(f))})})}),RN="SliderTrack",LN=c.forwardRef((s,i)=>{const{__scopeSlider:n,...l}=s,d=td(RN,n);return e.jsx(Kt.span,{"data-disabled":d.disabled?"":void 0,"data-orientation":d.orientation,...l,ref:i})});LN.displayName=RN;var ap="SliderRange",MN=c.forwardRef((s,i)=>{const{__scopeSlider:n,...l}=s,d=td(ap,n),m=AN(ap,n),h=c.useRef(null),x=xa(i,h),g=d.values.length,b=d.values.map(N=>ON(N,d.min,d.max)),v=g>1?Math.min(...b):0,f=100-Math.max(...b);return e.jsx(Kt.span,{"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,...l,ref:x,style:{...s.style,[m.startEdge]:v+"%",[m.endEdge]:f+"%"}})});MN.displayName=ap;var sp="SliderThumb",PN=c.forwardRef((s,i)=>{const n=gR(s.__scopeSlider),[l,d]=c.useState(null),m=xa(i,x=>d(x)),h=c.useMemo(()=>l?n().findIndex(x=>x.ref.current===l):-1,[n,l]);return e.jsx(jR,{...s,ref:m,index:h})}),jR=c.forwardRef((s,i)=>{const{__scopeSlider:n,index:l,name:d,...m}=s,h=td(sp,n),x=AN(sp,n),[g,b]=c.useState(null),v=xa(i,D=>b(D)),f=g?h.form||!!g.closest("form"):!0,N=kv(g),j=h.values[l],_=j===void 0?0:ON(j,h.min,h.max),w=wR(l,h.values.length),C=N?.[x.size],E=C?kR(C,_,x.direction):0;return c.useEffect(()=>{if(g)return h.thumbs.add(g),()=>{h.thumbs.delete(g)}},[g,h.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[x.startEdge]:`calc(${_}% + ${E}px)`},children:[e.jsx(tp.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(Kt.span,{role:"slider","aria-label":s["aria-label"]||w,"aria-valuemin":h.min,"aria-valuenow":j,"aria-valuemax":h.max,"aria-orientation":h.orientation,"data-orientation":h.orientation,"data-disabled":h.disabled?"":void 0,tabIndex:h.disabled?void 0:0,...m,ref:v,style:j===void 0?{display:"none"}:s.style,onFocus:At(s.onFocus,()=>{h.valueIndexToChangeRef.current=l})})}),f&&e.jsx(IN,{name:d??(h.name?h.name+(h.values.length>1?"[]":""):void 0),form:h.form,value:j},l)]})});PN.displayName=sp;var _R="RadioBubbleInput",IN=c.forwardRef(({__scopeSlider:s,value:i,...n},l)=>{const d=c.useRef(null),m=xa(d,l),h=fR(i);return c.useEffect(()=>{const x=d.current;if(!x)return;const g=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==i&&v){const f=new Event("input",{bubbles:!0});v.call(x,i),x.dispatchEvent(f)}},[h,i]),e.jsx(Kt.input,{style:{display:"none"},...n,ref:m,defaultValue:i})});IN.displayName=_R;function SR(s=[],i,n){const l=[...s];return l[n]=i,l.sort((d,m)=>d-m)}function ON(s,i,n){const m=100/(n-i)*(s-i);return jN(m,[0,100])}function wR(s,i){return i>2?`Value ${s+1} of ${i}`:i===2?["Minimum","Maximum"][s]:void 0}function TR(s,i){if(s.length===1)return 0;const n=s.map(d=>Math.abs(d-i)),l=Math.min(...n);return n.indexOf(l)}function kR(s,i,n){const l=s/2,m=Kp([0,50],[0,l]);return(l-m(i)*n)*n}function CR(s){return s.slice(0,-1).map((i,n)=>s[n+1]-i)}function AR(s,i){if(i>0){const n=CR(s);return Math.min(...n)>=i}return!0}function Kp(s,i){return n=>{if(s[0]===s[1]||i[0]===i[1])return i[0];const l=(i[1]-i[0])/(s[1]-s[0]);return i[0]+l*(n-s[0])}}function ER(s){return(String(s).split(".")[1]||"").length}function RR(s,i){const n=Math.pow(10,i);return Math.round(s*n)/n}var DN=kN,LR=LN,MR=MN,PR=PN;const dt=c.forwardRef(({className:s,...i},n)=>e.jsxs(DN,{ref:n,className:Xt("relative flex w-full touch-none select-none items-center",s),...i,children:[e.jsx(LR,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-700",children:e.jsx(MR,{className:"absolute h-full bg-blue-500"})}),e.jsx(PR,{className:"block h-5 w-5 rounded-full border-2 border-blue-500 bg-white ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));dt.displayName=DN.displayName;function IR(){const[s,i]=c.useState(!1),[n,l]=c.useState(1e3),[d,m]=c.useState([]),[h,x]=c.useState(5),[g,b]=c.useState(null),[v,f]=c.useState([]),[N,j]=c.useState(!1),[_,w]=c.useState(1e3),[C,E]=c.useState("normal"),[D,L]=c.useState([1,2,3,4,5,6]),[V,J]=c.useState([]),[ie,I]=c.useState(0),[k,be]=c.useState([]),[te,G]=c.useState(!1),[oe,Ce]=c.useState(1e3),[ke,Ee]=c.useState([[3,2,1],[5,4],[],[8,7,6]]),[P,Q]=c.useState([]),[F,ue]=c.useState(null),[qe,T]=c.useState([]),[W,re]=c.useState(!1),[A,K]=c.useState(1e3),[M,O]=c.useState(3),[q]=c.useState(3),[$,ve]=c.useState([4,5,6,7,8]),[Z,z]=c.useState([1,2,3]),[Oe,Re]=c.useState([]),[ae,se]=c.useState(!1),[rt,jt]=c.useState(1e3),[fe,Me]=c.useState([{id:1,inUse:!1,thread:null,health:100},{id:2,inUse:!1,thread:null,health:100},{id:3,inUse:!1,thread:null,health:100},{id:4,inUse:!1,thread:null,health:100},{id:5,inUse:!1,thread:null,health:100}]),[De,Ge]=c.useState([]),[ze,_e]=c.useState(0),[Xe,We]=c.useState([]),xt=c.useRef(null),Ot=c.useRef(null),It=c.useRef(null),Ue=c.useRef(null),kt=c.useRef(null);c.useEffect(()=>{xt.current&&(xt.current.scrollTop=xt.current.scrollHeight)},[v]),c.useEffect(()=>{Ot.current&&(Ot.current.scrollTop=Ot.current.scrollHeight)},[k]),c.useEffect(()=>{It.current&&(It.current.scrollTop=It.current.scrollHeight)},[qe]),c.useEffect(()=>{Ue.current&&(Ue.current.scrollTop=Ue.current.scrollHeight)},[Oe]),c.useEffect(()=>{kt.current&&(kt.current.scrollTop=kt.current.scrollHeight)},[Xe]),c.useEffect(()=>{if(!s)return;const we=setInterval(()=>{f(_t=>{const St=[..._t];if(Math.random()>.3&&x(tt=>{const Ye=tt+1;return St.push({id:Date.now(),message:` Nuevo trabajo en cola (total: ${Ye})`,type:"info",timestamp:Date.now()}),Ye}),h>0&&d.length>0&&!g&&m(tt=>{if(tt.length===0)return tt;const Ye=tt[0],ft=tt.slice(1);return b(Ye),St.push({id:Date.now()+1,message:` Despertar selectivo: Thread ${Ye} (${tt.length-1} siguen dormidos)`,type:"success",timestamp:Date.now()}),ft}),g!==null&&Math.random()>.4){x(Ye=>Math.max(0,Ye-1)),St.push({id:Date.now()+2,message:` Thread ${g} complet trabajo`,type:"success",timestamp:Date.now()});const tt=g;b(null),m(Ye=>[...Ye,tt])}if(d.length<8&&Math.random()>.7){const tt=Math.floor(Math.random()*100)+1;m(Ye=>[...Ye,tt]),St.push({id:Date.now()+3,message:` Thread ${tt} se aadi a la cola de espera`,type:"info",timestamp:Date.now()})}return St.slice(-15)})},n);return()=>clearInterval(we)},[s,n,h,d,g]),c.useEffect(()=>{if(!N)return;const we=setInterval(()=>{be(_t=>{const St=[..._t];I(Ye=>Ye+1);const tt=ie+1;if(St.push({id:Date.now(),message:` Evento ${tt}: Nueva conexin entrante`,type:"info",timestamp:Date.now()}),C==="normal"){const Ye=[...D];J(Ye),St.push({id:Date.now()+1,message:` Modo NORMAL: Despertados ${Ye.length} threads`,type:"warning",timestamp:Date.now()}),setTimeout(()=>{if(Ye.length>0){const ft=Ye[0];St.push({id:Date.now()+2,message:` Thread ${ft} acept conexin`,type:"success",timestamp:Date.now()});const Ct=Ye.slice(1);Ct.length>0&&St.push({id:Date.now()+3,message:` ${Ct.length} threads volvieron a dormir (context switches desperdiciados)`,type:"error",timestamp:Date.now()}),J([]),be(St.slice(-15))}},500)}else if(D.length>0){const Ye=D[0];J([Ye]),St.push({id:Date.now()+1,message:` Modo EXCLUSIVE: Solo Thread ${Ye} despertado`,type:"success",timestamp:Date.now()}),setTimeout(()=>{St.push({id:Date.now()+2,message:` Thread ${Ye} proces conexin eficientemente`,type:"success",timestamp:Date.now()}),J([]),be(St.slice(-15))},500)}return St.slice(-15)})},_);return()=>clearInterval(we)},[N,_,C,D,ie]),c.useEffect(()=>{if(!te)return;const we=setInterval(()=>{T(_t=>{const St=[..._t],tt=[],Ye=[];if(ke.forEach((ft,Ct)=>{ft.length>0?tt.push(Ct):Ye.push(Ct)}),Ye.length>0&&tt.length>0){const ft=Ye[0],Ct=tt[Math.floor(Math.random()*tt.length)];Ee(ye=>{const gt=ye.map(Fe=>[...Fe]);if(gt[Ct].length>0){const Fe=gt[Ct].shift();gt[ft].push(Fe),ue({from:Ct,to:ft}),St.push({id:Date.now(),message:` Thread ${ft} rob tarea ${Fe} de Thread ${Ct}`,type:"info",timestamp:Date.now()}),setTimeout(()=>ue(null),500)}return gt})}if(Ee(ft=>ft.map((ye,gt)=>{if(ye.length>0&&Math.random()>.4){const Fe=ye[ye.length-1],B=ye.slice(0,-1);return Q(U=>U.includes(gt)?U:[...U,gt]),St.push({id:Date.now()+gt,message:` Thread ${gt} procesando tarea ${Fe}`,type:"success",timestamp:Date.now()}),setTimeout(()=>{Q(U=>U.filter(Dt=>Dt!==gt))},300),B}return ye})),Math.random()>.6){const ft=Math.floor(Math.random()*ke.length),Ct=Math.floor(Math.random()*100)+10;Ee(ye=>ye.map((Fe,B)=>B===ft?[...Fe,Ct]:Fe)),St.push({id:Date.now()+100,message:` Nueva tarea ${Ct} asignada a Thread ${ft}`,type:"info",timestamp:Date.now()})}return St.slice(-15)})},oe);return()=>clearInterval(we)},[te,oe,ke]),c.useEffect(()=>{if(!W)return;const we=setInterval(()=>{Re(_t=>{const St=[..._t];if(M>0&&$.length>0&&ve(tt=>{if(tt.length===0)return tt;const Ye=tt[0],ft=tt.slice(1);return O(Ct=>Ct-1),z(Ct=>[...Ct,Ye]),St.push({id:Date.now(),message:` wait(): Thread ${Ye} adquiri semforo (contador: ${M-1})`,type:"success",timestamp:Date.now()}),ft}),Z.length>0&&Math.random()>.5){const tt=Z[Math.floor(Math.random()*Z.length)];z(Ye=>Ye.filter(ft=>ft!==tt)),O(Ye=>Math.min(Ye+1,q)),St.push({id:Date.now()+1,message:` signal(): Thread ${tt} liber semforo (contador: ${M+1})`,type:"info",timestamp:Date.now()})}if(Math.random()>.6){const tt=Math.floor(Math.random()*100)+10;M>0?(O(Ye=>Ye-1),z(Ye=>[...Ye,tt]),St.push({id:Date.now()+2,message:` Thread ${tt} accedi inmediatamente (contador: ${M-1})`,type:"success",timestamp:Date.now()})):(ve(Ye=>[...Ye,tt]),St.push({id:Date.now()+2,message:` Thread ${tt} bloqueado - esperando recurso`,type:"warning",timestamp:Date.now()}))}return St.slice(-15)})},A);return()=>clearInterval(we)},[W,A,M,$,Z,q]),c.useEffect(()=>{if(!ae)return;const we=setInterval(()=>{We(_t=>{const St=[..._t];if(Math.random()>.3){_e(ft=>ft+1);const tt=Math.floor(Math.random()*100)+1,Ye=fe.find(ft=>!ft.inUse);Ye?(Me(ft=>ft.map(Ct=>Ct.id===Ye.id?{...Ct,inUse:!0,thread:tt}:Ct)),St.push({id:Date.now(),message:` Thread ${tt} adquiri Conexin ${Ye.id} del pool`,type:"success",timestamp:Date.now()})):Ge(ft=>ft.includes(tt)?ft:(St.push({id:Date.now(),message:` Thread ${tt} esperando - pool exhausted`,type:"warning",timestamp:Date.now()}),[...ft,tt]))}if(Math.random()>.4){const tt=fe.filter(Ye=>Ye.inUse);if(tt.length>0){const Ye=tt[Math.floor(Math.random()*tt.length)];if(Me(ft=>ft.map(Ct=>Ct.id===Ye.id?{...Ct,inUse:!1,thread:null,health:Math.max(80,Ct.health-5)}:Ct)),St.push({id:Date.now()+1,message:` Thread ${Ye.thread} liber Conexin ${Ye.id}`,type:"info",timestamp:Date.now()}),De.length>0){const ft=De[0];Ge(Ct=>Ct.slice(1)),Me(Ct=>Ct.map(ye=>ye.id===Ye.id?{...ye,inUse:!0,thread:ft}:ye)),St.push({id:Date.now()+2,message:` Thread ${ft} (esperando) adquiri Conexin ${Ye.id}`,type:"success",timestamp:Date.now()})}}}return Math.random()>.8&&Me(tt=>tt.map(Ye=>!Ye.inUse&&Ye.health<100?{...Ye,health:Math.min(100,Ye.health+10)}:Ye)),St.slice(-15)})},rt);return()=>clearInterval(we)},[ae,rt,fe,De]);const et=()=>{i(!1),m([1,2,3,4,5]),x(5),b(null),f([{id:Date.now(),message:" Despertar Selectivo reiniciado",type:"info",timestamp:Date.now()}])},R=()=>{j(!1),L([1,2,3,4,5,6]),J([]),I(0),be([{id:Date.now(),message:" Epoll/Kqueue reiniciado",type:"info",timestamp:Date.now()}])},ne=()=>{G(!1),Ee([[3,2,1],[5,4],[],[8,7,6]]),Q([]),ue(null),T([{id:Date.now(),message:" Work Stealing reiniciado",type:"info",timestamp:Date.now()}])},Ve=()=>{re(!1),O(3),ve([4,5,6,7,8]),z([1,2,3]),Re([{id:Date.now(),message:" Semforos reiniciado",type:"info",timestamp:Date.now()}])},de=()=>{se(!1),Me([{id:1,inUse:!1,thread:null,health:100},{id:2,inUse:!1,thread:null,health:100},{id:3,inUse:!1,thread:null,health:100},{id:4,inUse:!1,thread:null,health:100},{id:5,inUse:!1,thread:null,health:100}]),Ge([]),_e(0),We([{id:Date.now(),message:" Connection Pool reiniciado",type:"info",timestamp:Date.now()}])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ia,{className:"size-8 text-amber-400"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Thundering Herd  Pseudocdigos"})]}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:'Coleccin de pseudocdigos para las tcnicas principales que previenen el problema del "rebao atronador" (thundering herd): despertar selectivo, epoll/kqueue exclusivo, work stealing, semforos con contadores y connection pooling.'})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["pseudocodigos","demos"],className:"space-y-4",children:[e.jsxs(sa,{value:"pseudocodigos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oa,{className:"size-6 text-blue-400"}),e.jsx("span",{className:"text-2xl font-semibold",children:"Pseudocdigos de Soluciones"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"selective",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"selective",className:"data-[state=active]:bg-blue-600",children:"Despertar Selectivo"}),e.jsx(ce,{value:"epoll",className:"data-[state=active]:bg-blue-600",children:"Epoll/Kqueue"}),e.jsx(ce,{value:"workstealing",className:"data-[state=active]:bg-blue-600",children:"Work Stealing"}),e.jsx(ce,{value:"semaphore",className:"data-[state=active]:bg-blue-600",children:"Semforos"}),e.jsx(ce,{value:"pooling",className:"data-[state=active]:bg-blue-600",children:"Connection Pooling"})]}),e.jsxs(me,{value:"selective",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-slate-800/30 p-6 rounded-lg border border-blue-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-300 mb-3",children:" Solucin 1: Despertar Selectivo"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"En lugar de despertar todos los threads en espera, el sistema despierta solo uno o un nmero controlado de threads. Esto evita la competencia masiva por recursos y reduce el overhead del sistema."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Despierta solo los threads necesarios"}),e.jsx("li",{children:" Reduce contencin y context switches"}),e.jsx("li",{children:" Mejora eficiencia del sistema"}),e.jsx("li",{children:" Evita desperdicios de CPU"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Despertar Selectivo"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Estructura de cola de espera
estructura WaitQueue {
    cola: Lista<Thread>
    mutex: Mutex
    wakeup_count: entero
}

// Thread esperando por un evento
funcin wait_selective(queue: WaitQueue) {
    queue.mutex.lock()
    
    // Aadir thread actual a la cola
    queue.cola.append(thread_actual)
    
    // Liberar mutex y dormir
    thread_actual.dormir()
    queue.mutex.unlock()
    
    // Al despertar, verificar si somos el elegido
    si thread_actual.wakeup_received entonces
        return EXITO
    sino
        // Volver a dormir si no fuimos seleccionados
        return wait_selective(queue)
}

// Despertar solo un thread
funcin wakeup_single(queue: WaitQueue) {
    queue.mutex.lock()
    
    si queue.cola.no_vacia() entonces
        // Seleccionar el primer thread
        thread = queue.cola.pop_front()
        
        // Marcar thread para despertar
        thread.wakeup_received = verdadero
        
        // Despertar solo este thread
        thread.despertar()
        
        queue.wakeup_count++
    fin si
    
    queue.mutex.unlock()
}

// Despertar N threads (selectivo mltiple)
funcin wakeup_n_threads(queue: WaitQueue, n: entero) {
    queue.mutex.lock()
    
    despertados = 0
    mientras despertados < n Y queue.cola.no_vacia() hacer
        thread = queue.cola.pop_front()
        thread.wakeup_received = verdadero
        thread.despertar()
        despertados++
    fin mientras
    
    queue.wakeup_count += despertados
    queue.mutex.unlock()
    
    return despertados
}

// Patrn productor-consumidor con despertar selectivo
funcin producer_consumer_selective() {
    cola_trabajo: Cola<Trabajo>
    wait_queue: WaitQueue
    workers: entero = 4
    
    // Productor
    funcin producer() {
        mientras verdadero hacer
            trabajo = generar_trabajo()
            cola_trabajo.push(trabajo)
            
            // Despertar solo UN worker
            wakeup_single(wait_queue)
        fin mientras
    }
    
    // Worker (consumidor)
    funcin worker() {
        mientras verdadero hacer
            si cola_trabajo.vacia() entonces
                // Esperar selectivamente
                wait_selective(wait_queue)
            sino
                trabajo = cola_trabajo.pop()
                procesar(trabajo)
            fin si
        fin mientras
    }
    
    // Iniciar threads
    crear_thread(producer)
    para i = 1 hasta workers hacer
        crear_thread(worker)
    fin para
}

// Ejemplo: Servidor con despertar selectivo
funcin servidor_selective() {
    socket_listener: Socket
    wait_queue: WaitQueue
    
    mientras verdadero hacer
        // Aceptar nueva conexin
        client = socket_listener.accept()
        
        // Despertar SOLO un thread worker
        wakeup_single(wait_queue)
        
        // El worker despertado procesar el cliente
    fin mientras
}

// Mtricas de eficiencia
funcin medir_eficiencia() {
    inicio = tiempo_actual()
    threads_despertados = 0
    threads_productivos = 0
    
    // Procesar trabajos
    mientras hay_trabajos() hacer
        wakeup_single(wait_queue)
        threads_despertados++
        
        si thread_proceso_trabajo() entonces
            threads_productivos++
        fin si
    fin mientras
    
    tiempo_total = tiempo_actual() - inicio
    eficiencia = threads_productivos / threads_despertados
    
    imprimir("Eficiencia: " + (eficiencia * 100) + "%")
    imprimir("Context switches evitados: " + 
             (threads_totales - threads_despertados))
}`})})]})]}),e.jsxs(me,{value:"epoll",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-slate-800/30 p-6 rounded-lg border border-purple-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-300 mb-3",children:" Solucin 2: Epoll/Kqueue con EPOLLEXCLUSIVE"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Utiliza mecanismos de I/O multiplexing del kernel con el flag EPOLLEXCLUSIVE para despertar solo un thread cuando hay un evento disponible. Comn en servidores de alto rendimiento (Linux epoll, BSD kqueue)."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Despertar exclusivo en epoll_wait"}),e.jsx("li",{children:" Soportado por el kernel (Linux 4.5+)"}),e.jsx("li",{children:" Ideal para servidores multi-threaded"}),e.jsx("li",{children:" Reduce thundering herd en accept()"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Epoll/Kqueue Exclusivo"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Flags de epoll
constante EPOLLIN = 0x001
constante EPOLLET = 0x80000000  // Edge-triggered
constante EPOLLEXCLUSIVE = 1 << 28  // Despertar solo un thread

// Estructura de eventos
estructura epoll_event {
    events: entero
    data: puntero
}

// Crear epoll con EPOLLEXCLUSIVE
funcin crear_servidor_epoll(puerto: entero) {
    // Crear descriptor epoll
    epfd = epoll_create1(0)
    
    // Crear socket listener
    listen_fd = socket(AF_INET, SOCK_STREAM, 0)
    bind(listen_fd, puerto)
    listen(listen_fd, 128)
    
    // Configurar evento con EPOLLEXCLUSIVE
    evento: epoll_event
    evento.events = EPOLLIN | EPOLLEXCLUSIVE
    evento.data = listen_fd
    
    // Registrar socket en epoll
    epoll_ctl(epfd, EPOLL_CTL_ADD, listen_fd, &evento)
    
    return epfd, listen_fd
}

// Worker thread con epoll exclusivo
funcin worker_epoll(epfd: entero, listen_fd: entero) {
    eventos: arreglo[64] de epoll_event
    
    mientras verdadero hacer
        // Esperar eventos (SOLO un thread ser despertado)
        nfds = epoll_wait(epfd, eventos, 64, -1)
        
        para i = 0 hasta nfds - 1 hacer
            si eventos[i].data == listen_fd entonces
                // Aceptar conexin
                client_fd = accept(listen_fd, NULL, NULL)
                
                si client_fd >= 0 entonces
                    // Procesar cliente
                    manejar_cliente(client_fd)
                    close(client_fd)
                fin si
            fin si
        fin para
    fin mientras
}

// Servidor multi-threaded con EPOLLEXCLUSIVE
funcin servidor_multithreaded(puerto: entero, num_workers: entero) {
    epfd, listen_fd = crear_servidor_epoll(puerto)
    
    // Crear threads workers
    threads: arreglo[num_workers] de Thread
    
    para i = 0 hasta num_workers - 1 hacer
        threads[i] = crear_thread(worker_epoll, epfd, listen_fd)
    fin para
    
    // Esperar threads
    para cada thread en threads hacer
        thread.join()
    fin para
}

// Comparacin: epoll normal vs EPOLLEXCLUSIVE
funcin comparar_epoll() {
    // SIN EPOLLEXCLUSIVE (thundering herd)
    funcin epoll_normal(epfd: entero) {
        evento: epoll_event
        evento.events = EPOLLIN  // Sin flag exclusivo
        epoll_ctl(epfd, EPOLL_CTL_ADD, fd, &evento)
        
        // Al llegar un evento:
        // - TODOS los threads son despertados
        // - Solo UNO puede accept()
        // - Los dems vuelven a dormir (desperdicio)
    }
    
    // CON EPOLLEXCLUSIVE (eficiente)
    funcin epoll_exclusivo(epfd: entero) {
        evento: epoll_event
        evento.events = EPOLLIN | EPOLLEXCLUSIVE
        epoll_ctl(epfd, EPOLL_CTL_ADD, fd, &evento)
        
        // Al llegar un evento:
        // - SOLO UN thread es despertado
        // - Ese thread hace accept()
        // - Sin context switches innecesarios
    }
}

// Kqueue equivalente (BSD/macOS)
funcin worker_kqueue(kq: entero, listen_fd: entero) {
    eventos: arreglo[64] de kevent
    
    // Configurar evento con EV_DISPATCH (similar a EPOLLEXCLUSIVE)
    cambio: kevent
    cambio.ident = listen_fd
    cambio.filter = EVFILT_READ
    cambio.flags = EV_ADD | EV_DISPATCH  // Despertar solo un thread
    
    kevent(kq, &cambio, 1, NULL, 0, NULL)
    
    mientras verdadero hacer
        // Esperar eventos
        nev = kevent(kq, NULL, 0, eventos, 64, NULL)
        
        para i = 0 hasta nev - 1 hacer
            si eventos[i].ident == listen_fd entonces
                client_fd = accept(listen_fd, NULL, NULL)
                
                si client_fd >= 0 entonces
                    manejar_cliente(client_fd)
                    close(client_fd)
                fin si
                
                // Re-armar evento (EV_DISPATCH lo desactiva)
                kevent(kq, &cambio, 1, NULL, 0, NULL)
            fin si
        fin para
    fin mientras
}

// Servidor hbrido: epoll + thread pool
funcin servidor_hibrido(puerto: entero) {
    epfd, listen_fd = crear_servidor_epoll(puerto)
    pool: ThreadPool = crear_pool(8)
    
    // Thread aceptador (nico)
    funcin acceptor() {
        eventos: arreglo[64] de epoll_event
        
        mientras verdadero hacer
            nfds = epoll_wait(epfd, eventos, 64, -1)
            
            para i = 0 hasta nfds - 1 hacer
                client_fd = accept(listen_fd, NULL, NULL)
                
                // Delegar procesamiento al pool
                pool.submit(lambda: manejar_cliente(client_fd))
            fin para
        fin mientras
    }
    
    crear_thread(acceptor)
    pool.wait_all()
}

// Mtricas de rendimiento
funcin medir_rendimiento_epoll() {
    conexiones = 10000
    threads_despertados_normal = conexiones * num_workers
    threads_despertados_exclusivo = conexiones
    
    mejora = ((threads_despertados_normal - threads_despertados_exclusivo) /
              threads_despertados_normal) * 100
    
    imprimir("Reduccin de wakeups: " + mejora + "%")
    imprimir("Context switches evitados: " + 
             (threads_despertados_normal - threads_despertados_exclusivo))
}`})})]})]}),e.jsxs(me,{value:"workstealing",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-slate-800/30 p-6 rounded-lg border border-green-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-300 mb-3",children:" Solucin 3: Work Stealing"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:'Cada thread tiene su propia cola de trabajo. Cuando un thread se queda sin trabajo, "roba" tareas de las colas de otros threads ocupados. Evita despertar todos los threads simultneamente y balancea la carga automticamente.'}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Cada thread tiene cola local"}),e.jsx("li",{children:" Robo desde colas de otros threads"}),e.jsx("li",{children:" Balanceo de carga automtico"}),e.jsx("li",{children:" Usado en ForkJoinPool de Java"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Work Stealing"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Deque thread-safe (doble cola)
estructura WorkStealingDeque<T> {
    elementos: arreglo circular de T
    top: entero atmico    // Extremo para push/pop local
    bottom: entero atmico // Extremo para steal
    mutex: Mutex
}

// Operaciones en el deque
funcin push(deque: WorkStealingDeque, tarea: T) {
    // Push en el bottom (extremo local)
    b = deque.bottom.load()
    deque.elementos[b % tamao] = tarea
    deque.bottom.store(b + 1)
}

funcin pop(deque: WorkStealingDeque) -> T {
    // Pop desde el bottom (LIFO local - mejor localidad de cach)
    b = deque.bottom.load() - 1
    deque.bottom.store(b)
    
    t = deque.top.load()
    
    si b < t entonces
        // Deque vaco
        deque.bottom.store(t)
        return NULL
    fin si
    
    tarea = deque.elementos[b % tamao]
    
    si b > t entonces
        // Ms de un elemento, operacin exitosa
        return tarea
    fin si
    
    // Competencia con steal, usar CAS
    deque.bottom.store(t + 1)
    
    si compare_and_swap(deque.top, t, t + 1) entonces
        return tarea
    sino
        return NULL  // Perdimos la carrera
    fin si
}

funcin steal(deque: WorkStealingDeque) -> T {
    // Robar desde el top (FIFO - tareas ms antiguas)
    mientras verdadero hacer
        t = deque.top.load()
        b = deque.bottom.load()
        
        si t >= b entonces
            return NULL  // Deque vaco
        fin si
        
        tarea = deque.elementos[t % tamao]
        
        si compare_and_swap(deque.top, t, t + 1) entonces
            return tarea  // Robo exitoso
        fin si
        // CAS fall, reintentar
    fin mientras
}

// Thread pool con work stealing
estructura WorkStealingPool {
    threads: arreglo de Thread
    deques: arreglo de WorkStealingDeque
    num_threads: entero
    activo: booleano atmico
}

funcin crear_pool(num_threads: entero) -> WorkStealingPool {
    pool: WorkStealingPool
    pool.num_threads = num_threads
    pool.activo = verdadero
    
    // Crear deque para cada thread
    pool.deques = nuevo arreglo[num_threads] de WorkStealingDeque
    
    // Iniciar threads workers
    para i = 0 hasta num_threads - 1 hacer
        pool.threads[i] = crear_thread(worker, pool, i)
    fin para
    
    return pool
}

// Worker con work stealing
funcin worker(pool: WorkStealingPool, id: entero) {
    mi_deque = pool.deques[id]
    intentos_robo = 0
    max_intentos = pool.num_threads * 2
    
    mientras pool.activo hacer
        // 1. Intentar tomar tarea de mi cola local
        tarea = pop(mi_deque)
        
        si tarea != NULL entonces
            ejecutar(tarea)
            intentos_robo = 0  // Resetear contador
            continuar
        fin si
        
        // 2. Intentar robar de otros threads
        tarea = intentar_robar(pool, id)
        
        si tarea != NULL entonces
            ejecutar(tarea)
            intentos_robo = 0
            continuar
        fin si
        
        // 3. No hay trabajo, estrategia de espera
        intentos_robo++
        
        si intentos_robo < max_intentos entonces
            // Spin breve (busy-wait)
            spin_wait(10)
        sino
            // Dormir para ahorrar CPU
            thread_sleep(1ms)
        fin si
    fin mientras
}

// Estrategia de robo: vctima aleatoria
funcin intentar_robar(pool: WorkStealingPool, mi_id: entero) -> Tarea {
    num_threads = pool.num_threads
    inicio = random(num_threads)
    
    // Intentar robar de cada thread (orden aleatorio)
    para i = 0 hasta num_threads - 1 hacer
        victima = (inicio + i) % num_threads
        
        si victima == mi_id entonces
            continuar  // No robar de mi mismo
        fin si
        
        tarea = steal(pool.deques[victima])
        
        si tarea != NULL entonces
            return tarea  // Robo exitoso
        fin si
    fin para
    
    return NULL  // No se encontr trabajo
}

// Submit tarea al pool
funcin submit(pool: WorkStealingPool, tarea: Tarea) {
    // Seleccionar thread con menos carga (heurstica)
    thread_id = seleccionar_thread_menos_cargado(pool)
    
    // Push a su deque
    push(pool.deques[thread_id], tarea)
}

// Ejemplo: procesamiento paralelo con work stealing
funcin procesar_arbol_paralelo(nodo: Nodo, pool: WorkStealingPool) {
    si nodo es hoja entonces
        procesar(nodo)
        return
    fin si
    
    // Dividir trabajo recursivamente
    para cada hijo en nodo.hijos hacer
        tarea = lambda: procesar_arbol_paralelo(hijo, pool)
        submit(pool, tarea)
    fin para
}

// ForkJoin pattern (divide and conquer)
funcin fork_join_sort(arr: arreglo, inicio: entero, fin: entero) {
    si fin - inicio <= UMBRAL entonces
        // Caso base: ordenar secuencialmente
        insertion_sort(arr, inicio, fin)
        return
    fin si
    
    // Dividir
    medio = (inicio + fin) / 2
    
    // Fork: crear subtareas
    tarea_izq = crear_tarea(fork_join_sort, arr, inicio, medio)
    tarea_der = crear_tarea(fork_join_sort, arr, medio, fin)
    
    // Push a mi deque local
    mi_id = thread_actual_id()
    push(pool.deques[mi_id], tarea_izq)
    push(pool.deques[mi_id], tarea_der)
    
    // Procesar una subtarea localmente (ayudar)
    fork_join_sort(arr, inicio, medio)
    
    // Join: esperar resultado de la otra subtarea
    mientras tarea_der no completada hacer
        // Intentar robar y ejecutar trabajo mientras esperamos
        tarea = intentar_robar(pool, mi_id)
        si tarea != NULL entonces
            ejecutar(tarea)
        fin si
    fin mientras
    
    // Merge resultados
    merge(arr, inicio, medio, fin)
}

// Mtricas de eficiencia
funcin medir_work_stealing() {
    tareas_totales = 1000
    tareas_locales = 0
    tareas_robadas = 0
    
    // Contadores por thread
    para cada thread hacer
        tareas_locales += thread.stats.local_pops
        tareas_robadas += thread.stats.steals
    fin para
    
    ratio_robo = (tareas_robadas / tareas_totales) * 100
    
    imprimir("Tareas locales: " + tareas_locales)
    imprimir("Tareas robadas: " + tareas_robadas)
    imprimir("Ratio de robo: " + ratio_robo + "%")
    imprimir("Balanceo de carga: " + evaluar_balance())
}`})})]})]}),e.jsxs(me,{value:"semaphore",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-slate-800/30 p-6 rounded-lg border border-orange-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-300 mb-3",children:" Solucin 4: Semforos con Contadores"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Usa semforos contadores para controlar exactamente cuntos threads pueden acceder simultneamente a un recurso. El contador limita los despertares al nmero exacto de recursos disponibles, evitando despertares masivos innecesarios."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Contador de recursos disponibles"}),e.jsx("li",{children:" Despierta solo N threads (N recursos)"}),e.jsx("li",{children:" Control fino de concurrencia"}),e.jsx("li",{children:" Evita sobre-suscripcin"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Semforos con Contadores"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Semforo contador bsico
estructura Semaphore {
    contador: entero atmico
    wait_queue: Cola<Thread>
    mutex: Mutex
}

funcin crear_semaforo(valor_inicial: entero) -> Semaphore {
    sem: Semaphore
    sem.contador = valor_inicial
    sem.wait_queue = nueva_cola()
    return sem
}

// Wait (P operation / down)
funcin wait(sem: Semaphore) {
    sem.mutex.lock()
    
    mientras sem.contador <= 0 hacer
        // No hay recursos, esperar
        thread_actual = obtener_thread_actual()
        sem.wait_queue.enqueue(thread_actual)
        
        // Liberar mutex y dormir
        sem.mutex.unlock()
        thread_actual.dormir()
        sem.mutex.lock()
    fin mientras
    
    // Hay recursos disponibles
    sem.contador--
    sem.mutex.unlock()
}

// Signal (V operation / up)
funcin signal(sem: Semaphore) {
    sem.mutex.lock()
    
    sem.contador++
    
    // Despertar UN thread esperando (si hay)
    si no sem.wait_queue.vacia() entonces
        thread = sem.wait_queue.dequeue()
        thread.despertar()
    fin si
    
    sem.mutex.unlock()
}

// Signal mltiple (despertar N threads)
funcin signal_n(sem: Semaphore, n: entero) {
    sem.mutex.lock()
    
    sem.contador += n
    despertados = 0
    
    // Despertar exactamente N threads (o todos los que esperan)
    mientras despertados < n Y no sem.wait_queue.vacia() hacer
        thread = sem.wait_queue.dequeue()
        thread.despertar()
        despertados++
    fin mientras
    
    sem.mutex.unlock()
}

// Pool de conexiones con semforo
funcin connection_pool_semaforo(max_conexiones: entero) {
    semaforo: Semaphore = crear_semaforo(max_conexiones)
    conexiones: arreglo[max_conexiones] de Connection
    
    // Inicializar pool
    para i = 0 hasta max_conexiones - 1 hacer
        conexiones[i] = crear_conexion()
    fin para
    
    // Adquirir conexin
    funcin acquire() -> Connection {
        wait(semaforo)  // Esperar si no hay conexiones
        
        // Buscar conexin disponible
        para cada conn en conexiones hacer
            si conn.disponible entonces
                conn.disponible = falso
                return conn
            fin si
        fin para
    }
    
    // Liberar conexin
    funcin release(conn: Connection) {
        conn.disponible = verdadero
        signal(semaforo)  // Despertar UN thread esperando
    }
}

// Semforo con prioridad (evita starvation)
estructura PrioritySemaphore {
    contador: entero atmico
    colas: arreglo de Cola<Thread>  // Una cola por prioridad
    num_prioridades: entero
    mutex: Mutex
}

funcin wait_priority(sem: PrioritySemaphore, prioridad: entero) {
    sem.mutex.lock()
    
    mientras sem.contador <= 0 hacer
        thread_actual = obtener_thread_actual()
        // Encolar en cola de prioridad correspondiente
        sem.colas[prioridad].enqueue(thread_actual)
        
        sem.mutex.unlock()
        thread_actual.dormir()
        sem.mutex.lock()
    fin mientras
    
    sem.contador--
    sem.mutex.unlock()
}

funcin signal_priority(sem: PrioritySemaphore) {
    sem.mutex.lock()
    
    sem.contador++
    
    // Despertar thread de mayor prioridad
    para prioridad = sem.num_prioridades - 1 hasta 0 hacer
        si no sem.colas[prioridad].vacia() entonces
            thread = sem.colas[prioridad].dequeue()
            thread.despertar()
            break
        fin si
    fin para
    
    sem.mutex.unlock()
}

// Barrera con semforos (sincronizacin de fase)
estructura Barrier {
    num_threads: entero
    contador: entero atmico
    semaforo: Semaphore
    mutex: Mutex
}

funcin wait_barrier(barrier: Barrier) {
    barrier.mutex.lock()
    barrier.contador++
    
    si barrier.contador == barrier.num_threads entonces
        // ltimo thread, liberar todos
        barrier.contador = 0
        barrier.mutex.unlock()
        
        // Despertar TODOS los threads (todos los recursos listos)
        signal_n(barrier.semaforo, barrier.num_threads - 1)
    sino
        // No soy el ltimo, esperar
        barrier.mutex.unlock()
        wait(barrier.semaforo)
    fin si
}

// Rate limiter con semforo (token bucket)
funcin rate_limiter(tokens_por_segundo: entero) {
    semaforo: Semaphore = crear_semaforo(tokens_por_segundo)
    
    // Thread que regenera tokens
    funcin regenerador() {
        mientras verdadero hacer
            dormir(1 segundo)
            signal_n(semaforo, tokens_por_segundo)
        fin mientras
    }
    
    crear_thread(regenerador)
    
    // Consumir token
    funcin acquire_token() {
        wait(semaforo)
        // Token adquirido, proceder con operacin
    }
    
    return acquire_token
}

// Thread pool con semforo (limitar workers activos)
funcin thread_pool_semaforo(max_workers: entero) {
    semaforo_workers: Semaphore = crear_semaforo(max_workers)
    cola_trabajos: Cola<Trabajo> sincronizada
    
    funcin worker() {
        mientras verdadero hacer
            trabajo = cola_trabajos.dequeue()
            
            // Adquirir slot de worker
            wait(semaforo_workers)
            
            ejecutar(trabajo)
            
            // Liberar slot (despertar siguiente worker)
            signal(semaforo_workers)
        fin mientras
    }
    
    // Crear pool de threads
    para i = 1 hasta max_workers * 2 hacer
        crear_thread(worker)
    fin para
}

// Productor-Consumidor con semforos duales
funcin producer_consumer_semaphores(buffer_size: entero) {
    buffer: arreglo circular[buffer_size]
    sem_vacios: Semaphore = crear_semaforo(buffer_size)  // Espacios vacos
    sem_llenos: Semaphore = crear_semaforo(0)            // Items disponibles
    mutex: Mutex
    
    funcin producer() {
        mientras verdadero hacer
            item = producir()
            
            wait(sem_vacios)    // Esperar espacio disponible
            mutex.lock()
            buffer.push(item)
            mutex.unlock()
            signal(sem_llenos)  // Sealar item disponible
        fin mientras
    }
    
    funcin consumer() {
        mientras verdadero hacer
            wait(sem_llenos)    // Esperar item disponible
            mutex.lock()
            item = buffer.pop()
            mutex.unlock()
            signal(sem_vacios)  // Sealar espacio disponible
            
            consumir(item)
        fin mientras
    }
}

// Mtricas de uso
funcin medir_semaforos() {
    max_recursos = 10
    threads_totales = 50
    threads_bloqueados = 0
    
    para cada thread hacer
        si thread.estado == ESPERANDO entonces
            threads_bloqueados++
        fin si
    fin para
    
    utilizacion = ((threads_totales - threads_bloqueados) / max_recursos) * 100
    eficiencia = min(utilizacion, 100)
    
    imprimir("Recursos mximos: " + max_recursos)
    imprimir("Threads activos: " + (threads_totales - threads_bloqueados))
    imprimir("Threads bloqueados: " + threads_bloqueados)
    imprimir("Eficiencia: " + eficiencia + "%")
}`})})]})]}),e.jsxs(me,{value:"pooling",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/30 to-slate-800/30 p-6 rounded-lg border border-cyan-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-cyan-300 mb-3",children:" Solucin 5: Connection Pooling"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Mantiene un pool de conexiones pre-establecidas y reutilizables. En lugar de crear conexiones bajo demanda (causando thundering herd), los threads toman conexiones existentes del pool. Comn en bases de datos y servicios de red."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Reutilizacin de conexiones"}),e.jsx("li",{children:" Evita creacin masiva simultnea"}),e.jsx("li",{children:" Gestin de timeouts y validacin"}),e.jsx("li",{children:" Control de tamao mximo"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Connection Pooling"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Estructura de conexin
estructura Connection {
    id: entero
    socket: Socket
    en_uso: booleano atmico
    ultimo_uso: Timestamp
    creada: Timestamp
    validaciones_fallidas: entero
}

// Pool de conexiones
estructura ConnectionPool {
    conexiones: Lista<Connection>
    min_size: entero
    max_size: entero
    current_size: entero atmico
    semaforo: Semaphore
    mutex: Mutex
    timeout_ms: entero
    max_lifetime_ms: entero
}

// Crear pool
funcin crear_pool(host: cadena, puerto: entero, 
                   min: entero, max: entero) -> ConnectionPool {
    pool: ConnectionPool
    pool.min_size = min
    pool.max_size = max
    pool.current_size = 0
    pool.timeout_ms = 30000  // 30 segundos
    pool.max_lifetime_ms = 1800000  // 30 minutos
    pool.semaforo = crear_semaforo(max)
    
    // Crear conexiones iniciales (min_size)
    para i = 1 hasta min hacer
        conn = crear_conexion(host, puerto)
        pool.conexiones.append(conn)
        pool.current_size++
    fin para
    
    // Iniciar thread de mantenimiento
    crear_thread(mantener_pool, pool)
    
    return pool
}

// Adquirir conexin del pool
funcin acquire(pool: ConnectionPool, timeout_ms: entero) -> Connection {
    inicio = timestamp_actual()
    
    mientras verdadero hacer
        pool.mutex.lock()
        
        // 1. Buscar conexin disponible y vlida
        para cada conn en pool.conexiones hacer
            si no conn.en_uso entonces
                si validar_conexion(conn) entonces
                    conn.en_uso = verdadero
                    conn.ultimo_uso = timestamp_actual()
                    pool.mutex.unlock()
                    return conn
                sino
                    // Conexin invlida, remover
                    pool.conexiones.remove(conn)
                    pool.current_size--
                    cerrar(conn)
                fin si
            fin si
        fin para
        
        // 2. No hay conexiones disponibles
        si pool.current_size < pool.max_size entonces
            // Crear nueva conexin
            conn = crear_nueva_conexion(pool)
            si conn != NULL entonces
                conn.en_uso = verdadero
                conn.ultimo_uso = timestamp_actual()
                pool.conexiones.append(conn)
                pool.current_size++
                pool.mutex.unlock()
                return conn
            fin si
        fin si
        
        pool.mutex.unlock()
        
        // 3. Pool lleno, esperar
        tiempo_transcurrido = timestamp_actual() - inicio
        
        si tiempo_transcurrido >= timeout_ms entonces
            lanzar TimeoutException("Pool exhausted")
        fin si
        
        // Esperar con semforo (despertar selectivo)
        wait_timeout(pool.semaforo, timeout_ms - tiempo_transcurrido)
    fin mientras
}

// Liberar conexin al pool
funcin release(pool: ConnectionPool, conn: Connection) {
    pool.mutex.lock()
    
    si conn.en_uso entonces
        conn.en_uso = falso
        conn.ultimo_uso = timestamp_actual()
        
        // Verificar si debe ser descartada
        si debe_descartar(conn, pool) entonces
            pool.conexiones.remove(conn)
            pool.current_size--
            cerrar(conn)
        fin si
    fin si
    
    pool.mutex.unlock()
    
    // Sealar que hay conexin disponible
    signal(pool.semaforo)
}

// Validar conexin
funcin validar_conexion(conn: Connection) -> booleano {
    // 1. Verificar timeout de vida
    edad = timestamp_actual() - conn.creada
    si edad > pool.max_lifetime_ms entonces
        return falso
    fin si
    
    // 2. Ping rpido (opcional)
    si no ping(conn.socket) entonces
        conn.validaciones_fallidas++
        si conn.validaciones_fallidas >= 3 entonces
            return falso
        fin si
    sino
        conn.validaciones_fallidas = 0
    fin si
    
    return verdadero
}

// Thread de mantenimiento
funcin mantener_pool(pool: ConnectionPool) {
    mientras verdadero hacer
        dormir(60000)  // Cada minuto
        
        pool.mutex.lock()
        
        // 1. Remover conexiones expiradas
        para cada conn en pool.conexiones hacer
            si no conn.en_uso entonces
                si debe_descartar(conn, pool) entonces
                    pool.conexiones.remove(conn)
                    pool.current_size--
                    cerrar(conn)
                fin si
            fin si
        fin para
        
        // 2. Mantener mnimo de conexiones
        mientras pool.current_size < pool.min_size hacer
            conn = crear_nueva_conexion(pool)
            si conn != NULL entonces
                pool.conexiones.append(conn)
                pool.current_size++
            fin si
        fin mientras
        
        pool.mutex.unlock()
    fin mientras
}

// Verificar si descartar conexin
funcin debe_descartar(conn: Connection, pool: ConnectionPool) -> booleano {
    // Excede tiempo de vida
    edad = timestamp_actual() - conn.creada
    si edad > pool.max_lifetime_ms entonces
        return verdadero
    fin si
    
    // Idle timeout (30 min sin uso)
    idle_time = timestamp_actual() - conn.ultimo_uso
    si idle_time > 1800000 entonces
        return verdadero
    fin si
    
    // Muchas validaciones fallidas
    si conn.validaciones_fallidas >= 3 entonces
        return verdadero
    fin si
    
    return falso
}

// Pool con particionamiento (sharding)
estructura ShardedConnectionPool {
    shards: arreglo de ConnectionPool
    num_shards: entero
}

funcin crear_sharded_pool(num_shards: entero, 
                           size_por_shard: entero) -> ShardedConnectionPool {
    pool: ShardedConnectionPool
    pool.num_shards = num_shards
    
    para i = 0 hasta num_shards - 1 hacer
        pool.shards[i] = crear_pool(host, puerto, 
                                     size_por_shard / 2, 
                                     size_por_shard)
    fin para
    
    return pool
}

funcin acquire_sharded(pool: ShardedConnectionPool) -> Connection {
    // Seleccionar shard basado en thread ID (menos contencin)
    shard_id = thread_id() % pool.num_shards
    return acquire(pool.shards[shard_id], 30000)
}

// Ejemplo: Base de datos con pooling
funcin ejemplo_database_pool() {
    pool = crear_pool("localhost", 5432, min=5, max=20)
    
    funcin worker_thread() {
        mientras verdadero hacer
            trabajo = obtener_trabajo()
            
            // Adquirir conexin (espera si no hay disponibles)
            conn = acquire(pool, timeout_ms=5000)
            
            intentar {
                resultado = conn.query(trabajo.sql)
                procesar(resultado)
            } capturar error {
                manejar_error(error)
            } finalmente {
                // SIEMPRE liberar conexin
                release(pool, conn)
            }
        fin mientras
    }
    
    // Crear threads workers
    para i = 1 hasta 100 hacer
        crear_thread(worker_thread)
    fin para
}

// Pool elstico (escala automticamente)
funcin pool_elastico() {
    pool: ConnectionPool
    metricas: Metricas
    
    funcin ajustar_tamao() {
        mientras verdadero hacer
            dormir(10000)  // Cada 10 segundos
            
            carga = metricas.wait_time_promedio
            
            si carga > 100ms Y pool.current_size < pool.max_size entonces
                // Alta carga, expandir
                agregar_conexiones(pool, 2)
            fin si
            
            si carga < 10ms Y pool.current_size > pool.min_size entonces
                // Baja carga, contraer
                remover_conexiones_idle(pool, 2)
            fin si
        fin mientras
    }
    
    crear_thread(ajustar_tamao)
}

// Mtricas de pool
funcin medir_pool(pool: ConnectionPool) {
    pool.mutex.lock()
    
    total = pool.current_size
    en_uso = 0
    disponibles = 0
    
    para cada conn en pool.conexiones hacer
        si conn.en_uso entonces
            en_uso++
        sino
            disponibles++
        fin si
    fin para
    
    pool.mutex.unlock()
    
    utilizacion = (en_uso / total) * 100
    
    imprimir("Conexiones totales: " + total)
    imprimir("Conexiones en uso: " + en_uso)
    imprimir("Conexiones disponibles: " + disponibles)
    imprimir("Utilizacin: " + utilizacion + "%")
    imprimir("Capacidad restante: " + (pool.max_size - total))
}`})})]})]})]})})]}),e.jsxs(sa,{value:"demos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"size-6 text-emerald-400"}),e.jsx("span",{className:"text-2xl font-semibold",children:"Demostraciones Interactivas"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"demo-selective",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"demo-selective",className:"data-[state=active]:bg-emerald-600",children:"Demo Selectivo"}),e.jsx(ce,{value:"demo-epoll",className:"data-[state=active]:bg-emerald-600",children:"Demo Epoll"}),e.jsx(ce,{value:"demo-ws",className:"data-[state=active]:bg-emerald-600",children:"Demo WS"}),e.jsx(ce,{value:"demo-sem",className:"data-[state=active]:bg-emerald-600",children:"Demo Semforos"}),e.jsx(ce,{value:"demo-pool",className:"data-[state=active]:bg-emerald-600",children:"Demo Pool"})]}),e.jsx(me,{value:"demo-selective",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-slate-900/50 p-6 rounded-lg border border-blue-700/30",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-300 mb-4",children:" Demostracin: Despertar Selectivo"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>i(!s),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${s?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[s?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),s?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold bg-slate-600 hover:bg-slate-700 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[n],onValueChange:we=>l(we[0]),min:200,max:2e3,step:100,className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[n,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-sm font-semibold text-blue-300 mb-2",children:[" Cola de Espera (",d.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[d.map((we,_t)=>e.jsxs("div",{className:"bg-blue-900/30 px-2 py-1 rounded text-sm border border-blue-700/50",children:["Thread ",we]},_t)),d.length===0&&e.jsx("div",{className:"text-gray-500 text-xs italic",children:"Vaca"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-amber-300 mb-2",children:" Trabajos Pendientes"}),e.jsx("div",{className:"text-4xl font-bold text-center text-amber-400 py-4",children:h})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-emerald-300 mb-2",children:" Thread Trabajando"}),e.jsx("div",{className:"text-center py-4",children:g!==null?e.jsxs("div",{className:"bg-emerald-900/30 px-3 py-2 rounded border border-emerald-700/50 inline-block",children:[e.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:["Thread ",g]}),e.jsx("div",{className:"text-xs text-emerald-300 mt-1",children:"Procesando..."})]}):e.jsx("div",{className:"text-gray-500 text-sm italic",children:"Idle"})})]})]}),e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:" Log de Eventos"}),e.jsx("div",{ref:xt,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:v.map(we=>e.jsx("div",{className:`${we.type==="success"?"text-emerald-400":we.type==="warning"?"text-amber-400":we.type==="error"?"text-red-400":"text-gray-400"}`,children:we.message},we.id))})]})]})}),e.jsx(me,{value:"demo-epoll",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-slate-900/50 p-6 rounded-lg border border-purple-700/30",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:" Demostracin: Epoll/Kqueue EPOLLEXCLUSIVE"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>j(!N),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${N?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[N?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),N?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold bg-slate-600 hover:bg-slate-700 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("button",{onClick:()=>E(C==="normal"?"exclusive":"normal"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${C==="exclusive"?"bg-emerald-600 hover:bg-emerald-700":"bg-amber-600 hover:bg-amber-700"}`,children:["Modo: ",C==="exclusive"?"EXCLUSIVE ":"NORMAL "]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[_],onValueChange:we=>w(we[0]),min:200,max:2e3,step:100,className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[_,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-sm font-semibold text-purple-300 mb-3",children:[" Threads en epoll_wait() (",D.length,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:D.map(we=>{const _t=V.includes(we);return e.jsxs("div",{className:`px-3 py-2 rounded text-center font-semibold transition-all ${_t?"bg-emerald-600 border-emerald-400 scale-110":"bg-purple-900/30 border-purple-700/50"} border`,children:["T",we]},we)})})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-300 mb-3",children:" Eventos Procesados"}),e.jsx("div",{className:"text-5xl font-bold text-center text-purple-400 py-4",children:ie}),e.jsx("div",{className:"text-center text-sm text-gray-400",children:C==="normal"?" Thundering Herd Activo":" Despertar Exclusivo"})]})]}),e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:" Log de Eventos"}),e.jsx("div",{ref:Ot,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:k.map(we=>e.jsx("div",{className:`${we.type==="success"?"text-emerald-400":we.type==="warning"?"text-amber-400":we.type==="error"?"text-red-400":"text-gray-400"}`,children:we.message},we.id))})]})]})}),e.jsx(me,{value:"demo-ws",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-slate-900/50 p-6 rounded-lg border border-green-700/30",children:[e.jsx("h3",{className:"text-xl font-bold text-green-300 mb-4",children:" Demostracin: Work Stealing"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>G(!te),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${te?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[te?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),te?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold bg-slate-600 hover:bg-slate-700 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[oe],onValueChange:we=>Ce(we[0]),min:200,max:2e3,step:100,className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[oe,"ms"]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:ke.map((we,_t)=>e.jsxs("div",{className:`bg-slate-800/50 p-4 rounded-lg border transition-all ${P.includes(_t)?"border-emerald-500 bg-emerald-900/20":F?.to===_t?"border-blue-500 bg-blue-900/20":F?.from===_t?"border-amber-500 bg-amber-900/20":"border-slate-600"}`,children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-300 mb-2",children:["Thread ",_t," (",we.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[we.slice().reverse().map((St,tt)=>e.jsxs("div",{className:"bg-green-900/30 px-2 py-1 rounded text-sm border border-green-700/50 text-center",children:["T",St]},tt)),we.length===0&&e.jsx("div",{className:"text-gray-500 text-xs italic text-center py-2",children:P.includes(_t)?"Robando...":"Vaca"})]})]},_t))}),e.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-600 mb-4",children:e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded"}),e.jsx("span",{children:"Procesando"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:"Robando a..."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded"}),e.jsx("span",{children:"Siendo robado"})]})]})}),e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:" Log de Eventos"}),e.jsx("div",{ref:It,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:qe.map(we=>e.jsx("div",{className:`${we.type==="success"?"text-emerald-400":we.type==="warning"?"text-amber-400":we.type==="error"?"text-red-400":"text-gray-400"}`,children:we.message},we.id))})]})]})}),e.jsx(me,{value:"demo-sem",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/20 to-slate-900/50 p-6 rounded-lg border border-orange-700/30",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-300 mb-4",children:" Demostracin: Semforos con Contadores"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>re(!W),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${W?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[W?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),W?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:Ve,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold bg-slate-600 hover:bg-slate-700 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[A],onValueChange:we=>K(we[0]),min:200,max:2e3,step:100,className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[A,"ms"]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-lg border border-slate-600 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3 text-center",children:"Contador del Semforo"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("div",{className:"text-6xl font-bold text-orange-400",children:M}),e.jsx("div",{className:"text-2xl text-gray-400",children:"/"}),e.jsx("div",{className:"text-4xl text-gray-500",children:q})]}),e.jsx("div",{className:"text-center text-sm text-gray-400 mt-2",children:"Recursos disponibles"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-sm font-semibold text-amber-300 mb-3",children:[" Threads Esperando (",$.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[$.map((we,_t)=>e.jsxs("div",{className:"bg-amber-900/30 px-3 py-2 rounded border border-amber-700/50 text-center",children:["Thread ",we]},_t)),$.length===0&&e.jsx("div",{className:"text-gray-500 text-xs italic text-center",children:"No hay threads esperando"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-sm font-semibold text-emerald-300 mb-3",children:[" Threads Activos (",Z.length,"/",q,")"]}),e.jsxs("div",{className:"space-y-1",children:[Z.map((we,_t)=>e.jsxs("div",{className:"bg-emerald-900/30 px-3 py-2 rounded border border-emerald-700/50 text-center",children:["Thread ",we]},_t)),Z.length===0&&e.jsx("div",{className:"text-gray-500 text-xs italic text-center",children:"No hay threads activos"})]})]})]}),e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:" Log de Eventos"}),e.jsx("div",{ref:Ue,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:Oe.map(we=>e.jsx("div",{className:`${we.type==="success"?"text-emerald-400":we.type==="warning"?"text-amber-400":we.type==="error"?"text-red-400":"text-gray-400"}`,children:we.message},we.id))})]})]})}),e.jsx(me,{value:"demo-pool",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/20 to-slate-900/50 p-6 rounded-lg border border-cyan-700/30",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-300 mb-4",children:" Demostracin: Connection Pooling"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>se(!ae),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${ae?"bg-red-600 hover:bg-red-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[ae?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),ae?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold bg-slate-600 hover:bg-slate-700 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[rt],onValueChange:we=>jt(we[0]),min:200,max:2e3,step:100,className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[rt,"ms"]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-cyan-300 mb-3",children:" Connection Pool (5 conexiones)"}),e.jsx("div",{className:"grid grid-cols-5 gap-3",children:fe.map(we=>e.jsxs("div",{className:`p-3 rounded-lg border transition-all ${we.inUse?"bg-emerald-900/30 border-emerald-600":"bg-cyan-900/30 border-cyan-700"}`,children:[e.jsxs("div",{className:"text-center font-semibold mb-1",children:["Conn ",we.id]}),e.jsx("div",{className:"text-xs text-center text-gray-400 mb-2",children:we.inUse?`Thread ${we.thread}`:"Disponible"}),e.jsx("div",{className:"bg-slate-900 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${we.health>80?"bg-emerald-500":we.health>50?"bg-amber-500":"bg-red-500"}`,style:{width:`${we.health}%`}})}),e.jsxs("div",{className:"text-xs text-center text-gray-500 mt-1",children:[we.health,"%"]})]},we.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-sm font-semibold text-amber-300 mb-3",children:[" Threads Esperando (",De.length,")"]}),e.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[De.map((we,_t)=>e.jsxs("div",{className:"bg-amber-900/30 px-3 py-1 rounded border border-amber-700/50 text-center text-sm",children:["Thread ",we]},_t)),De.length===0&&e.jsx("div",{className:"text-gray-500 text-xs italic text-center py-4",children:"No hay threads esperando"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-cyan-300 mb-3",children:" Estadsticas"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Peticiones:"}),e.jsx("span",{className:"font-semibold text-cyan-400",children:ze})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Conexiones en uso:"}),e.jsx("span",{className:"font-semibold text-emerald-400",children:fe.filter(we=>we.inUse).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Disponibles:"}),e.jsx("span",{className:"font-semibold text-cyan-400",children:fe.filter(we=>!we.inUse).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Utilizacin:"}),e.jsxs("span",{className:"font-semibold text-amber-400",children:[Math.round(fe.filter(we=>we.inUse).length/fe.length*100),"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:" Log de Eventos"}),e.jsx("div",{ref:kt,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:Xe.map(we=>e.jsx("div",{className:`${we.type==="success"?"text-emerald-400":we.type==="warning"?"text-amber-400":we.type==="error"?"text-red-400":"text-gray-400"}`,children:we.message},we.id))})]})]})})]})})]})]})})]})}const OR=Sa("/ActividadesSeminarioSO/actividad11/thundering-herd")({component:IR});function DR(){const[s,i]=c.useState([{id:1,priority:10,effectivePriority:10,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-blue-500",status:"waiting"},{id:2,priority:50,effectivePriority:50,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-green-500",status:"waiting"},{id:3,priority:80,effectivePriority:80,arrivalTime:0,tickets:2,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-purple-500",status:"waiting"}]),[n,l]=c.useState(!1),[d,m]=c.useState(0),[h,x]=c.useState([500]),[g,b]=c.useState(["Sistema iniciado. Esperando..."]),v=c.useRef(null),[f,N]=c.useState([{id:1,priority:0,effectivePriority:0,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-cyan-500",status:"waiting"},{id:2,priority:0,effectivePriority:0,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:512,executionTime:0,waitTime:0,color:"bg-pink-500",status:"waiting"}]),[j,_]=c.useState(!1),[w,C]=c.useState(0),[E,D]=c.useState([500]),[L,V]=c.useState(["Sistema Fair Scheduler iniciado."]),J=c.useRef(null),[ie,I]=c.useState([{id:1,priority:10,effectivePriority:10,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-red-500",status:"waiting"},{id:2,priority:50,effectivePriority:50,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-yellow-500",status:"waiting"},{id:3,priority:80,effectivePriority:80,arrivalTime:0,tickets:2,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-indigo-500",status:"waiting"}]),[k,be]=c.useState(!1),[te,G]=c.useState(0),[oe,Ce]=c.useState([500]),[ke,Ee]=c.useState(["Sistema Bounded Waiting iniciado (MAX_BYPASS=3)."]),P=c.useRef(null),[Q,F]=c.useState([{id:1,priority:0,effectivePriority:0,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-orange-500",status:"waiting"},{id:2,priority:0,effectivePriority:0,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-teal-500",status:"waiting"}]),[ue,qe]=c.useState(!1),[T,W]=c.useState(0),[re,A]=c.useState([500]),[K,M]=c.useState(["Sistema Multilevel FIFO iniciado (4 niveles)."]),O=c.useRef(null),[q,$]=c.useState([{id:1,priority:0,effectivePriority:0,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-lime-500",status:"waiting"},{id:2,priority:0,effectivePriority:0,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-rose-500",status:"waiting"},{id:3,priority:0,effectivePriority:0,arrivalTime:0,tickets:2,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-amber-500",status:"waiting"}]),[ve,Z]=c.useState(!1),[z,Oe]=c.useState(0),[Re,ae]=c.useState([500]),[se,rt]=c.useState(["Sistema Lottery Scheduling iniciado."]),jt=c.useRef(null);return c.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[g]),c.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[L]),c.useEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[ke]),c.useEffect(()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight)},[K]),c.useEffect(()=>{jt.current&&(jt.current.scrollTop=jt.current.scrollHeight)},[se]),c.useEffect(()=>{if(!n)return;const fe=setInterval(()=>{m(Me=>Me+h[0]),i(Me=>{const De=Me.map(ze=>{if(ze.status==="completed")return ze;const _e=ze.status==="waiting"?ze.waitTime+h[0]:ze.waitTime,Xe=Math.floor(_e/100),We=Math.max(0,ze.priority-Xe);return{...ze,waitTime:_e,effectivePriority:We}}),Ge=De.filter(ze=>ze.status==="waiting");if(Ge.length>0){const ze=Ge.reduce((_e,Xe)=>Xe.effectivePriority<_e.effectivePriority?Xe:_e);return b(_e=>[..._e,`[${d}ms] Aging aplicado. Seleccionado P${ze.id} (prioridad efectiva: ${ze.effectivePriority.toFixed(1)})`]),De.map(_e=>({..._e,status:_e.id===ze.id?"executing":_e.status==="completed"?"completed":"waiting",executionTime:_e.id===ze.id?_e.executionTime+h[0]:_e.executionTime}))}return De})},h[0]);return()=>clearInterval(fe)},[n,h,d]),c.useEffect(()=>{if(!ve)return;const fe=setInterval(()=>{Oe(Me=>Me+Re[0]),$(Me=>{const De=Me.filter(We=>We.status!=="completed");if(De.length===0)return Me;const Ge=De.reduce((We,xt)=>We+xt.tickets,0),ze=Math.floor(Math.random()*Ge)+1;let _e=0,Xe=De[0];for(const We of De)if(_e+=We.tickets,ze<=_e){Xe=We;break}return rt(We=>[...We,` Sorteo: Ticket #${ze}/${Ge}  P${Xe.id} GANA (${Xe.tickets} tickets, ${(Xe.tickets/Ge*100).toFixed(1)}%)`]),Me.map(We=>{const xt=We.id===Xe.id?0:We.waitTime+Re[0],Ot=xt>2e3?1:0;return Ot>0&&rt(It=>[...It,` P${We.id} recibe +1 ticket por espera prolongada (total: ${We.tickets+Ot})`]),{...We,status:We.id===Xe.id?"executing":We.status,executionTime:We.id===Xe.id?We.executionTime+Re[0]:We.executionTime,waitTime:xt,tickets:We.id===Xe.id?We.tickets:We.tickets+Ot}})}),setTimeout(()=>{$(Me=>Me.map(De=>({...De,status:De.status==="completed"?"completed":"waiting"})))},Re[0]/2)},Re[0]);return()=>clearInterval(fe)},[ve,Re]),c.useEffect(()=>{if(!j)return;const fe=setInterval(()=>{C(Me=>Me+E[0]),N(Me=>{const De=Me.filter(We=>We.status!=="completed");if(De.length===0)return Me;const Ge=De.reduce((We,xt)=>xt.virtualTime<We.virtualTime?xt:We),ze=De.reduce((We,xt)=>We+xt.weight,0),_e=Ge.weight/ze,Xe=Math.max(E[0],_e*100);return V(We=>[...We,` P${Ge.id} ejecuta (vTime: ${Ge.virtualTime.toFixed(1)}, CPU: ${(_e*100).toFixed(1)}%, quantum: ${Xe.toFixed(0)}ms)`]),Me.map(We=>{const xt=We.id===Ge.id,Ot=xt?E[0]*1024/We.weight:0;return{...We,status:xt?"executing":We.status,virtualTime:We.virtualTime+Ot,executionTime:xt?We.executionTime+E[0]:We.executionTime,waitTime:xt?0:We.waitTime+E[0]}})}),setTimeout(()=>{N(Me=>Me.map(De=>({...De,status:De.status==="completed"?"completed":"waiting"})))},E[0]/2)},E[0]);return()=>clearInterval(fe)},[j,E]),c.useEffect(()=>{if(!k)return;const fe=setInterval(()=>{G(Me=>Me+oe[0]),I(Me=>{const De=Me.filter(_e=>_e.status!=="completed");if(De.length===0)return Me;const Ge=De.find(_e=>_e.bypassCount>=3),ze=Ge||De.reduce((_e,Xe)=>Xe.priority>_e.priority?Xe:_e);return Ee(Ge?_e=>[..._e,` P${ze.id} FORZADO a ejecutar (bypass: ${ze.bypassCount}/3, prioridad: ${ze.priority})`]:_e=>[..._e,` P${ze.id} ejecuta (prioridad: ${ze.priority})`]),Me.map(_e=>{const Xe=_e.id===ze.id;return{..._e,status:Xe?"executing":_e.status,bypassCount:Xe?0:_e.bypassCount+1,executionTime:Xe?_e.executionTime+oe[0]:_e.executionTime,waitTime:Xe?0:_e.waitTime+oe[0]}})}),setTimeout(()=>{I(Me=>Me.map(De=>({...De,status:De.status==="completed"?"completed":"waiting"})))},oe[0]/2)},oe[0]);return()=>clearInterval(fe)},[k,oe]),c.useEffect(()=>{if(!ue)return;const fe=setInterval(()=>{W(Me=>Me+re[0]),F(Me=>{const De=Me.filter(_e=>_e.status!=="completed");if(De.length===0)return Me;let Ge=null;for(let _e=0;_e<=3;_e++){const Xe=De.filter(We=>We.level===_e);if(Xe.length>0){Ge=Xe[0];break}}if(!Ge)return Me;const ze=10*Math.pow(2,Ge.level);return M(_e=>[..._e,` P${Ge.id} ejecuta en nivel ${Ge.level} (quantum: ${ze}ms)`]),Me.map(_e=>{const Xe=_e.id===Ge.id,We=Xe?0:_e.waitTime+re[0],xt=Xe?_e.executionTime+re[0]:_e.executionTime;let Ot=_e.level;return!Xe&&We>50&&_e.level>0&&(Ot=_e.level-1,M(It=>[...It,` P${_e.id} PROMOCIONADO nivel ${_e.level}  ${Ot} (espera: ${We}ms)`])),Xe&&_e.level<3&&(Ot=_e.level+1,M(It=>[...It,` P${_e.id} DEGRADADO nivel ${_e.level}  ${Ot}`])),{..._e,status:Xe?"executing":_e.status,level:Ot,executionTime:xt,waitTime:We}})}),setTimeout(()=>{F(Me=>Me.map(De=>({...De,status:De.status==="completed"?"completed":"waiting"})))},re[0]/2)},re[0]);return()=>clearInterval(fe)},[ue,re]),e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-5xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Starvation"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Inanicin / Hambruna"})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white text-gray-900 rounded-lg p-8 mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ia,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Descripcin del Problema"})]}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:["La ",e.jsx("strong",{className:"text-orange-600",children:"inanicin"})," (starvation) ocurre cuando un proceso o thread espera indefinidamente para acceder a un recurso porque otros procesos con mayor prioridad lo acaparan continuamente. A diferencia del deadlock, el sistema sigue funcionando, pero algunos procesos nunca obtienen los recursos necesarios."]}),e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 rounded mt-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yn,{className:"size-5 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-orange-900 mb-2",children:"Causas Comunes de Starvation"}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Situaciones tpicas que provocan inanicin:"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"1. Algoritmos de scheduling injustos:"})," Procesos de baja prioridad nunca ejecutan"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2. Polticas LIFO:"})," Los nuevos procesos se atienden primero"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"3. Asignacin preferencial:"})," Ciertos procesos siempre obtienen los recursos"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"4. Prioridades estticas:"})," Sin mecanismo para aumentar prioridad con el tiempo"]})]})]})]})}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Ejemplo Clsico:"})," En el problema de los Filsofos Cenando, un filsofo que nunca logra tomar ambos tenedores sufre starvation, mientras los dems siguen comiendo y liberando recursos."]})})]}),e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones (Pseudocdigo)"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"aging",className:"w-full",children:[e.jsxs(Qt,{className:"w-full justify-start flex-wrap h-auto gap-2 bg-gray-900 p-2",children:[e.jsx(ce,{value:"aging",children:" Aging"}),e.jsx(ce,{value:"fair",children:" Fair Scheduling"}),e.jsx(ce,{value:"bounded",children:" Bounded Waiting"}),e.jsx(ce,{value:"fifo",children:" FIFO con Prioridad"}),e.jsx(ce,{value:"lottery",children:" Lottery Scheduling"})]}),"                ",e.jsx(me,{value:"aging",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:" Aging (Envejecimiento)"}),e.jsx("p",{className:"text-gray-300",children:"Aumenta gradualmente la prioridad de los procesos que esperan mucho tiempo. Garantiza que eventualmente todos los procesos sean atendidos."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`CONSTANTES:
    AGING_INTERVAL = 100
    AGING_FACTOR = 1

ESTRUCTURA Proceso:
    id: entero
    prioridad_base: entero
    prioridad_efectiva: entero
    tiempo_llegada: timestamp
FIN ESTRUCTURA

FUNCIN scheduler_con_aging():
    MIENTRAS sistema_activo:
        tiempo_actual = obtener_tiempo()
        
        PARA CADA proceso EN cola_listos:
            tiempo_espera = tiempo_actual - proceso.tiempo_llegada
            incrementos = tiempo_espera / AGING_INTERVAL
            proceso.prioridad_efectiva = proceso.prioridad_base - incrementos * AGING_FACTOR
            
            SI proceso.prioridad_efectiva < 0:
                proceso.prioridad_efectiva = 0
            FIN SI
        FIN PARA
        
        proceso_siguiente = MIN_PRIORIDAD(cola_listos)
        ejecutar(proceso_siguiente)
    FIN MIENTRAS
FIN FUNCIN`})})})]})}),e.jsx(me,{value:"fair",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:" Fair Scheduling (CFS)"}),e.jsx("p",{className:"text-gray-300",children:'Reparte el tiempo de CPU equitativamente. Cada proceso mantiene un "tiempo virtual" que representa cunto ha ejecutado. Siempre se elige el proceso con menor tiempo virtual.'}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`CONSTANTES:
    MIN_GRANULARITY = 1
    PESO_NORMAL = 1024

ESTRUCTURA Proceso:
    id: entero
    tiempo_virtual: real
    peso: entero
FIN ESTRUCTURA

GLOBAL arbol_procesos: ArbolRB<Proceso>

FUNCIN calcular_tiempo_virtual(tiempo_real, peso):
    RETORNAR tiempo_real * (PESO_NORMAL / peso)
FIN FUNCIN

FUNCIN fair_scheduler():
    MIENTRAS sistema_activo:
        proceso = arbol_procesos.minimo()
        SI proceso == NULL: CONTINUAR
        
        total_peso = SUMA(p.peso PARA p EN arbol_procesos)
        proporcion = proceso.peso / total_peso
        quantum = MAX(proporcion * PERIODO, MIN_GRANULARITY)
        
        tiempo_ejecutado = ejecutar_por(proceso, quantum)
        incremento_virtual = calcular_tiempo_virtual(tiempo_ejecutado, proceso.peso)
        proceso.tiempo_virtual += incremento_virtual
        
        arbol_procesos.remover(proceso)
        arbol_procesos.insertar(proceso)
    FIN MIENTRAS
FIN FUNCIN`})})})]})}),e.jsx(me,{value:"bounded",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:" Bounded Waiting (Espera Acotada)"}),e.jsx("p",{className:"text-gray-300",children:"Establece un lmite mximo de veces que un proceso puede ser omitido. Despus de N omisiones, el proceso debe ser atendido obligatoriamente."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`CONSTANTES:
    MAX_BYPASS = 3

ESTRUCTURA Proceso:
    id: entero
    bypass_count: entero
    timestamp_llegada: timestamp
FIN ESTRUCTURA

FUNCIN asignar_recurso_con_bounded_waiting():
    proceso_seleccionado = NULL
    
    PARA CADA proceso EN cola_espera:
        SI proceso.bypass_count >= MAX_BYPASS:
            proceso_seleccionado = proceso
            ROMPER
        FIN SI
    FIN PARA
    
    SI proceso_seleccionado == NULL:
        proceso_seleccionado = SELECCIONAR_POR_PRIORIDAD(cola_espera)
    FIN SI
    
    PARA CADA p EN cola_espera:
        SI p != proceso_seleccionado:
            p.bypass_count++
        SINO:
            p.bypass_count = 0
        FIN SI
    FIN PARA
    
    asignar_recurso_a(proceso_seleccionado)
    remover_de_cola(proceso_seleccionado)
FIN FUNCIN`})})})]})}),e.jsx(me,{value:"fifo",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:" FIFO con Prioridad (Multilevel Feedback Queue)"}),e.jsx("p",{className:"text-gray-300",children:"Mltiples colas FIFO con diferentes prioridades. Los procesos pueden ser promovidos o demotados entre niveles segn su comportamiento y tiempo de espera."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`CONSTANTES:
    NUM_NIVELES = 4
    QUANTUM_BASE = 10
    PROMOTE_THRESHOLD = 50

GLOBAL colas[NUM_NIVELES]: ColaProcesos

FUNCIN multilevel_scheduler():
    MIENTRAS sistema_activo:
        proceso = NULL
        
        PARA nivel DESDE 0 HASTA NUM_NIVELES-1:
            SI NO colas[nivel].esta_vacia():
                proceso = colas[nivel].desencolar()
                ROMPER
            FIN SI
        FIN PARA
        
        SI proceso == NULL: CONTINUAR
        
        quantum = QUANTUM_BASE * (2 ** proceso.nivel)
        tiempo_espera = tiempo_actual() - proceso.tiempo_llegada
        
        SI tiempo_espera > PROMOTE_THRESHOLD Y proceso.nivel > 0:
            proceso.nivel--
        FIN SI
        
        tiempo_usado = ejecutar_por(proceso, quantum)
        
        SI tiempo_usado >= quantum Y proceso.nivel < NUM_NIVELES-1:
            proceso.nivel++
        FIN SI
        
        colas[proceso.nivel].encolar(proceso)
    FIN MIENTRAS
FIN FUNCIN`})})})]})}),e.jsx(me,{value:"lottery",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:" Lottery Scheduling"}),e.jsx("p",{className:"text-gray-300",children:"Sorteo aleatorio de tickets. Cada proceso tiene tickets, y el ganador del sorteo obtiene CPU. Todos los procesos tienen probabilidad mayor que 0 de ser elegidos, evitando starvation."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`ESTRUCTURA Proceso:
    id: entero
    tickets: entero

FUNCIN lottery_scheduler():
    MIENTRAS sistema_activo:
        total_tickets = 0
        
        PARA CADA proceso EN procesos_listos:
            total_tickets += proceso.tickets
        FIN PARA
        
        SI total_tickets == 0: CONTINUAR
        
        ticket_ganador = RANDOM(1, total_tickets)
        suma_acumulada = 0
        
        PARA CADA proceso EN procesos_listos:
            suma_acumulada += proceso.tickets
            
            SI ticket_ganador <= suma_acumulada:
                ejecutar(proceso)
                ROMPER
            FIN SI
        FIN PARA
    FIN MIENTRAS
FIN FUNCIN

FUNCIN compensar_starvation():
    PARA CADA proceso EN procesos_listos:
        SI proceso.tiempo_espera > UMBRAL:
            proceso.tickets += BONUS_TICKETS
        FIN SI
    FIN PARA
FIN FUNCIN`})})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"size-5"}),e.jsx("span",{children:"Demostracin Interactiva"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"demo-aging",className:"w-full",children:[e.jsxs(Qt,{className:"w-full justify-start flex-wrap h-auto gap-2 bg-gray-900 p-2",children:[e.jsx(ce,{value:"demo-aging",children:" Aging"}),e.jsx(ce,{value:"demo-fair",children:" Fair"}),e.jsx(ce,{value:"demo-bounded",children:" Bounded"}),e.jsx(ce,{value:"demo-fifo",children:" FIFO"}),e.jsx(ce,{value:"demo-lottery",children:" Lottery"})]}),e.jsx(me,{value:"demo-aging",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Aging (Envejecimiento)"}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>l(!n),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2",children:[n?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),n?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{l(!1),m(0),i([{id:1,priority:10,effectivePriority:10,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-blue-500",status:"waiting"},{id:2,priority:50,effectivePriority:50,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-green-500",status:"waiting"},{id:3,priority:80,effectivePriority:80,arrivalTime:0,tickets:2,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-purple-500",status:"waiting"}]),b(["Sistema reiniciado."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:h,onValueChange:x,min:100,max:1e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[h[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Tiempo: ",d,"ms"]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Estados de Procesos"}),e.jsx("div",{className:"space-y-3",children:s.map(fe=>e.jsxs("div",{className:"bg-gray-800 rounded p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded ${fe.color}`}),e.jsxs("span",{className:"font-bold",children:["Proceso ",fe.id]}),fe.status==="executing"&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded",children:"EJECUTANDO"}),fe.status==="waiting"&&e.jsx("span",{className:"text-xs bg-yellow-600 px-2 py-1 rounded",children:"ESPERANDO"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Prioridad Base:"}),e.jsx("span",{className:"ml-2 text-white font-mono",children:fe.priority})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Prioridad Efectiva:"}),e.jsx("span",{className:"ml-2 text-green-400 font-mono font-bold",children:fe.effectivePriority.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Tiempo Espera:"}),e.jsxs("span",{className:"ml-2 text-orange-400 font-mono",children:[fe.waitTime,"ms"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${fe.color}`,style:{width:`${Math.max(0,100-fe.effectivePriority)}%`}})})})]},fe.id))})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Registro de Eventos"}),e.jsx("div",{ref:v,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:g.map((fe,Me)=>e.jsx("div",{children:fe},Me))})]})]})}),e.jsx(me,{value:"demo-fair",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Fair Scheduling (CFS) "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>_(!j),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2",children:[j?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),j?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{_(!1),C(0),N([{id:1,priority:0,effectivePriority:0,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-cyan-500",status:"waiting"},{id:2,priority:0,effectivePriority:0,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:512,executionTime:0,waitTime:0,color:"bg-pink-500",status:"waiting"}]),V(["Sistema Fair Scheduler reiniciado."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("button",{onClick:()=>{const fe=[2048,1024,512,256],Me={id:f.length+1,priority:0,effectivePriority:0,arrivalTime:w,tickets:0,level:0,bypassCount:0,virtualTime:0,weight:fe[f.length%fe.length],executionTime:0,waitTime:0,color:`bg-${["violet","emerald","fuchsia","amber"][f.length%4]}-500`,status:"waiting"};N([...f,Me]),V(De=>[...De,`P${Me.id} aadido con peso ${Me.weight}`])},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(dr,{className:"size-4"}),"Aadir Proceso"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:E,onValueChange:D,min:100,max:1e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[E[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Tiempo: ",w,"ms"]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Tiempo Virtual (Red-Black Tree) "}),e.jsx("div",{className:"space-y-3",children:f.slice().sort((fe,Me)=>fe.virtualTime-Me.virtualTime).map((fe,Me)=>{const De=f.reduce((ze,_e)=>ze+_e.weight,0),Ge=(fe.weight/De*100).toFixed(1);return e.jsxs("div",{className:"bg-gray-800 rounded p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded ${fe.color}`}),Me===0&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded",children:" MNIMO"}),e.jsxs("span",{className:"font-bold",children:["Proceso ",fe.id]}),fe.status==="executing"&&e.jsx("span",{className:"text-xs bg-blue-600 px-2 py-1 rounded",children:"EJECUTANDO"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{N(f.map(ze=>ze.id===fe.id?{...ze,weight:Math.max(256,ze.weight/2)}:ze))},className:"p-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:e.jsx(go,{className:"size-3"})}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Peso: ",fe.weight]}),e.jsx("button",{onClick:()=>{N(f.map(ze=>ze.id===fe.id?{...ze,weight:Math.min(4096,ze.weight*2)}:ze))},className:"p-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:e.jsx(dr,{className:"size-3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Tiempo Virtual:"}),e.jsx("span",{className:"ml-2 text-cyan-400 font-mono font-bold",children:fe.virtualTime.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"CPU Share:"}),e.jsxs("span",{className:"ml-2 text-green-400 font-mono",children:[Ge,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Ejecutado:"}),e.jsxs("span",{className:"ml-2 text-white font-mono",children:[fe.executionTime,"ms"]})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${fe.color}`,style:{width:`${Math.min(100,fe.virtualTime/10*100)}%`}})})]},fe.id)})})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Eventos del Scheduler"}),e.jsx("div",{ref:J,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:L.map((fe,Me)=>e.jsx("div",{children:fe},Me))})]})]})}),e.jsx(me,{value:"demo-bounded",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Bounded Waiting "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>be(!k),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2",children:[k?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),k?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{be(!1),G(0),I([{id:1,priority:10,effectivePriority:10,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-red-500",status:"waiting"},{id:2,priority:50,effectivePriority:50,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-yellow-500",status:"waiting"},{id:3,priority:80,effectivePriority:80,arrivalTime:0,tickets:2,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-indigo-500",status:"waiting"}]),Ee(["Sistema Bounded Waiting reiniciado (MAX_BYPASS=3)."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:oe,onValueChange:Ce,min:100,max:1e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[oe[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Ciclos: ",Math.floor(te/(oe[0]||500))]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Bypass Counter (MAX = 3) "}),e.jsx("div",{className:"space-y-3",children:ie.map(fe=>e.jsxs("div",{className:"bg-gray-800 rounded p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded ${fe.color}`}),e.jsxs("span",{className:"font-bold",children:["Proceso ",fe.id]}),fe.status==="executing"&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded",children:" EJECUTANDO"}),fe.bypassCount>=3&&e.jsx("span",{className:"text-xs bg-red-600 px-2 py-1 rounded animate-pulse",children:" FORZAR"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Prioridad:"}),e.jsx("span",{className:"ml-2 text-white font-mono",children:fe.priority})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Bypass Count:"}),e.jsxs("span",{className:`ml-2 font-mono font-bold ${fe.bypassCount>=3?"text-red-400":"text-yellow-400"}`,children:[fe.bypassCount,"/3"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Ejecutado:"}),e.jsxs("span",{className:"ml-2 text-green-400 font-mono",children:[fe.executionTime,"ms"]})]})]}),e.jsx("div",{className:"flex gap-1",children:[0,1,2].map(Me=>e.jsx("div",{className:`flex-1 h-3 rounded ${Me<fe.bypassCount?fe.bypassCount>=3?"bg-red-500 animate-pulse":"bg-yellow-500":"bg-gray-700"}`},Me))})]},fe.id))})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Registro de Asignacin de Recursos"}),e.jsx("div",{ref:P,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:ke.map((fe,Me)=>e.jsx("div",{children:fe},Me))})]})]})}),e.jsx(me,{value:"demo-fifo",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Multilevel FIFO con Prioridad "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>qe(!ue),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2",children:[ue?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),ue?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{qe(!1),W(0),F([{id:1,priority:0,effectivePriority:0,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-orange-500",status:"waiting"},{id:2,priority:0,effectivePriority:0,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-teal-500",status:"waiting"}]),M(["Sistema Multilevel FIFO reiniciado (4 niveles)."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("button",{onClick:()=>{const fe={id:Q.length+1,priority:0,effectivePriority:0,arrivalTime:T,tickets:0,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:`bg-${["sky","rose","lime","purple"][Q.length%4]}-500`,status:"waiting"};F([...Q,fe]),M(Me=>[...Me,`P${fe.id} aadido en nivel 0`])},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(dr,{className:"size-4"}),"Aadir Proceso"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:re,onValueChange:A,min:100,max:1e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[re[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Tiempo: ",T,"ms"]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Colas por Nivel de Prioridad "}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[0,1,2,3].map(fe=>{const Me=Q.filter(Ge=>Ge.level===fe),De=10*Math.pow(2,fe);return e.jsxs("div",{className:`border-2 rounded-lg p-3 ${fe===0?"border-green-500":fe===1?"border-blue-500":fe===2?"border-yellow-500":"border-red-500"}`,children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Nivel ",fe]}),e.jsxs("div",{className:"text-lg font-bold",children:["Q=",De,"ms"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[Me.length," procesos"]})]}),e.jsx("div",{className:"space-y-1",children:Me.map(Ge=>e.jsxs("div",{className:`${Ge.color} rounded px-2 py-1 text-xs text-center font-bold`,children:["P",Ge.id,Ge.status==="executing"&&" "]},Ge.id))})]},fe)})}),e.jsx("div",{className:"space-y-2 mt-4",children:Q.map(fe=>e.jsxs("div",{className:"bg-gray-800 rounded p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded ${fe.color}`}),e.jsxs("span",{className:"font-bold",children:["P",fe.id]}),fe.status==="executing"&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded",children:" EJECUTANDO"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Nivel:"}),e.jsx("span",{className:"ml-2 text-white font-mono font-bold",children:fe.level})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Espera:"}),e.jsxs("span",{className:"ml-2 text-yellow-400 font-mono",children:[fe.waitTime,"ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Ejecutado:"}),e.jsxs("span",{className:"ml-2 text-green-400 font-mono",children:[fe.executionTime,"ms"]})]})]})]},fe.id))})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Eventos de Promocin/Degradacin"}),e.jsx("div",{ref:O,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:K.map((fe,Me)=>e.jsx("div",{children:fe},Me))})]})]})}),e.jsx(me,{value:"demo-lottery",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Lottery Scheduling "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>Z(!ve),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2",children:[ve?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),ve?"Pausar":"Iniciar Sorteo"]}),e.jsxs("button",{onClick:()=>{Z(!1),Oe(0),$([{id:1,priority:0,effectivePriority:0,arrivalTime:0,tickets:10,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-lime-500",status:"waiting"},{id:2,priority:0,effectivePriority:0,arrivalTime:0,tickets:5,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-rose-500",status:"waiting"},{id:3,priority:0,effectivePriority:0,arrivalTime:0,tickets:2,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:"bg-amber-500",status:"waiting"}]),rt(["Sistema Lottery reiniciado. Total: 17 tickets"])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("button",{onClick:()=>{const fe={id:q.length+1,priority:0,effectivePriority:0,arrivalTime:z,tickets:3,level:0,bypassCount:0,virtualTime:0,weight:1024,executionTime:0,waitTime:0,color:`bg-${["violet","fuchsia","sky","emerald"][q.length%4]}-500`,status:"waiting"};$([...q,fe]),rt(Me=>[...Me,`Proceso ${fe.id} aadido con 3 tickets`])},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(dr,{className:"size-4"}),"Aadir Proceso"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:Re,onValueChange:ae,min:100,max:1e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[Re[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Sorteos: ",Math.floor(z/(Re[0]||500))]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Distribucin de Tickets "}),e.jsx("div",{className:"space-y-3",children:q.map(fe=>{const Me=q.reduce((Ge,ze)=>Ge+ze.tickets,0),De=(fe.tickets/Me*100).toFixed(1);return e.jsxs("div",{className:"bg-gray-800 rounded p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded ${fe.color}`}),e.jsxs("span",{className:"font-bold",children:["Proceso ",fe.id]}),fe.status==="executing"&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded",children:" GANADOR"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{$(q.map(Ge=>Ge.id===fe.id?{...Ge,tickets:Math.max(1,Ge.tickets-1)}:Ge))},className:"p-1 bg-red-600 hover:bg-red-700 rounded",children:e.jsx(go,{className:"size-3"})}),e.jsxs("span",{className:"font-mono text-lg font-bold text-yellow-400",children:[fe.tickets," "]}),e.jsx("button",{onClick:()=>{$(q.map(Ge=>Ge.id===fe.id?{...Ge,tickets:Ge.tickets+1}:Ge))},className:"p-1 bg-green-600 hover:bg-green-700 rounded",children:e.jsx(dr,{className:"size-3"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Probabilidad:"}),e.jsxs("span",{className:"text-cyan-400 font-mono font-bold",children:[De,"%"]}),e.jsxs("span",{className:"text-sm text-gray-400 ml-auto",children:["Ejecutado: ",fe.executionTime,"ms"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${fe.color} transition-all duration-300`,style:{width:`${De}%`}})})]},fe.id)})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-400",children:["Total de tickets en circulacin: ",e.jsx("span",{className:"text-white font-bold",children:q.reduce((fe,Me)=>fe+Me.tickets,0)})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Historial de Sorteos "}),e.jsx("div",{ref:jt,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:se.map((fe,Me)=>e.jsx("div",{children:fe},Me))})]})]})})]})})]})]})]})]})}const zR=Sa("/ActividadesSeminarioSO/actividad11/starvation")({component:DR});function qR(){const[s,i]=c.useState(!1),[n,l]=c.useState(500),[d,m]=c.useState([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}]),[h,x]=c.useState([]),[,g]=c.useState(0),[b,v]=c.useState(!1),[f,N]=c.useState(500),[j,_]=c.useState([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}]),[w,C]=c.useState([]),[,E]=c.useState(0),[D]=c.useState(10),[L,V]=c.useState(!1),[J,ie]=c.useState(500),[I,k]=c.useState([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}]),[be,te]=c.useState([]),[,G]=c.useState(0),[oe,Ce]=c.useState(!0),[ke,Ee]=c.useState(!1),[P,Q]=c.useState(500),[F,ue]=c.useState([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}]),[qe,T]=c.useState([]),[W,re]=c.useState([]),A=c.useRef(null),K=c.useRef(null),M=c.useRef(null),O=c.useRef(null);c.useEffect(()=>{A.current&&(A.current.scrollTop=A.current.scrollHeight)},[h]),c.useEffect(()=>{K.current&&(K.current.scrollTop=K.current.scrollHeight)},[w]),c.useEffect(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},[be]),c.useEffect(()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight)},[qe]),c.useEffect(()=>{if(!s)return;const z=setInterval(()=>{g(Oe=>{const Re=Oe+1;if(Re===1)x(ae=>[...ae," T=0: T3 (baja prioridad=1) adquiere el mutex"]),m(ae=>ae.map(se=>se.id===3?{...se,status:"running",holdingMutex:!0,progress:20}:se));else if(Re===2)x(ae=>[...ae," T=1: T2 (media prioridad=5) comienza a ejecutar (sin necesitar mutex)"]),m(ae=>ae.map(se=>se.id===2?{...se,status:"running",progress:15}:se));else if(Re===3)x(ae=>[...ae," T=2: T1 (alta prioridad=10) intenta adquirir mutex"]),m(ae=>ae.map(se=>se.id===1?{...se,status:"waiting"}:se));else if(Re===4)x(ae=>[...ae," HERENCIA: T3 hereda prioridad 10 de T1"]),m(ae=>ae.map(se=>se.id===3?{...se,priority:10}:se));else if(Re===5)x(ae=>[...ae," T=3: T3 (ahora prioridad=10) expulsa a T2 y contina"]),m(ae=>ae.map(se=>se.id===2?{...se,status:"blocked"}:se.id===3?{...se,progress:50}:se));else if(Re===6)m(ae=>ae.map(se=>se.id===3?{...se,progress:80}:se));else if(Re===7)x(ae=>[...ae," T3 completa su seccin crtica y libera mutex"]),x(ae=>[...ae," T3 restaura prioridad original = 1"]),m(ae=>ae.map(se=>se.id===3?{...se,status:"completed",holdingMutex:!1,priority:1,progress:100}:se));else if(Re===8)x(ae=>[...ae," T=4: T1 adquiere mutex y ejecuta"]),m(ae=>ae.map(se=>se.id===1?{...se,status:"running",holdingMutex:!0,progress:40}:se));else if(Re===9)m(ae=>ae.map(se=>se.id===1?{...se,progress:100}:se));else if(Re===10)x(ae=>[...ae," T1 completa su trabajo"]),m(ae=>ae.map(se=>se.id===1?{...se,status:"completed",holdingMutex:!1}:se));else if(Re===11)x(ae=>[...ae," T=5: T2 completa su ejecucin"]),m(ae=>ae.map(se=>se.id===2?{...se,status:"completed",progress:100}:se));else if(Re===12)return x(ae=>[...ae," Simulacin completada - Priority Inheritance previno inversin de prioridad"]),i(!1),0;return Re})},n);return()=>clearInterval(z)},[s,n]),c.useEffect(()=>{if(!b)return;const z=setInterval(()=>{E(Oe=>{const Re=Oe+1;if(Re===1)C(ae=>[...ae,` T=0: Mutex configurado con ceiling = ${D}`]),C(ae=>[...ae," T3 (baja prioridad=1) intenta adquirir mutex"]);else if(Re===2)C(ae=>[...ae,` T3 elevada INMEDIATAMENTE a ceiling = ${D}`]),_(ae=>ae.map(se=>se.id===3?{...se,status:"running",holdingMutex:!0,priority:D,progress:20}:se));else if(Re===3)C(ae=>[...ae," T=1: T2 (media prioridad=5) intenta ejecutar"]),C(ae=>[...ae," T2 bloqueada: T3 tiene prioridad mayor (ceiling=10)"]),_(ae=>ae.map(se=>se.id===2?{...se,status:"blocked"}:se));else if(Re===4)C(ae=>[...ae," T=2: T1 (alta prioridad=10) intenta adquirir mutex"]),C(ae=>[...ae," T1 debe esperar: mutex ocupado por T3"]),_(ae=>ae.map(se=>se.id===1?{...se,status:"waiting"}:se));else if(Re===5)C(ae=>[...ae," T=3: T3 contina ejecutando con prioridad mxima"]),_(ae=>ae.map(se=>se.id===3?{...se,progress:50}:se));else if(Re===6)_(ae=>ae.map(se=>se.id===3?{...se,progress:80}:se));else if(Re===7)C(ae=>[...ae," T3 completa seccin crtica y libera mutex"]),C(ae=>[...ae," T3 restaura prioridad original = 1"]),_(ae=>ae.map(se=>se.id===3?{...se,status:"completed",holdingMutex:!1,priority:1,progress:100}:se));else if(Re===8)C(ae=>[...ae," T=4: T1 adquiere mutex con ceiling=10"]),_(ae=>ae.map(se=>se.id===1?{...se,status:"running",holdingMutex:!0,progress:40}:se));else if(Re===9)_(ae=>ae.map(se=>se.id===1?{...se,progress:100}:se));else if(Re===10)C(ae=>[...ae," T1 completa su trabajo"]),_(ae=>ae.map(se=>se.id===1?{...se,status:"completed",holdingMutex:!1}:se));else if(Re===11)C(ae=>[...ae," T=5: T2 puede ejecutar ahora"]),_(ae=>ae.map(se=>se.id===2?{...se,status:"running",progress:100}:se));else if(Re===12)C(ae=>[...ae," T2 completada"]),_(ae=>ae.map(se=>se.id===2?{...se,status:"completed"}:se));else if(Re===13)return C(ae=>[...ae," Simulacin completada - Priority Ceiling previno inversin"]),v(!1),0;return Re})},f);return()=>clearInterval(z)},[b,f,D]),c.useEffect(()=>{if(!L)return;const z=setInterval(()=>{G(Oe=>{const Re=Oe+1;if(Re===1)te(ae=>[...ae," T=0: T3 (baja prioridad=1) entra a seccin crtica"]),te(ae=>[...ae," T3 DESACTIVA PREEMPTION"]),Ce(!1),k(ae=>ae.map(se=>se.id===3?{...se,status:"running",holdingMutex:!0,progress:20}:se));else if(Re===2)te(ae=>[...ae," T=1: T2 (media) y T1 (alta) intentan ejecutar"]),te(ae=>[...ae," Preemption desactivada: T3 NO puede ser interrumpida"]),k(ae=>ae.map(se=>se.id===1?{...se,status:"blocked"}:se.id===2?{...se,status:"blocked"}:se));else if(Re===3)te(ae=>[...ae," T=2: T3 contina ejecutando sin interrupciones"]),k(ae=>ae.map(se=>se.id===3?{...se,progress:50}:se));else if(Re===4)k(ae=>ae.map(se=>se.id===3?{...se,progress:80}:se));else if(Re===5)te(ae=>[...ae," T3 completa seccin crtica"]),te(ae=>[...ae," T3 REACTIVA PREEMPTION"]),Ce(!0),k(ae=>ae.map(se=>se.id===3?{...se,status:"completed",holdingMutex:!1,progress:100}:se));else if(Re===6)te(ae=>[...ae," T=3: T1 (alta prioridad) expulsa a T2 y ejecuta"]),k(ae=>ae.map(se=>se.id===1?{...se,status:"running",progress:50}:se));else if(Re===7)k(ae=>ae.map(se=>se.id===1?{...se,progress:100}:se));else if(Re===8)te(ae=>[...ae," T1 completada"]),k(ae=>ae.map(se=>se.id===1?{...se,status:"completed"}:se));else if(Re===9)te(ae=>[...ae," T=4: T2 ejecuta"]),k(ae=>ae.map(se=>se.id===2?{...se,status:"running",progress:100}:se));else if(Re===10)te(ae=>[...ae," T2 completada"]),k(ae=>ae.map(se=>se.id===2?{...se,status:"completed"}:se));else if(Re===11)return te(ae=>[...ae," Simulacin completada - Disable Preemption previno inversin"]),V(!1),0;return Re})},J);return()=>clearInterval(z)},[L,J]),c.useEffect(()=>{if(!ke)return;const z=setInterval(()=>{T(Oe=>{const Re=[...Oe];return ue(se=>se.map(rt=>rt.status==="idle"?(Re.push(` T${rt.id} (prioridad=${rt.priority}) inicia con datos locales`),{...rt,status:"running",progress:10}):rt.status==="running"&&rt.progress<100?{...rt,progress:Math.min(100,rt.progress+15)}:rt.status==="running"&&rt.progress>=100?(Re.push(` T${rt.id} completada (sin bloqueos, sin inversin)`),{...rt,status:"completed"}):rt)),Oe.length===1?(re([{from:1,to:3,msg:"DATA_REQUEST"}]),Re.push(" T1 enva mensaje a T3: DATA_REQUEST")):Oe.length===3&&(re(se=>[...se,{from:3,to:1,msg:"DATA_RESPONSE"}]),Re.push(" T3 responde a T1: DATA_RESPONSE")),F.every(se=>se.status==="completed")&&Oe.length>5&&(Re.push(" Simulacin completada - Sin recursos compartidos = Sin inversin"),Ee(!1)),Re})},P);return()=>clearInterval(z)},[ke,P,F]);const q=()=>{i(!1),g(0),x([]),m([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}])},$=()=>{v(!1),E(0),C([]),_([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}])},ve=()=>{V(!1),G(0),te([]),Ce(!0),k([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}])},Z=()=>{Ee(!1),T([]),re([]),ue([{id:1,priority:10,originalPriority:10,status:"idle",holdingMutex:!1,progress:0},{id:2,priority:5,originalPriority:5,status:"idle",holdingMutex:!1,progress:0},{id:3,priority:1,originalPriority:1,status:"idle",holdingMutex:!1,progress:0}])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-900/50 to-purple-900/50 border-b border-red-700/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(vn,{className:"size-8 text-red-400"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Priority Inversion"})]}),e.jsxs("p",{className:"text-lg text-gray-300 leading-relaxed",children:["La ",e.jsx("span",{className:"text-red-400 font-semibold",children:"inversin de prioridad"})," ocurre cuando una tarea de alta prioridad se ve forzada a esperar por una tarea de baja prioridad que posee un recurso compartido. Esto puede llevar a que tareas crticas pierdan sus deadlines."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-red-300 mb-2",children:" Problema"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Tarea de alta prioridad bloqueada indefinidamente por tarea de baja prioridad que tiene el lock, mientras tareas de media prioridad ejecutan libremente."})]}),e.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-purple-300 mb-2",children:" Soluciones"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Priority inheritance, priority ceiling, desactivar prioridades temporalmente, o evitar compartir recursos entre tareas de diferentes prioridades."})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["pseudocodigos","demos"],className:"space-y-4",children:[e.jsxs(sa,{value:"pseudocodigos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Pseudocdigos de las Soluciones"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"ps-inheritance",className:"px-6 pb-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs(Qt,{className:"grid grid-cols-4 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"ps-inheritance",children:" Inheritance"}),e.jsx(ce,{value:"ps-ceiling",children:" Ceiling"}),e.jsx(ce,{value:"ps-disable",children:" Disable"}),e.jsx(ce,{value:"ps-avoid",children:" Avoid"})]})}),e.jsx(me,{value:"ps-inheritance",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:" Priority Inheritance Protocol"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"1. Implementacin Bsica"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura PriorityInheritanceMutex {
  owner: Thread | null           // Dueo actual del mutex
  waitQueue: PriorityQueue<Thread>  // Cola de threads esperando
  locked: booleano = false
  originalPriority: entero | null   // Prioridad original del owner
}

funcin lock(thread: Thread) {
  si no locked:
    // Caso simple: mutex disponible
    locked = true
    owner = thread
    originalPriority = null
  sino:
    // Mutex ocupado: aplicar priority inheritance
    si thread.priority > owner.priority:
      // Thread con mayor prioridad est esperando
      si originalPriority == null:
        // Guardar prioridad original del owner (primera vez)
        originalPriority = owner.priority
      
      // HERENCIA: elevar prioridad del owner
      owner.priority = thread.priority
      logInheritance(owner, thread.priority)
    
    // Agregar thread a cola de espera
    waitQueue.enqueue(thread)
    thread.block()  // Bloquear thread
}

funcin unlock(thread: Thread) {
  si thread != owner:
    throw IllegalStateException("Thread no es dueo del mutex")
  
  // Restaurar prioridad original del owner
  si originalPriority != null:
    thread.priority = originalPriority
    originalPriority = null
    logRestore(thread)
  
  // Despertar siguiente thread en espera
  si no waitQueue.isEmpty():
    nextThread = waitQueue.dequeue()
    owner = nextThread
    nextThread.unblock()
  sino:
    locked = false
    owner = null
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"2. Herencia Transitiva (Cadenas)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Caso: Thread A espera por B, B espera por C
// Solucin: C debe heredar prioridad de A (transitivamente)

estructura ChainedInheritanceMutex {
  owner: Thread | null
  waitQueue: PriorityQueue<Thread>
  originalPriority: entero | null
}

funcin lock(thread: Thread) {
  si no locked:
    locked = true
    owner = thread
    retornar
  
  // Agregar a cola de espera
  waitQueue.enqueue(thread)
  
  // Propagar prioridad a travs de la cadena
  si thread.priority > owner.priority:
    propagatePriority(owner, thread.priority)
  
  thread.block()
}

funcin propagatePriority(thread: Thread, newPriority: entero) {
  si thread.priority >= newPriority:
    retornar  // Ya tiene prioridad suficiente
  
  // Guardar prioridad original (solo primera vez)
  si thread.inheritedPriority == null:
    thread.originalPriority = thread.priority
  
  // Elevar prioridad
  thread.priority = newPriority
  thread.inheritedPriority = newPriority
  logInheritance(thread, newPriority)
  
  // Si este thread est esperando otro mutex, propagar
  si thread.blockingMutex != null:
    mutexOwner = thread.blockingMutex.owner
    si mutexOwner != null:
      propagatePriority(mutexOwner, newPriority)  // RECURSIN
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"3. Manejo de Mltiples Mutexes"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura Thread {
  priority: entero
  originalPriority: entero
  ownedMutexes: Set<Mutex>       // Mutexes que posee
  blockingMutex: Mutex | null     // Mutex por el que est bloqueado
}

funcin unlock(mutex: Mutex, thread: Thread) {
  si thread != mutex.owner:
    throw IllegalStateException()
  
  // Remover de lista de mutexes posedos
  thread.ownedMutexes.remove(mutex)
  
  // Calcular nueva prioridad efectiva
  nuevaPrioridad = thread.originalPriority
  
  // Buscar la mayor prioridad heredada de otros mutexes
  para cadaMutex en thread.ownedMutexes:
    para cadaWaiter en cadaMutex.waitQueue:
      si cadaWaiter.priority > nuevaPrioridad:
        nuevaPrioridad = cadaWaiter.priority
  
  // Actualizar prioridad del thread
  thread.priority = nuevaPrioridad
  
  // Liberar mutex y despertar siguiente
  si no mutex.waitQueue.isEmpty():
    nextThread = mutex.waitQueue.dequeue()
    mutex.owner = nextThread
    nextThread.ownedMutexes.add(mutex)
    nextThread.unblock()
  sino:
    mutex.locked = false
    mutex.owner = null
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"4. Ejemplo de Uso"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Configuracin de threads
threadAlta = new Thread(id: 1, priority: 10)   // Alta prioridad
threadMedia = new Thread(id: 2, priority: 5)   // Media prioridad
threadBaja = new Thread(id: 3, priority: 1)    // Baja prioridad

mutex = new PriorityInheritanceMutex()

// Ejecucin simulada
funcin simulacion() {
  // T3 (baja) adquiere el mutex
  mutex.lock(threadBaja)
  logState("T3 tiene mutex, prioridad = 1")
  
  // T2 (media) comienza a ejecutar (sin necesitar mutex)
  schedule(threadMedia)
  
  // T1 (alta) intenta adquirir mutex
  mutex.lock(threadAlta)
  // INHERITANCE! T3 ahora tiene prioridad 10
  logState("T3 hereda prioridad 10 de T1")
  
  // T3 con prioridad 10 expulsa a T2 y termina
  schedule(threadBaja)  // Ahora con prioridad heredada
  mutex.unlock(threadBaja)
  logState("T3 libera mutex, prioridad restaurada a 1")
  
  // T1 despierta y obtiene mutex
  schedule(threadAlta)
  logState("T1 obtiene mutex y ejecuta")
}`})]}),e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Previene inversin de prioridad sin conocimiento previo de las prioridades. Dinmico y flexible.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Overhead en tiempo de ejecucin, complejidad en cadenas de herencia, puede causar efectos domin."]})}),e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," RTOS (FreeRTOS, VxWorks), sistemas embebidos, control industrial, robtica, aviacin, Mars Pathfinder (bug famoso)."]})})]})]})}),e.jsx(me,{value:"ps-ceiling",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:" Priority Ceiling Protocol"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"1. Implementacin Bsica"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura PriorityCeilingMutex {
  owner: Thread | null
  waitQueue: PriorityQueue<Thread>
  locked: booleano = false
  ceiling: entero                    // TECHO DE PRIORIDAD (fijo)
}

// El ceiling se establece al crear el mutex
funcin crearMutex(recursosCompartidos: Array<Thread>) -> PriorityCeilingMutex {
  // Ceiling = mayor prioridad de todos los threads que usarn el mutex
  maxPriority = 0
  para thread en recursosCompartidos:
    si thread.priority > maxPriority:
      maxPriority = thread.priority
  
  retornar new PriorityCeilingMutex(ceiling: maxPriority)
}

funcin lock(thread: Thread, mutex: PriorityCeilingMutex) {
  // Verificar si el thread puede adquirir el mutex
  si no mutex.locked:
    // Verificar que no haya deadlock potencial
    si thread.priority > systemCeiling():
      throw PriorityCeilingViolation()
    
    mutex.locked = true
    mutex.owner = thread
    
    // ELEVAR prioridad del thread al ceiling del mutex
    thread.originalPriority = thread.priority
    thread.priority = mutex.ceiling
    logCeilingApplied(thread, mutex.ceiling)
  sino:
    // Mutex ocupado: esperar
    mutex.waitQueue.enqueue(thread)
    thread.block()
}

funcin unlock(mutex: PriorityCeilingMutex) {
  thread = currentThread()
  si thread != mutex.owner:
    throw IllegalStateException()
  
  // RESTAURAR prioridad original
  thread.priority = thread.originalPriority
  logPriorityRestored(thread)
  
  // Liberar mutex
  si no mutex.waitQueue.isEmpty():
    nextThread = mutex.waitQueue.dequeue()
    mutex.owner = nextThread
    nextThread.originalPriority = nextThread.priority
    nextThread.priority = mutex.ceiling  // Elevar al ceiling
    nextThread.unblock()
  sino:
    mutex.locked = false
    mutex.owner = null
}

funcin systemCeiling() -> entero {
  // Ceiling del sistema = mximo ceiling de mutexes actualmente locked
  maxCeiling = 0
  para mutex en todosLosMutexes:
    si mutex.locked Y mutex.ceiling > maxCeiling:
      maxCeiling = mutex.ceiling
  retornar maxCeiling
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"2. Immediate Ceiling Priority Protocol (ICPP)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Variante: elevar prioridad INMEDIATAMENTE al hacer lock
// No esperar a que otro thread de mayor prioridad intente acceder

estructura ICPPMutex {
  ceiling: entero
  owner: Thread | null
  locked: booleano = false
}

funcin lock(thread: Thread, mutex: ICPPMutex) {
  // Verificar system ceiling para prevenir deadlock
  currentSystemCeiling = systemCeiling()
  
  si currentSystemCeiling > thread.priority:
    // No puede adquirir: hay un mutex con ceiling mayor locked
    throw CeilingViolation("System ceiling too high")
  
  // Esperar si est locked
  mientras mutex.locked:
    thread.waitFor(mutex)
  
  // Adquirir mutex
  mutex.locked = true
  mutex.owner = thread
  
  // INMEDIATAMENTE elevar a ceiling (antes de crtica)
  thread.originalPriority = thread.priority
  thread.priority = mutex.ceiling
  
  logICPP("Thread " + thread.id + " elevado a ceiling " + mutex.ceiling)
}

funcin unlock(mutex: ICPPMutex) {
  thread = currentThread()
  
  // Restaurar prioridad original
  thread.priority = thread.originalPriority
  
  // Liberar mutex
  mutex.locked = false
  mutex.owner = null
  
  // Despertar threads esperando
  notifyWaiters(mutex)
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"3. Original Ceiling Priority Protocol (OCPP)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Variante original: thread solo puede hacer lock si su prioridad
// es MAYOR que todos los ceilings de mutexes actualmente locked

estructura OCPPMutex {
  ceiling: entero
  owner: Thread | null
  locked: booleano = false
}

funcin canLock(thread: Thread, mutex: OCPPMutex) -> booleano {
  si mutex.locked Y mutex.owner == thread:
    retornar true  // Reentrant lock
  
  // Verificar contra system ceiling
  sysceiling = systemCeiling()
  
  // Thread debe tener prioridad > system ceiling
  retornar thread.priority > sysceiling
}

funcin lock(thread: Thread, mutex: OCPPMutex) {
  mientras true:
    si no mutex.locked:
      si canLock(thread, mutex):
        // Puede adquirir el mutex
        mutex.locked = true
        mutex.owner = thread
        
        // Elevar a ceiling del mutex
        thread.originalPriority = thread.priority
        thread.priority = max(thread.priority, mutex.ceiling)
        retornar
      sino:
        // No puede adquirir: prioridad insuficiente
        thread.block()
    sino:
      // Mutex ocupado: esperar
      thread.waitFor(mutex)
}

// Ejemplo de ceilings
funcin ejemploCeilings() {
  // Tres threads con prioridades 10, 5, 1
  T1 = new Thread(priority: 10)  // Alta
  T2 = new Thread(priority: 5)   // Media
  T3 = new Thread(priority: 1)   // Baja
  
  // Dos recursos compartidos
  // R1: usado por T1 y T3 -> ceiling = 10
  // R2: usado por T2 y T3 -> ceiling = 5
  R1 = new OCPPMutex(ceiling: 10)
  R2 = new OCPPMutex(ceiling: 5)
  
  // Si T3 tiene R2 (ceiling 5), T1 puede adquirir R1
  // porque priority(T1)=10 > systemCeiling(R2)=5
  
  // Si T3 tiene R1 (ceiling 10), T2 NO puede adquirir R2
  // porque priority(T2)=5 < systemCeiling(R1)=10
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"4. Comparacin de Variantes"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`tabla ComparacionProtocolos:

| Aspecto              | ICPP                    | OCPP                    |
|---------------------|-------------------------|-------------------------|
| Cundo eleva        | Inmediato al lock       | Solo si necesario       |
| Chequeo previo      | System ceiling simple   | Ceiling ms estricto    |
| Bloqueos            | Menos frecuentes        | Ms frecuentes          |
| Cambios prioridad   | Ms frecuentes          | Menos frecuentes        |
| Complejidad         | Ms simple              | Ms compleja            |
| Overhead            | Moderado                | Menor                   |
| Deadlock prevention | Ms agresiva            | Ms conservadora        |

funcin elegirProtocolo(requisitos: Requisitos) -> Protocolo {
  si requisitos.latenciaCritica:
    retornar ICPP  // Menor jitter, ms predecible
  sino si requisitos.eficienciaEnergia:
    retornar OCPP  // Menos cambios de prioridad
  sino:
    retornar ICPP  // Default: ms simple y robusto
}`})]}),e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Previene deadlocks, acotamiento en tiempo de bloqueo, anlisis esttico posible, predecible para hard real-time.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Requiere conocimiento a priori de prioridades, puede elevar prioridad innecesariamente, menos flexible que inheritance."]})}),e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Sistemas hard real-time, aviacin crtica (DO-178C), sistemas mdicos, automotriz (AUTOSAR), anlisis WCET, certificacin safety-critical."]})})]})]})}),e.jsx(me,{value:"ps-disable",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:" Disable Priority Scheduling"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"1. Desactivacin de Interrupciones"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura DisableInterruptsMutex {
  locked: booleano = false
  owner: Thread | null
  savedInterruptState: booleano
}

funcin lock(mutex: DisableInterruptsMutex) {
  // Desactivar interrupciones (hardware)
  mutex.savedInterruptState = getInterruptState()
  disableInterrupts()  // CLI en x86, CPSID en ARM
  
  // Adquirir mutex (sin competencia ahora)
  mientras mutex.locked:
    spin()  // Busy-wait (no hay preemption)
  
  mutex.locked = true
  mutex.owner = currentThread()
  
  logDisabled("Interrupts disabled, mutex acquired")
}

funcin unlock(mutex: DisableInterruptsMutex) {
  si currentThread() != mutex.owner:
    throw IllegalStateException()
  
  // Liberar mutex
  mutex.locked = false
  mutex.owner = null
  
  // RESTAURAR interrupciones al estado previo
  si mutex.savedInterruptState:
    enableInterrupts()  // STI en x86, CPSIE en ARM
  
  logEnabled("Interrupts restored")
}

// Uso tpico en seccin crtica corta
funcin criticalSection() {
  disableInterruptsMutex.lock()
  intentar:
    // Seccin crtica (MUY CORTA - pocos microsegundos)
    sharedData.update()
  finalmente:
    disableInterruptsMutex.unlock()
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"2. Desactivacin de Preemption"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura NonPreemptiveMutex {
  locked: booleano = false
  owner: Thread | null
  savedPreemptionState: booleano
}

funcin lock(mutex: NonPreemptiveMutex) {
  // Desactivar preemption (scheduler no cambiar de thread)
  mutex.savedPreemptionState = isPreemptionEnabled()
  disablePreemption()
  
  // Adquirir mutex
  mientras mutex.locked:
    // Si est locked, tenemos problema (no deberamos estar aqu)
    // porque preemption est desactivada
    panic("Deadlock: mutex locked with preemption disabled")
  
  mutex.locked = true
  mutex.owner = currentThread()
  
  logNonPreemptive("Preemption disabled, mutex acquired")
}

funcin unlock(mutex: NonPreemptiveMutex) {
  si currentThread() != mutex.owner:
    throw IllegalStateException()
  
  // Liberar mutex
  mutex.locked = false
  mutex.owner = null
  
  // Restaurar preemption
  si mutex.savedPreemptionState:
    enablePreemption()
    // Puede haber cambio de contexto aqu si hay thread de mayor prioridad listo
  
  logPreemptionEnabled("Preemption restored")
}

// API tpica de kernel
funcin kernel_disable_preemption() {
  currentCPU().preemption_count++
}

funcin kernel_enable_preemption() {
  currentCPU().preemption_count--
  si currentCPU().preemption_count == 0:
    si need_resched():
      schedule()  // Cambiar a thread de mayor prioridad
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"3. Priority Boosting Temporal"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Alternativa: elevar temporalmente a prioridad mxima

estructura TemporaryBoostMutex {
  locked: booleano = false
  owner: Thread | null
  maxPriority: entero = 999  // Prioridad mxima del sistema
}

funcin lock(mutex: TemporaryBoostMutex) {
  thread = currentThread()
  
  // Guardar prioridad original
  originalPriority = thread.priority
  
  // BOOST: elevar a prioridad mxima
  thread.priority = mutex.maxPriority
  logBoost("Thread boosted to max priority")
  
  // Adquirir mutex (ahora con mxima prioridad)
  mientras mutex.locked:
    yield()  // Ceder CPU pero mantener alta prioridad
  
  mutex.locked = true
  mutex.owner = thread
  thread.savedPriority = originalPriority
}

funcin unlock(mutex: TemporaryBoostMutex) {
  thread = currentThread()
  si thread != mutex.owner:
    throw IllegalStateException()
  
  // Liberar mutex
  mutex.locked = false
  mutex.owner = null
  
  // Restaurar prioridad original
  thread.priority = thread.savedPriority
  logRestore("Priority restored")
  
  // Puede haber cambio de contexto si otro thread tiene mayor prioridad
  yield()
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"4. Non-Preemptive Critical Section"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Enfoque ms simple: seccin crtica no interrumpible

macro ENTER_CRITICAL_SECTION() {
  cli()  // Clear Interrupt Flag
  preempt_disable()
}

macro EXIT_CRITICAL_SECTION() {
  preempt_enable()
  sti()  // Set Interrupt Flag
}

// Uso en cdigo
funcin actualizarRecursoCompartido() {
  ENTER_CRITICAL_SECTION()
  
  // Cdigo crtico - NO SE PUEDE INTERRUMPIR
  recursoCompartido.valor++
  recursoCompartido.timestamp = getTime()
  recursoCompartido.checksum = calcularChecksum()
  
  EXIT_CRITICAL_SECTION()
}

// Variante con spinlock
estructura CriticalSection {
  spinlock: AtomicBoolean = false
}

funcin enter(cs: CriticalSection) {
  disablePreemption()
  
  // Spinlock para multicore
  mientras no cs.spinlock.compareAndSwap(false, true):
    spin()  // Busy-wait
}

funcin exit(cs: CriticalSection) {
  cs.spinlock.set(false)
  enablePreemption()
}`})]}),e.jsx("div",{className:"p-4 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Solucin simple y efectiva, muy bajo overhead, no hay inversin de prioridad posible, predecible.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Aumenta latencia de interrupciones, no escalable, solo para secciones crticas MUY cortas (< 100s), problemas en multicore."]})}),e.jsx("div",{className:"p-4 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Kernels de OS (Linux, Windows), drivers de dispositivos, secciones crticas de hardware, inicializacin de sistema, manejo de errores crticos."]})})]})]})}),e.jsx(me,{value:"ps-avoid",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-yellow-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:" Evitar Compartir Recursos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"1. Thread-Local Storage"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Cada thread tiene su propia copia de los datos

estructura ThreadLocalStorage<T> {
  storage: Map<ThreadID, T>
  mutex: Lock
  initializer: Function<T>
}

funcin get() -> T {
  threadId = currentThread().id
  
  si no storage.contains(threadId):
    mutex.lock()
    intentar:
      // Double-check locking
      si no storage.contains(threadId):
        valor = initializer()
        storage[threadId] = valor
    finalmente:
      mutex.unlock()
  
  retornar storage[threadId]  // Sin lock: cada thread su copia
}

funcin set(valor: T) {
  threadId = currentThread().id
  mutex.lock()
  intentar:
    storage[threadId] = valor
  finalmente:
    mutex.unlock()
}

// Ejemplo: buffer de logs por thread
threadLocalBuffer = new ThreadLocalStorage<LogBuffer>(
  initializer: funcin() {
    retornar new LogBuffer(size: 1024)
  }
)

funcin log(mensaje: String) {
  buffer = threadLocalBuffer.get()  // Sin contencin
  buffer.append(mensaje)            // Sin locks
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"2. Message Passing (Actor Model)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Threads no comparten memoria: se comunican por mensajes

estructura Actor {
  id: ActorID
  mailbox: Queue<Message>  // Solo este actor accede su mailbox
  state: Estado            // Estado privado (no compartido)
}

funcin send(destino: ActorID, mensaje: Message) {
  actor = actors.get(destino)
  actor.mailbox.enqueue(mensaje)  // Queue thread-safe
}

funcin processMessages() {
  mientras running:
    mensaje = mailbox.dequeue()  // Bloquea si vaco
    
    // Procesar mensaje (sin locks: estado es privado)
    cuando mensaje.type:
      GET_DATA:
        resultado = state.getData()
        send(mensaje.sender, new Response(resultado))
      
      SET_DATA:
        state.setData(mensaje.data)  // Sin locks
        send(mensaje.sender, new Ack())
      
      COMPUTE:
        resultado = state.compute(mensaje.params)
        send(mensaje.sender, new Result(resultado))
}

// Ejemplo: sistema bancario con actors
estructura AccountActor extends Actor {
  balance: entero  // Estado privado
}

funcin transferencia(origen: ActorID, destino: ActorID, monto: entero) {
  // No hay locks: solo mensajes
  send(origen, new WithdrawMessage(monto, requestId: 1))
  
  // Esperar confirmacin
  respuesta = waitForResponse(requestId: 1)
  
  si respuesta.success:
    send(destino, new DepositMessage(monto, requestId: 2))
    waitForResponse(requestId: 2)
  
  // Sin deadlocks: no hay locks compartidos
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"3. Inmutabilidad y Shared-Nothing"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Datos inmutables: pueden compartirse sin locks

estructura InmutableData {
  valores: Array<entero>  // Inmutable despus de construccin
  timestamp: entero       // Inmutable
}

// Constructor: nica vez que se modifica
funcin crear(valores: Array<entero>) -> InmutableData {
  copia = copiar(valores)
  retornar new InmutableData(copia, now())
}

// Lecturas sin locks (datos nunca cambian)
funcin leer(data: InmutableData, indice: entero) -> entero {
  retornar data.valores[indice]  // Sin lock: es inmutable
}

// "Modificacin" = crear nueva instancia
funcin modificar(data: InmutableData, indice: entero, valor: entero) -> InmutableData {
  nuevosValores = copiar(data.valores)
  nuevosValores[indice] = valor
  retornar crear(nuevosValores)  // Nueva instancia
}

// Uso en sistema concurrente
estructura SharedState {
  data: Atomic<InmutableData>  // Referencia atmica
}

funcin actualizarEstado(state: SharedState, cambio: Cambio) {
  mientras true:
    actual = state.data.get()            // Leer sin lock
    nuevo = aplicarCambio(actual, cambio)  // Crear nuevo
    
    si state.data.compareAndSwap(actual, nuevo):
      break  // xito: publicado nuevo estado
    // Fallo: otro thread actualiz, reintentar
}

// Lectura siempre sin locks
funcin leerEstado(state: SharedState) -> InmutableData {
  retornar state.data.get()  // Atmico, sin locks
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"4. Particionamiento de Datos"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Dividir datos para que cada thread tenga su particin

estructura PartitionedData<T> {
  partitions: Array<Partition<T>>
  numPartitions: entero
}

estructura Partition<T> {
  data: Map<Key, T>
  mutex: Lock  // Lock solo para esta particin
}

funcin getPartition(key: Key) -> entero {
  retornar hash(key) % numPartitions
}

funcin get(key: Key) -> T {
  partitionId = getPartition(key)
  partition = partitions[partitionId]
  
  partition.mutex.lock()
  intentar:
    retornar partition.data.get(key)
  finalmente:
    partition.mutex.unlock()
}

funcin put(key: Key, valor: T) {
  partitionId = getPartition(key)
  partition = partitions[partitionId]
  
  partition.mutex.lock()
  intentar:
    partition.data.put(key, valor)
  finalmente:
    partition.mutex.unlock()
}

// Ventaja: threads accediendo diferentes particiones no compiten

// Ejemplo: cache particionada
funcin ejemploCache() {
  // 16 particiones para reducir contencin
  cache = new PartitionedData<CacheEntry>(numPartitions: 16)
  
  // Thread 1 accede keys con hash 0-3
  // Thread 2 accede keys con hash 4-7
  // Thread 3 accede keys con hash 8-11
  // Thread 4 accede keys con hash 12-15
  
  // Contencin solo si dos threads acceden misma particin
  // Probabilidad: 1/16 con buena funcin hash
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"5. Wait-Free Data Structures"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Estructuras sin locks usando operaciones atmicas

estructura WaitFreeQueue<T> {
  buffer: Array<AtomicReference<T>>
  head: AtomicInteger
  tail: AtomicInteger
  capacity: entero
}

funcin enqueue(item: T) -> booleano {
  mientras true:
    currentTail = tail.get()
    nextTail = (currentTail + 1) % capacity
    
    si nextTail == head.get():
      retornar false  // Cola llena
    
    // Intentar colocar item
    si buffer[currentTail].compareAndSwap(null, item):
      // Avanzar tail
      tail.compareAndSwap(currentTail, nextTail)
      retornar true
    
    // Otro thread tom este slot, reintentar
}

funcin dequeue() -> T {
  mientras true:
    currentHead = head.get()
    
    si currentHead == tail.get():
      retornar null  // Cola vaca
    
    item = buffer[currentHead].get()
    si item != null:
      // Intentar tomar item
      si buffer[currentHead].compareAndSwap(item, null):
        // Avanzar head
        head.compareAndSwap(currentHead, (currentHead + 1) % capacity)
        retornar item
    
    // Reintentar
}

// Sin locks: mltiples producers y consumers sin bloqueo
// Wait-free: cada operacin termina en tiempo acotado`})]}),e.jsx("div",{className:"p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Elimina completamente la inversin de prioridad, alta escalabilidad, sin deadlocks, mejor rendimiento en multicore.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Mayor uso de memoria, complejidad de diseo, no siempre es posible evitar compartir, overhead de sincronizacin alternativa."]})}),e.jsx("div",{className:"p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Sistemas funcionales (Erlang/Elixir), microservicios, bases de datos distribuidas (Cassandra, Riak), sistemas reactivos, event-driven architectures, lock-free data structures (Java concurrent package)."]})})]})]})})]})})]}),e.jsxs(sa,{value:"demos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"demo-inheritance",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-4 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"demo-inheritance",children:" Inheritance"}),e.jsx(ce,{value:"demo-ceiling",children:" Ceiling"}),e.jsx(ce,{value:"demo-disable",children:" Disable"}),e.jsx(ce,{value:"demo-avoid",children:" Avoid"})]}),e.jsx(me,{value:"demo-inheritance",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:" Demostracin: Priority Inheritance"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>i(!s),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg flex items-center gap-2 transition-colors",children:[s?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),s?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:q,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:[n],onValueChange:([z])=>l(z),min:200,max:1500,step:100,className:"w-32"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[n,"ms"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"Estado de los Threads"}),e.jsx("div",{className:"space-y-3",children:d.map(z=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`font-bold ${z.status==="running"?"text-green-400":z.status==="waiting"?"text-yellow-400":z.status==="blocked"?"text-red-400":z.status==="completed"?"text-blue-400":"text-gray-400"}`,children:["T",z.id," - ",z.id===1?"Alta":z.id===2?"Media":"Baja"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs ${z.priority!==z.originalPriority?"text-yellow-300 font-bold":"text-gray-400"}`,children:["Prioridad: ",z.originalPriority,"  ",z.priority,z.priority!==z.originalPriority&&" (heredada)"]}),z.holdingMutex&&e.jsx("span",{className:"text-xs bg-blue-600 px-2 py-0.5 rounded",children:" Mutex"}),e.jsx("span",{className:"text-xs text-gray-500",children:z.status==="running"?" Ejecutando":z.status==="waiting"?" Esperando":z.status==="blocked"?" Bloqueado":z.status==="completed"?" Completado":" Inactivo"})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z.status==="running"?"bg-green-500":z.status==="completed"?"bg-blue-500":"bg-gray-600"}`,style:{width:`${z.progress}%`}})})]},z.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:A,className:"h-48 overflow-y-auto font-mono text-xs space-y-1",children:h.length===0?e.jsx("div",{className:"text-gray-500 italic",children:'Presiona "Iniciar" para comenzar la simulacin...'}):h.map((z,Oe)=>e.jsx("div",{className:"text-gray-300",children:z},Oe))})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Observa:"})," Cuando T1 (alta) intenta adquirir el mutex ocupado por T3 (baja), T3 hereda la prioridad de T1 dinmicamente, permitiendo completar rpido y ceder el recurso."]})})]})}),e.jsx(me,{value:"demo-ceiling",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:" Demostracin: Priority Ceiling"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>v(!b),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-2 transition-colors",children:[b?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),b?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:$,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:[f],onValueChange:([z])=>N(z),min:200,max:1500,step:100,className:"w-32"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[f,"ms"]})]}),e.jsx("div",{className:"px-4 py-2 bg-green-900/50 border border-green-700 rounded-lg",children:e.jsxs("span",{className:"text-sm text-green-300",children:["Mutex Ceiling: ",e.jsx("span",{className:"font-bold",children:D})]})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"Estado de los Threads"}),e.jsx("div",{className:"space-y-3",children:j.map(z=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`font-bold ${z.status==="running"?"text-green-400":z.status==="waiting"?"text-yellow-400":z.status==="blocked"?"text-red-400":z.status==="completed"?"text-blue-400":"text-gray-400"}`,children:["T",z.id," - ",z.id===1?"Alta":z.id===2?"Media":"Baja"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-xs ${z.priority!==z.originalPriority?"text-yellow-300 font-bold":"text-gray-400"}`,children:["Prioridad: ",z.originalPriority,"  ",z.priority,z.priority===D&&z.holdingMutex&&" (ceiling)"]}),z.holdingMutex&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded",children:" Mutex"}),e.jsx("span",{className:"text-xs text-gray-500",children:z.status==="running"?" Ejecutando":z.status==="waiting"?" Esperando":z.status==="blocked"?" Bloqueado":z.status==="completed"?" Completado":" Inactivo"})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z.status==="running"?"bg-green-500":z.status==="completed"?"bg-blue-500":"bg-gray-600"}`,style:{width:`${z.progress}%`}})})]},z.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:K,className:"h-48 overflow-y-auto font-mono text-xs space-y-1",children:w.length===0?e.jsx("div",{className:"text-gray-500 italic",children:'Presiona "Iniciar" para comenzar la simulacin...'}):w.map((z,Oe)=>e.jsx("div",{className:"text-gray-300",children:z},Oe))})]}),e.jsx("div",{className:"mt-4 p-4 bg-green-900/30 border border-green-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Observa:"})," T3 es elevada inmediatamente al ceiling del mutex (10) al adquirirlo, previniendo que T2 la interrumpa. Esto evita la inversin de prioridad de forma proactiva."]})})]})}),e.jsx(me,{value:"demo-disable",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:" Demostracin: Disable Preemption"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>V(!L),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg flex items-center gap-2 transition-colors",children:[L?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),L?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:ve,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:[J],onValueChange:([z])=>ie(z),min:200,max:1500,step:100,className:"w-32"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[J,"ms"]})]}),e.jsx("div",{className:`px-4 py-2 border rounded-lg ${oe?"bg-green-900/50 border-green-700 text-green-300":"bg-red-900/50 border-red-700 text-red-300"}`,children:e.jsxs("span",{className:"text-sm font-bold",children:["Preemption: ",oe?" Activa":" Desactivada"]})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"Estado de los Threads"}),e.jsx("div",{className:"space-y-3",children:I.map(z=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`font-bold ${z.status==="running"?"text-green-400":z.status==="waiting"?"text-yellow-400":z.status==="blocked"?"text-red-400":z.status==="completed"?"text-blue-400":"text-gray-400"}`,children:["T",z.id," - ",z.id===1?"Alta":z.id===2?"Media":"Baja"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["Prioridad: ",z.priority]}),z.holdingMutex&&e.jsx("span",{className:"text-xs bg-purple-600 px-2 py-0.5 rounded",children:" Seccin Crtica"}),e.jsx("span",{className:"text-xs text-gray-500",children:z.status==="running"?" Ejecutando":z.status==="waiting"?" Esperando":z.status==="blocked"?" Bloqueado":z.status==="completed"?" Completado":" Inactivo"})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z.status==="running"?"bg-green-500":z.status==="completed"?"bg-blue-500":"bg-gray-600"}`,style:{width:`${z.progress}%`}})})]},z.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:M,className:"h-48 overflow-y-auto font-mono text-xs space-y-1",children:be.length===0?e.jsx("div",{className:"text-gray-500 italic",children:'Presiona "Iniciar" para comenzar la simulacin...'}):be.map((z,Oe)=>e.jsx("div",{className:"text-gray-300",children:z},Oe))})]}),e.jsx("div",{className:"mt-4 p-4 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Observa:"})," Cuando T3 entra a su seccin crtica, desactiva la preemption, haciendo imposible que T1 o T2 la interrumpan. Esto elimina completamente la inversin de prioridad."]})})]})}),e.jsx(me,{value:"demo-avoid",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-yellow-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:" Demostracin: Evitar Compartir Recursos"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>Ee(!ke),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg flex items-center gap-2 transition-colors",children:[ke?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),ke?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:Z,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:[P],onValueChange:([z])=>Q(z),min:200,max:1500,step:100,className:"w-32"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[P,"ms"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Threads con Datos Locales (Thread-Local Storage)"}),e.jsx("div",{className:"space-y-3",children:F.map(z=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`font-bold ${z.status==="running"?"text-green-400":z.status==="completed"?"text-blue-400":"text-gray-400"}`,children:["T",z.id," - Prioridad ",z.priority]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-yellow-600 px-2 py-0.5 rounded",children:" Datos Propios"}),e.jsx("span",{className:"text-xs text-gray-500",children:z.status==="running"?" Ejecutando":z.status==="completed"?" Completado":" Inactivo"})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z.status==="running"?"bg-green-500":z.status==="completed"?"bg-blue-500":"bg-gray-600"}`,style:{width:`${z.progress}%`}})})]},z.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Message Passing (Actor Model)"}),e.jsxs("div",{className:"h-32 flex items-center justify-around relative",children:[F.map(z=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`w-16 h-16 rounded-full border-2 flex items-center justify-center font-bold text-lg ${z.status==="running"?"bg-green-600 border-green-400":z.status==="completed"?"bg-blue-600 border-blue-400":"bg-gray-700 border-gray-500"}`,children:["T",z.id]}),e.jsxs("span",{className:"text-xs text-gray-400 mt-1",children:["P:",z.priority]})]},z.id)),W.map((z,Oe)=>e.jsxs("div",{className:"absolute top-8 text-xs bg-yellow-600 px-2 py-1 rounded animate-pulse",style:{left:`${z.from*30+10}%`,transform:"translateX(-50%)"},children:[" ",z.msg]},Oe))]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:O,className:"h-48 overflow-y-auto font-mono text-xs space-y-1",children:qe.length===0?e.jsx("div",{className:"text-gray-500 italic",children:'Presiona "Iniciar" para comenzar la simulacin...'}):qe.map((z,Oe)=>e.jsx("div",{className:"text-gray-300",children:z},Oe))})]}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Observa:"})," Cada thread trabaja con sus propios datos locales, sin necesidad de locks ni sincronizacin. La comunicacin se hace por mensajes, eliminando completamente la posibilidad de inversin de prioridad."]})})]})})]})})]})]})})]})}const UR=Sa("/ActividadesSeminarioSO/actividad11/priority-inversion")({component:qR});function BR(){const[s,i]=c.useState(!1),[n,l]=c.useState(1e3),[d,m]=c.useState({x:0,y:0,flag:0}),[h,x]=c.useState({r1:0,r2:0}),[g,b]=c.useState({r3:0,r4:0}),[v,f]=c.useState([" Sistema de Memory Fences inicializado"]),[,N]=c.useState(0),[j,_]=c.useState(!1),[w,C]=c.useState(1e3),[E,D]=c.useState(0),[L,V]=c.useState(0),[J,ie]=c.useState(null),[I,k]=c.useState([" Sistema Volatile inicializado"]),[,be]=c.useState(0),[te,G]=c.useState(!1),[oe,Ce]=c.useState(1e3),[ke,Ee]=c.useState([0,0,0,0]),[P,Q]=c.useState(0),[F,ue]=c.useState(0),[qe,T]=c.useState([" Ring Buffer con Acquire/Release inicializado"]),[,W]=c.useState(0),[re,A]=c.useState(!1),[K,M]=c.useState(1e3),[O,q]=c.useState(0),[$,ve]=c.useState(0),[Z,z]=c.useState(null),[Oe,Re]=c.useState(null),[ae,se]=c.useState([" Sistema Sequential Consistency inicializado"]),[,rt]=c.useState(0),[jt,fe]=c.useState(!1),[Me,De]=c.useState(1e3),[Ge,ze]=c.useState([]),[_e,Xe]=c.useState([]),[We,xt]=c.useState([" Sistema Happens-Before inicializado"]),[,Ot]=c.useState(0),[It,Ue]=c.useState(!1),[kt,et]=c.useState(1e3),[R,ne]=c.useState(0),[Ve,de]=c.useState(0),[we,_t]=c.useState(0),[St,tt]=c.useState([" Contador Atmico inicializado"]),[,Ye]=c.useState(0),ft=c.useRef(null),Ct=c.useRef(null),ye=c.useRef(null),gt=c.useRef(null),Fe=c.useRef(null),B=c.useRef(null);c.useEffect(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},[v]),c.useEffect(()=>{Ct.current&&(Ct.current.scrollTop=Ct.current.scrollHeight)},[I]),c.useEffect(()=>{ye.current&&(ye.current.scrollTop=ye.current.scrollHeight)},[qe]),c.useEffect(()=>{gt.current&&(gt.current.scrollTop=gt.current.scrollHeight)},[ae]),c.useEffect(()=>{Fe.current&&(Fe.current.scrollTop=Fe.current.scrollHeight)},[We]),c.useEffect(()=>{B.current&&(B.current.scrollTop=B.current.scrollHeight)},[St]),c.useEffect(()=>{if(!s)return;const pt=setInterval(()=>{N(zt=>{const lt=zt+1;return lt===1?(f(Be=>[...Be," Thread 1: x = 1"]),m(Be=>({...Be,x:1}))):lt===2?f(Be=>[...Be," Thread 1: fence_release()"]):lt===3?(f(Be=>[...Be," Thread 1: flag = 1"]),m(Be=>({...Be,flag:1}))):lt===4?(f(Be=>[...Be," Thread 2: r1 = flag (lee 1)"]),b({r3:1,r4:0})):lt===5?f(Be=>[...Be," Thread 2: fence_acquire()"]):lt===6?(f(Be=>[...Be," Thread 2: r2 = x (lee 1)"]),b({r3:1,r4:1})):lt===7&&(f(Be=>[...Be," Gracias a las fences, Thread 2 ve x=1","Sin fences, podra ver x=0 (reordenamiento)"]),i(!1)),lt})},n);return()=>clearInterval(pt)},[s,n]),c.useEffect(()=>{if(!j)return;const pt=setInterval(()=>{be(zt=>{const lt=zt+1;return lt===1?(k(Be=>[...Be," Writer: data = 42"]),V(42)):lt===2?(k(Be=>[...Be," Writer: volatile flag = 1 (release)"]),D(1)):lt===3?k(Be=>[...Be," Reader: lee volatile flag (acquire)"]):lt===4?k(Be=>[...Be," Reader: flag == 1, procede a leer data"]):lt===5?(k(Be=>[...Be,` Reader: data = ${L}`]),ie(42)):lt===6&&(k(Be=>[...Be," Volatile garantiza que Reader ve data=42","Sin volatile, podra ver data=0 (cached)"]),_(!1)),lt})},w);return()=>clearInterval(pt)},[j,w,L]),c.useEffect(()=>{if(!te)return;const pt=setInterval(()=>{W(zt=>{const lt=zt+1;if(lt===1){T(Pe=>[...Pe," Producer: produce(100)"]);const Be=(F+1)%4;Ee(Pe=>{const Je=[...Pe];return Je[F]=100,Je}),ue(Be)}else if(lt===2)T(Be=>[...Be," Producer: tail.store(1, release)"]);else if(lt===3)T(Be=>[...Be," Consumer: head.load(acquire)"]);else if(lt===4){T(Pe=>[...Pe,` Consumer: consume()  ${ke[P]}`]);const Be=(P+1)%4;Q(Be)}else if(lt===5){T(Pe=>[...Pe," Producer: produce(200)"]);const Be=(F+1)%4;Ee(Pe=>{const Je=[...Pe];return Je[F]=200,Je}),ue(Be)}else if(lt===6){T(Pe=>[...Pe," Consumer: consume()  200"]);const Be=(P+1)%4;Q(Be)}else lt===7&&(T(Be=>[...Be," Acquire/Release garantiza orden sin fences completas"]),G(!1));return lt})},oe);return()=>clearInterval(pt)},[te,oe,F,P,ke]),c.useEffect(()=>{if(!re)return;const pt=setInterval(()=>{rt(zt=>{const lt=zt+1;return lt===1?(se(Be=>[...Be," Thread 1: x = 1"]),q(1)):lt===2?(se(Be=>[...Be," Thread 2: y = 1"]),ve(1)):lt===3?(se(Be=>[...Be," Thread 1: r1 = y"]),z($)):lt===4?(se(Be=>[...Be," Thread 2: r2 = x"]),Re(O)):lt===5?se(Be=>[...Be,` Resultados: r1=${Z}, r2=${Oe}`]):lt===6&&(se(Z===0&&Oe===0?Be=>[...Be," r1=0 y r2=0 IMPOSIBLE en Sequential Consistency","Debe existir un orden total que respete program order"]:Be=>[...Be," Resultado vlido en Sequential Consistency"]),A(!1)),lt})},K);return()=>clearInterval(pt)},[re,K,O,$,Z,Oe]),c.useEffect(()=>{if(!jt)return;const pt=setInterval(()=>{Ot(zt=>{const lt=zt+1;if(lt===1){const Be={id:1,thread:1,type:"WRITE",variable:"x",value:1,timestamp:Date.now()};ze([Be]),xt(Pe=>[...Pe," T1: W(x, 1) [E1]"])}else if(lt===2)Xe([[1,2]]),xt(Be=>[...Be," Program order: E1 -> E2"]);else if(lt===3){const Be={id:2,thread:1,type:"WRITE",variable:"flag",value:1,timestamp:Date.now()};ze(Pe=>[...Pe,Be]),xt(Pe=>[...Pe," T1: W(flag, 1) [E2] (release)"])}else if(lt===4){const Be={id:3,thread:2,type:"READ",variable:"flag",value:1,timestamp:Date.now()};ze(Pe=>[...Pe,Be]),xt(Pe=>[...Pe," T2: R(flag) = 1 [E3] (acquire)"]),Xe(Pe=>[...Pe,[2,3]])}else if(lt===5)xt(Be=>[...Be," Synchronizes-with: E2 -> E3"]);else if(lt===6){const Be={id:4,thread:2,type:"READ",variable:"x",value:1,timestamp:Date.now()};ze(Pe=>[...Pe,Be]),xt(Pe=>[...Pe," T2: R(x) = 1 [E4]"]),Xe(Pe=>[...Pe,[3,4]])}else lt===7&&(xt(Be=>[...Be," Program order: E3 -> E4"," Happens-before: E1 -> E2 -> E3 -> E4"," E4 ve el write de E1 (guaranteed)"]),fe(!1));return lt})},Me);return()=>clearInterval(pt)},[jt,Me]),c.useEffect(()=>{if(!It)return;const pt=setInterval(()=>{Ye(zt=>{const lt=zt+1;return lt===1?(tt(Be=>[...Be," Thread 1: CAS(0  1)"]),de(1),ne(1)):lt===2?tt(Be=>[...Be," Thread 1: CAS exitoso, counter = 1"]):lt===3?(tt(Be=>[...Be," Thread 2: CAS(0  1)"]),_t(1)):lt===4?tt(Be=>[...Be," Thread 2: CAS fall (counter ya es 1)"]):lt===5?(tt(Be=>[...Be," Thread 2: reintenta CAS(1  2)"]),_t(2),ne(2)):lt===6?tt(Be=>[...Be," Thread 2: CAS exitoso, counter = 2"]):lt===7?(tt(Be=>[...Be," Thread 1: CAS(1  2)"," Thread 1: CAS fall (counter ya es 2)"]),de(2)):lt===8&&(tt(Be=>[...Be," CAS garantiza atomicidad de read-modify-write",`Final counter: ${R}`]),Ue(!1)),lt})},kt);return()=>clearInterval(pt)},[It,kt,R]);const U=()=>{i(!1),N(0),m({x:0,y:0,flag:0}),x({r1:0,r2:0}),b({r3:0,r4:0}),f([" Sistema reinicializado"])},Dt=()=>{_(!1),be(0),D(0),V(0),ie(null),k([" Sistema reinicializado"])},Ke=()=>{G(!1),W(0),Ee([0,0,0,0]),Q(0),ue(0),T([" Ring Buffer reinicializado"])},ge=()=>{A(!1),rt(0),q(0),ve(0),z(null),Re(null),se([" Sistema reinicializado"])},Ft=()=>{fe(!1),Ot(0),ze([]),Xe([]),xt([" Sistema reinicializado"])},Zt=()=>{Ue(!1),Ye(0),ne(0),de(0),_t(0),tt([" Contador reinicializado"])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ia,{className:"size-8 text-amber-400"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Memory Consistency  Pseudocdigos"})]}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Coleccin de pseudocdigos para las tcnicas principales que garantizan consistencia de memoria en programacin concurrente: barreras, variables voltiles, adquisicin/liberacin, consistencia secuencial, relaciones happens-before y operaciones atmicas."})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["pseudocodigos","demos"],className:"space-y-4",children:[e.jsxs(sa,{value:"pseudocodigos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Pseudocdigos"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"fences",className:"px-6 pb-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs(Qt,{className:"grid grid-cols-6 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"fences",children:"Memory Barriers / Fences"}),e.jsx(ce,{value:"volatile",children:"Volatile Variables"}),e.jsx(ce,{value:"acqrel",children:"Acquire / Release"}),e.jsx(ce,{value:"seq",children:"Sequential Consistency"}),e.jsx(ce,{value:"happens",children:"Happens-Before"}),e.jsx(ce,{value:"atomic",children:"Atomic Operations"})]})}),e.jsx(me,{value:"fences",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-sky-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-sky-400 mb-4",children:"Memory Barriers / Fences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-sky-300 mb-2",children:"Concepto"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Una fence es una instruccin que impone un orden entre operaciones de memoria; evita reordenamientos por el compilador o la CPU. Hay fences de lectura, escritura y completas."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-sky-300 mb-2",children:"Pseudocdigo  abstraccin de fences"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Definicin abstracta de barreras
func fence_acquire() {
  // Garantiza que las lecturas posteriores no se muevan antes de esta instruccin
  CPU.memoryFenceAcquire()
}

func fence_release() {
  // Garantiza que las escrituras previas sean visibles antes de las escrituras posteriores
  CPU.memoryFenceRelease()
}

func fence_full() {
  // Barrera completa: no reordenar ni lecturas ni escrituras a travs de la barrera
  CPU.memoryFenceFull()
}

// Uso tpico: implementacin de un spinlock simple
estructura SpinLock { locked: Atomic<int> }

func lock(l: SpinLock) {
  while (!l.locked.compareAndSwap(0, 1)) {
    // busy-wait
  }
  // A partir de aqu, las lecturas/escrituras posteriores deben ver el estado protegido
  fence_acquire()  // Asegura que lecturas posteriores no se muevan antes del lock
}

func unlock(l: SpinLock) {
  // Asegurar que todas las escrituras dentro del lock sean visibles antes de liberar
  fence_release()
  l.locked.store(0)
}

// Nota: dependiendo de la plataforma, fence_acquire/fence_release pueden mapear a
// LDAR/STLR (ARM) o a instrucciones de compilador como atomic_thread_fence(memory_order_acquire)
`})]}),e.jsx("div",{className:"bg-sky-900/20 p-3 rounded",children:e.jsx("p",{className:"text-sm text-sky-100",children:"Ventajas: control fino del orden de memoria; esencial en implementaciones lock-free. Desventajas: propenso a errores si se usan incorrectamente; diferencias entre arquitecturas."})})]})]})}),e.jsx(me,{value:"volatile",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-emerald-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-400 mb-4",children:"Volatile Variables"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-300 mb-2",children:"Concepto"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Una variable marcada como volatile garantiza que las lecturas y escrituras se hagan directamente en memoria (no cach de CPU o registros), y a menudo impone restricciones de reordenamiento por el compilador. Semnticas concretas dependen del lenguaje."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-300 mb-2",children:"Pseudocdigo  Java/C# style"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Java: volatile garantiza visibilidad y prohibits certain reorderings
volatile int flag = 0

// Thread 1
func writer() {
  data = 42
  // publicar dato antes de sealar flag
  flag = 1  // write to volatile: flush stores
}

// Thread 2
func reader() {
  while (flag == 0) {}
  // una vez que flag==1, reader debe ver data==42
  assert(data == 42)
}

// Puntos importantes:
// - Escribiendo a una volatile crea un 'release' en muchas plataformas de alto nivel.
// - Leer una volatile acta como 'acquire'.
// - No sustituye completamente a locks para operaciones compuestas (ej: read-modify-write).
`})]}),e.jsx("div",{className:"bg-emerald-900/20 p-3 rounded",children:e.jsx("p",{className:"text-sm text-emerald-100",children:"Ventajas: sencillo para sealizacin y flags. Desventajas: no protege operaciones compuestas ni sustituye a primitivas atmicas."})})]})]})}),e.jsx(me,{value:"acqrel",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-violet-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-violet-400 mb-4",children:"Acquire / Release Semantics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-violet-300 mb-2",children:"Concepto"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Acquire (lectura) y Release (escritura) son rdenes de memoria usadas con operaciones atmicas para garantizar visibilidad sin necesidad de fences completas."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-violet-300 mb-2",children:"Pseudocdigo  Prod/Cons seguro con acquire/release"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Buffer circular simple: producer/consumer con acquire/release
estructura RingBuffer {
  data: Array<T>
  head: Atomic<int>
  tail: Atomic<int>
}

func produce(buffer: RingBuffer, value: T) {
  while (true) {
    tail = buffer.tail.load()  // load_relaxed
    next = (tail + 1) % buffer.data.length
    if (next == buffer.head.load()) {
      // full
      continue
    }
    buffer.data[tail] = value
    // publicar el dato y luego actualizar tail con release
    buffer.tail.store(next, memory_order_release)
    return
  }
}

func consume(buffer: RingBuffer) -> T {
  while (true) {
    head = buffer.head.load(memory_order_acquire)
    if (head == buffer.tail.load(memory_order_relaxed)) {
      // empty
      continue
    }
    value = buffer.data[head]
    buffer.head.store((head + 1) % buffer.data.length, memory_order_release)
    return value
  }
}

// Explicacin:
// - producer hace store_release en tail despus de escribir data.
// - consumer hace load_acquire en head/tail para asegurar que vean el dato escrito.
`})]}),e.jsx("div",{className:"bg-violet-900/20 p-3 rounded",children:e.jsx("p",{className:"text-sm text-violet-100",children:"Ventajas: eficiente para patrones prod/cons lock-free; menor overhead que fences completas. Desventajas: requiere disciplina y comprensin de memory orders."})})]})]})}),e.jsx(me,{value:"seq",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-rose-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-rose-400 mb-4",children:"Sequential Consistency"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-rose-300 mb-2",children:"Concepto"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Un modelo es secuencialmente consistente si existe un orden total de operaciones de todos los threads que respeta el orden programado dentro de cada thread y produce el mismo comportamiento observado por cada thread."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-rose-300 mb-2",children:"Pseudocdigo  comprobador de SC (modelo simplificado)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Modelo de verificacin simple por interleavings
lista ops_thread1 = [W(x,1), R(y)]
lista ops_thread2 = [W(y,1), R(x)]

// Generar todas las interleavings que respetan orden dentro de cada thread
func generate_interleavings(t1, t2) -> lista<lista<op>> {
  if t1.empty() return [t2]
  if t2.empty() return [t1]
  res = []
  // tomar op de t1
  for rest in generate_interleavings(t1.tail(), t2):
    res.add([t1.head()] + rest)
  // tomar op de t2
  for rest in generate_interleavings(t1, t2.tail()):
    res.add([t2.head()] + rest)
  return res
}

func check_SC(opsLists) {
  interleavings = generate_interleavings(ops_thread1, ops_thread2)
  for each inter in interleavings:
    state = {}
    for op in inter:
      apply(op, state)
    collect final observations
  // Si todas las observaciones son consistentes con algn interleaving, modelo es SC
}

// Ejemplo: si observamos R(x)==0 y R(y)==0 para ambos, en SC esto es imposible
`})]}),e.jsx("div",{className:"bg-rose-900/20 p-3 rounded",children:e.jsx("p",{className:"text-sm text-rose-100",children:"Ventajas: modelo intuitivo y sencillo para razonar. Desventajas: demasiado restrictivo; costo de implementar en hardware moderno."})})]})]})}),e.jsx(me,{value:"happens",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-indigo-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-indigo-400 mb-4",children:"Happens-Before Relationships"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-300 mb-2",children:"Concepto"}),e.jsx("p",{className:"text-sm text-gray-300",children:"La relacin happens-before describe cundo un efecto (escritura) es observable por otra operacin (lectura). Construida por orden intra-thread, sincronizacin y otras reglas."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-300 mb-2",children:"Pseudocdigo  construir grafo happens-before"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Eventos: cada lectura/escritura es un nodo
estructura Event { id, threadId, type: { READ, WRITE }, varName, value }

// Reglas para aristas HB:
// 1. Program order: dentro de un mismo thread, op_i -> op_{i+1}
// 2. Synchronization: unlock -> lock, write_release -> read_acquire, volatile write -> volatile read
// 3. Transitive closure

func build_happens_before(events) -> Graph {
  G = new Graph()
  // aadir aristas de program order
  for each thread in events.groupBy(threadId):
    for i in 0..thread.events.length-2:
      G.addEdge(thread.events[i], thread.events[i+1])

  // aadir aristas por sincronizacin (ejemplo: release->acquire)
  for each e in events:
    if e.type == WRITE and isRelease(e):
      for each r in events:
        if r.type == READ and isAcquire(r) and r.varName == e.varName and r.value == e.value:
          G.addEdge(e, r)

  // cerrar transitivamente
  G.transitiveClosure()
  return G
}

// Determinar si una lectura ve una escritura legalmente
func read_sees_write(readEvent, writeEvent, hbGraph) -> boolean {
  // debe existir writeEvent -> readEvent en hbGraph
  return hbGraph.hasPath(writeEvent, readEvent)
}
`})]}),e.jsx("div",{className:"bg-indigo-900/20 p-3 rounded",children:e.jsx("p",{className:"text-sm text-indigo-100",children:"Ventajas: formaliza visibilidad y permite razonar sobre seguridad en concurrencia. Desventajas: puede ser complejo construir grafos grandes; requiere registros de eventos para anlisis post-mortem."})})]})]})}),e.jsx(me,{value:"atomic",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-lime-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-lime-400 mb-4",children:"Atomic Operations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-lime-300 mb-2",children:"Concepto"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Operaciones atmicas (CAS, fetch_add, exchange) proporcionan indivisibilidad para operaciones de lectura-modificacin-escritura y pueden incluir memory orders (relaxed, acquire, release, seq_cst)."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-lime-300 mb-2",children:"Pseudocdigo  Compare-And-Swap (CAS)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Atomic CAS: compara y actualiza en una operacin atmica
func compareAndSwap(addr: Atomic<int>, expected: int, newVal: int) -> boolean {
  atomic { // bloque atmico provisto por hardware
    if (*addr == expected) {
      *addr = newVal
      return true
    } else {
      return false
    }
  }
}

// Ejemplo: contador lock-free
estructura AtomicCounter { value: Atomic<int> }

func increment(counter: AtomicCounter) {
  while (true) {
    old = counter.value.load(memory_order_relaxed)
    if (compareAndSwap(&counter.value, old, old + 1)) {
      return
    }
    // retry
  }
}

// Pseudocdigo  fetch_add (Instrumental)
func fetch_add(addr: Atomic<int>, delta: int) -> int {
  while (true) {
    old = addr.load(memory_order_relaxed)
    if (compareAndSwap(addr, old, old + delta)) return old
  }
}

// Notas: memory_order_seq_cst es la semntica ms fuerte (sequentially consistent for atomics)
`})]}),e.jsx("div",{className:"bg-lime-900/20 p-3 rounded",children:e.jsx("p",{className:"text-sm text-lime-100",children:"Ventajas: primitives atmicas son building blocks para algoritmos lock-free. Desventajas: pueden ser difciles de usar correctamente; operaciones compuestas requieren patrones adicionales (ej: DCAS, descriptors)."})})]})]})})]})})]}),e.jsxs(sa,{value:"demos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"demo-fences",className:"px-6 pb-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs(Qt,{className:"grid grid-cols-6 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"demo-fences",children:"Fences"}),e.jsx(ce,{value:"demo-volatile",children:"Volatile"}),e.jsx(ce,{value:"demo-acqrel",children:"Acq/Rel"}),e.jsx(ce,{value:"demo-seq",children:"Seq Consistency"}),e.jsx(ce,{value:"demo-hb",children:"Happens-Before"}),e.jsx(ce,{value:"demo-atomic",children:"Atomic Ops"})]})}),e.jsx(me,{value:"demo-fences",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-sky-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-sky-400 mb-4",children:"Demo: Memory Fences"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>i(!s),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${s?"bg-yellow-600 hover:bg-yellow-700":"bg-sky-600 hover:bg-sky-700"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",n,"ms"]}),e.jsx(dt,{value:[n],onValueChange:([pt])=>l(pt),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-sky-300 mb-3",children:"Shared Memory"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-sky-900/30 p-2 rounded",children:[e.jsx("span",{className:"text-sky-300 font-bold",children:"x:"})," ",d.x]}),e.jsxs("div",{className:"bg-sky-900/30 p-2 rounded",children:[e.jsx("span",{className:"text-sky-300 font-bold",children:"y:"})," ",d.y]}),e.jsxs("div",{className:"bg-sky-900/30 p-2 rounded",children:[e.jsx("span",{className:"text-sky-300 font-bold",children:"flag:"})," ",d.flag]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-2",children:"Thread 1"}),e.jsxs("div",{className:"text-xs space-y-1 text-gray-300",children:[e.jsxs("div",{children:["r1: ",h.r1]}),e.jsxs("div",{children:["r2: ",h.r2]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-red-300 mb-2",children:"Thread 2"}),e.jsxs("div",{className:"text-xs space-y-1 text-gray-300",children:[e.jsxs("div",{children:["r3: ",g.r3]}),e.jsxs("div",{children:["r4: ",g.r4]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-sky-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:ft,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:v.map((pt,zt)=>e.jsx("div",{className:"text-gray-300",children:pt},zt))})]})]})}),e.jsx(me,{value:"demo-volatile",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-emerald-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-400 mb-4",children:"Demo: Volatile Variables"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>_(!j),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${j?"bg-yellow-600 hover:bg-yellow-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:j?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Dt,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",w,"ms"]}),e.jsx(dt,{value:[w],onValueChange:([pt])=>C(pt),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-300 mb-3",children:"Variables"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-emerald-900/30 p-3 rounded",children:[e.jsx("div",{className:"text-emerald-300 font-bold mb-1",children:"data"}),e.jsx("div",{className:"text-2xl",children:L})]}),e.jsxs("div",{className:"bg-emerald-900/30 p-3 rounded",children:[e.jsx("div",{className:"text-emerald-300 font-bold mb-1",children:"volatile flag"}),e.jsx("div",{className:"text-2xl",children:E})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-300 mb-3",children:"Reader vio"}),e.jsx("div",{className:"text-xl text-emerald-400",children:J!==null?J:"esperando..."})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-emerald-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:Ct,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:I.map((pt,zt)=>e.jsx("div",{className:"text-gray-300",children:pt},zt))})]})]})}),e.jsx(me,{value:"demo-acqrel",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-violet-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-violet-400 mb-4",children:"Demo: Acquire/Release Ring Buffer"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>G(!te),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${te?"bg-yellow-600 hover:bg-yellow-700":"bg-violet-600 hover:bg-violet-700"}`,children:te?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ke,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",oe,"ms"]}),e.jsx(dt,{value:[oe],onValueChange:([pt])=>Ce(pt),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-violet-300 mb-3",children:"Ring Buffer"}),e.jsx("div",{className:"flex items-center gap-2 justify-center",children:ke.map((pt,zt)=>e.jsx("div",{className:`w-16 h-16 flex items-center justify-center rounded font-bold text-lg ${zt===P?"bg-blue-600 ring-2 ring-blue-400":zt===F?"bg-violet-600 ring-2 ring-violet-400":"bg-gray-700"}`,children:pt},zt))}),e.jsxs("div",{className:"flex justify-around mt-2 text-xs",children:[e.jsxs("div",{className:"text-blue-300",children:["HEAD: ",P]}),e.jsxs("div",{className:"text-violet-300",children:["TAIL: ",F]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-violet-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:ye,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:qe.map((pt,zt)=>e.jsx("div",{className:"text-gray-300",children:pt},zt))})]})]})}),e.jsx(me,{value:"demo-seq",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-rose-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-rose-400 mb-4",children:"Demo: Sequential Consistency"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>A(!re),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${re?"bg-yellow-600 hover:bg-yellow-700":"bg-rose-600 hover:bg-rose-700"}`,children:re?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",K,"ms"]}),e.jsx(dt,{value:[K],onValueChange:([pt])=>M(pt),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-rose-300 mb-3",children:"Shared Variables"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-rose-900/30 p-3 rounded",children:[e.jsx("div",{className:"text-rose-300 font-bold",children:"x"}),e.jsx("div",{className:"text-2xl",children:O})]}),e.jsxs("div",{className:"bg-rose-900/30 p-3 rounded",children:[e.jsx("div",{className:"text-rose-300 font-bold",children:"y"}),e.jsx("div",{className:"text-2xl",children:$})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-2",children:"Thread 1"}),e.jsxs("div",{className:"text-xs text-gray-300",children:["r1 (lee y): ",Z!==null?Z:""]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-red-300 mb-2",children:"Thread 2"}),e.jsxs("div",{className:"text-xs text-gray-300",children:["r2 (lee x): ",Oe!==null?Oe:""]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-rose-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:gt,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:ae.map((pt,zt)=>e.jsx("div",{className:"text-gray-300",children:pt},zt))})]})]})}),e.jsx(me,{value:"demo-hb",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-indigo-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-indigo-400 mb-4",children:"Demo: Happens-Before Graph"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>fe(!jt),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${jt?"bg-yellow-600 hover:bg-yellow-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:jt?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ft,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",Me,"ms"]}),e.jsx(dt,{value:[Me],onValueChange:([pt])=>De(pt),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-300 mb-3",children:"Events"}),e.jsx("div",{className:"space-y-2",children:Ge.map(pt=>e.jsxs("div",{className:`p-2 rounded text-xs ${pt.thread===1?"bg-blue-900/30":"bg-red-900/30"}`,children:["E",pt.id," (T",pt.thread,"): ",pt.type,"(",pt.variable,pt.value!==void 0?`, ${pt.value}`:"",")"]},pt.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-300 mb-3",children:"Happens-Before Relations"}),e.jsx("div",{className:"space-y-1 text-xs text-gray-300",children:_e.map(([pt,zt],lt)=>e.jsxs("div",{children:["E",pt,"  E",zt]},lt))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:Fe,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:We.map((pt,zt)=>e.jsx("div",{className:"text-gray-300",children:pt},zt))})]})]})}),e.jsx(me,{value:"demo-atomic",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-lime-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-lime-400 mb-4",children:"Demo: Atomic CAS Operations"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>Ue(!It),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${It?"bg-yellow-600 hover:bg-yellow-700":"bg-lime-600 hover:bg-lime-700"}`,children:It?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Zt,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",kt,"ms"]}),e.jsx(dt,{value:[kt],onValueChange:([pt])=>et(pt),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-lime-300 mb-3",children:"Atomic Counter"}),e.jsx("div",{className:"text-4xl font-bold text-lime-400 text-center",children:R})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-2",children:"Thread 1"}),e.jsxs("div",{className:"text-xs text-gray-300",children:["CAS attempts: ",Ve]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-red-300 mb-2",children:"Thread 2"}),e.jsxs("div",{className:"text-xs text-gray-300",children:["CAS attempts: ",we]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-lime-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:B,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:St.map((pt,zt)=>e.jsx("div",{className:"text-gray-300",children:pt},zt))})]})]})})]})})]})]})})]})}const VR=Sa("/ActividadesSeminarioSO/actividad11/memory-consistency")({component:BR});function FR(){const[s,i]=c.useState(!1),[n,l]=c.useState(800),[d,m]=c.useState(0),[h,x]=c.useState(!1),[g,b]=c.useState("checking"),[v,f]=c.useState("idle"),[N,j]=c.useState([]),[_,w]=c.useState(!1),[C,E]=c.useState(800),[D,L]=c.useState(0),[V,J]=c.useState(0),[ie,I]=c.useState("waiting"),[k,be]=c.useState("idle"),[te,G]=c.useState([]),[oe,Ce]=c.useState(!1),[ke,Ee]=c.useState(800),[P,Q]=c.useState(0),[F,ue]=c.useState(!1),[qe,T]=c.useState(0),[W,re]=c.useState("checking"),[A,K]=c.useState("idle"),[M,O]=c.useState([]),[q,$]=c.useState(!1),[ve,Z]=c.useState(800),[z,Oe]=c.useState(0),[Re,ae]=c.useState(!1),[se,rt]=c.useState([{id:1,state:"waiting"},{id:2,state:"waiting"},{id:3,state:"waiting"}]),[jt,fe]=c.useState("idle"),[Me,De]=c.useState([]),[Ge,ze]=c.useState(!1),[_e,Xe]=c.useState(800),[We,xt]=c.useState(0),[Ot,It]=c.useState(!1),[Ue,kt]=c.useState("waiting"),[et,R]=c.useState(5),[ne,Ve]=c.useState(!1),[de,we]=c.useState([]),_t=c.useRef(null),St=c.useRef(null),tt=c.useRef(null),Ye=c.useRef(null),ft=c.useRef(null);c.useEffect(()=>{_t.current&&(_t.current.scrollTop=_t.current.scrollHeight)},[N]),c.useEffect(()=>{St.current&&(St.current.scrollTop=St.current.scrollHeight)},[te]),c.useEffect(()=>{tt.current&&(tt.current.scrollTop=tt.current.scrollHeight)},[M]),c.useEffect(()=>{Ye.current&&(Ye.current.scrollTop=Ye.current.scrollHeight)},[Me]),c.useEffect(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},[de]),c.useEffect(()=>{if(!s)return;const U=setTimeout(()=>{m(Dt=>{const Ke=Dt+1;if(Ke===1)j(ge=>[...ge,{message:"Thread Waiter: Iniciando...",type:"info"}]),b("checking");else if(Ke===2)j(ge=>[...ge,{message:"Thread Waiter: Adquiriendo mutex...",type:"info"}]);else if(Ke===3)j(ge=>[...ge,{message:"Thread Waiter: Verificando condicin (false)",type:"warning"}]);else if(Ke===4)j(ge=>[...ge,{message:"Thread Waiter: Esperando en CV (libera mutex)...",type:"info"}]),b("waiting");else if(Ke===5)j(ge=>[...ge,{message:"Thread Signaler: Iniciando...",type:"success"}]),f("preparing");else if(Ke===6)j(ge=>[...ge,{message:"Thread Signaler: Adquiriendo mutex...",type:"success"}]);else if(Ke===7)x(!0),j(ge=>[...ge,{message:"Thread Signaler: Condicin = true",type:"success"}]);else if(Ke===8)j(ge=>[...ge,{message:"Thread Signaler: pthread_cond_signal()",type:"success"}]),f("signaling");else if(Ke===9)j(ge=>[...ge,{message:"Thread Signaler: Liberando mutex",type:"success"}]),f("done");else if(Ke===10)j(ge=>[...ge,{message:"Thread Waiter: Despertando, re-adquiriendo mutex...",type:"info"}]);else if(Ke===11)j(ge=>[...ge,{message:"Thread Waiter: Re-verificando condicin (true) ",type:"success"}]),b("processing");else if(Ke===12)j(ge=>[...ge,{message:"Thread Waiter: Procesando datos...",type:"success"}]);else if(Ke===13)j(ge=>[...ge,{message:"Thread Waiter: Liberando mutex",type:"success"}]);else if(Ke===14)return j(ge=>[...ge,{message:" Sincronizacin completa - No lost wakeup!",type:"success"}]),b("done"),i(!1),Ke;return Ke})},n);return()=>clearTimeout(U)},[s,d,n]),c.useEffect(()=>{if(!_)return;const U=setTimeout(()=>{L(Dt=>{const Ke=Dt+1;if(Ke===1)G(ge=>[...ge,{message:"Thread Waiter: Iniciando...",type:"info"}]);else if(Ke===2)G(ge=>[...ge,{message:"Thread Waiter: sem_wait() - bloqueando (contador=0)",type:"warning"}]),I("waiting");else if(Ke===3)G(ge=>[...ge,{message:"Thread Signaler: Iniciando...",type:"success"}]),be("posting");else if(Ke===4)J(1),G(ge=>[...ge,{message:"Thread Signaler: sem_post() - contador: 01",type:"success"}]);else if(Ke===5)G(ge=>[...ge,{message:"Thread Signaler: Seal enviada ",type:"success"}]),be("done");else if(Ke===6)J(0),G(ge=>[...ge,{message:"Thread Waiter: Despertando, sem_wait() xito - contador: 10",type:"info"}]),I("acquired");else if(Ke===7)G(ge=>[...ge,{message:"Thread Waiter: Procesando datos...",type:"success"}]),I("processing");else if(Ke===8)return G(ge=>[...ge,{message:" Semforo preserv seal - No lost wakeup!",type:"success"}]),I("done"),w(!1),Ke;return Ke})},C);return()=>clearTimeout(U)},[_,D,C]),c.useEffect(()=>{if(!oe)return;const U=setTimeout(()=>{Q(Dt=>{const Ke=Dt+1;if(Ke===1)O(ge=>[...ge,{message:"Thread Signaler: Iniciando primero...",type:"success"}]),K("marking");else if(Ke===2)O(ge=>[...ge,{message:"Thread Signaler: Adquiriendo mutex...",type:"success"}]);else if(Ke===3)ue(!0),T(42),O(ge=>[...ge,{message:"Thread Signaler: event_occurred = true, data = 42",type:"success"}]);else if(Ke===4)O(ge=>[...ge,{message:"Thread Signaler: Sealizando...",type:"success"}]);else if(Ke===5)O(ge=>[...ge,{message:"Thread Signaler: Liberando mutex",type:"success"}]),K("done");else if(Ke===6)O(ge=>[...ge,{message:"Thread Waiter: Iniciando (despus de signaler)...",type:"info"}]),re("checking");else if(Ke===7)O(ge=>[...ge,{message:"Thread Waiter: Adquiriendo mutex...",type:"info"}]);else if(Ke===8)O(ge=>[...ge,{message:"Thread Waiter: Verificando event_occurred (true) ",type:"success"}]);else if(Ke===9)O(ge=>[...ge,{message:"Thread Waiter: Estado persisti - NO espera!",type:"success"}]),re("processing");else if(Ke===10)O(ge=>[...ge,{message:`Thread Waiter: Procesando data=${qe}`,type:"success"}]);else if(Ke===11)O(ge=>[...ge,{message:"Thread Waiter: Liberando mutex",type:"success"}]);else if(Ke===12)return O(ge=>[...ge,{message:" Estado rastreado - Seal no se perdi!",type:"success"}]),re("done"),Ce(!1),Ke;return Ke})},ke);return()=>clearTimeout(U)},[oe,P,ke,qe]),c.useEffect(()=>{if(!q)return;const U=setTimeout(()=>{Oe(Dt=>{const Ke=Dt+1;if(Ke===1)De(ge=>[...ge,{message:"3 Threads Waiters iniciando...",type:"info"}]);else if(Ke===2)De(ge=>[...ge,{message:"Thread 1: Esperando en CV...",type:"info"}]);else if(Ke===3)De(ge=>[...ge,{message:"Thread 2: Esperando en CV...",type:"info"}]);else if(Ke===4)De(ge=>[...ge,{message:"Thread 3: Esperando en CV...",type:"info"}]);else if(Ke===5)De(ge=>[...ge,{message:"Thread Signaler: Iniciando...",type:"success"}]),fe("broadcasting");else if(Ke===6)ae(!0),De(ge=>[...ge,{message:"Thread Signaler: Condicin = true",type:"success"}]);else if(Ke===7)De(ge=>[...ge,{message:"Thread Signaler: pthread_cond_broadcast() ",type:"success"}]);else if(Ke===8)rt(ge=>ge.map((Ft,Zt)=>Zt===0?{...Ft,state:"awakened"}:Ft)),De(ge=>[...ge,{message:"Thread 1: Despertando... ",type:"success"}]);else if(Ke===9)rt(ge=>ge.map((Ft,Zt)=>Zt===1?{...Ft,state:"awakened"}:Ft)),De(ge=>[...ge,{message:"Thread 2: Despertando... ",type:"success"}]);else if(Ke===10)rt(ge=>ge.map((Ft,Zt)=>Zt===2?{...Ft,state:"awakened"}:Ft)),De(ge=>[...ge,{message:"Thread 3: Despertando... ",type:"success"}]);else if(Ke===11)fe("done"),De(ge=>[...ge,{message:"Thread Signaler: Broadcast completado",type:"success"}]);else if(Ke===12)rt(ge=>ge.map((Ft,Zt)=>Zt===0?{...Ft,state:"done"}:Ft)),De(ge=>[...ge,{message:"Thread 1: Procesamiento completo",type:"success"}]);else if(Ke===13)rt(ge=>ge.map((Ft,Zt)=>Zt===1?{...Ft,state:"done"}:Ft)),De(ge=>[...ge,{message:"Thread 2: Procesamiento completo",type:"success"}]);else if(Ke===14)rt(ge=>ge.map((Ft,Zt)=>Zt===2?{...Ft,state:"done"}:Ft)),De(ge=>[...ge,{message:"Thread 3: Procesamiento completo",type:"success"}]);else if(Ke===15)return De(ge=>[...ge,{message:" Broadcast despert TODOS los threads!",type:"success"}]),$(!1),Ke;return Ke})},ve);return()=>clearTimeout(U)},[q,z,ve]),c.useEffect(()=>{if(!Ge)return;const U=setTimeout(()=>{xt(Dt=>{const Ke=Dt+1;if(Ke===1)we(ge=>[...ge,{message:"Thread Waiter: Iniciando con timeout de 5s...",type:"info"}]),kt("waiting"),R(5);else if(Ke>=2&&Ke<=6){const ge=6-Ke;R(ge),we(Ft=>[...Ft,{message:`Thread Waiter: Esperando... (${ge}s restantes)`,type:"warning"}])}else if(Ke===7)ne?(It(!0),we(ge=>[...ge,{message:"Thread Signaler: Seal enviada a tiempo! ",type:"success"}]),kt("success")):(we(ge=>[...ge,{message:" TIMEOUT! Condicin no cumplida en 5 segundos",type:"error"}]),kt("timeout"));else if(Ke===8)we(ne?ge=>[...ge,{message:"Thread Waiter: Procesando datos...",type:"success"}]:ge=>[...ge,{message:"Thread Waiter: Recovery - continuando sin dato",type:"warning"}]);else if(Ke===9)return we(ne?ge=>[...ge,{message:" Datos recibidos antes del timeout!",type:"success"}]:ge=>[...ge,{message:" Timeout detect problema - evit deadlock!",type:"warning"}]),kt("done"),ze(!1),Ke;return Ke})},_e);return()=>clearTimeout(U)},[Ge,We,_e,ne]);const Ct=()=>{i(!1),m(0),x(!1),b("checking"),f("idle"),j([])},ye=()=>{w(!1),L(0),J(0),I("waiting"),be("idle"),G([])},gt=()=>{Ce(!1),Q(0),ue(!1),T(0),re("checking"),K("idle"),O([])},Fe=()=>{$(!1),Oe(0),ae(!1),rt([{id:1,state:"waiting"},{id:2,state:"waiting"},{id:3,state:"waiting"}]),fe("idle"),De([])},B=()=>{ze(!1),xt(0),It(!1),kt("waiting"),R(5),Ve(!1),we([])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e.jsx("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border-b border-pink-700/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-pink-600 rounded-lg",children:e.jsx(Ia,{className:"size-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400",children:"Lost Wakeup Problem"}),e.jsx("p",{className:"text-gray-300 mt-2",children:"Problema donde un thread pierde una seal de wake-up porque lleg antes de que el thread estuviera esperando"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-pink-700/30",children:[e.jsx("h2",{className:"text-xl font-semibold text-pink-300 mb-3",children:"Qu es Lost Wakeup?"}),e.jsx("p",{className:"text-gray-300 mb-4",children:'El problema de Lost Wakeup ocurre cuando un thread sealiza (wakeup) a otro thread antes de que este ltimo comience a esperar. La seal se "pierde" porque no hay nadie esperndola, y el thread que eventualmente espera puede bloquearse indefinidamente.'}),e.jsxs("div",{className:"bg-pink-900/20 p-4 rounded border border-pink-600/30",children:[e.jsx("h3",{className:"font-semibold text-pink-300 mb-2",children:"Escenario Problemtico:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-300 text-sm",children:[e.jsx("li",{children:"Thread A verifica condicin (falsa), decide esperar"}),e.jsx("li",{children:"Thread B cambia condicin, enva seal (pero A an no est esperando)"}),e.jsx("li",{children:"Thread A comienza a esperar (seal ya se perdi)"}),e.jsx("li",{children:"Thread A queda bloqueado indefinidamente"})]})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Da,{type:"single",defaultValue:"pseudocodes",collapsible:!0,className:"space-y-4",children:e.jsxs(sa,{value:"pseudocodes",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oa,{className:"size-6 text-pink-400"}),e.jsx("span",{className:"text-2xl font-semibold text-white",children:"Pseudocdigos de Soluciones"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"cv",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"cv",className:"data-[state=active]:bg-pink-600",children:"Condition Variables"}),e.jsx(ce,{value:"semaphore",className:"data-[state=active]:bg-pink-600",children:"Semforos"}),e.jsx(ce,{value:"state",className:"data-[state=active]:bg-pink-600",children:"State Tracking"}),e.jsx(ce,{value:"broadcast",className:"data-[state=active]:bg-pink-600",children:"Broadcast"}),e.jsx(ce,{value:"timeout",className:"data-[state=active]:bg-pink-600",children:"Timeout"})]}),e.jsx(me,{value:"cv",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-slate-800/20 p-6 rounded-lg border border-blue-700/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-blue-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:""}),"Solucin 1: Condition Variables Correctamente"]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 mb-4",children:"Uso correcto de condition variables con mutex para garantizar atomicidad entre verificacin de condicin y espera. La clave es mantener el mutex durante toda la operacin crtica."})}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-blue-600/30 mb-6",children:[e.jsx("h4",{className:"font-semibold text-blue-300 mb-3",children:"Conceptos Clave:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Mutex + Condition Variable:"})," Siempre usados juntos"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Atomicidad:"})," wait() libera mutex atmicamente al esperar"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"While Loop:"})," Re-verificar condicin despus de despertar"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Signal bajo Lock:"})," Sealizar con mutex adquirido"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Estructuras de Datos:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-green-400 overflow-x-auto",children:`struct SharedState {
    pthread_mutex_t mutex;        // Mutex para proteger estado
    pthread_cond_t  cond_var;     // Condition variable
    bool            condition;     // Condicin que esperamos
    int             data;          // Datos compartidos
    bool            ready;         // Estado de preparacin
};

// Inicializacin
void init_shared_state(SharedState* state) {
    pthread_mutex_init(&state->mutex, NULL);
    pthread_cond_init(&state->cond_var, NULL);
    state->condition = false;
    state->data = 0;
    state->ready = false;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Thread Waiter (Consumer):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-cyan-400 overflow-x-auto",children:`void* waiter_thread(void* arg) {
    SharedState* state = (SharedState*)arg;
    
    // 1. Adquirir mutex ANTES de verificar condicin
    pthread_mutex_lock(&state->mutex);
    
    // 2. Esperar mientras condicin no se cumpla (WHILE, no IF)
    while (!state->condition) {
        // wait() hace 3 cosas ATMICAMENTE:
        // a) Libera el mutex
        // b) Pone thread en cola de espera
        // c) Al despertar, re-adquiere el mutex
        pthread_cond_wait(&state->cond_var, &state->mutex);
        
        // Al despertar, tenemos el mutex nuevamente
        // Re-verificamos condicin por spurious wakeups
    }
    
    // 3. Condicin es verdadera, procesamos datos
    printf("Condicin cumplida, data = %d\\n", state->data);
    
    // 4. Modificar estado si necesario
    state->ready = true;
    
    // 5. Liberar mutex
    pthread_mutex_unlock(&state->mutex);
    
    return NULL;
}

// Ejemplo con timeout
int waiter_with_timeout(SharedState* state, int seconds) {
    struct timespec timeout;
    clock_gettime(CLOCK_REALTIME, &timeout);
    timeout.tv_sec += seconds;
    
    pthread_mutex_lock(&state->mutex);
    
    int result = 0;
    while (!state->condition && result == 0) {
        result = pthread_cond_timedwait(
            &state->cond_var,
            &state->mutex,
            &timeout
        );
    }
    
    if (result == ETIMEDOUT) {
        printf("Timeout esperando condicin\\n");
        pthread_mutex_unlock(&state->mutex);
        return -1;
    }
    
    // Condicin cumplida
    printf("Data recibida: %d\\n", state->data);
    pthread_mutex_unlock(&state->mutex);
    return 0;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Thread Signaler (Producer):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-yellow-400 overflow-x-auto",children:`void* signaler_thread(void* arg) {
    SharedState* state = (SharedState*)arg;
    
    // Simular trabajo
    sleep(1);
    
    // 1. Adquirir mutex ANTES de modificar estado
    pthread_mutex_lock(&state->mutex);
    
    // 2. Modificar condicin y datos
    state->data = 42;
    state->condition = true;
    
    printf("Condicin establecida, sealizando...\\n");
    
    // 3. Sealizar (con mutex adquirido)
    // pthread_cond_signal():  Despierta 1 thread
    // pthread_cond_broadcast(): Despierta TODOS los threads
    pthread_cond_signal(&state->cond_var);
    
    // 4. Liberar mutex
    pthread_mutex_unlock(&state->mutex);
    
    // Nota: El waiter despertar DESPUS de que liberemos el mutex
    // Si intentara despertar antes, tendra que esperar el mutex
    
    return NULL;
}

// Versin con mltiples waiters
void signal_all_waiters(SharedState* state, int new_data) {
    pthread_mutex_lock(&state->mutex);
    
    state->data = new_data;
    state->condition = true;
    
    // Broadcast despierta TODOS los threads esperando
    pthread_cond_broadcast(&state->cond_var);
    
    pthread_mutex_unlock(&state->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-300 mb-3",children:"Programa Principal:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-purple-400 overflow-x-auto",children:`int main() {
    SharedState state;
    pthread_t waiter, signaler;
    
    // Inicializar
    init_shared_state(&state);
    
    // Crear threads en cualquier orden
    // (El orden NO importa con condition variables correctas)
    pthread_create(&waiter, NULL, waiter_thread, &state);
    pthread_create(&signaler, NULL, signaler_thread, &state);
    
    // Esperar ambos threads
    pthread_join(waiter, NULL);
    pthread_join(signaler, NULL);
    
    // Cleanup
    pthread_mutex_destroy(&state.mutex);
    pthread_cond_destroy(&state.cond_var);
    
    return 0;
}

// Ejemplo con mltiples waiters
int main_multiple_waiters() {
    SharedState state;
    pthread_t waiters[3], signaler;
    
    init_shared_state(&state);
    
    // Crear mltiples waiters
    for (int i = 0; i < 3; i++) {
        pthread_create(&waiters[i], NULL, waiter_thread, &state);
    }
    
    // Crear signaler
    pthread_create(&signaler, NULL, signaler_thread, &state);
    
    // Join todos
    for (int i = 0; i < 3; i++) {
        pthread_join(waiters[i], NULL);
    }
    pthread_join(signaler, NULL);
    
    pthread_mutex_destroy(&state.mutex);
    pthread_cond_destroy(&state.cond_var);
    
    return 0;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-300 mb-3",children:" Patrones Incorrectos (Causan Lost Wakeup):"}),e.jsx("div",{className:"bg-red-950/30 p-4 rounded-lg border border-red-600/30",children:e.jsx("pre",{className:"text-sm text-red-400 overflow-x-auto",children:`// ERROR 1: Verificar sin mutex
void bad_waiter_1() {
    //  Race condition entre check y wait
    if (!condition) {
        pthread_mutex_lock(&mutex);
        pthread_cond_wait(&cond_var, &mutex);  // Puede perder signal
        pthread_mutex_unlock(&mutex);
    }
}

// ERROR 2: Usar IF en lugar de WHILE
void bad_waiter_2() {
    pthread_mutex_lock(&mutex);
    if (!condition) {  //  Debera ser WHILE
        pthread_cond_wait(&cond_var, &mutex);
        // No re-verifica despus de spurious wakeup
    }
    pthread_mutex_unlock(&mutex);
}

// ERROR 3: No mantener mutex al sealizar
void bad_signaler() {
    condition = true;  //  Modificar sin mutex
    pthread_cond_signal(&cond_var);  //  Signal sin mutex
}

// ERROR 4: Liberar mutex antes de wait
void bad_waiter_3() {
    pthread_mutex_lock(&mutex);
    if (!condition) {
        pthread_mutex_unlock(&mutex);  //  Libera antes de wait
        pthread_cond_wait(&cond_var, &mutex);  // Race condition
    }
}`})})]}),e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-lg border border-green-600/30",children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-3",children:" Patrn Correcto Completo:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg",children:e.jsx("pre",{className:"text-sm text-green-400 overflow-x-auto",children:`// WAITER: Patrn correcto
pthread_mutex_lock(&mutex);
while (!condition) {              // WHILE, no IF
    pthread_cond_wait(&cv, &mutex);  // Atomic unlock + wait
}
// Hacer trabajo con condicin cumplida
pthread_mutex_unlock(&mutex);

// SIGNALER: Patrn correcto
pthread_mutex_lock(&mutex);
condition = true;                 // Modificar bajo lock
pthread_cond_signal(&cv);         // Signal bajo lock
pthread_mutex_unlock(&mutex);

// Propiedades garantizadas:
// 1. No lost wakeups (signal nunca se pierde)
// 2. No spurious wakeups ignorados (while loop)
// 3. No race conditions (todo bajo mutex)
// 4. Ordenamiento correcto (mutex garantiza happens-before)`})})]})]})}),e.jsx(me,{value:"semaphore",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-slate-800/20 p-6 rounded-lg border border-purple-700/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-purple-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:""}),"Solucin 2: Semforos en lugar de Signals"]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 mb-4",children:'Los semforos tienen un contador interno que "recuerda" signals previos, evitando el problema de lost wakeup. Si se sealiza antes de esperar, el contador se incrementa y el wait posterior ser inmediato.'})}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-purple-600/30 mb-6",children:[e.jsx("h4",{className:"font-semibold text-purple-300 mb-3",children:"Conceptos Clave:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Contador Persistente:"})," Semforo mantiene cuenta de signals"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"sem_post():"})," Incrementa contador (signal)"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"sem_wait():"})," Decrementa contador o bloquea si es 0"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"No Lost Signals:"})," Signals previos se preservan"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-3",children:"Estructuras de Datos:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-green-400 overflow-x-auto",children:`#include <semaphore.h>
#include <pthread.h>

struct SemaphoreState {
    sem_t       semaphore;     // Semforo para sincronizacin
    pthread_mutex_t mutex;     // Mutex para proteger datos
    int         data;          // Datos compartidos
    bool        ready;         // Estado adicional
};

// Inicializacin
void init_semaphore_state(SemaphoreState* state) {
    // Inicializar semforo en 0 (bloqueado inicialmente)
    // Parmetros: sem, pshared, initial_value
    sem_init(&state->semaphore, 0, 0);
    
    pthread_mutex_init(&state->mutex, NULL);
    state->data = 0;
    state->ready = false;
}

// Cleanup
void destroy_semaphore_state(SemaphoreState* state) {
    sem_destroy(&state->semaphore);
    pthread_mutex_destroy(&state->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-3",children:"Patrn Bsico (Sincronizacin Simple):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-cyan-400 overflow-x-auto",children:`void* waiter_thread(void* arg) {
    SemaphoreState* state = (SemaphoreState*)arg;
    
    printf("Waiter: Esperando seal...\\n");
    
    // Esperar seal (bloquea si contador es 0)
    // Si contador > 0, decrementa y contina inmediatamente
    sem_wait(&state->semaphore);
    
    printf("Waiter: Seal recibida!\\n");
    
    // Leer datos (proteger con mutex si hay modificaciones)
    pthread_mutex_lock(&state->mutex);
    printf("Waiter: Data = %d\\n", state->data);
    pthread_mutex_unlock(&state->mutex);
    
    return NULL;
}

void* signaler_thread(void* arg) {
    SemaphoreState* state = (SemaphoreState*)arg;
    
    sleep(1);  // Simular trabajo
    
    // Preparar datos (proteger con mutex)
    pthread_mutex_lock(&state->mutex);
    state->data = 42;
    state->ready = true;
    pthread_mutex_unlock(&state->mutex);
    
    printf("Signaler: Enviando seal...\\n");
    
    // Incrementar contador del semforo
    // Si hay waiters, despierta uno
    // Si no hay waiters, incrementa contador (no se pierde!)
    sem_post(&state->semaphore);
    
    printf("Signaler: Seal enviada\\n");
    
    return NULL;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-3",children:"Semforo Counting (Mltiples Recursos):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-yellow-400 overflow-x-auto",children:`struct ResourcePool {
    sem_t available_resources;  // Contador de recursos disponibles
    pthread_mutex_t mutex;
    int resource_ids[10];       // Pool de recursos
    int count;
};

void init_resource_pool(ResourcePool* pool, int initial_count) {
    // Inicializar con N recursos disponibles
    sem_init(&pool->available_resources, 0, initial_count);
    pthread_mutex_init(&pool->mutex, NULL);
    pool->count = initial_count;
    
    for (int i = 0; i < initial_count; i++) {
        pool->resource_ids[i] = i;
    }
}

// Adquirir recurso
int acquire_resource(ResourcePool* pool) {
    // Esperar hasta que haya recurso disponible
    // Decrementa contador atmicamente
    sem_wait(&pool->available_resources);
    
    // Obtener recurso del pool
    pthread_mutex_lock(&pool->mutex);
    int resource_id = pool->resource_ids[--pool->count];
    pthread_mutex_unlock(&pool->mutex);
    
    printf("Thread %ld: Adquiri recurso %d\\n", 
           pthread_self(), resource_id);
    
    return resource_id;
}

// Liberar recurso
void release_resource(ResourcePool* pool, int resource_id) {
    // Devolver recurso al pool
    pthread_mutex_lock(&pool->mutex);
    pool->resource_ids[pool->count++] = resource_id;
    pthread_mutex_unlock(&pool->mutex);
    
    printf("Thread %ld: Liber recurso %d\\n", 
           pthread_self(), resource_id);
    
    // Incrementar contador (sealizar disponibilidad)
    sem_post(&pool->available_resources);
}

void* worker_thread(void* arg) {
    ResourcePool* pool = (ResourcePool*)arg;
    
    // Adquirir recurso (puede esperar si no hay disponibles)
    int resource = acquire_resource(pool);
    
    // Usar recurso
    sleep(2);
    printf("Thread %ld: Usando recurso %d\\n", 
           pthread_self(), resource);
    
    // Liberar recurso
    release_resource(pool, resource);
    
    return NULL;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-3",children:"Producer-Consumer con Semforos:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-orange-400 overflow-x-auto",children:`#define BUFFER_SIZE 10

struct BoundedBuffer {
    sem_t empty_slots;   // Contador de espacios vacos
    sem_t full_slots;    // Contador de items disponibles
    pthread_mutex_t mutex;
    int buffer[BUFFER_SIZE];
    int in;              // ndice de insercin
    int out;             // ndice de extraccin
};

void init_bounded_buffer(BoundedBuffer* bb) {
    sem_init(&bb->empty_slots, 0, BUFFER_SIZE);  // Inicialmente todos vacos
    sem_init(&bb->full_slots, 0, 0);              // Inicialmente ninguno lleno
    pthread_mutex_init(&bb->mutex, NULL);
    bb->in = 0;
    bb->out = 0;
}

void produce(BoundedBuffer* bb, int item) {
    // Esperar por espacio vaco
    // Si buffer lleno, bloquea aqu
    sem_wait(&bb->empty_slots);
    
    // Insertar item (proteger con mutex)
    pthread_mutex_lock(&bb->mutex);
    bb->buffer[bb->in] = item;
    bb->in = (bb->in + 1) % BUFFER_SIZE;
    printf("Produced: %d\\n", item);
    pthread_mutex_unlock(&bb->mutex);
    
    // Sealizar que hay nuevo item disponible
    sem_post(&bb->full_slots);
}

int consume(BoundedBuffer* bb) {
    // Esperar por item disponible
    // Si buffer vaco, bloquea aqu
    sem_wait(&bb->full_slots);
    
    // Extraer item (proteger con mutex)
    pthread_mutex_lock(&bb->mutex);
    int item = bb->buffer[bb->out];
    bb->out = (bb->out + 1) % BUFFER_SIZE;
    printf("Consumed: %d\\n", item);
    pthread_mutex_unlock(&bb->mutex);
    
    // Sealizar que hay nuevo espacio vaco
    sem_post(&bb->empty_slots);
    
    return item;
}

void* producer(void* arg) {
    BoundedBuffer* bb = (BoundedBuffer*)arg;
    for (int i = 0; i < 20; i++) {
        produce(bb, i);
        usleep(100000);  // 100ms
    }
    return NULL;
}

void* consumer(void* arg) {
    BoundedBuffer* bb = (BoundedBuffer*)arg;
    for (int i = 0; i < 20; i++) {
        int item = consume(bb);
        usleep(150000);  // 150ms
    }
    return NULL;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-3",children:"Semforo con Timeout:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-pink-400 overflow-x-auto",children:`#include <time.h>
#include <errno.h>

int wait_with_timeout(sem_t* sem, int timeout_seconds) {
    struct timespec ts;
    
    // Calcular tiempo absoluto de timeout
    clock_gettime(CLOCK_REALTIME, &ts);
    ts.tv_sec += timeout_seconds;
    
    // Esperar con timeout
    int result = sem_timedwait(sem, &ts);
    
    if (result == -1) {
        if (errno == ETIMEDOUT) {
            printf("Timeout: No se recibi seal en %d segundos\\n", 
                   timeout_seconds);
            return -1;
        } else {
            perror("sem_timedwait");
            return -1;
        }
    }
    
    printf("Seal recibida dentro del timeout\\n");
    return 0;
}

void* waiter_with_timeout_thread(void* arg) {
    sem_t* sem = (sem_t*)arg;
    
    printf("Esperando seal (timeout 5s)...\\n");
    
    if (wait_with_timeout(sem, 5) == 0) {
        printf("Procesando despus de recibir seal\\n");
    } else {
        printf("Procediendo sin seal (timeout)\\n");
    }
    
    return NULL;
}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-lg border border-green-600/30",children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-3",children:" Ventajas:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:" No lost wakeups (contador persiste)"}),e.jsx("li",{children:" Ms simple que condition variables"}),e.jsx("li",{children:" No necesita loop de verificacin"}),e.jsx("li",{children:" Ideal para producer-consumer"}),e.jsx("li",{children:" Soporte para counting semaphore"})]})]}),e.jsxs("div",{className:"bg-red-900/20 p-4 rounded-lg border border-red-600/30",children:[e.jsx("h4",{className:"font-semibold text-red-300 mb-3",children:" Limitaciones:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:" No puede esperar mltiples condiciones"}),e.jsx("li",{children:" No hay broadcast nativo"}),e.jsx("li",{children:" Menos flexible que CV"}),e.jsx("li",{children:" Difcil debugging del contador"}),e.jsx("li",{children:" No es reentrant en algunos sistemas"})]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600/30",children:[e.jsx("h4",{className:"font-semibold text-blue-300 mb-3",children:"Comparacin: Semforo vs Condition Variable"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-blue-600/50",children:[e.jsx("th",{className:"text-left p-2 text-blue-300",children:"Caracterstica"}),e.jsx("th",{className:"text-left p-2 text-blue-300",children:"Semforo"}),e.jsx("th",{className:"text-left p-2 text-blue-300",children:"Condition Variable"})]})}),e.jsxs("tbody",{className:"text-gray-300",children:[e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"p-2",children:"Lost Wakeup"}),e.jsx("td",{className:"p-2 text-green-400",children:" Evita (contador)"}),e.jsx("td",{className:"p-2 text-yellow-400",children:"Requiere mutex"})]}),e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"p-2",children:"Complejidad"}),e.jsx("td",{className:"p-2 text-green-400",children:"Simple"}),e.jsx("td",{className:"p-2 text-yellow-400",children:"Media (requiere mutex)"})]}),e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"p-2",children:"Broadcast"}),e.jsx("td",{className:"p-2 text-red-400",children:"No nativo"}),e.jsx("td",{className:"p-2 text-green-400",children:" Soportado"})]}),e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"p-2",children:"Mltiples Condiciones"}),e.jsx("td",{className:"p-2 text-red-400",children:"Difcil"}),e.jsx("td",{className:"p-2 text-green-400",children:" Fcil"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:"Uso Tpico"}),e.jsx("td",{className:"p-2",children:"Producer-Consumer"}),e.jsx("td",{className:"p-2",children:"Sincronizacin compleja"})]})]})]})})]})]})}),e.jsx(me,{value:"state",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-slate-800/20 p-6 rounded-lg border border-green-700/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-green-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:""}),"Solucin 3: State Tracking (Seguimiento de Estado)"]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 mb-4",children:"Mantener un estado explcito que persiste entre sealizacin y espera. El waiter verifica el estado antes de esperar, evitando esperas innecesarias si la condicin ya se cumpli."})}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-600/30 mb-6",children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-3",children:"Conceptos Clave:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Estado Persistente:"})," Flag booleano o contador que persiste"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Check Before Wait:"})," Verificar estado antes de esperar"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Proteccin Atmica:"})," Mutex protege estado y signal"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Event History:"})," Rastrea si evento ya ocurri"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-3",children:"Patrn Bsico (Flag Booleano):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-green-400 overflow-x-auto",children:`struct StateTracking {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    bool            event_occurred;  // Clave! Persiste el estado
    int             data;
};

void init_state_tracking(StateTracking* st) {
    pthread_mutex_init(&st->mutex, NULL);
    pthread_cond_init(&st->cond_var, NULL);
    st->event_occurred = false;
    st->data = 0;
}

// WAITER: Verifica estado antes de esperar
void* waiter_thread(void* arg) {
    StateTracking* st = (StateTracking*)arg;
    
    pthread_mutex_lock(&st->mutex);
    
    // Verificar estado - si ya ocurri, no esperamos
    while (!st->event_occurred) {
        printf("Waiter: Evento no ocurrido, esperando...\\n");
        pthread_cond_wait(&st->cond_var, &st->mutex);
    }
    
    // Evento ya ocurri (o acabamos de recibirlo)
    printf("Waiter: Evento detectado! Data = %d\\n", st->data);
    
    // Opcional: Resetear para permitir re-uso
    st->event_occurred = false;
    
    pthread_mutex_unlock(&st->mutex);
    return NULL;
}

// SIGNALER: Establece estado y sealiza
void* signaler_thread(void* arg) {
    StateTracking* st = (StateTracking*)arg;
    
    sleep(1);
    
    pthread_mutex_lock(&st->mutex);
    
    // Establecer estado ANTES de sealizar
    st->data = 42;
    st->event_occurred = true;  // Marca que evento ocurri
    
    printf("Signaler: Evento marcado, sealizando...\\n");
    
    pthread_cond_signal(&st->cond_var);
    
    pthread_mutex_unlock(&st->mutex);
    return NULL;
}

// Si waiter llega tarde, ve event_occurred=true y no espera
// Si waiter llega temprano, espera pero estado est protegido`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-3",children:"Tracking con Contador (Mltiples Eventos):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-cyan-400 overflow-x-auto",children:`struct EventCounter {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    int             event_count;     // Cuenta cuntos eventos ocurrieron
    int             processed_count; // Cuntos procesamos
};

void init_event_counter(EventCounter* ec) {
    pthread_mutex_init(&ec->mutex, NULL);
    pthread_cond_init(&ec->cond_var, NULL);
    ec->event_count = 0;
    ec->processed_count = 0;
}

// Producer: Incrementa contador
void signal_event(EventCounter* ec, int value) {
    pthread_mutex_lock(&ec->mutex);
    
    ec->event_count++;
    printf("Event #%d signaled\\n", ec->event_count);
    
    pthread_cond_signal(&ec->cond_var);
    
    pthread_mutex_unlock(&ec->mutex);
}

// Consumer: Procesa eventos pendientes
void* event_processor(void* arg) {
    EventCounter* ec = (EventCounter*)arg;
    
    pthread_mutex_lock(&ec->mutex);
    
    while (ec->processed_count < 10) {  // Procesar 10 eventos
        // Esperar mientras no haya eventos nuevos
        while (ec->event_count == ec->processed_count) {
            printf("Processor: Esperando eventos...\\n");
            pthread_cond_wait(&ec->cond_var, &ec->mutex);
        }
        
        // Procesar eventos pendientes
        while (ec->processed_count < ec->event_count) {
            ec->processed_count++;
            printf("Processor: Procesado evento #%d\\n", 
                   ec->processed_count);
        }
    }
    
    pthread_mutex_unlock(&ec->mutex);
    return NULL;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-3",children:"Estado Complejo (Mquina de Estados):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-yellow-400 overflow-x-auto",children:`enum TaskState {
    IDLE,
    PENDING,
    RUNNING,
    COMPLETED,
    FAILED
};

struct Task {
    pthread_mutex_t mutex;
    pthread_cond_t  state_changed;
    TaskState       state;
    int             result;
    char            error_msg[256];
};

void init_task(Task* task) {
    pthread_mutex_init(&task->mutex, NULL);
    pthread_cond_init(&task->state_changed, NULL);
    task->state = IDLE;
    task->result = 0;
    task->error_msg[0] = '\\0';
}

// Worker: Ejecuta tarea y actualiza estado
void* worker_thread(void* arg) {
    Task* task = (Task*)arg;
    
    pthread_mutex_lock(&task->mutex);
    task->state = RUNNING;
    pthread_cond_broadcast(&task->state_changed);
    pthread_mutex_unlock(&task->mutex);
    
    printf("Worker: Ejecutando tarea...\\n");
    sleep(2);  // Simular trabajo
    
    // Completar con xito o error
    pthread_mutex_lock(&task->mutex);
    if (rand() % 2) {
        task->state = COMPLETED;
        task->result = 42;
    } else {
        task->state = FAILED;
        strcpy(task->error_msg, "Error simulado");
    }
    pthread_cond_broadcast(&task->state_changed);
    pthread_mutex_unlock(&task->mutex);
    
    return NULL;
}

// Waiter: Espera estado especfico
TaskState wait_for_completion(Task* task) {
    pthread_mutex_lock(&task->mutex);
    
    // Esperar hasta que tarea complete (xito o error)
    while (task->state != COMPLETED && task->state != FAILED) {
        printf("Waiting for task completion...\\n");
        pthread_cond_wait(&task->state_changed, &task->mutex);
    }
    
    TaskState final_state = task->state;
    
    if (final_state == COMPLETED) {
        printf("Task completed successfully: %d\\n", task->result);
    } else {
        printf("Task failed: %s\\n", task->error_msg);
    }
    
    pthread_mutex_unlock(&task->mutex);
    return final_state;
}

// Enviar tarea
void submit_task(Task* task) {
    pthread_mutex_lock(&task->mutex);
    task->state = PENDING;
    pthread_cond_broadcast(&task->state_changed);
    pthread_mutex_unlock(&task->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-3",children:"Message Queue con State Tracking:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-purple-400 overflow-x-auto",children:`#define MAX_MESSAGES 100

struct Message {
    int id;
    int value;
    time_t timestamp;
};

struct MessageQueue {
    pthread_mutex_t mutex;
    pthread_cond_t  not_empty;
    pthread_cond_t  not_full;
    
    Message messages[MAX_MESSAGES];
    int     count;          // Estado: cuntos mensajes
    int     head;
    int     tail;
    bool    shutdown;       // Estado: shutdown solicitado
};

void init_message_queue(MessageQueue* mq) {
    pthread_mutex_init(&mq->mutex, NULL);
    pthread_cond_init(&mq->not_empty, NULL);
    pthread_cond_init(&mq->not_full, NULL);
    mq->count = 0;
    mq->head = 0;
    mq->tail = 0;
    mq->shutdown = false;
}

// Producer
void enqueue_message(MessageQueue* mq, Message msg) {
    pthread_mutex_lock(&mq->mutex);
    
    // Esperar si cola llena (verificar estado)
    while (mq->count == MAX_MESSAGES && !mq->shutdown) {
        pthread_cond_wait(&mq->not_full, &mq->mutex);
    }
    
    if (mq->shutdown) {
        pthread_mutex_unlock(&mq->mutex);
        return;
    }
    
    // Agregar mensaje
    mq->messages[mq->tail] = msg;
    mq->tail = (mq->tail + 1) % MAX_MESSAGES;
    mq->count++;
    
    // Sealizar que hay nuevo mensaje
    pthread_cond_signal(&mq->not_empty);
    
    pthread_mutex_unlock(&mq->mutex);
}

// Consumer
bool dequeue_message(MessageQueue* mq, Message* msg) {
    pthread_mutex_lock(&mq->mutex);
    
    // Esperar mientras vaca (verificar estado)
    while (mq->count == 0 && !mq->shutdown) {
        pthread_cond_wait(&mq->not_empty, &mq->mutex);
    }
    
    // Si shutdown y vaca, terminar
    if (mq->shutdown && mq->count == 0) {
        pthread_mutex_unlock(&mq->mutex);
        return false;
    }
    
    // Extraer mensaje
    *msg = mq->messages[mq->head];
    mq->head = (mq->head + 1) % MAX_MESSAGES;
    mq->count--;
    
    // Sealizar que hay espacio
    pthread_cond_signal(&mq->not_full);
    
    pthread_mutex_unlock(&mq->mutex);
    return true;
}

// Shutdown graceful
void shutdown_queue(MessageQueue* mq) {
    pthread_mutex_lock(&mq->mutex);
    mq->shutdown = true;
    
    // Despertar todos los waiters
    pthread_cond_broadcast(&mq->not_empty);
    pthread_cond_broadcast(&mq->not_full);
    
    pthread_mutex_unlock(&mq->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-3",children:"Generation Counter (Detectar Cambios):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-orange-400 overflow-x-auto",children:`struct GenerationState {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    unsigned long   generation;  // Incrementa en cada cambio
    int             value;
};

void init_generation_state(GenerationState* gs) {
    pthread_mutex_init(&gs->mutex, NULL);
    pthread_cond_init(&gs->cond_var, NULL);
    gs->generation = 0;
    gs->value = 0;
}

// Actualizar valor e incrementar generacin
void update_value(GenerationState* gs, int new_value) {
    pthread_mutex_lock(&gs->mutex);
    
    gs->value = new_value;
    gs->generation++;  // Nueva generacin
    
    printf("Updated to generation %lu, value=%d\\n", 
           gs->generation, gs->value);
    
    pthread_cond_broadcast(&gs->cond_var);
    
    pthread_mutex_unlock(&gs->mutex);
}

// Esperar cambio especfico desde generacin conocida
int wait_for_change(GenerationState* gs, unsigned long last_gen) {
    pthread_mutex_lock(&gs->mutex);
    
    // Esperar hasta que generacin cambie
    while (gs->generation == last_gen) {
        printf("Waiting for generation change from %lu...\\n", last_gen);
        pthread_cond_wait(&gs->cond_var, &gs->mutex);
    }
    
    int current_value = gs->value;
    unsigned long current_gen = gs->generation;
    
    printf("Detected change: gen %lu -> %lu, value=%d\\n", 
           last_gen, current_gen, current_value);
    
    pthread_mutex_unlock(&gs->mutex);
    return current_value;
}

// Observer que procesa todos los cambios
void* observer_thread(void* arg) {
    GenerationState* gs = (GenerationState*)arg;
    unsigned long my_generation = 0;
    
    for (int i = 0; i < 5; i++) {
        int value = wait_for_change(gs, my_generation);
        
        pthread_mutex_lock(&gs->mutex);
        my_generation = gs->generation;
        pthread_mutex_unlock(&gs->mutex);
        
        printf("Observer processed value %d\\n", value);
    }
    
    return NULL;
}`})})]}),e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-lg border border-green-600/30 mb-6",children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-3",children:" Ventajas del State Tracking:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"No Lost Signals:"})," Estado persiste independientemente del timing"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Debugging Fcil:"})," Estado visible inspecciona fcilmente"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Flexible:"})," Puede rastrear estados complejos (FSM, counters, flags)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Historial:"})," Generation counters permiten detectar cambios perdidos"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Graceful Shutdown:"})," Flag de shutdown permite terminacin limpia"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Mltiples Condiciones:"})," Diferentes estados para diferentes eventos"]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600/30",children:[e.jsx("h4",{className:"font-semibold text-blue-300 mb-3",children:" Best Practices:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Siempre proteger estado con mutex"})," - Evita race conditions"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Usar WHILE loop para verificar"})," - Maneja spurious wakeups"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Broadcast para mltiples waiters"})," - Todos ven el cambio de estado"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Documentar transiciones de estado"})," - FSM diagrams ayudan"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"5."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Generation counters para secuencias"})," - Detecta eventos perdidos"]})]})]})]})]})}),e.jsx(me,{value:"broadcast",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/20 to-slate-800/20 p-6 rounded-lg border border-orange-700/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-orange-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:""}),"Solucin 4: Broadcast en lugar de Signal"]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 mb-4",children:"Usar broadcast (pthread_cond_broadcast) en lugar de signal garantiza que todos los threads esperando sean notificados. Esto es especialmente til cuando mltiples threads pueden estar esperando la misma condicin o cuando no sabemos cuntos waiters hay."})}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-orange-600/30 mb-6",children:[e.jsx("h4",{className:"font-semibold text-orange-300 mb-3",children:"Conceptos Clave:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"pthread_cond_broadcast():"})," Despierta TODOS los threads esperando"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"pthread_cond_signal():"})," Despierta solo UN thread (puede ser el incorrecto)"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Thundering Herd:"})," Trade-off - broadcast puede causar despertar innecesario"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Safety over Performance:"})," Broadcast es ms seguro pero menos eficiente"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3",children:"Signal vs Broadcast:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-lg border border-yellow-600/30",children:[e.jsx("h5",{className:"font-semibold text-yellow-300 mb-2",children:"pthread_cond_signal()"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-300",children:[e.jsx("li",{children:" Despierta 1 thread aleatorio"}),e.jsx("li",{children:" Ms eficiente (menos context switches)"}),e.jsx("li",{children:" Puede despertar thread incorrecto"}),e.jsx("li",{children:" Riesgo de lost wakeup si hay mltiples condiciones"}),e.jsx("li",{children:" Uso: 1 waiter o condicin nica"})]})]}),e.jsxs("div",{className:"bg-orange-900/20 p-4 rounded-lg border border-orange-600/30",children:[e.jsx("h5",{className:"font-semibold text-orange-300 mb-2",children:"pthread_cond_broadcast()"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-300",children:[e.jsx("li",{children:" Despierta TODOS los threads"}),e.jsx("li",{children:" Menos eficiente (ms wakeups)"}),e.jsx("li",{children:" Garantiza que ninguno se pierda"}),e.jsx("li",{children:" Seguro con mltiples condiciones"}),e.jsx("li",{children:" Uso: Mltiples waiters o condiciones"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3",children:"Caso 1: Mltiples Condiciones (Broadcast necesario):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-cyan-400 overflow-x-auto",children:`struct MultiConditionState {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    int             value;
    bool            threshold_reached;  // Condicin 1
    bool            data_ready;         // Condicin 2
    bool            shutdown;           // Condicin 3
};

// Waiter 1: Espera threshold
void* threshold_waiter(void* arg) {
    MultiConditionState* state = (MultiConditionState*)arg;
    
    pthread_mutex_lock(&state->mutex);
    
    while (!state->threshold_reached && !state->shutdown) {
        pthread_cond_wait(&state->cond_var, &state->mutex);
    }
    
    if (state->shutdown) {
        printf("Threshold waiter: Shutdown\\n");
    } else {
        printf("Threshold waiter: Threshold reached (value=%d)\\n", 
               state->value);
    }
    
    pthread_mutex_unlock(&state->mutex);
    return NULL;
}

// Waiter 2: Espera data ready
void* data_waiter(void* arg) {
    MultiConditionState* state = (MultiConditionState*)arg;
    
    pthread_mutex_lock(&state->mutex);
    
    while (!state->data_ready && !state->shutdown) {
        pthread_cond_wait(&state->cond_var, &state->mutex);
    }
    
    if (state->shutdown) {
        printf("Data waiter: Shutdown\\n");
    } else {
        printf("Data waiter: Data ready (value=%d)\\n", 
               state->value);
    }
    
    pthread_mutex_unlock(&state->mutex);
    return NULL;
}

// Signaler: DEBE usar broadcast
void signal_threshold(MultiConditionState* state, int new_value) {
    pthread_mutex_lock(&state->mutex);
    
    state->value = new_value;
    state->threshold_reached = (new_value > 100);
    
    //  signal() puede despertar data_waiter (thread incorrecto!)
    //  broadcast() despierta ambos, cada uno verifica su condicin
    pthread_cond_broadcast(&state->cond_var);
    
    pthread_mutex_unlock(&state->mutex);
}

void signal_data_ready(MultiConditionState* state, int data) {
    pthread_mutex_lock(&state->mutex);
    
    state->value = data;
    state->data_ready = true;
    
    // broadcast() garantiza que data_waiter recibe seal
    pthread_cond_broadcast(&state->cond_var);
    
    pthread_mutex_unlock(&state->mutex);
}

void signal_shutdown(MultiConditionState* state) {
    pthread_mutex_lock(&state->mutex);
    state->shutdown = true;
    
    // broadcast() para despertar TODOS los waiters
    pthread_cond_broadcast(&state->cond_var);
    
    pthread_mutex_unlock(&state->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3",children:"Caso 2: Barrier Pattern (Broadcast esencial):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-green-400 overflow-x-auto",children:`struct Barrier {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    int             count;          // Threads esperando
    int             threshold;      // Total threads necesarios
    int             generation;     // Para reutilizar barrier
};

void init_barrier(Barrier* barrier, int num_threads) {
    pthread_mutex_init(&barrier->mutex, NULL);
    pthread_cond_init(&barrier->cond_var, NULL);
    barrier->count = 0;
    barrier->threshold = num_threads;
    barrier->generation = 0;
}

// Todos los threads esperan hasta que todos lleguen
void barrier_wait(Barrier* barrier) {
    pthread_mutex_lock(&barrier->mutex);
    
    int my_generation = barrier->generation;
    barrier->count++;
    
    if (barrier->count == barrier->threshold) {
        // ltimo thread: despertar a TODOS
        barrier->count = 0;
        barrier->generation++;
        
        printf("Barrier: Todos llegaron, liberando...\\n");
        
        //  signal() solo despertara 1 thread!
        //  broadcast() despierta a TODOS
        pthread_cond_broadcast(&barrier->cond_var);
    } else {
        // Esperar hasta que todos lleguen
        while (my_generation == barrier->generation) {
            pthread_cond_wait(&barrier->cond_var, &barrier->mutex);
        }
    }
    
    pthread_mutex_unlock(&barrier->mutex);
}

void* worker_with_barrier(void* arg) {
    Barrier* barrier = (Barrier*)arg;
    int tid = (int)(long)pthread_self();
    
    printf("Thread %d: Fase 1\\n", tid);
    sleep(rand() % 3);
    
    printf("Thread %d: Lleg al barrier\\n", tid);
    barrier_wait(barrier);
    
    printf("Thread %d: Fase 2 (despus del barrier)\\n", tid);
    
    return NULL;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3",children:"Caso 3: Read-Write Lock (Broadcast selectivo):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-yellow-400 overflow-x-auto",children:`struct RWLock {
    pthread_mutex_t mutex;
    pthread_cond_t  read_cond;
    pthread_cond_t  write_cond;
    int             readers;        // Nmero de readers activos
    int             writers;        // Nmero de writers activos (0 o 1)
    int             waiting_writers;
};

void init_rwlock(RWLock* rwl) {
    pthread_mutex_init(&rwl->mutex, NULL);
    pthread_cond_init(&rwl->read_cond, NULL);
    pthread_cond_init(&rwl->write_cond, NULL);
    rwl->readers = 0;
    rwl->writers = 0;
    rwl->waiting_writers = 0;
}

void read_lock(RWLock* rwl) {
    pthread_mutex_lock(&rwl->mutex);
    
    // Esperar mientras hay writer activo
    while (rwl->writers > 0 || rwl->waiting_writers > 0) {
        pthread_cond_wait(&rwl->read_cond, &rwl->mutex);
    }
    
    rwl->readers++;
    
    pthread_mutex_unlock(&rwl->mutex);
}

void read_unlock(RWLock* rwl) {
    pthread_mutex_lock(&rwl->mutex);
    
    rwl->readers--;
    
    // Si ltimo reader, despertar writers esperando
    if (rwl->readers == 0) {
        // signal() suficiente - solo 1 writer puede proceder
        pthread_cond_signal(&rwl->write_cond);
    }
    
    pthread_mutex_unlock(&rwl->mutex);
}

void write_lock(RWLock* rwl) {
    pthread_mutex_lock(&rwl->mutex);
    
    rwl->waiting_writers++;
    
    // Esperar mientras hay readers o writers activos
    while (rwl->readers > 0 || rwl->writers > 0) {
        pthread_cond_wait(&rwl->write_cond, &rwl->mutex);
    }
    
    rwl->waiting_writers--;
    rwl->writers = 1;
    
    pthread_mutex_unlock(&rwl->mutex);
}

void write_unlock(RWLock* rwl) {
    pthread_mutex_lock(&rwl->mutex);
    
    rwl->writers = 0;
    
    if (rwl->waiting_writers > 0) {
        // Despertar prximo writer
        pthread_cond_signal(&rwl->write_cond);
    } else {
        //  Despertar TODOS los readers esperando
        // broadcast() permite mltiples readers concurrentes
        pthread_cond_broadcast(&rwl->read_cond);
    }
    
    pthread_mutex_unlock(&rwl->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3",children:"Caso 4: Phase Change (Global State Change):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-purple-400 overflow-x-auto",children:`enum Phase {
    INITIALIZING,
    RUNNING,
    PAUSED,
    TERMINATING
};

struct Application {
    pthread_mutex_t mutex;
    pthread_cond_t  phase_changed;
    Phase           current_phase;
    int             active_workers;
};

void init_application(Application* app) {
    pthread_mutex_init(&app->mutex, NULL);
    pthread_cond_init(&app->phase_changed, NULL);
    app->current_phase = INITIALIZING;
    app->active_workers = 0;
}

// Cambiar fase global
void change_phase(Application* app, Phase new_phase) {
    pthread_mutex_lock(&app->mutex);
    
    Phase old_phase = app->current_phase;
    app->current_phase = new_phase;
    
    printf("Phase change: %d -> %d\\n", old_phase, new_phase);
    
    //  Broadcast: TODOS los workers deben reaccionar al cambio
    pthread_cond_broadcast(&app->phase_changed);
    
    pthread_mutex_unlock(&app->mutex);
}

void* worker(void* arg) {
    Application* app = (Application*)arg;
    
    pthread_mutex_lock(&app->mutex);
    
    // Esperar fase RUNNING
    while (app->current_phase == INITIALIZING) {
        pthread_cond_wait(&app->phase_changed, &app->mutex);
    }
    
    app->active_workers++;
    pthread_mutex_unlock(&app->mutex);
    
    // Loop principal
    while (true) {
        pthread_mutex_lock(&app->mutex);
        
        Phase phase = app->current_phase;
        
        if (phase == TERMINATING) {
            app->active_workers--;
            pthread_mutex_unlock(&app->mutex);
            break;
        }
        
        if (phase == PAUSED) {
            // Esperar hasta que no est pausado
            while (app->current_phase == PAUSED) {
                pthread_cond_wait(&app->phase_changed, &app->mutex);
            }
        }
        
        pthread_mutex_unlock(&app->mutex);
        
        // Hacer trabajo
        printf("Worker: Procesando...\\n");
        usleep(500000);
    }
    
    printf("Worker: Terminado\\n");
    return NULL;
}

// Shutdown graceful
void shutdown_application(Application* app) {
    change_phase(app, TERMINATING);
    
    // Esperar que todos los workers terminen
    pthread_mutex_lock(&app->mutex);
    while (app->active_workers > 0) {
        pthread_cond_wait(&app->phase_changed, &app->mutex);
    }
    pthread_mutex_unlock(&app->mutex);
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-orange-300 mb-3",children:"Optimizacin: Broadcast Condicional:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-pink-400 overflow-x-auto",children:`struct SmartQueue {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    int             queue[100];
    int             count;
    int             waiting_consumers;
};

void smart_enqueue(SmartQueue* sq, int item) {
    pthread_mutex_lock(&sq->mutex);
    
    bool was_empty = (sq->count == 0);
    
    sq->queue[sq->count++] = item;
    
    // Optimizacin inteligente:
    if (sq->waiting_consumers == 0) {
        // Sin waiters, no sealizar
    } else if (sq->waiting_consumers == 1) {
        // Solo 1 waiter, signal suficiente
        pthread_cond_signal(&sq->cond_var);
    } else if (was_empty) {
        // Mltiples waiters Y cola estaba vaca
        // Broadcast para que todos tengan oportunidad
        pthread_cond_broadcast(&sq->cond_var);
    } else {
        // Ya haba items, signal para 1 waiter
        pthread_cond_signal(&sq->cond_var);
    }
    
    pthread_mutex_unlock(&sq->mutex);
}

int smart_dequeue(SmartQueue* sq) {
    pthread_mutex_lock(&sq->mutex);
    
    sq->waiting_consumers++;
    
    while (sq->count == 0) {
        pthread_cond_wait(&sq->cond_var, &sq->mutex);
    }
    
    sq->waiting_consumers--;
    
    int item = sq->queue[0];
    for (int i = 0; i < sq->count - 1; i++) {
        sq->queue[i] = sq->queue[i + 1];
    }
    sq->count--;
    
    pthread_mutex_unlock(&sq->mutex);
    return item;
}`})})]}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600/30",children:[e.jsx("h4",{className:"font-semibold text-blue-300 mb-3",children:" Gua de Decisin:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-green-300 mb-2",children:"Usar signal() cuando:"}),e.jsxs("ul",{className:"space-y-1 text-gray-300",children:[e.jsx("li",{children:" Solo 1 thread puede proceder"}),e.jsx("li",{children:" Condicin nica y clara"}),e.jsx("li",{children:" Performance es crtica"}),e.jsx("li",{children:" Producer-Consumer simple"}),e.jsx("li",{children:" FIFO ordering importante"})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-orange-300 mb-2",children:"Usar broadcast() cuando:"}),e.jsxs("ul",{className:"space-y-1 text-gray-300",children:[e.jsx("li",{children:" Mltiples threads deben proceder"}),e.jsx("li",{children:" Mltiples condiciones en mismo CV"}),e.jsx("li",{children:" State change global"}),e.jsx("li",{children:" Barrier o sync point"}),e.jsx("li",{children:" Shutdown/cleanup"})]})]})]})]})]})}),e.jsx(me,{value:"timeout",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-slate-800/20 p-6 rounded-lg border border-red-700/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-red-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-3xl",children:""}),"Solucin 5: Timeout en Esperas"]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 mb-4",children:"Usar timeouts en operaciones de espera previene deadlocks y permite deteccin temprana de problemas. Si un wakeup se pierde, el timeout permite al thread recuperarse en lugar de bloquearse indefinidamente."})}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-red-600/30 mb-6",children:[e.jsx("h4",{className:"font-semibold text-red-300 mb-3",children:"Conceptos Clave:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"pthread_cond_timedwait():"})," Wait con deadline absoluto"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"sem_timedwait():"})," Semaphore wait con timeout"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"ETIMEDOUT:"})," Error code cuando expira timeout"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:""}),e.jsxs("span",{children:[e.jsx("strong",{children:"Absolute Time:"})," Timeouts usan tiempo absoluto, no relativo"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-300 mb-3",children:"Timeout Bsico con Condition Variables:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-cyan-400 overflow-x-auto",children:`#include <time.h>
#include <errno.h>

struct TimeoutState {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    bool            condition_met;
    int             data;
};

// Funcin helper: Calcular timeout absoluto
void set_timeout(struct timespec* ts, int seconds) {
    // Obtener tiempo actual
    clock_gettime(CLOCK_REALTIME, ts);
    
    // Agregar offset
    ts->tv_sec += seconds;
}

// Alternativa con milisegundos
void set_timeout_ms(struct timespec* ts, int milliseconds) {
    clock_gettime(CLOCK_REALTIME, ts);
    
    ts->tv_sec += milliseconds / 1000;
    ts->tv_nsec += (milliseconds % 1000) * 1000000;
    
    // Normalizar si nsec >= 1 segundo
    if (ts->tv_nsec >= 1000000000) {
        ts->tv_sec++;
        ts->tv_nsec -= 1000000000;
    }
}

// Wait con timeout
int wait_with_timeout(TimeoutState* state, int timeout_seconds) {
    struct timespec timeout;
    set_timeout(&timeout, timeout_seconds);
    
    pthread_mutex_lock(&state->mutex);
    
    int result = 0;
    
    while (!state->condition_met && result == 0) {
        // timedwait retorna 0 si despierta por signal
        // retorna ETIMEDOUT si expira timeout
        result = pthread_cond_timedwait(
            &state->cond_var,
            &state->mutex,
            &timeout
        );
    }
    
    if (result == ETIMEDOUT) {
        printf("Timeout: Condicin no cumplida en %d segundos\\n", 
               timeout_seconds);
        pthread_mutex_unlock(&state->mutex);
        return -1;
    }
    
    // Condicin cumplida
    printf("Condicin cumplida: data=%d\\n", state->data);
    
    pthread_mutex_unlock(&state->mutex);
    return 0;
}

// Ejemplo con retry logic
int wait_with_retry(TimeoutState* state, int retries, int timeout_sec) {
    for (int i = 0; i < retries; i++) {
        printf("Intento %d/%d\\n", i + 1, retries);
        
        if (wait_with_timeout(state, timeout_sec) == 0) {
            return 0;  // xito
        }
        
        printf("Timeout, reintentando...\\n");
    }
    
    printf("Error: Fallaron todos los intentos\\n");
    return -1;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-300 mb-3",children:"Timeout con Semforos:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-green-400 overflow-x-auto",children:`#include <semaphore.h>

struct SemaphoreTimeout {
    sem_t sem;
    int   resource_available;
};

// Adquirir recurso con timeout
int acquire_with_timeout(SemaphoreTimeout* st, int timeout_sec) {
    struct timespec ts;
    set_timeout(&ts, timeout_sec);
    
    int result = sem_timedwait(&st->sem, &ts);
    
    if (result == -1) {
        if (errno == ETIMEDOUT) {
            printf("Timeout: Recurso no disponible\\n");
            return -1;
        } else if (errno == EINTR) {
            printf("Interrupted: Reintentando...\\n");
            return acquire_with_timeout(st, timeout_sec);
        } else {
            perror("sem_timedwait");
            return -1;
        }
    }
    
    printf("Recurso adquirido\\n");
    return 0;
}

// Patrn try-acquire
bool try_acquire(SemaphoreTimeout* st) {
    struct timespec ts;
    clock_gettime(CLOCK_REALTIME, &ts);
    // Timeout inmediato (solo verificar disponibilidad)
    
    return (sem_timedwait(&st->sem, &ts) == 0);
}

// Pool de recursos con timeout
#define POOL_SIZE 5

struct ResourcePool {
    sem_t available[POOL_SIZE];
    int   resource_data[POOL_SIZE];
};

int acquire_any_resource(ResourcePool* pool, int timeout_sec) {
    struct timespec deadline;
    set_timeout(&deadline, timeout_sec);
    
    // Intentar adquirir cualquier recurso
    while (true) {
        for (int i = 0; i < POOL_SIZE; i++) {
            struct timespec now;
            clock_gettime(CLOCK_REALTIME, &now);
            
            // Verificar si excedimos deadline
            if (now.tv_sec > deadline.tv_sec ||
                (now.tv_sec == deadline.tv_sec && 
                 now.tv_nsec >= deadline.tv_nsec)) {
                printf("Timeout: Ningn recurso disponible\\n");
                return -1;
            }
            
            // Try-acquire (timeout corto)
            struct timespec short_timeout = now;
            short_timeout.tv_nsec += 10000000;  // 10ms
            if (short_timeout.tv_nsec >= 1000000000) {
                short_timeout.tv_sec++;
                short_timeout.tv_nsec -= 1000000000;
            }
            
            if (sem_timedwait(&pool->available[i], &short_timeout) == 0) {
                printf("Adquirido recurso %d\\n", i);
                return i;
            }
        }
        
        usleep(1000);  // 1ms entre rondas
    }
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-300 mb-3",children:"Request-Response con Timeout:"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-yellow-400 overflow-x-auto",children:`struct Request {
    int             id;
    void*           data;
    pthread_mutex_t mutex;
    pthread_cond_t  response_ready;
    bool            completed;
    void*           response;
    int             error_code;
};

void init_request(Request* req, int id, void* data) {
    req->id = id;
    req->data = data;
    pthread_mutex_init(&req->mutex, NULL);
    pthread_cond_init(&req->response_ready, NULL);
    req->completed = false;
    req->response = NULL;
    req->error_code = 0;
}

// Cliente: Enva request y espera response con timeout
void* send_request_with_timeout(Request* req, int timeout_sec) {
    struct timespec deadline;
    set_timeout(&deadline, timeout_sec);
    
    // Enviar request (simulated)
    printf("Request %d: Enviando...\\n", req->id);
    
    pthread_mutex_lock(&req->mutex);
    
    int result = 0;
    
    // Esperar respuesta
    while (!req->completed && result == 0) {
        result = pthread_cond_timedwait(
            &req->response_ready,
            &req->mutex,
            &deadline
        );
    }
    
    if (result == ETIMEDOUT) {
        printf("Request %d: TIMEOUT\\n", req->id);
        req->error_code = ETIMEDOUT;
        pthread_mutex_unlock(&req->mutex);
        return NULL;
    }
    
    void* response = req->response;
    int error = req->error_code;
    
    pthread_mutex_unlock(&req->mutex);
    
    if (error) {
        printf("Request %d: Error %d\\n", req->id, error);
        return NULL;
    }
    
    printf("Request %d: Response recibida\\n", req->id);
    return response;
}

// Servidor: Procesa request y enva response
void complete_request(Request* req, void* response, int error_code) {
    pthread_mutex_lock(&req->mutex);
    
    req->response = response;
    req->error_code = error_code;
    req->completed = true;
    
    pthread_cond_signal(&req->response_ready);
    
    pthread_mutex_unlock(&req->mutex);
}

// Patrn con mltiples requests paralelos
struct MultiRequest {
    Request requests[10];
    int     num_requests;
    pthread_mutex_t mutex;
    pthread_cond_t  any_completed;
    int     completed_count;
};

// Esperar primera respuesta (race)
int wait_for_first_response(MultiRequest* mr, int timeout_sec) {
    struct timespec deadline;
    set_timeout(&deadline, timeout_sec);
    
    pthread_mutex_lock(&mr->mutex);
    
    int result = 0;
    
    while (mr->completed_count == 0 && result == 0) {
        result = pthread_cond_timedwait(
            &mr->any_completed,
            &mr->mutex,
            &deadline
        );
    }
    
    if (result == ETIMEDOUT) {
        printf("Timeout: Ninguna request complet\\n");
        pthread_mutex_unlock(&mr->mutex);
        return -1;
    }
    
    // Buscar primera completada
    for (int i = 0; i < mr->num_requests; i++) {
        if (mr->requests[i].completed) {
            pthread_mutex_unlock(&mr->mutex);
            return i;
        }
    }
    
    pthread_mutex_unlock(&mr->mutex);
    return -1;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-300 mb-3",children:"Heartbeat Pattern (Watchdog):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-purple-400 overflow-x-auto",children:`struct Heartbeat {
    pthread_mutex_t mutex;
    pthread_cond_t  pulse;
    time_t          last_heartbeat;
    bool            alive;
};

void init_heartbeat(Heartbeat* hb) {
    pthread_mutex_init(&hb->mutex, NULL);
    pthread_cond_init(&hb->pulse, NULL);
    hb->last_heartbeat = time(NULL);
    hb->alive = true;
}

// Worker enva heartbeats peridicos
void* worker_with_heartbeat(void* arg) {
    Heartbeat* hb = (Heartbeat*)arg;
    
    while (true) {
        pthread_mutex_lock(&hb->mutex);
        
        if (!hb->alive) {
            pthread_mutex_unlock(&hb->mutex);
            break;
        }
        
        // Actualizar heartbeat
        hb->last_heartbeat = time(NULL);
        pthread_cond_signal(&hb->pulse);
        
        pthread_mutex_unlock(&hb->mutex);
        
        // Hacer trabajo
        sleep(1);
    }
    
    return NULL;
}

// Watchdog verifica heartbeats con timeout
void* watchdog(void* arg) {
    Heartbeat* hb = (Heartbeat*)arg;
    const int TIMEOUT_SEC = 5;
    
    while (true) {
        struct timespec deadline;
        set_timeout(&deadline, TIMEOUT_SEC);
        
        pthread_mutex_lock(&hb->mutex);
        
        time_t last = hb->last_heartbeat;
        
        int result = pthread_cond_timedwait(
            &hb->pulse,
            &hb->mutex,
            &deadline
        );
        
        if (result == ETIMEDOUT) {
            time_t now = time(NULL);
            time_t elapsed = now - last;
            
            printf("WATCHDOG: No heartbeat en %ld segundos!\\n", elapsed);
            
            if (elapsed > TIMEOUT_SEC * 2) {
                printf("WATCHDOG: Worker muerto, iniciando recovery\\n");
                hb->alive = false;
                pthread_mutex_unlock(&hb->mutex);
                break;
            }
        }
        
        pthread_mutex_unlock(&hb->mutex);
    }
    
    return NULL;
}`})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-300 mb-3",children:"Adaptive Timeout (Exponential Backoff):"}),e.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-600",children:e.jsx("pre",{className:"text-sm text-orange-400 overflow-x-auto",children:`struct AdaptiveTimeout {
    pthread_mutex_t mutex;
    pthread_cond_t  cond_var;
    bool            ready;
    int             current_timeout;
    int             min_timeout;
    int             max_timeout;
};

void init_adaptive_timeout(AdaptiveTimeout* at) {
    pthread_mutex_init(&at->mutex, NULL);
    pthread_cond_init(&at->cond_var, NULL);
    at->ready = false;
    at->current_timeout = 1;     // Start: 1 segundo
    at->min_timeout = 1;
    at->max_timeout = 32;        // Max: 32 segundos
}

int wait_adaptive(AdaptiveTimeout* at) {
    pthread_mutex_lock(&at->mutex);
    
    int attempts = 0;
    
    while (!at->ready) {
        struct timespec deadline;
        set_timeout(&deadline, at->current_timeout);
        
        printf("Attempt %d: Waiting %d seconds...\\n", 
               ++attempts, at->current_timeout);
        
        int result = pthread_cond_timedwait(
            &at->cond_var,
            &at->mutex,
            &deadline
        );
        
        if (result == ETIMEDOUT) {
            // Exponential backoff
            at->current_timeout *= 2;
            if (at->current_timeout > at->max_timeout) {
                at->current_timeout = at->max_timeout;
            }
            
            printf("Timeout, backoff to %d seconds\\n", 
                   at->current_timeout);
        }
    }
    
    // xito - reset timeout
    at->current_timeout = at->min_timeout;
    
    pthread_mutex_unlock(&at->mutex);
    return 0;
}

// Jitter para evitar thundering herd
int wait_adaptive_with_jitter(AdaptiveTimeout* at) {
    pthread_mutex_lock(&at->mutex);
    
    while (!at->ready) {
        // Base timeout + random jitter
        int base = at->current_timeout;
        int jitter = rand() % (base / 2);  // 0-50% jitter
        int timeout = base + jitter;
        
        struct timespec deadline;
        set_timeout(&deadline, timeout);
        
        int result = pthread_cond_timedwait(
            &at->cond_var,
            &at->mutex,
            &deadline
        );
        
        if (result == ETIMEDOUT) {
            at->current_timeout = 
                (at->current_timeout * 3) / 2;  // 1.5x backoff
            if (at->current_timeout > at->max_timeout) {
                at->current_timeout = at->max_timeout;
            }
        }
    }
    
    at->current_timeout = at->min_timeout;
    pthread_mutex_unlock(&at->mutex);
    return 0;
}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-lg border border-green-600/30",children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-3",children:" Ventajas de Timeouts:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:" Previene deadlocks indefinidos"}),e.jsx("li",{children:" Permite deteccin de problemas"}),e.jsx("li",{children:" Facilita recovery automtico"}),e.jsx("li",{children:" Debugging ms fcil"}),e.jsx("li",{children:" SLA/QoS enforcement"}),e.jsx("li",{children:" Graceful degradation"})]})]}),e.jsxs("div",{className:"bg-yellow-900/20 p-4 rounded-lg border border-yellow-600/30",children:[e.jsx("h4",{className:"font-semibold text-yellow-300 mb-3",children:" Consideraciones:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:" Elegir timeout apropiado"}),e.jsx("li",{children:" Timeouts muy cortos  false positives"}),e.jsx("li",{children:" Timeouts muy largos  deteccin lenta"}),e.jsx("li",{children:" Overhead de clock_gettime()"}),e.jsx("li",{children:" Necesita lgica de retry/recovery"}),e.jsx("li",{children:" Adaptive timeouts para variabilidad"})]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600/30",children:[e.jsx("h4",{className:"font-semibold text-blue-300 mb-3",children:" Best Practices para Timeouts:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"1."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Usar timeouts absolutos"})," - clock_gettime(CLOCK_REALTIME) antes del loop"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"2."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Manejar ETIMEDOUT explcitamente"})," - Distinguir de otros errores"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"3."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Logging de timeouts"})," - Ayuda diagnstico de problemas"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"4."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Retry logic con backoff"})," - Evita busy-wait excesivo"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"5."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Configurar timeouts"})," - No hardcodear, usar config o env vars"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-1",children:"6."}),e.jsxs("span",{children:[e.jsx("strong",{children:"Mtricas de timeout"})," - Track tasa de timeouts para tuning"]})]})]})]})]})})]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Da,{type:"single",defaultValue:"demos",collapsible:!0,className:"space-y-4",children:e.jsxs(sa,{value:"demos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"size-6 text-pink-400"}),e.jsx("span",{className:"text-2xl font-semibold text-white",children:"Demostraciones Interactivas"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"demo-cv",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"demo-cv",className:"data-[state=active]:bg-pink-600",children:"Condition Var"}),e.jsx(ce,{value:"demo-sem",className:"data-[state=active]:bg-pink-600",children:"Semforo"}),e.jsx(ce,{value:"demo-state",className:"data-[state=active]:bg-pink-600",children:"State Track"}),e.jsx(ce,{value:"demo-broadcast",className:"data-[state=active]:bg-pink-600",children:"Broadcast"}),e.jsx(ce,{value:"demo-timeout",className:"data-[state=active]:bg-pink-600",children:"Timeout"})]}),e.jsx(me,{value:"demo-cv",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-slate-800/20 p-6 rounded-lg border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-300 mb-4",children:"Demo: Condition Variables (Mutex + CV)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>i(!s),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${s?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ct,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",n,"ms"]}),e.jsx(dt,{value:[n],onValueChange:([U])=>l(U),min:300,max:1500,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-blue-500/50",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:"Thread Waiter"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border-2 ${g==="checking"?"border-yellow-500 bg-yellow-900/30":g==="waiting"?"border-orange-500 bg-orange-900/30":g==="processing"?"border-green-500 bg-green-900/30":"border-gray-500 bg-gray-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Estado:"}),e.jsxs("div",{className:"text-lg",children:[g==="checking"&&" Verificando",g==="waiting"&&" Esperando",g==="processing"&&" Procesando",g==="done"&&" Completado"]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Mutex:"}),e.jsx("div",{className:`text-sm font-mono ${g==="waiting"?"text-red-400":"text-green-400"}`,children:g==="waiting"?"Released":"Locked"})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Condicin:"}),e.jsx("div",{className:`text-sm font-mono ${h?"text-green-400":"text-red-400"}`,children:h?"true ":"false "})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:"Thread Signaler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border-2 ${v==="idle"?"border-gray-500 bg-gray-900/30":v==="preparing"?"border-yellow-500 bg-yellow-900/30":v==="signaling"?"border-green-500 bg-green-900/30":"border-blue-500 bg-blue-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Estado:"}),e.jsxs("div",{className:"text-lg",children:[v==="idle"&&" Inactivo",v==="preparing"&&" Preparando",v==="signaling"&&" Sealizando",v==="done"&&" Completado"]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Accin:"}),e.jsxs("div",{className:"text-sm",children:[v==="preparing"&&"Adquiriendo mutex...",v==="signaling"&&"pthread_cond_signal()",v==="done"&&"Mutex liberado",v==="idle"&&"Esperando..."]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:_t,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:N.map((U,Dt)=>e.jsx("div",{className:`p-2 rounded ${U.type==="error"?"bg-red-900/30 text-red-300":U.type==="warning"?"bg-yellow-900/30 text-yellow-300":U.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:U.message},Dt))})]})]})}),e.jsx(me,{value:"demo-sem",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-slate-800/20 p-6 rounded-lg border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:"Demo: Semforos (Contador Persistente)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>w(!_),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${_?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:_?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",C,"ms"]}),e.jsx(dt,{value:[C],onValueChange:([U])=>E(U),min:300,max:1500,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-purple-500/50",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-3",children:"Semforo"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-purple-900/30 p-4 rounded-lg border-2 border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-2",children:"Contador"}),e.jsx("div",{className:`text-5xl font-bold ${V===0?"text-red-400":"text-green-400"}`,children:V}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:V===0?"Bloqueado":"Disponible"})]})}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Persistencia:"}),e.jsx("div",{className:"text-sm text-green-400",children:" Contador preserva seales"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-blue-500/50",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:"Estados"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border-2 ${ie==="waiting"?"border-orange-500 bg-orange-900/30":ie==="acquired"?"border-blue-500 bg-blue-900/30":ie==="processing"?"border-green-500 bg-green-900/30":"border-gray-500 bg-gray-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Waiter:"}),e.jsxs("div",{className:"text-lg",children:[ie==="waiting"&&" sem_wait()",ie==="acquired"&&" Adquirido",ie==="processing"&&" Procesando",ie==="done"&&" Completado"]})]}),e.jsxs("div",{className:`p-3 rounded-lg border-2 ${k==="idle"?"border-gray-500 bg-gray-900/30":k==="posting"?"border-green-500 bg-green-900/30":"border-blue-500 bg-blue-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Signaler:"}),e.jsxs("div",{className:"text-lg",children:[k==="idle"&&" Inactivo",k==="posting"&&" sem_post()",k==="done"&&" Completado"]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:St,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:te.map((U,Dt)=>e.jsx("div",{className:`p-2 rounded ${U.type==="error"?"bg-red-900/30 text-red-300":U.type==="warning"?"bg-yellow-900/30 text-yellow-300":U.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:U.message},Dt))})]})]})}),e.jsx(me,{value:"demo-state",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-slate-800/20 p-6 rounded-lg border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-300 mb-4",children:"Demo: State Tracking (Estado Persistente)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>Ce(!oe),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${oe?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:oe?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:gt,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",ke,"ms"]}),e.jsx(dt,{value:[ke],onValueChange:([U])=>Ee(U),min:300,max:1500,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:"Estado Compartido"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-4 rounded-lg border-2 ${F?"border-green-500 bg-green-900/30":"border-red-500 bg-red-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"event_occurred:"}),e.jsx("div",{className:`text-3xl font-bold ${F?"text-green-400":"text-red-400"}`,children:F?"true ":"false "})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Data:"}),e.jsx("div",{className:"text-2xl font-mono text-blue-400",children:qe})]}),e.jsx("div",{className:"bg-blue-900/30 p-2 rounded border border-blue-600/50",children:e.jsx("div",{className:"text-xs text-blue-300",children:" Estado persiste independientemente del timing"})})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-yellow-500/50",children:[e.jsx("h4",{className:"font-bold text-yellow-300 mb-3",children:"Timeline (Signaler primero)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border-2 ${A==="marking"||A==="done"?"border-green-500 bg-green-900/30":"border-gray-500 bg-gray-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"1 Signaler:"}),e.jsxs("div",{className:"text-sm",children:[A==="idle"&&"Esperando...",A==="marking"&&"Marcando estado ",A==="done"&&"Completado "]})]}),e.jsxs("div",{className:`p-3 rounded-lg border-2 ${W==="checking"||W==="processing"||W==="done"?"border-blue-500 bg-blue-900/30":"border-gray-500 bg-gray-900/30"}`,children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"2 Waiter:"}),e.jsxs("div",{className:"text-sm",children:[W==="checking"&&"Verificando estado...",W==="waiting"&&"Esperando...",W==="processing"&&"Estado ya true - sin espera!",W==="done"&&"Completado "]})]}),W==="processing"&&e.jsx("div",{className:"bg-green-900/30 p-2 rounded border border-green-600/50",children:e.jsx("div",{className:"text-xs text-green-300",children:" Waiter ve evento ya ocurrido - no espera!"})})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:tt,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:M.map((U,Dt)=>e.jsx("div",{className:`p-2 rounded ${U.type==="error"?"bg-red-900/30 text-red-300":U.type==="warning"?"bg-yellow-900/30 text-yellow-300":U.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:U.message},Dt))})]})]})}),e.jsx(me,{value:"demo-broadcast",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/20 to-slate-800/20 p-6 rounded-lg border border-orange-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-300 mb-4",children:"Demo: Broadcast (Mltiples Waiters)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>$(!q),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${q?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:q?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Fe,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",ve,"ms"]}),e.jsx(dt,{value:[ve],onValueChange:([U])=>Z(U),min:300,max:1500,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-orange-500/50 mb-4",children:[e.jsx("h4",{className:"font-bold text-orange-300 mb-3",children:"3 Threads Esperando"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:se.map(U=>e.jsx("div",{className:`p-4 rounded-lg border-2 ${U.state==="waiting"?"border-yellow-500 bg-yellow-900/30":U.state==="awakened"?"border-green-500 bg-green-900/30":"border-blue-500 bg-blue-900/30"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-semibold mb-2",children:["Thread ",U.id]}),e.jsxs("div",{className:"text-3xl mb-2",children:[U.state==="waiting"&&"",U.state==="awakened"&&"",U.state==="done"&&""]}),e.jsxs("div",{className:"text-xs",children:[U.state==="waiting"&&"Esperando...",U.state==="awakened"&&"Despertado!",U.state==="done"&&"Completado"]})]})},U.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:"Signaler"}),e.jsx("div",{className:`p-4 rounded-lg border-2 ${jt==="idle"?"border-gray-500 bg-gray-900/30":jt==="broadcasting"?"border-green-500 bg-green-900/30":"border-blue-500 bg-blue-900/30"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl mb-2",children:[jt==="idle"&&"",jt==="broadcasting"&&"",jt==="done"&&""]}),e.jsxs("div",{className:"text-sm",children:[jt==="idle"&&"Inactivo",jt==="broadcasting"&&"Broadcasting...",jt==="done"&&"Completado"]})]})})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-purple-500/50",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-3",children:"Condicin"}),e.jsx("div",{className:`p-4 rounded-lg border-2 ${Re?"border-green-500 bg-green-900/30":"border-red-500 bg-red-900/30"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-4xl font-bold ${Re?"text-green-400":"text-red-400"}`,children:Re?"true":"false"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:Re?"Condicin cumplida":"Esperando condicin"})]})})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:Ye,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:Me.map((U,Dt)=>e.jsx("div",{className:`p-2 rounded ${U.type==="error"?"bg-red-900/30 text-red-300":U.type==="warning"?"bg-yellow-900/30 text-yellow-300":U.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:U.message},Dt))})]})]})}),e.jsx(me,{value:"demo-timeout",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-slate-800/20 p-6 rounded-lg border border-red-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-red-300 mb-4",children:"Demo: Timeout (Prevencin de Deadlock)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>ze(!Ge),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${Ge?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:Ge?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:B,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",_e,"ms"]}),e.jsx(dt,{value:[_e],onValueChange:([U])=>Xe(U),min:300,max:1500,step:100,className:"w-full"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"signal-arrives",checked:ne,onChange:U=>Ve(U.target.checked),className:"w-4 h-4",disabled:Ge}),e.jsx("label",{htmlFor:"signal-arrives",className:"text-sm text-gray-300",children:"Seal llega a tiempo"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-red-500/50",children:[e.jsx("h4",{className:"font-bold text-red-300 mb-3",children:"Contador de Timeout"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`p-6 rounded-lg border-2 ${et>2?"border-green-500 bg-green-900/30":et>0?"border-yellow-500 bg-yellow-900/30":"border-red-500 bg-red-900/30"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-2",children:"Tiempo Restante"}),e.jsxs("div",{className:`text-6xl font-bold ${et>2?"text-green-400":et>0?"text-yellow-400":"text-red-400"}`,children:[et,"s"]})]})}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Configuracin:"}),e.jsx("div",{className:"text-sm",children:"Timeout: 5 segundos"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-blue-500/50",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:"Estado del Waiter"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`p-4 rounded-lg border-2 ${Ue==="waiting"?"border-yellow-500 bg-yellow-900/30":Ue==="timeout"?"border-red-500 bg-red-900/30":Ue==="success"?"border-green-500 bg-green-900/30":"border-blue-500 bg-blue-900/30"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl mb-2",children:[Ue==="waiting"&&"",Ue==="timeout"&&"",Ue==="success"&&"",Ue==="done"&&""]}),e.jsxs("div",{className:"text-lg font-semibold",children:[Ue==="waiting"&&"Esperando...",Ue==="timeout"&&"TIMEOUT!",Ue==="success"&&"xito",Ue==="done"&&"Finalizado"]})]})}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Condicin:"}),e.jsx("div",{className:`text-sm font-mono ${Ot?"text-green-400":"text-red-400"}`,children:Ot?"true ":"false "})]}),Ue==="timeout"&&e.jsx("div",{className:"bg-red-900/30 p-2 rounded border border-red-600/50",children:e.jsx("div",{className:"text-xs text-red-300",children:" Timeout evit deadlock indefinido"})}),Ue==="success"&&e.jsx("div",{className:"bg-green-900/30 p-2 rounded border border-green-600/50",children:e.jsx("div",{className:"text-xs text-green-300",children:" Seal recibida dentro del timeout"})})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:ft,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:de.map((U,Dt)=>e.jsx("div",{className:`p-2 rounded ${U.type==="error"?"bg-red-900/30 text-red-300":U.type==="warning"?"bg-yellow-900/30 text-yellow-300":U.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:U.message},Dt))})]})]})})]})})]})})})]})}const HR=Sa("/ActividadesSeminarioSO/actividad11/lost-wakeup")({component:FR});function $R(){const[s,i]=c.useState([{id:1,x:100,y:200,targetX:400,targetY:200,color:"bg-blue-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]},{id:2,x:400,y:200,targetX:100,targetY:200,color:"bg-red-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]}]),[n,l]=c.useState(!1),[d,m]=c.useState(0),[h,x]=c.useState([300]),[g,b]=c.useState(["Simulacin de Randomizacin iniciada."]),v=c.useRef(null),[f,N]=c.useState([{id:1,x:100,y:200,targetX:400,targetY:200,color:"bg-purple-500",state:"moving",priority:10,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]},{id:2,x:400,y:200,targetX:100,targetY:200,color:"bg-pink-500",state:"moving",priority:5,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]}]),[j,_]=c.useState(!1),[w,C]=c.useState(0),[E,D]=c.useState([300]),[L,V]=c.useState(["Simulacin con Prioridades iniciada."]),J=c.useRef(null),[ie,I]=c.useState([{id:1,x:100,y:200,targetX:400,targetY:200,color:"bg-orange-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]},{id:2,x:400,y:200,targetX:100,targetY:200,color:"bg-yellow-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]}]),[k,be]=c.useState(!1),[te,G]=c.useState(0),[oe,Ce]=c.useState([300]),[ke,Ee]=c.useState(["Simulacin de Backoff Exponencial iniciada."]),P=c.useRef(null),[Q]=c.useState(["Simulacin con Deteccin de Patrones iniciada."]),F=c.useRef(null),[ue]=c.useState(["Simulacin con Coordinador Centralizado iniciada."]),qe=c.useRef(null);return c.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[g]),c.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[L]),c.useEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[ke]),c.useEffect(()=>{F.current&&(F.current.scrollTop=F.current.scrollHeight)},[Q]),c.useEffect(()=>{qe.current&&(qe.current.scrollTop=qe.current.scrollHeight)},[ue]),c.useEffect(()=>{if(!n)return;const T=setInterval(()=>{m(W=>W+h[0]),i(W=>{const re=W[0],A=W[1];if(Math.abs(re.x-250)<30&&Math.abs(A.x-250)<30&&re.state==="moving"&&A.state==="moving"){const M=Math.random()*500+100,O=Math.random()*500+100;return b(q=>[...q," Colisin detectada en x=250",` A1 espera ${M.toFixed(0)}ms, A2 espera ${O.toFixed(0)}ms`]),W.map(q=>({...q,state:"waiting",backoffDelay:q.id===1?M:O}))}return W.map(M=>{if(M.state==="waiting"){const $=M.backoffDelay-h[0];return $<=0?(b(ve=>[...ve,` A${M.id} reinicia movimiento`]),{...M,state:"moving",backoffDelay:0}):{...M,backoffDelay:$}}const O=M.targetX>M.x?1:-1,q=M.x+O*10;return Math.abs(q-M.targetX)<20?(b($=>[...$,` A${M.id} lleg a su destino!`]),{...M,x:M.targetX,state:"success"}):{...M,x:q}})})},h[0]);return()=>clearInterval(T)},[n,h]),c.useEffect(()=>{if(!j)return;const T=setInterval(()=>{C(W=>W+E[0]),N(W=>{const re=W[0],A=W[1];if(Math.abs(re.x-250)<30&&Math.abs(A.x-250)<30&&re.state==="moving"&&A.state==="moving"){const M=re.priority>A.priority?re:A,O=M.id===re.id?A:re;return V(q=>[...q," Colisin detectada",` A${M.id} (prioridad ${M.priority}) tiene paso`,` A${O.id} (prioridad ${O.priority}) cede`]),W.map(q=>({...q,state:q.id===M.id?"moving":"blocked"}))}return W.map(M=>{if(M.state==="blocked"){const $=W.find(ve=>ve.id!==M.id);return $&&Math.abs($.x-250)>50?(V(ve=>[...ve,` A${M.id} reinicia movimiento`]),{...M,state:"moving"}):M}if(M.state!=="moving")return M;const O=M.targetX>M.x?1:-1,q=M.x+O*10;return Math.abs(q-M.targetX)<20?(V($=>[...$,` A${M.id} lleg a su destino!`]),{...M,x:M.targetX,state:"success"}):{...M,x:q}})})},E[0]);return()=>clearInterval(T)},[j,E]),c.useEffect(()=>{if(!k)return;const T=setInterval(()=>{G(W=>W+oe[0]),I(W=>{const re=W[0],A=W[1];return Math.abs(re.x-250)<30&&Math.abs(A.x-250)<30&&re.state==="moving"&&A.state==="moving"?W.map(M=>{const O=M.retryCount+1,q=Math.min(10*Math.pow(2,M.retryCount),2e3);return Ee($=>[...$,` Colisin - A${M.id} intento #${O}`,` Delay exponencial: ${q}ms (2^${M.retryCount} * 10)`]),{...M,state:"waiting",retryCount:O,backoffDelay:q}}):W.map(M=>{if(M.state==="waiting"){const $=M.backoffDelay-oe[0];return $<=0?(Ee(ve=>[...ve,` A${M.id} reinicia (delay completado)`]),{...M,state:"moving",backoffDelay:0}):{...M,backoffDelay:$}}if(M.state!=="moving")return M;const O=M.targetX>M.x?1:-1,q=M.x+O*10;return Math.abs(q-M.targetX)<20?(Ee($=>[...$,` A${M.id} lleg despus de ${M.retryCount} reintentos!`]),{...M,x:M.targetX,state:"success"}):{...M,x:q}})})},oe[0]);return()=>clearInterval(T)},[k,oe]),e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(yn,{className:"size-12 text-yellow-500"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:" Livelock"})]}),e.jsxs("p",{className:"text-lg text-gray-300 leading-relaxed",children:["El ",e.jsx("span",{className:"font-bold text-yellow-400",children:"Livelock"})," ocurre cuando dos o ms procesos cambian continuamente su estado en respuesta a los cambios de otros procesos, sin realizar ningn progreso til. A diferencia del deadlock donde los procesos estn bloqueados, en livelock los procesos estn activos pero atrapados en un ciclo de respuestas mutuas."]}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Analoga:"})," Es como dos personas intentando pasar por un pasillo estrecho y ambas se mueven simultneamente en la misma direccin para evitar al otro, repitiendo este movimiento indefinidamente sin que ninguno logre pasar."]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones (Pseudocdigo)"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"randomizacion",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-5 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"randomizacion",children:" Randomizacin"}),e.jsx(ce,{value:"prioridades",children:" Prioridades"}),e.jsx(ce,{value:"backoff",children:" Backoff Exponencial"}),e.jsx(ce,{value:"patrones",children:" Deteccin de Patrones"}),e.jsx(ce,{value:"coordinacion",children:" Coordinacin Centralizada"})]}),e.jsx(me,{value:"randomizacion",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:" Randomizacin"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Introduce retardos aleatorios antes de reintentar, rompiendo la sincronizacin entre procesos."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`function intentarAccion() {
  INTENTOS = 0
  MAX_INTENTOS = 10
  
  mientras INTENTOS < MAX_INTENTOS:
    si puedeRealizarAccion():
      realizarAccion()
      retornar EXITO
    
    // Retardo aleatorio para romper sincronizacin
    DELAY = random(MIN_DELAY, MAX_DELAY)
    esperar(DELAY)
    
    INTENTOS++
  
  retornar FALLO
}

// Ejemplo: Dos procesos compitiendo por recursos
Proceso P1:
  mientras verdadero:
    si intentarAccion():
      continuar
    esperar(random(100, 500)) // ms aleatorios
    
Proceso P2:
  mientras verdadero:
    si intentarAccion():
      continuar
    esperar(random(100, 500)) // ms aleatorios`})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Simple de implementar, efectivo para romper patrones de sincronizacin. ",e.jsx("span",{className:"font-bold",children:"Desventaja:"})," No garantiza tiempo de respuesta predecible."]})})]})}),e.jsx(me,{value:"prioridades",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:" Prioridades"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Asigna prioridades a los procesos para establecer un orden de ejecucin determinstico."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura Proceso {
  id: entero
  prioridad: entero
  timestamp: tiempo
}

funcin resolverConflicto(P1, P2) {
  // Resolver por prioridad
  si P1.prioridad > P2.prioridad:
    P1.continuar()
    P2.retroceder()
    retornar P1
  sino si P1.prioridad < P2.prioridad:
    P2.continuar()
    P1.retroceder()
    retornar P2
  sino:
    // Prioridades iguales: usar timestamp
    si P1.timestamp < P2.timestamp:
      retornar P1
    sino:
      retornar P2
}

// Ejemplo: Acceso a recurso compartido
funcin accederRecurso(proceso) {
  mientras verdadero:
    si recurso.intentarBloquear(proceso):
      // Recurso adquirido
      usarRecurso()
      recurso.liberar()
      retornar
    sino:
      // Conflicto detectado
      competidor = recurso.obtenerCompetidor()
      ganador = resolverConflicto(proceso, competidor)
      
      si ganador != proceso:
        // Ceder y esperar
        esperar(TIEMPO_BASE * (competidor.prioridad - proceso.prioridad))
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Garantiza progreso para procesos de alta prioridad. ",e.jsx("span",{className:"font-bold",children:"Desventaja:"})," Puede causar starvation en procesos de baja prioridad."]})})]})}),e.jsx(me,{value:"backoff",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:" Backoff Exponencial"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Incrementa exponencialmente el tiempo de espera despus de cada fallo, reduciendo la contencin."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`funcin backoffExponencial() {
  INTENTOS = 0
  MAX_INTENTOS = 10
  DELAY_BASE = 10 // milisegundos
  MAX_DELAY = 5000
  
  mientras INTENTOS < MAX_INTENTOS:
    si intentarAccion():
      retornar EXITO
    
    // Calcular delay exponencial: 2^n * base
    DELAY = min(DELAY_BASE * (2 ** INTENTOS), MAX_DELAY)
    
    // Opcional: aadir jitter aleatorio
    JITTER = random(0, DELAY * 0.1)
    DELAY_TOTAL = DELAY + JITTER
    
    esperar(DELAY_TOTAL)
    INTENTOS++
  
  retornar FALLO
}

// Secuencia de delays:
// Intento 1: 10ms
// Intento 2: 20ms
// Intento 3: 40ms
// Intento 4: 80ms
// Intento 5: 160ms
// Intento 6: 320ms
// Intento 7: 640ms
// Intento 8: 1280ms
// Intento 9: 2560ms
// Intento 10: 5000ms (MAX_DELAY)

funcin accederConBackoff(recurso) {
  intentos = 0
  
  mientras intentos < MAX_INTENTOS:
    bloqueo = recurso.intentarBloquear()
    
    si bloqueo.exitoso:
      usarRecurso()
      recurso.liberar()
      retornar EXITO
    
    delay = calcularBackoff(intentos)
    esperar(delay)
    intentos++
  
  retornar TIMEOUT
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-orange-900/30 border border-orange-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-orange-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Reduce contencin progresivamente, usado en protocolos de red (Ethernet). ",e.jsx("span",{className:"font-bold",children:"Desventaja:"})," Aumenta latencia con muchos reintentos."]})})]})}),e.jsx(me,{value:"patrones",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-400 mb-4",children:" Deteccin de Patrones"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Monitorea el comportamiento de los procesos para detectar ciclos de livelock y tomar medidas correctivas."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura EstadoProceso {
  id: entero
  estados: Cola[Estado]
  ultimoCambio: tiempo
  contadorCambios: entero
}

funcin detectarLivelock(proceso) {
  VENTANA_TIEMPO = 1000 // 1 segundo
  UMBRAL_CAMBIOS = 10
  LONGITUD_PATRON = 5
  
  // Contar cambios de estado recientes
  cambiosRecientes = contarCambios(
    proceso,
    tiempo_actual - VENTANA_TIEMPO
  )
  
  si cambiosRecientes > UMBRAL_CAMBIOS:
    // Detectar patrn repetitivo
    patron = extraerPatron(proceso.estados, LONGITUD_PATRON)
    
    si esPatronRepetitivo(patron):
      retornar LIVELOCK_DETECTADO
  
  retornar OK
}

funcin manejarLivelock(proceso) {
  // Acciones correctivas
  
  opcin 1: Forzar espera prolongada
    proceso.forzarEspera(random(500, 2000))
  
  opcin 2: Cambiar estrategia
    proceso.cambiarEstrategia(ESTRATEGIA_ALTERNATIVA)
  
  opcin 3: Escalar prioridad temporalmente
    proceso.incrementarPrioridad(BOOST_TEMPORAL)
    
  opcin 4: Notificar coordinador
    coordinador.resolverConflicto(proceso)
}

// Monitor continuo
funcin monitorearSistema() {
  mientras verdadero:
    para cada proceso en procesos_activos:
      estado = detectarLivelock(proceso)
      
      si estado == LIVELOCK_DETECTADO:
        log("Livelock detectado en proceso", proceso.id)
        manejarLivelock(proceso)
        metricas.registrarLivelock(proceso)
    
    esperar(INTERVALO_MONITOREO)
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-cyan-900/30 border border-cyan-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Detecta y corrige problemas automticamente.",e.jsx("span",{className:"font-bold",children:"Desventaja:"})," Overhead de monitoreo, puede tener falsos positivos."]})})]})}),e.jsx(me,{value:"coordinacion",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:" Coordinacin Centralizada"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Un coordinador central arbitra el acceso a recursos, eliminando las decisiones descentralizadas que causan livelock."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura Coordinador {
  cola_solicitudes: ColaPrioridad[Solicitud]
  recursos_disponibles: Conjunto[Recurso]
  asignaciones: Mapa[Proceso, Recurso]
  mutex: Lock
}

funcin Coordinador.solicitarRecurso(proceso, recurso) {
  mutex.bloquear()
  
  solicitud = nuevaSolicitud(proceso, recurso, tiempo_actual)
  cola_solicitudes.insertar(solicitud)
  
  // Procesar solicitudes pendientes
  procesarSolicitudes()
  
  mutex.liberar()
  
  // Esperar asignacin
  mientras no asignaciones.contiene(proceso):
    esperar(POLLING_INTERVAL)
  
  retornar asignaciones[proceso]
}

funcin Coordinador.procesarSolicitudes() {
  // Ordenar por prioridad y timestamp
  cola_solicitudes.ordenar()
  
  mientras no cola_solicitudes.vacia():
    solicitud = cola_solicitudes.primero()
    
    si recursos_disponibles.contiene(solicitud.recurso):
      // Asignar recurso
      recursos_disponibles.remover(solicitud.recurso)
      asignaciones[solicitud.proceso] = solicitud.recurso
      cola_solicitudes.remover(solicitud)
      
      log("Recurso", solicitud.recurso, "asignado a", solicitud.proceso)
    sino:
      // No disponible, esperar
      break
}

funcin Coordinador.liberarRecurso(proceso) {
  mutex.bloquear()
  
  recurso = asignaciones[proceso]
  asignaciones.remover(proceso)
  recursos_disponibles.aadir(recurso)
  
  log("Recurso", recurso, "liberado por", proceso)
  
  // Reintentar asignaciones pendientes
  procesarSolicitudes()
  
  mutex.liberar()
}

// Uso desde proceso
funcin Proceso.ejecutar() {
  recurso = coordinador.solicitarRecurso(self, RECURSO_NECESARIO)
  
  // Usar recurso
  trabajarCon(recurso)
  
  coordinador.liberarRecurso(self)
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-pink-900/30 border border-pink-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-pink-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Elimina completamente el livelock, control total sobre asignaciones. ",e.jsx("span",{className:"font-bold",children:"Desventaja:"})," Punto nico de fallo, posible cuello de botella."]})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"demo-random",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-5 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"demo-random",children:" Randomizacin"}),e.jsx(ce,{value:"demo-priority",children:" Prioridades"}),e.jsx(ce,{value:"demo-backoff",children:" Backoff"}),e.jsx(ce,{value:"demo-pattern",children:" Patrones"}),e.jsx(ce,{value:"demo-coord",children:" Coordinacin"})]}),e.jsx(me,{value:"demo-random",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Randomizacin "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>l(!n),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium flex items-center gap-2",children:[n?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),n?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{l(!1),m(0),i([{id:1,x:100,y:200,targetX:400,targetY:200,color:"bg-blue-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]},{id:2,x:400,y:200,targetX:100,targetY:200,color:"bg-red-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]}]),b(["Simulacin de Randomizacin reiniciada."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:h,onValueChange:x,min:100,max:500,step:50,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[h[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Tiempo: ",d,"ms"]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Pasillo Estrecho "}),e.jsxs("div",{className:"relative h-64 bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-gray-700 border-b-2 border-yellow-600"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gray-700 border-t-2 border-yellow-600"}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-1 h-full bg-red-500/20"}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-xs text-red-400",children:"ZONA DE COLISIN"}),s.map(T=>e.jsxs("div",{className:"absolute transition-all duration-300",style:{left:`${T.x}px`,top:`${T.y-20}px`},children:[e.jsxs("div",{className:`w-10 h-10 rounded-full ${T.color} flex items-center justify-center font-bold text-white shadow-lg ${T.state==="waiting"?"animate-pulse":""}`,children:["A",T.id]}),e.jsxs("div",{className:"text-xs text-center mt-1 text-white",children:[T.state==="waiting"&&` ${T.backoffDelay.toFixed(0)}ms`,T.state==="success"&&"",T.state==="moving"&&""]})]},T.id)),e.jsx("div",{className:"absolute left-[400px] top-[180px] text-2xl",children:""}),e.jsx("div",{className:"absolute left-[100px] top-[180px] text-2xl",children:""})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Eventos"}),e.jsx("div",{ref:v,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:g.map((T,W)=>e.jsx("div",{children:T},W))})]})]})}),e.jsx(me,{value:"demo-priority",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Sistema de Prioridades "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>_(!j),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium flex items-center gap-2",children:[j?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),j?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{_(!1),C(0),N([{id:1,x:100,y:200,targetX:400,targetY:200,color:"bg-purple-500",state:"moving",priority:10,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]},{id:2,x:400,y:200,targetX:100,targetY:200,color:"bg-pink-500",state:"moving",priority:5,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]}]),V(["Simulacin con Prioridades reiniciada."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:E,onValueChange:D,min:100,max:500,step:50,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[E[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Tiempo: ",w,"ms"]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-3",children:"Prioridades de Agentes"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.map(T=>e.jsxs("div",{className:"bg-gray-800 rounded p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded ${T.color}`}),e.jsxs("span",{className:"font-bold",children:["Agente ",T.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Prioridad:"}),e.jsx("span",{className:"font-mono font-bold text-white",children:T.priority}),T.state==="blocked"&&e.jsx("span",{className:"text-xs bg-red-600 px-2 py-1 rounded",children:" BLOQUEADO"}),T.state==="moving"&&e.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded",children:" AVANZANDO"})]})]},T.id))})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Pasillo con Prioridades"}),e.jsxs("div",{className:"relative h-64 bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-gray-700 border-b-2 border-purple-600"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gray-700 border-t-2 border-purple-600"}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-1 h-full bg-purple-500/20"}),f.map(T=>e.jsxs("div",{className:"absolute transition-all duration-300",style:{left:`${T.x}px`,top:`${T.y-20}px`},children:[e.jsxs("div",{className:`w-10 h-10 rounded-full ${T.color} flex items-center justify-center font-bold text-white shadow-lg relative ${T.state==="blocked"?"opacity-50":""}`,children:["A",T.id,e.jsxs("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 text-xs bg-gray-900 px-2 py-1 rounded whitespace-nowrap",children:["P: ",T.priority]})]}),e.jsxs("div",{className:"text-xs text-center mt-1 text-white",children:[T.state==="blocked"&&"",T.state==="success"&&"",T.state==="moving"&&""]})]},T.id)),e.jsx("div",{className:"absolute left-[400px] top-[180px] text-2xl",children:""}),e.jsx("div",{className:"absolute left-[100px] top-[180px] text-2xl",children:""})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Eventos de Resolucin"}),e.jsx("div",{ref:J,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:L.map((T,W)=>e.jsx("div",{children:T},W))})]})]})}),e.jsx(me,{value:"demo-backoff",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Demostracin: Backoff Exponencial "}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>be(!k),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg font-medium flex items-center gap-2",children:[k?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),k?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{be(!1),G(0),I([{id:1,x:100,y:200,targetX:400,targetY:200,color:"bg-orange-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]},{id:2,x:400,y:200,targetX:100,targetY:200,color:"bg-yellow-500",state:"moving",priority:0,retryCount:0,backoffDelay:0,lastMoveTime:0,stateHistory:[]}]),Ee(["Simulacin de Backoff Exponencial reiniciada."])},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Velocidad:"}),e.jsx(dt,{value:oe,onValueChange:Ce,min:100,max:500,step:50,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[oe[0],"ms"]})]}),e.jsxs("div",{className:"ml-auto text-gray-400",children:["Tiempo: ",te,"ms"]})]})}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-3",children:"Estadsticas de Backoff"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ie.map(T=>e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-4 h-4 rounded ${T.color}`}),e.jsxs("span",{className:"font-bold",children:["Agente ",T.id]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reintentos:"}),e.jsx("span",{className:"font-mono text-white",children:T.retryCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Delay actual:"}),e.jsxs("span",{className:"font-mono text-yellow-400",children:[T.backoffDelay.toFixed(0),"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Frmula:"}),e.jsxs("span",{className:"font-mono text-orange-400",children:["2^",T.retryCount,"  10"]})]})]})]},T.id))})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Pasillo con Backoff Exponencial"}),e.jsxs("div",{className:"relative h-64 bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-gray-700 border-b-2 border-orange-600"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gray-700 border-t-2 border-orange-600"}),e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-1 h-full bg-orange-500/20"}),ie.map(T=>e.jsxs("div",{className:"absolute transition-all duration-300",style:{left:`${T.x}px`,top:`${T.y-20}px`},children:[e.jsxs("div",{className:`w-10 h-10 rounded-full ${T.color} flex items-center justify-center font-bold text-white shadow-lg ${T.state==="waiting"?"animate-pulse scale-110":""}`,children:["A",T.id]}),e.jsxs("div",{className:"text-xs text-center mt-1 text-white",children:[T.state==="waiting"&&` ${T.backoffDelay.toFixed(0)}ms`,T.state==="success"&&"",T.state==="moving"&&""]}),T.retryCount>0&&e.jsxs("div",{className:"text-xs text-center text-orange-400",children:["Intento #",T.retryCount]})]},T.id)),e.jsx("div",{className:"absolute left-[400px] top-[180px] text-2xl",children:""}),e.jsx("div",{className:"absolute left-[100px] top-[180px] text-2xl",children:""})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[e.jsx("h4",{className:"font-bold text-white mb-2",children:"Eventos de Backoff"}),e.jsx("div",{ref:P,className:"bg-black rounded p-3 font-mono text-xs text-green-400 h-48 overflow-y-auto",children:ke.map((T,W)=>e.jsx("div",{children:T},W))})]})]})}),e.jsx(me,{value:"demo-pattern",className:"mt-6",children:e.jsxs("div",{className:"p-6 text-center text-gray-400",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-lg",children:"Demo de Deteccin de Patrones en desarrollo..."})]})}),e.jsx(me,{value:"demo-coord",className:"mt-6",children:e.jsxs("div",{className:"p-6 text-center text-gray-400",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-lg",children:"Demo de Coordinacin Centralizada en desarrollo..."})]})})]})})]})]})})]})}const GR=Sa("/ActividadesSeminarioSO/actividad11/livelock")({component:$R});function WR(){const[s,i]=c.useState([]),[n,l]=c.useState(0),[d,m]=c.useState(0),[h,x]=c.useState(!1),[g,b]=c.useState(500),[v,f]=c.useState([]),N=c.useRef(null),[j,_]=c.useState([]),[w,C]=c.useState(0),[E,D]=c.useState(!1),[L,V]=c.useState(500),[J,ie]=c.useState([]),I=c.useRef(null),[k,be]=c.useState([]),[te,G]=c.useState(0),[oe,Ce]=c.useState(!1),[ke,Ee]=c.useState(500),[P,Q]=c.useState([]),F=c.useRef(null),[ue,qe]=c.useState([]),[T,W]=c.useState([]),[re,A]=c.useState(!1),[K,M]=c.useState(500),[O,q]=c.useState([]),$=c.useRef(null),[ve,Z]=c.useState([]),[z,Oe]=c.useState([1]),[Re,ae]=c.useState(1),[se,rt]=c.useState(!1),[jt,fe]=c.useState(500),[Me,De]=c.useState([]),Ge=c.useRef(null),[ze,_e]=c.useState([]),[Xe,We]=c.useState(!1),[xt,Ot]=c.useState(null),[It,Ue]=c.useState(!1),[kt,et]=c.useState(500),[R,ne]=c.useState([]),Ve=c.useRef(null),[de,we]=c.useState([]),[_t,St]=c.useState([{id:1,data:"Data v1",timestamp:0}]),[tt,Ye]=c.useState(!1),[ft,Ct]=c.useState(500),[ye,gt]=c.useState([]),Fe=c.useRef(null);c.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[v]),c.useEffect(()=>{I.current&&(I.current.scrollTop=I.current.scrollHeight)},[J]),c.useEffect(()=>{F.current&&(F.current.scrollTop=F.current.scrollHeight)},[P]),c.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[O]),c.useEffect(()=>{Ge.current&&(Ge.current.scrollTop=Ge.current.scrollHeight)},[Me]),c.useEffect(()=>{Ve.current&&(Ve.current.scrollTop=Ve.current.scrollHeight)},[R]),c.useEffect(()=>{Fe.current&&(Fe.current.scrollTop=Fe.current.scrollHeight)},[ye]),c.useEffect(()=>{if(!h)return;const X=setInterval(()=>{i(Ie=>{const st=[...Ie];let Rt=n,Qe=d;for(let $e=0;$e<st.length;$e++){const mt=st[$e];mt.state==="waiting"?(mt.waitTime++,mt.type==="reader"&&Qe===0?(mt.state="reading",Rt++,f(Jt=>[...Jt,` Lector ${mt.id} inicia lectura (${Rt} lectores activos)`])):mt.type==="writer"&&Rt===0&&Qe===0&&(mt.state="writing",Qe++,f(Jt=>[...Jt,` Escritor ${mt.id} inicia escritura (acceso exclusivo)`]))):mt.state==="reading"?Math.random()<.3&&(mt.state="completed",Rt--,f(Jt=>[...Jt,` Lector ${mt.id} completado (${Rt} lectores activos)`])):mt.state==="writing"&&Math.random()<.2&&(mt.state="completed",Qe--,f(Jt=>[...Jt,` Escritor ${mt.id} completado`]))}return l(Rt),m(Qe),st.filter($e=>$e.state!=="completed")})},g);return()=>clearInterval(X)},[h,g,n,d]),c.useEffect(()=>{if(!E)return;const X=setInterval(()=>{_(Ie=>{const st=[...Ie];let Rt=w;for(let Qe=0;Qe<st.length;Qe++){const $e=st[Qe];$e.state==="waiting"?($e.waitTime++,$e.type==="reader"&&(Rt>0||st.every(mt=>mt.type==="reader"||mt.state!=="waiting"))?($e.state="reading",Rt++,ie(mt=>[...mt,` Lector ${$e.id} inicia (${Rt} concurrentes)`])):$e.type==="writer"&&Rt===0&&!st.some(mt=>mt.type==="reader"&&mt.state==="reading")?($e.state="writing",ie(mt=>[...mt,` Escritor ${$e.id} inicia (esper ${$e.waitTime} ciclos)`])):$e.type==="writer"&&$e.waitTime>5&&ie(mt=>[...mt,` Escritor ${$e.id} STARVATION (${$e.waitTime} ciclos esperando)`])):$e.state==="reading"?Math.random()<.4&&($e.state="completed",Rt--,ie(mt=>[...mt,` Lector ${$e.id} termina`])):$e.state==="writing"&&Math.random()<.3&&($e.state="completed",ie(mt=>[...mt,` Escritor ${$e.id} termina`]))}return C(Rt),st.filter(Qe=>Qe.state!=="completed")})},L);return()=>clearInterval(X)},[E,L,w]),c.useEffect(()=>{if(!oe)return;const X=setInterval(()=>{be(Ie=>{const st=[...Ie],Rt=st.filter(Qe=>Qe.type==="writer"&&Qe.state==="waiting").length;for(let Qe=0;Qe<st.length;Qe++){const $e=st[Qe];if($e.state==="waiting"){$e.waitTime++;const mt=st.some(pa=>pa.type==="writer"&&pa.state==="writing"),Jt=st.some(pa=>pa.type==="reader"&&pa.state==="reading");$e.type==="writer"&&!mt&&!Jt?($e.state="writing",Q(pa=>[...pa,` Escritor ${$e.id} inicia escritura`])):$e.type==="reader"&&Rt===0&&!mt?($e.state="reading",Q(pa=>[...pa,` Lector ${$e.id} inicia lectura`])):$e.type==="reader"&&Rt>0&&$e.waitTime>4&&Q(pa=>[...pa,` Lector ${$e.id} BLOQUEADO por ${Rt} escritores (${$e.waitTime} ciclos)`])}else $e.state==="reading"?Math.random()<.4&&($e.state="completed",Q(mt=>[...mt,` Lector ${$e.id} completado`])):$e.state==="writing"&&Math.random()<.3&&($e.state="completed",Q(mt=>[...mt,` Escritor ${$e.id} completado`]))}return G(Rt),st.filter(Qe=>Qe.state!=="completed")})},ke);return()=>clearInterval(X)},[oe,ke]),c.useEffect(()=>{if(!re)return;const X=setInterval(()=>{qe(Ie=>{const st=[...Ie],Rt=[...T];for(const Qe of st)Qe.state==="waiting"&&!Rt.some($e=>$e.id===Qe.id)&&(Rt.push(Qe),q($e=>[...$e,` Thread ${Qe.id} (${Qe.type}) entra a cola FIFO (pos: ${Rt.length})`]));if(Rt.length>0){const Qe=Rt[0],$e=st.findIndex(mt=>mt.id===Qe.id);if($e!==-1){const mt=st[$e];st.some(pa=>pa.state==="reading"||pa.state==="writing")||(mt.state=mt.type==="reader"?"reading":"writing",Rt.shift(),q(pa=>[...pa,` ${mt.type==="reader"?"Lector":"Escritor"} ${mt.id} obtiene acceso (FIFO)`]))}}for(let Qe=0;Qe<st.length;Qe++){const $e=st[Qe];($e.state==="reading"||$e.state==="writing")&&Math.random()<.35&&($e.state="completed",q(mt=>[...mt,` ${$e.type==="reader"?"Lector":"Escritor"} ${$e.id} completado`]))}return W(Rt),st.filter(Qe=>Qe.state!=="completed")})},K);return()=>clearInterval(X)},[re,K,T]),c.useEffect(()=>{if(!se)return;const X=setInterval(()=>{Z(Ie=>{const st=[...Ie];for(let Rt=0;Rt<st.length;Rt++){const Qe=st[Rt];if(Qe.state==="waiting"){if(Qe.type==="reader")Qe.state="reading",Qe.version=Re,De($e=>[...$e,` Lector ${Qe.id} accede a versin ${Qe.version} (lock-free)`]);else if(Qe.type==="writer"&&st.filter(mt=>mt.type==="writer"&&mt.state==="writing").length===0){Qe.state="writing";const mt=Re+1;Oe(Jt=>[...Jt,mt]),ae(mt),De(Jt=>[...Jt,` Escritor ${Qe.id} crea copia  versin ${mt}`])}}else Qe.state==="reading"?Math.random()<.4&&(Qe.state="completed",De($e=>[...$e,` Lector ${Qe.id} termina (ley v${Qe.version})`])):Qe.state==="writing"&&Math.random()<.25&&(Qe.state="completed",De($e=>[...$e,` Escritor ${Qe.id} completa escritura, puntero actualizado`]))}return st.filter(Rt=>Rt.state!=="completed")})},jt);return()=>clearInterval(X)},[se,jt,Re]),c.useEffect(()=>{if(!It)return;const X=setInterval(()=>{_e(Ie=>{const st=[...Ie];for(let Rt=0;Rt<st.length;Rt++){const Qe=st[Rt];Qe.state==="waiting"?Qe.type==="reader"?(Qe.state="reading",ne($e=>[...$e,` Lector ${Qe.id} inicia (ultra-rpido, sin locks)`])):Qe.type==="writer"&&!Xe&&(Qe.state="writing",Ot(1),We(!0),ne($e=>[...$e,` Escritor ${Qe.id} crea nueva versin, inicia grace period`])):Qe.state==="reading"?Math.random()<.5&&(Qe.state="completed",ne($e=>[...$e,` Lector ${Qe.id} termina`])):Qe.state==="writing"&&st.filter(mt=>mt.state==="reading").length===0&&Xe&&(Qe.state="completed",We(!1),Ot(null),ne(mt=>[...mt,` Escritor ${Qe.id} completa, grace period terminado, memoria liberada`]))}return st.filter(Rt=>Rt.state!=="completed")})},kt);return()=>clearInterval(X)},[It,kt,Xe]),c.useEffect(()=>{if(!tt)return;const X=setInterval(()=>{we(Ie=>{const st=[...Ie];for(let Rt=0;Rt<st.length;Rt++){const Qe=st[Rt];if(Qe.state==="waiting"){if(Qe.type==="reader"){Qe.state="reading",Qe.timestamp=Date.now();const $e=_t[_t.length-1];gt(mt=>[...mt,` Lector ${Qe.id} lee snapshot v${$e.id} (ts: ${Qe.timestamp})`])}else if(Qe.type==="writer"){Qe.state="writing";const $e=_t.length+1,mt={id:$e,data:`Data v${$e}`,timestamp:Date.now()};St(Jt=>[...Jt,mt]),gt(Jt=>[...Jt,` Escritor ${Qe.id} crea versin ${$e}`])}}else Qe.state==="reading"?Math.random()<.4&&(Qe.state="completed",gt($e=>[...$e,` Lector ${Qe.id} completado (snapshot consistente)`])):Qe.state==="writing"&&Math.random()<.3&&(Qe.state="completed",gt($e=>[...$e,` Escritor ${Qe.id} commit exitoso`]))}return st.filter(Rt=>Rt.state!=="completed")})},ft);return()=>clearInterval(X)},[tt,ft,_t]);const B=()=>{i([]),l(0),m(0),f([]),x(!1)},U=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0};i(st=>[...st,Ie]),f(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])},Dt=()=>{_([]),C(0),ie([]),D(!1)},Ke=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0};_(st=>[...st,Ie]),ie(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])},ge=()=>{be([]),G(0),Q([]),Ce(!1)},Ft=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0};be(st=>[...st,Ie]),Q(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])},Zt=()=>{qe([]),W([]),q([]),A(!1)},pt=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0,timestamp:Date.now()};qe(st=>[...st,Ie]),q(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])},zt=()=>{Z([]),Oe([1]),ae(1),De([]),rt(!1)},lt=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0};Z(st=>[...st,Ie]),De(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])},Be=()=>{_e([]),We(!1),Ot(null),ne([]),Ue(!1)},Pe=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0};_e(st=>[...st,Ie]),ne(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])},Je=()=>{we([]),St([{id:1,data:"Data v1",timestamp:0}]),gt([]),Ye(!1)},ot=X=>{const Ie={id:Date.now(),type:X,state:"waiting",waitTime:0};we(st=>[...st,Ie]),gt(st=>[...st,` ${X==="reader"?"Lector":"Escritor"} ${Ie.id} agregado`])};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(Ia,{className:"size-12 text-blue-500"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:" Problema de Lectura/Escritura"})]}),e.jsxs("p",{className:"text-lg text-gray-300 leading-relaxed",children:["El ",e.jsx("span",{className:"font-bold text-blue-400",children:"Problema de Lectura/Escritura"})," (Readers-Writers) surge cuando mltiples procesos necesitan acceder a un recurso compartido, donde algunos solo leen y otros escriben. Los lectores pueden acceder concurrentemente, pero los escritores requieren acceso exclusivo para mantener la consistencia de los datos."]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Desafo:"})," Maximizar la concurrencia de lectores sin sacrificar la integridad de los datos, evitando starvation de escritores y garantizando polticas de acceso justas."]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones (Pseudocdigo)"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"rwlock",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-7 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"rwlock",children:" RWLock"}),e.jsx(ce,{value:"readers-pref",children:" Readers-Pref"}),e.jsx(ce,{value:"writers-pref",children:" Writers-Pref"}),e.jsx(ce,{value:"fair",children:" Fair Policy"}),e.jsx(ce,{value:"cow",children:" Copy-on-Write"}),e.jsx(ce,{value:"rcu",children:" RCU"}),e.jsx(ce,{value:"mvcc",children:" MVCC"})]}),e.jsx(me,{value:"rwlock",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:" Read-Write Locks (RWLock)"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Permite mltiples lectores concurrentes pero escritores exclusivos. Es la solucin bsica al problema de lectura/escritura."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura RWLock {
  readers: entero = 0
  writers: entero = 0
  mutex: Lock
  okToRead: ConditionVariable
  okToWrite: ConditionVariable
}

funcin RWLock.readLock() {
  mutex.lock()
  
  // Esperar si hay escritores activos
  mientras writers > 0:
    okToRead.wait(mutex)
  
  readers++
  mutex.unlock()
}

funcin RWLock.readUnlock() {
  mutex.lock()
  readers--
  
  // Notificar si no hay ms lectores
  si readers == 0:
    okToWrite.signal()
  
  mutex.unlock()
}

funcin RWLock.writeLock() {
  mutex.lock()
  
  // Esperar si hay lectores o escritores activos
  mientras readers > 0 O writers > 0:
    okToWrite.wait(mutex)
  
  writers++
  mutex.unlock()
}

funcin RWLock.writeUnlock() {
  mutex.lock()
  writers--
  
  // Notificar a todos
  okToRead.broadcast()
  okToWrite.signal()
  
  mutex.unlock()
}

// Uso
funcin lector() {
  rwlock.readLock()
  // Leer datos
  leerDatos()
  rwlock.readUnlock()
}

funcin escritor() {
  rwlock.writeLock()
  // Escribir datos
  escribirDatos()
  rwlock.writeUnlock()
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Maximiza concurrencia de lectores.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Puede causar starvation de escritores."]})})]})}),e.jsx(me,{value:"readers-pref",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:" Readers-Preference"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Prioriza lectores sobre escritores. Los nuevos lectores pueden entrar mientras hay otros lectores activos, incluso si hay escritores esperando."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura ReadersPreference {
  readCount: entero = 0
  writeCount: entero = 0
  readerMutex: Lock
  resourceMutex: Lock
}

funcin leer() {
  // Primer lector bloquea recurso
  readerMutex.lock()
  readCount++
  
  si readCount == 1:
    resourceMutex.lock()  // Primer lector bloquea escritores
  
  readerMutex.unlock()
  
  // SECCIN CRTICA - LECTURA
  leerDatos()
  
  // ltimo lector libera recurso
  readerMutex.lock()
  readCount--
  
  si readCount == 0:
    resourceMutex.unlock()  // ltimo lector permite escritores
  
  readerMutex.unlock()
}

funcin escribir() {
  resourceMutex.lock()
  
  // SECCIN CRTICA - ESCRITURA
  escribirDatos()
  
  resourceMutex.unlock()
}

// Problema: Starvation de escritores
// Si lectores llegan continuamente, escritores nunca ejecutan

// Ejemplo de uso
Proceso Lector:
  mientras verdadero:
    leer()
    // Procesar datos ledos
    esperar(random(10, 100))

Proceso Escritor:
  mientras verdadero:
    escribir()
    // Generar nuevos datos
    esperar(random(100, 500))`})}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/30 border border-green-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Mxima throughput de lectura, simple.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Starvation severa de escritores."]})})]})}),e.jsx(me,{value:"writers-pref",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:" Writers-Preference"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Prioriza escritores sobre lectores. Cuando un escritor est esperando, no se permiten nuevos lectores hasta que el escritor complete."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura WritersPreference {
  readCount: entero = 0
  writeCount: entero = 0
  waitingWriters: entero = 0
  
  mutex1: Lock  // Protege contadores
  mutex2: Lock  // Controla entrada de lectores
  mutex3: Lock  // Recurso principal
  
  okToRead: ConditionVariable
  okToWrite: ConditionVariable
}

funcin leer() {
  mutex2.lock()  // Bloquea si hay escritores esperando
  mutex1.lock()
  
  readCount++
  si readCount == 1:
    mutex3.lock()
  
  mutex1.unlock()
  mutex2.unlock()
  
  // LECTURA
  leerDatos()
  
  mutex1.lock()
  readCount--
  
  si readCount == 0:
    mutex3.unlock()
  
  mutex1.unlock()
}

funcin escribir() {
  mutex1.lock()
  waitingWriters++
  
  si waitingWriters == 1:
    mutex2.lock()  // Bloquea nuevos lectores
  
  mutex1.unlock()
  
  mutex3.lock()  // Obtener recurso
  
  // ESCRITURA
  escribirDatos()
  
  mutex3.unlock()
  
  mutex1.lock()
  waitingWriters--
  
  si waitingWriters == 0:
    mutex2.unlock()  // Permitir lectores
  
  mutex1.unlock()
}

// Ventaja: Evita starvation de escritores
// Desventaja: Puede causar starvation de lectores

funcin monitoreoPrioridad() {
  imprimir("Escritores esperando:", waitingWriters)
  imprimir("Lectores activos:", readCount)
  
  si waitingWriters > 0:
    imprimir(" NUEVOS LECTORES BLOQUEADOS")
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Garantiza progreso de escritores.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Puede causar starvation de lectores."]})})]})}),e.jsx(me,{value:"fair",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:" Fair Policy"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Garantiza que ni lectores ni escritores sufran starvation mediante una cola FIFO. Los procesos obtienen acceso en el orden en que llegan."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura FairRWLock {
  readCount: entero = 0
  writeCount: entero = 0
  
  turnstile: Semaphore(1)  // FIFO fairness
  resourceMutex: Lock
  readerMutex: Lock
}

funcin leer() {
  // Pasar por turnstile (orden FIFO)
  turnstile.wait()
  
  readerMutex.lock()
  readCount++
  
  si readCount == 1:
    resourceMutex.lock()
  
  readerMutex.unlock()
  turnstile.signal()  // Liberar turnstile rpidamente
  
  // LECTURA
  leerDatos()
  
  readerMutex.lock()
  readCount--
  
  si readCount == 0:
    resourceMutex.unlock()
  
  readerMutex.unlock()
}

funcin escribir() {
  // Pasar por turnstile (orden FIFO)
  turnstile.wait()
  resourceMutex.lock()
  turnstile.signal()
  
  // ESCRITURA
  escribirDatos()
  
  resourceMutex.unlock()
}

// Poltica justa con timestamps
estructura FairQueue {
  cola: ColaPrioridad[Solicitud]
  
  estructura Solicitud {
    tipo: LECTOR | ESCRITOR
    proceso: Proceso
    timestamp: tiempo
  }
}

funcin FairQueue.solicitar(tipo) {
  solicitud = Solicitud(tipo, proceso_actual, tiempo_actual)
  cola.insertar(solicitud)
  
  // Esperar turno
  mientras cola.primero() != solicitud:
    esperar()
  
  // Obtener acceso
  si solicitud.tipo == ESCRITOR:
    esperarLectoresActivos()
  
  ejecutarAcceso()
  cola.remover(solicitud)
  notificar_siguiente()
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-900/30 border border-yellow-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," No hay starvation, orden FIFO justo.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Menos concurrencia que readers-preference."]})})]})}),e.jsx(me,{value:"cow",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-400 mb-4",children:" Copy-on-Write (CoW)"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Los lectores acceden a datos sin bloqueos. Los escritores crean una copia, la modifican, y luego actualizan el puntero atmicamente."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura CoWData {
  datos: puntero a Dato
  writeMutex: Lock
}

funcin leer() {
  // Lectura sin bloqueos - lock-free
  datosActuales = cargar_atomico(datos)
  
  // Leer de manera segura
  resultado = datosActuales.leer()
  
  retornar resultado
}

funcin escribir(nuevosValores) {
  writeMutex.lock()
  
  // 1. Obtener datos actuales
  datosViejos = cargar_atomico(datos)
  
  // 2. Crear copia completa
  datosNuevos = clonar(datosViejos)
  
  // 3. Modificar la copia
  datosNuevos.aplicarCambios(nuevosValores)
  
  // 4. Actualizar puntero atmicamente
  almacenar_atomico(datos, datosNuevos)
  
  // 5. Esperar que todos los lectores terminen con datos viejos
  // (usando contadores de referencias o grace period)
  esperarLectores(datosViejos)
  
  // 6. Liberar memoria antigua
  liberar(datosViejos)
  
  writeMutex.unlock()
}

// Implementacin con contadores de referencias
estructura CoWConRefCount {
  datos: puntero a Dato
  refCount: AtomicInteger
}

funcin leerConRefCount() {
  loop:
    datosActuales = cargar_atomico(datos)
    refCount = datosActuales.refCount
    
    // Incrementar refcount atmicamente
    si compare_and_swap(datosActuales.refCount, refCount, refCount + 1):
      break
  
  // Leer datos
  resultado = datosActuales.leer()
  
  // Decrementar refcount
  decrementar_atomico(datosActuales.refCount)
  
  retornar resultado
}

funcin escribirConRefCount(nuevosValores) {
  writeMutex.lock()
  
  datosViejos = cargar_atomico(datos)
  datosNuevos = clonar(datosViejos)
  datosNuevos.refCount = 0
  datosNuevos.aplicarCambios(nuevosValores)
  
  almacenar_atomico(datos, datosNuevos)
  
  // Esperar a que refCount llegue a 0
  mientras datosViejos.refCount > 0:
    esperar_breve()
  
  liberar(datosViejos)
  writeMutex.unlock()
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-cyan-900/30 border border-cyan-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Lectores lock-free, mxima concurrencia.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Overhead de memoria, escrituras costosas."]})})]})}),e.jsx(me,{value:"rcu",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:" RCU (Read-Copy-Update)"}),e.jsx("p",{className:"text-gray-300 mb-4",children:'Similar a CoW pero optimizado para el kernel de Linux. Usa "grace periods" para garantizar que todos los lectores terminaron antes de liberar memoria.'}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura RCU {
  datos: puntero atmico a Dato
  gracePeriodQueue: Cola[Dato]
}

funcin rcu_read_lock() {
  // Deshabilitar preempcin (en kernel)
  deshabilitar_preempcion()
  // No requiere mutex real - muy rpido
}

funcin rcu_read_unlock() {
  // Rehabilitar preempcin
  habilitar_preempcion()
}

funcin rcu_dereference(puntero) {
  // Leer puntero con barreras de memoria
  retornar READ_ONCE(puntero)
}

// Lector RCU
funcin leer() {
  rcu_read_lock()
  
  datosActuales = rcu_dereference(datos)
  resultado = datosActuales.leer()
  
  rcu_read_unlock()
  
  retornar resultado
}

// Escritor RCU
funcin actualizar(nuevosValores) {
  // 1. Crear nueva versin
  datosNuevos = alocar(Dato)
  datosViejos = datos
  
  // 2. Copiar y modificar
  copiar(datosViejos, datosNuevos)
  datosNuevos.aplicarCambios(nuevosValores)
  
  // 3. Publicar nueva versin (atmico)
  rcu_assign_pointer(datos, datosNuevos)
  
  // 4. Esperar grace period
  synchronize_rcu()
  
  // 5. Liberar versin antigua
  liberar(datosViejos)
}

funcin synchronize_rcu() {
  // Esperar a que todos los CPUs pasen por quiescent state
  // (punto donde no hay lectores RCU activos)
  
  para cada cpu en sistema:
    mientras cpu.enSeccionRCU():
      esperar()
}

// Implementacin de call_rcu (asncrono)
funcin call_rcu(punteroViejo, callback) {
  // Encolar para liberacin posterior
  gracePeriodQueue.agregar(punteroViejo, callback)
  
  // Ejecutar callbacks cuando grace period expire
  si grace_period_expirado():
    para cada elemento en gracePeriodQueue:
      elemento.callback()
      gracePeriodQueue.remover(elemento)
}

// Uso avanzado con call_rcu
funcin actualizarAsync(nuevosValores) {
  datosNuevos = crear_y_modificar(nuevosValores)
  datosViejos = datos
  
  rcu_assign_pointer(datos, datosNuevos)
  
  // Liberar asincrnicamente despus de grace period
  call_rcu(datosViejos, liberar_memoria)
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-pink-900/30 border border-pink-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-pink-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Lectores ultra-rpidos, escalable.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Complejo, especfico para kernels/sistemas."]})})]})}),e.jsx(me,{value:"mvcc",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:" MVCC (Multi-Version Concurrency Control)"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Mantiene mltiples versiones de los datos con timestamps. Cada transaccin ve una snapshot consistente. Usado en bases de datos (PostgreSQL, Oracle)."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`estructura VersionedData {
  versiones: Lista[Version]
  currentVersion: AtomicInteger = 0
  mutex: Lock
}

estructura Version {
  datos: Dato
  timestamp: entero
  transaccionCreadora: entero
  transaccionBorradora: entero = INFINITO
  valida: booleano = verdadero
}

funcin iniciarTransaccion() {
  transaccion = nueva Transaccion()
  transaccion.timestamp = obtenerTimestampActual()
  transaccion.snapshot = currentVersion
  
  retornar transaccion
}

funcin leer(transaccion, clave) {
  // Buscar versin visible para esta transaccin
  versionVisible = null
  
  para cada version en versiones:
    si version.timestamp <= transaccion.snapshot:
      si version.transaccionBorradora > transaccion.snapshot:
        versionVisible = version
        break
  
  retornar versionVisible.datos
}

funcin escribir(transaccion, clave, valor) {
  mutex.lock()
  
  // Crear nueva versin
  nuevaVersion = Version()
  nuevaVersion.datos = valor
  nuevaVersion.timestamp = incrementar_atomico(currentVersion)
  nuevaVersion.transaccionCreadora = transaccion.id
  
  // Aadir a lista de versiones
  versiones.agregar(nuevaVersion)
  
  mutex.unlock()
}

funcin commit(transaccion) {
  // Validar que no hay conflictos
  si tieneConflictos(transaccion):
    abort(transaccion)
    retornar FALLO
  
  // Hacer visibles todas las escrituras
  para cada escritura en transaccion.escrituras:
    escritura.version.valida = verdadero
  
  retornar EXITO
}

funcin abort(transaccion) {
  // Marcar versiones como invlidas
  para cada escritura en transaccion.escrituras:
    escritura.version.transaccionBorradora = transaccion.timestamp
    escritura.version.valida = falso
}

// Garbage Collection de versiones antiguas
funcin limpiarVersionesAntiguas() {
  timestampMinimo = obtenerTimestampTransaccionActiva()
  
  para cada version en versiones:
    si version.transaccionBorradora < timestampMinimo:
      // Ninguna transaccin activa puede ver esta versin
      versiones.remover(version)
      liberar(version.datos)
}

// Implementacin simplificada estilo PostgreSQL
estructura MVCCPostgreSQL {
  tuplas: Mapa[Clave, Lista[Tupla]]
}

estructura Tupla {
  datos: Dato
  xmin: TransactionId  // Transaccin que cre
  xmax: TransactionId  // Transaccin que borr (0 si activa)
  commandId: entero
}

funcin tuplaVisible(tupla, snapshot) {
  // Visible si:
  // 1. Creada por transaccin commited antes del snapshot
  // 2. No borrada, o borrada despus del snapshot
  
  si tupla.xmin > snapshot.xmax:
    retornar falso  // Creada despus
  
  si tupla.xmin en snapshot.activasEnCurso:
    retornar falso  // Creada por transaccin an activa
  
  si tupla.xmax == 0:
    retornar verdadero  // No borrada
  
  si tupla.xmax > snapshot.xmax:
    retornar verdadero  // Borrada despus
  
  si tupla.xmax en snapshot.activasEnCurso:
    retornar verdadero  // Borrada por transaccin an activa
  
  retornar falso  // Borrada antes del snapshot
}`})}),e.jsx("div",{className:"mt-4 p-3 bg-orange-900/30 border border-orange-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-orange-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Lectores no bloquean escritores, snapshots consistentes.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Overhead de versiones, garbage collection complejo."]})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"rwlock",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-7 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"rwlock",children:" RWLock"}),e.jsx(ce,{value:"readers-pref",children:" Readers-Pref"}),e.jsx(ce,{value:"writers-pref",children:" Writers-Pref"}),e.jsx(ce,{value:"fair",children:" Fair"}),e.jsx(ce,{value:"cow",children:" CoW"}),e.jsx(ce,{value:"rcu",children:" RCU"}),e.jsx(ce,{value:"mvcc",children:" MVCC"})]}),e.jsx(me,{value:"rwlock",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:" Read-Write Locks (RWLock)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(!h),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${h?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:B,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>U("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>U("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",g,"ms"]}),e.jsx(dt,{value:[g],onValueChange:X=>b(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:" Estado del Lock"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Lectores activos:"}),e.jsx("span",{className:"font-bold text-blue-400",children:n})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Escritores activos:"}),e.jsx("span",{className:"font-bold text-purple-400",children:d})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"En espera:"}),e.jsx("span",{className:"font-bold text-yellow-400",children:s.filter(X=>X.state==="waiting").length})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:" Threads Activos"}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:s.map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{className:X.type==="reader"?"text-blue-400":"text-purple-400",children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),e.jsx("span",{className:`text-xs ${X.state==="reading"?"text-blue-300":X.state==="writing"?"text-purple-300":"text-yellow-300"}`,children:X.state})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:N,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:v.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})}),e.jsx(me,{value:"readers-pref",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:" Readers-Preference"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>D(!E),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${E?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:E?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Dt,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ke("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>Ke("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",L,"ms"]}),e.jsx(dt,{value:[L],onValueChange:X=>V(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:" Estado"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Lectores concurrentes:"}),e.jsx("span",{className:"font-bold text-green-400",children:w})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Escritores esperando:"}),e.jsx("span",{className:"font-bold text-red-400",children:j.filter(X=>X.type==="writer"&&X.state==="waiting").length})]})]}),j.some(X=>X.type==="writer"&&X.waitTime>5)&&e.jsx("div",{className:"mt-3 p-2 bg-red-900/30 border border-red-700/50 rounded",children:e.jsx("p",{className:"text-red-300 text-sm",children:" STARVATION DETECTADA"})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:" Threads"}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:j.map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":X.waitTime>5?"bg-red-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),X.state==="waiting"&&e.jsxs("span",{className:"text-xs text-yellow-300",children:[" ",X.waitTime]})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:I,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:J.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})}),e.jsx(me,{value:"writers-pref",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:" Writers-Preference"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ce(!oe),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${oe?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:oe?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:ge,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ft("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>Ft("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",ke,"ms"]}),e.jsx(dt,{value:[ke],onValueChange:X=>Ee(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-3",children:" Estado"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Escritores esperando:"}),e.jsx("span",{className:"font-bold text-purple-400",children:te})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Lectores bloqueados:"}),e.jsx("span",{className:"font-bold text-red-400",children:k.filter(X=>X.type==="reader"&&X.state==="waiting").length})]})]}),te>0&&e.jsx("div",{className:"mt-3 p-2 bg-purple-900/30 border border-purple-700/50 rounded",children:e.jsx("p",{className:"text-purple-300 text-sm",children:" Nuevos lectores bloqueados"})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:" Threads"}),e.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:k.map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),X.state==="waiting"&&X.waitTime>4&&e.jsxs("span",{className:"text-xs text-red-300",children:[" ",X.waitTime]})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:F,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:P.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})}),e.jsx(me,{value:"fair",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:" Fair Policy (FIFO)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>A(!re),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${re?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:re?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Zt,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>pt("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>pt("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",K,"ms"]}),e.jsx(dt,{value:[K],onValueChange:X=>M(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-yellow-300 mb-3",children:" Cola FIFO"}),e.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[T.map((X,Ie)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 rounded bg-gray-700",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[Ie+1,"."]}),e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),Ie===0&&e.jsx("span",{className:"text-xs text-green-300 animate-pulse",children:" Siguiente"})]},X.id)),T.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"Cola vaca"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:" Threads Activos"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:ue.filter(X=>X.state!=="waiting").map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),e.jsx("span",{className:"text-xs text-green-300",children:X.state})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:$,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:O.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})}),e.jsx(me,{value:"cow",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:" Copy-on-Write (CoW)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>rt(!se),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${se?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:se?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:zt,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>lt("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>lt("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",jt,"ms"]}),e.jsx(dt,{value:[jt],onValueChange:X=>fe(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-cyan-300 mb-3",children:" Versiones"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Versin actual:"}),e.jsxs("span",{className:"font-bold text-cyan-400",children:["v",Re]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total versiones:"}),e.jsx("span",{className:"font-bold text-blue-400",children:z.length})]}),e.jsx("div",{className:"mt-3 p-2 bg-cyan-900/30 border border-cyan-700/50 rounded",children:e.jsx("p",{className:"text-cyan-200 text-sm",children:" Lectores lock-free"})})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:z.map(X=>e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${X===Re?"bg-cyan-600":"bg-gray-600"}`,children:["v",X]},X))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:" Threads"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:ve.map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),X.version&&e.jsxs("span",{className:"text-xs text-cyan-300",children:["v",X.version]})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:Ge,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:Me.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})}),e.jsx(me,{value:"rcu",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-pink-400 mb-4",children:" RCU (Read-Copy-Update)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ue(!It),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${It?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:It?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Be,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Pe("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>Pe("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",kt,"ms"]}),e.jsx(dt,{value:[kt],onValueChange:X=>et(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-pink-300 mb-3",children:" Grace Period"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`p-3 rounded ${Xe?"bg-yellow-900/50 border border-yellow-700/50":"bg-green-900/50 border border-green-700/50"}`,children:e.jsx("p",{className:"font-bold text-center",children:Xe?" En Grace Period":" Inactivo"})}),xt&&e.jsx("div",{className:"p-2 bg-red-900/30 border border-red-700/50 rounded",children:e.jsxs("p",{className:"text-red-200 text-sm",children:[" Versin ",xt," esperando liberacin"]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Lectores activos:"}),e.jsx("span",{className:"font-bold text-blue-400",children:ze.filter(X=>X.state==="reading").length})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:" Threads"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:ze.map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),e.jsx("span",{className:"text-xs text-green-300",children:X.state})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:Ve,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:R.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})}),e.jsx(me,{value:"mvcc",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-400 mb-4",children:" MVCC (Multi-Version Concurrency Control)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-600",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ye(!tt),className:`px-4 py-2 rounded flex items-center gap-2 font-semibold transition-colors ${tt?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:tt?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Je,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded flex items-center gap-2 font-semibold transition-colors",children:[e.jsx(it,{className:"size-4"})," Reset"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ot("reader"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-semibold transition-colors",children:"+ Lector"}),e.jsx("button",{onClick:()=>ot("writer"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded font-semibold transition-colors",children:"+ Escritor"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-2 block",children:["Velocidad: ",ft,"ms"]}),e.jsx(dt,{value:[ft],onValueChange:X=>Ct(X[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-orange-300 mb-3",children:" Timeline de Versiones"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:_t.map((X,Ie)=>e.jsxs("div",{className:`p-2 rounded ${Ie===_t.length-1?"bg-orange-900/50 border border-orange-700/50":"bg-gray-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-bold text-orange-400",children:["v",X.id]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["ts: ",X.timestamp]})]}),e.jsx("p",{className:"text-sm text-gray-300",children:X.data})]},X.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:" Transacciones"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:de.map(X=>e.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${X.state==="reading"?"bg-blue-900/50":X.state==="writing"?"bg-purple-900/50":"bg-gray-700/50"}`,children:[e.jsx("span",{children:X.type==="reader"?"":""}),e.jsxs("span",{className:"flex-1",children:[X.type," ",X.id.toString().slice(-4)]}),e.jsx("span",{className:"text-xs text-green-300",children:X.state})]},X.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-600",children:[e.jsx("h4",{className:"font-bold text-gray-300 mb-3",children:" Registro de Eventos"}),e.jsx("div",{ref:Fe,className:"bg-black rounded p-3 font-mono text-sm text-green-400 h-48 overflow-y-auto",children:ye.map((X,Ie)=>e.jsx("div",{className:"mb-1",children:X},Ie))})]})]})})]})})]})]})})]})}const KR=Sa("/ActividadesSeminarioSO/actividad11/lectura-escritura")({component:WR});function YR(){const[s,i]=c.useState(!1),[n,l]=c.useState(500),[d,m]=c.useState(0),[h,x]=c.useState([{id:0,value:0,thread:0,padded:!1,cacheLine:0},{id:1,value:0,thread:1,padded:!1,cacheLine:0},{id:2,value:0,thread:0,padded:!0,cacheLine:0},{id:3,value:0,thread:1,padded:!0,cacheLine:1}]),[g,b]=c.useState({withoutPadding:0,withPadding:0}),[v,f]=c.useState([]),[N,j]=c.useState(!1),[_,w]=c.useState(500),[C,E]=c.useState(0),[D,L]=c.useState({unaligned:0,aligned:0}),[V,J]=c.useState([]),[ie,I]=c.useState(!1),[k,be]=c.useState(500),[te,G]=c.useState(0),[oe,Ce]=c.useState([{id:0,localSum:0,writes:0,useLocal:!1},{id:1,localSum:0,writes:0,useLocal:!1},{id:2,localSum:0,writes:0,useLocal:!0},{id:3,localSum:0,writes:0,useLocal:!0}]),[ke,Ee]=c.useState({shared:0,threadLocal:0}),[P,Q]=c.useState(0),[F,ue]=c.useState([]),[qe,T]=c.useState(!1),[W,re]=c.useState(500),[A,K]=c.useState(0),[M,O]=c.useState({badLayout:0,goodLayout:0}),[q,$]=c.useState([]),[ve,Z]=c.useState(!1),[z,Oe]=c.useState(500),[Re,ae]=c.useState(0),[se,rt]=c.useState([{name:"Array of Structs (AoS)",layout:"aos",cacheHits:0,cacheMisses:0},{name:"Struct of Arrays (SoA)",layout:"soa",cacheHits:0,cacheMisses:0}]),[jt,fe]=c.useState([]),Me=c.useRef(null),De=c.useRef(null),Ge=c.useRef(null),ze=c.useRef(null),_e=c.useRef(null);c.useEffect(()=>{Me.current?.scrollTo({top:Me.current.scrollHeight,behavior:"smooth"})},[v]),c.useEffect(()=>{De.current?.scrollTo({top:De.current.scrollHeight,behavior:"smooth"})},[V]),c.useEffect(()=>{Ge.current?.scrollTo({top:Ge.current.scrollHeight,behavior:"smooth"})},[F]),c.useEffect(()=>{ze.current?.scrollTo({top:ze.current.scrollHeight,behavior:"smooth"})},[q]),c.useEffect(()=>{_e.current?.scrollTo({top:_e.current.scrollHeight,behavior:"smooth"})},[jt]),c.useEffect(()=>{if(!s)return;const Ue=setTimeout(()=>{m(kt=>{const et=(kt+1)%10;return et===0?f(R=>[...R,{time:Date.now(),message:" Iniciando simulacin de Cache Line Padding",type:"info"}]):et===1?(f(R=>[...R,{time:Date.now(),message:" SIN PADDING: Thread 0 escribe counter[0]",type:"warning"}]),x(R=>R.map(ne=>ne.id===0?{...ne,value:ne.value+1}:ne))):et===2?(f(R=>[...R,{time:Date.now(),message:" Thread 1 escribe counter[1]  INVALIDA cache de Thread 0 (misma lnea)",type:"error"}]),x(R=>R.map(ne=>ne.id===1?{...ne,value:ne.value+1}:ne)),b(R=>({...R,withoutPadding:R.withoutPadding+1}))):et===3?(f(R=>[...R,{time:Date.now(),message:" Thread 0 lee counter[0]  CACHE MISS (false sharing)",type:"warning"}]),b(R=>({...R,withoutPadding:R.withoutPadding+1}))):et===4?f(R=>[...R,{time:Date.now(),message:"---",type:"info"}]):et===5?(f(R=>[...R,{time:Date.now(),message:" CON PADDING: Thread 0 escribe counter[2] (lnea 0)",type:"info"}]),x(R=>R.map(ne=>ne.id===2?{...ne,value:ne.value+1}:ne))):et===6?(f(R=>[...R,{time:Date.now(),message:" Thread 1 escribe counter[3] (lnea 1)  NO invalida cache de Thread 0",type:"success"}]),x(R=>R.map(ne=>ne.id===3?{...ne,value:ne.value+1}:ne))):et===7?f(R=>[...R,{time:Date.now(),message:" Thread 0 lee counter[2]  CACHE HIT (lneas separadas)",type:"success"}]):et===8?f(R=>[...R,{time:Date.now(),message:` Invalidaciones: Sin padding=${g.withoutPadding}, Con padding=${g.withPadding}`,type:"info"}]):et===9&&f(R=>[...R,{time:Date.now(),message:" Padding elimina false sharing colocando datos en diferentes cache lines",type:"success"}]),et})},n);return()=>clearTimeout(Ue)},[s,d,n,g]),c.useEffect(()=>{if(!N)return;const Ue=setTimeout(()=>{E(kt=>{const et=(kt+1)%8;return et===0?J(R=>[...R,{time:Date.now(),message:" Iniciando simulacin de Alignment Directives",type:"info"}]):et===1?J(R=>[...R,{time:Date.now(),message:" UNALIGNED: Struct en offset 0 (size=12 bytes)",type:"warning"}]):et===2?(J(R=>[...R,{time:Date.now(),message:" Struct en offset 12  CRUZA lnea de cache (12-24)",type:"error"}]),L(R=>({...R,unaligned:R.unaligned+1}))):et===3?(J(R=>[...R,{time:Date.now(),message:" Acceso requiere 2 lecturas de cache (cache line crossing)",type:"warning"}]),L(R=>({...R,unaligned:R.unaligned+1}))):et===4?J(R=>[...R,{time:Date.now(),message:"---",type:"info"}]):et===5?J(R=>[...R,{time:Date.now(),message:" ALIGNED: Struct en offset 0 (aligned to 64 bytes)",type:"success"}]):et===6?J(R=>[...R,{time:Date.now(),message:" Struct en offset 64  En cache line separada",type:"success"}]):et===7&&J(R=>[...R,{time:Date.now(),message:` Alignment elimina crossings: Unaligned=${D.unaligned}, Aligned=${D.aligned}`,type:"success"}]),et})},_);return()=>clearTimeout(Ue)},[N,C,_,D]),c.useEffect(()=>{if(!ie)return;const Ue=setTimeout(()=>{G(kt=>{const et=(kt+1)%12;if(et===0)ue(R=>[...R,{time:Date.now(),message:" Iniciando Thread-Local Accumulators",type:"info"}]);else if(et===1)ue(R=>[...R,{time:Date.now(),message:" SHARED COUNTER: Thread 0 incrementa global",type:"warning"}]),Ce(R=>R.map(ne=>ne.id===0?{...ne,writes:ne.writes+1}:ne)),Ee(R=>({...R,shared:R.shared+1})),Q(R=>R+1);else if(et===2)ue(R=>[...R,{time:Date.now(),message:" Thread 1 incrementa global  CONTENCIN (false sharing)",type:"error"}]),Ce(R=>R.map(ne=>ne.id===1?{...ne,writes:ne.writes+1}:ne)),Ee(R=>({...R,shared:R.shared+1})),Q(R=>R+1);else if(et===3)ue(R=>[...R,{time:Date.now(),message:" Ambos threads escriben mismo contador  alta contencin",type:"warning"}]),Q(R=>R+1);else if(et===4)ue(R=>[...R,{time:Date.now(),message:"---",type:"info"}]);else if(et===5)ue(R=>[...R,{time:Date.now(),message:" THREAD-LOCAL: Thread 2 incrementa LOCAL accumulator",type:"success"}]),Ce(R=>R.map(ne=>ne.id===2?{...ne,localSum:ne.localSum+1,writes:ne.writes+1}:ne));else if(et===6)ue(R=>[...R,{time:Date.now(),message:" Thread 3 incrementa SU local accumulator (sin contencin)",type:"success"}]),Ce(R=>R.map(ne=>ne.id===3?{...ne,localSum:ne.localSum+1,writes:ne.writes+1}:ne));else if(et===7)ue(R=>[...R,{time:Date.now(),message:" Threads 2 y 3 trabajan en PARALELO sin interferencia",type:"success"}]),Ce(R=>R.map(ne=>ne.id===2||ne.id===3?{...ne,localSum:ne.localSum+1,writes:ne.writes+1}:ne));else if(et===8)ue(R=>[...R,{time:Date.now(),message:"Thread 2 finaliza: local_sum = "+(oe[2]?.localSum||0),type:"info"}]);else if(et===9)ue(R=>[...R,{time:Date.now(),message:"Thread 3 finaliza: local_sum = "+(oe[3]?.localSum||0),type:"info"}]);else if(et===10){const R=(oe[2]?.localSum||0)+(oe[3]?.localSum||0);Ee(ne=>({...ne,threadLocal:R})),ue(ne=>[...ne,{time:Date.now(),message:` Merge final: global = ${R} (1 sola escritura compartida)`,type:"success"}])}else et===11&&ue(R=>[...R,{time:Date.now(),message:` Contentiones: Shared=${P}, Thread-local=0`,type:"success"}]);return et})},k);return()=>clearTimeout(Ue)},[ie,te,k,P,oe]),c.useEffect(()=>{if(!qe)return;const Ue=setTimeout(()=>{K(kt=>{const et=(kt+1)%8;return et===0?$(R=>[...R,{time:Date.now(),message:" Iniciando Structure Reorganization",type:"info"}]):et===1?$(R=>[...R,{time:Date.now(),message:" BAD LAYOUT: [readFreq | writeFreq1 | writeFreq2 | readOnly]",type:"warning"}]):et===2?($(R=>[...R,{time:Date.now(),message:" Thread A lee 'readFreq', Thread B escribe 'writeFreq1'",type:"error"}]),O(R=>({...R,badLayout:R.badLayout+1}))):et===3?($(R=>[...R,{time:Date.now(),message:" FALSE SHARING: Datos read-frequently mezclados con write-frequently",type:"warning"}]),O(R=>({...R,badLayout:R.badLayout+1}))):et===4?$(R=>[...R,{time:Date.now(),message:"---",type:"info"}]):et===5?$(R=>[...R,{time:Date.now(),message:" GOOD LAYOUT: [readFreq | readOnly] [writeFreq1 | writeFreq2]",type:"success"}]):et===6?($(R=>[...R,{time:Date.now(),message:" Thread A lee 'readFreq', Thread B escribe 'writeFreq1'  Sin interferencia",type:"success"}]),O(R=>({...R,goodLayout:R.goodLayout+1}))):et===7&&$(R=>[...R,{time:Date.now(),message:` Reorganizacin agrupa campos por patrn de acceso: Bad=${M.badLayout} invalidaciones, Good=${M.goodLayout}`,type:"success"}]),et})},W);return()=>clearTimeout(Ue)},[qe,A,W,M]),c.useEffect(()=>{if(!ve)return;const Ue=setTimeout(()=>{ae(kt=>{const et=(kt+1)%10;if(et===0)fe(R=>[...R,{time:Date.now(),message:" Iniciando Cache-Aware Data Structures (AoS vs SoA)",type:"info"}]);else if(et===1)fe(R=>[...R,{time:Date.now(),message:" AoS: Acceso a campo 'x' de 4 elementos",type:"warning"}]);else if(et===2)fe(R=>[...R,{time:Date.now(),message:" Elementos dispersos en memoria  mltiples cache misses",type:"warning"}]),rt(R=>R.map(ne=>ne.layout==="aos"?{...ne,cacheMisses:ne.cacheMisses+3}:ne));else if(et===3)fe(R=>[...R,{time:Date.now(),message:"AoS carga structs completos (desperdicia ancho de banda)",type:"info"}]),rt(R=>R.map(ne=>ne.layout==="aos"?{...ne,cacheHits:ne.cacheHits+1}:ne));else if(et===4)fe(R=>[...R,{time:Date.now(),message:"---",type:"info"}]);else if(et===5)fe(R=>[...R,{time:Date.now(),message:" SoA: Acceso a array 'x[]' de 4 elementos",type:"success"}]);else if(et===6)fe(R=>[...R,{time:Date.now(),message:" Elementos contiguos en memoria  1 cache line",type:"success"}]),rt(R=>R.map(ne=>ne.layout==="soa"?{...ne,cacheHits:ne.cacheHits+4}:ne));else if(et===7)fe(R=>[...R,{time:Date.now(),message:" SoA carga SOLO datos necesarios (eficiente)",type:"success"}]);else if(et===8){const R=se[0]?.cacheMisses||0,ne=se[1]?.cacheMisses||0;fe(Ve=>[...Ve,{time:Date.now(),message:` Cache Misses: AoS=${R}, SoA=${ne}`,type:"info"}])}else et===9&&fe(R=>[...R,{time:Date.now(),message:" SoA mejora localidad espacial para accesos columnares",type:"success"}]);return et})},z);return()=>clearTimeout(Ue)},[ve,Re,z,se]);const Xe=()=>{i(!1),m(0),x([{id:0,value:0,thread:0,padded:!1,cacheLine:0},{id:1,value:0,thread:1,padded:!1,cacheLine:0},{id:2,value:0,thread:0,padded:!0,cacheLine:0},{id:3,value:0,thread:1,padded:!0,cacheLine:1}]),b({withoutPadding:0,withPadding:0}),f([])},We=()=>{j(!1),E(0),L({unaligned:0,aligned:0}),J([])},xt=()=>{I(!1),G(0),Ce([{id:0,localSum:0,writes:0,useLocal:!1},{id:1,localSum:0,writes:0,useLocal:!1},{id:2,localSum:0,writes:0,useLocal:!0},{id:3,localSum:0,writes:0,useLocal:!0}]),Ee({shared:0,threadLocal:0}),Q(0),ue([])},Ot=()=>{T(!1),K(0),O({badLayout:0,goodLayout:0}),$([])},It=()=>{Z(!1),ae(0),rt([{name:"Array of Structs (AoS)",layout:"aos",cacheHits:0,cacheMisses:0},{name:"Struct of Arrays (SoA)",layout:"soa",cacheHits:0,cacheMisses:0}]),fe([])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ia,{className:"size-8 text-amber-400"}),e.jsx("h1",{className:"text-4xl font-bold",children:"False Sharing  Soluciones"})]}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Tcnicas para prevenir false sharing: padding de cache lines, directivas de alineacin, acumuladores thread-local, reorganizacin de estructuras y estructuras de datos cache-aware."})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Da,{type:"single",defaultValue:"pseudocodigos",collapsible:!0,className:"space-y-4",children:e.jsxs(sa,{value:"pseudocodigos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oa,{className:"size-6 text-blue-400"}),e.jsx("span",{className:"text-2xl font-semibold",children:"Pseudocdigos de Soluciones"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"padding",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"padding",className:"data-[state=active]:bg-blue-600",children:"Cache Line Padding"}),e.jsx(ce,{value:"alignment",className:"data-[state=active]:bg-blue-600",children:"Alignment Directives"}),e.jsx(ce,{value:"threadlocal",className:"data-[state=active]:bg-blue-600",children:"Thread-Local"}),e.jsx(ce,{value:"reorganization",className:"data-[state=active]:bg-blue-600",children:"Structure Reorg"}),e.jsx(ce,{value:"cacheaware",className:"data-[state=active]:bg-blue-600",children:"Cache-Aware DS"})]}),e.jsxs(me,{value:"padding",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-slate-800/30 p-6 rounded-lg border border-blue-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-300 mb-3",children:" Solucin 1: Cache Line Padding"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Agrega bytes de relleno (padding) entre variables para forzar que cada una ocupe una cache line completa (tpicamente 64 bytes). Esto previene que threads diferentes invaliden mutuamente sus caches al escribir variables que estaran en la misma lnea."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Separa datos en diferentes cache lines"}),e.jsx("li",{children:" Tamao tpico de cache line: 64 bytes"}),e.jsx("li",{children:" Usa padding para alinear a 64 bytes"}),e.jsx("li",{children:" Elimina false sharing entre threads"}),e.jsx("li",{children:" Trade-off: usa ms memoria"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Cache Line Padding"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Tamao tpico de cache line en arquitecturas modernas
constante CACHE_LINE_SIZE = 64  // bytes

// SIN PADDING (problema de false sharing)
estructura CounterArraySinPadding {
    counter: arreglo[NUM_THREADS] de entero
    // Todos los counters en memoria contigua
    // Mltiples counters en la misma cache line
}

funcin usar_sin_padding() {
    counters: CounterArraySinPadding
    
    funcin worker_thread(id: entero) {
        para i = 1 hasta 1000000 hacer
            counters.counter[id]++  // FALSE SHARING!
            // Escrituras de diferentes threads invalidan
            // mutuamente sus caches
        fin para
    }
    
    // Threads 0 y 1 comparten cache line
    // Cada escritura invalida la cache del otro
}

// CON PADDING (solucin)
estructura PaddedCounter {
    value: entero
    padding: arreglo[CACHE_LINE_SIZE - sizeof(entero)] de byte
    // Padding garantiza que cada counter ocupe 64 bytes
}

estructura CounterArrayConPadding {
    counters: arreglo[NUM_THREADS] de PaddedCounter
    // Cada counter en su propia cache line
}

funcin usar_con_padding() {
    counters: CounterArrayConPadding
    
    funcin worker_thread(id: entero) {
        para i = 1 hasta 1000000 hacer
            counters.counters[id].value++  // Sin false sharing
            // Cada thread escribe en su propia cache line
        fin para
    }
    
    // Threads 0 y 1 tienen cache lines separadas
    // Sin invalidaciones mutuas
}

// Macro/Helper para crear variables padded
macro CACHE_ALIGNED(tipo, nombre)
    alignas(CACHE_LINE_SIZE) tipo nombre

// Ejemplo de uso
funcin ejemplo_cache_aligned() {
    CACHE_ALIGNED(entero, counter_thread_0)
    CACHE_ALIGNED(entero, counter_thread_1)
    
    // counter_thread_0 y counter_thread_1 estn en
    // cache lines diferentes
}

// Padding explcito en C/C++
estructura PaddedData {
    data: entero
    char padding[CACHE_LINE_SIZE - sizeof(entero)]
} __attribute__((aligned(CACHE_LINE_SIZE)))

// Array de estructuras padded
funcin crear_array_padded(size: entero) -> arreglo de PaddedCounter {
    // Cada elemento ocupa 64 bytes
    arr: arreglo[size] de PaddedCounter
    
    // Verificar alineacin
    para i = 0 hasta size - 1 hacer
        address = direccin_de(arr[i])
        assert(address % CACHE_LINE_SIZE == 0)
    fin para
    
    return arr
}

// Clculo de padding necesario
funcin calcular_padding(size: entero) -> entero {
    si size >= CACHE_LINE_SIZE entonces
        return 0  // Ya es suficientemente grande
    fin si
    
    return CACHE_LINE_SIZE - (size % CACHE_LINE_SIZE)
}

// Estructura con mltiples campos padded
estructura MultiFieldPadded {
    // Campo 1
    field1: entero
    padding1: arreglo[60] de byte  // 4 + 60 = 64
    
    // Campo 2
    field2: entero
    padding2: arreglo[60] de byte  // 4 + 60 = 64
    
    // Cada campo en su propia cache line
}

// Template genrico para padding
template<T>
estructura Padded {
    value: T
    padding: arreglo[CACHE_LINE_SIZE - sizeof(T)] de byte
}

funcin usar_template_padded() {
    counter1: Padded<entero>
    counter2: Padded<entero>
    
    counter1.value++
    counter2.value++  // Sin false sharing
}

// Padding para diferentes tamaos de cache line
funcin detectar_cache_line_size() -> entero {
    // En runtime, detectar usando CPUID u otro mtodo
    // Valor por defecto: 64 bytes
    return 64
}

funcin crear_estructura_adaptativa() {
    cache_size = detectar_cache_line_size()
    
    estructura AdaptivePadded {
        value: entero
        padding: arreglo[cache_size - sizeof(entero)] de byte
    }
}

// False sharing con arrays 2D
funcin ejemplo_array_2d_sin_padding() {
    // Problema: filas adyacentes comparten cache lines
    matrix: arreglo[NUM_THREADS][COLS] de entero
    
    funcin worker(thread_id: entero) {
        para j = 0 hasta COLS - 1 hacer
            matrix[thread_id][j]++  // Posible false sharing
        fin para
    }
}

funcin ejemplo_array_2d_con_padding() {
    // Solucin: aadir padding entre filas
    PADDED_COLS = COLS + (CACHE_LINE_SIZE / sizeof(entero))
    matrix: arreglo[NUM_THREADS][PADDED_COLS] de entero
    
    funcin worker(thread_id: entero) {
        para j = 0 hasta COLS - 1 hacer
            matrix[thread_id][j]++  // Sin false sharing
        fin para
    }
}

// Verificar false sharing en runtime
funcin detectar_false_sharing() {
    inicio = timestamp()
    
    // Test sin padding
    counters_sin: arreglo[NUM_THREADS] de entero
    para cada thread hacer
        incrementar_contador(counters_sin[thread_id])
    fin para
    
    tiempo_sin = timestamp() - inicio
    
    // Test con padding
    counters_con: arreglo[NUM_THREADS] de PaddedCounter
    para cada thread hacer
        incrementar_contador(counters_con[thread_id].value)
    fin para
    
    tiempo_con = timestamp() - inicio
    
    mejora = (tiempo_sin - tiempo_con) / tiempo_sin * 100
    
    imprimir("Sin padding: " + tiempo_sin + "ms")
    imprimir("Con padding: " + tiempo_con + "ms")
    imprimir("Mejora: " + mejora + "%")
}

// Padding en lenguajes de alto nivel
// Java
clase PaddedCounterJava {
    long p0, p1, p2, p3, p4, p5, p6  // 56 bytes padding
    volatile long value                 // 8 bytes
    long p8, p9, p10, p11, p12, p13, p14  // 56 bytes padding
}

// Rust
#[repr(align(64))]
estructura PaddedCounterRust {
    value: AtomicU64
}

// Consideraciones de memoria
funcin calcular_overhead_memoria(num_elements: entero, size_elemento: entero) -> flotante {
    sin_padding = num_elements * size_elemento
    con_padding = num_elements * CACHE_LINE_SIZE
    
    overhead = (con_padding - sin_padding) / sin_padding * 100
    
    imprimir("Memoria sin padding: " + sin_padding + " bytes")
    imprimir("Memoria con padding: " + con_padding + " bytes")
    imprimir("Overhead: " + overhead + "%")
    
    return overhead
}

// Ejemplo completo: contador de eventos multi-thread
estructura EventCounters {
    counters: arreglo[MAX_EVENT_TYPES] de PaddedCounter
}

funcin inicializar_counters() -> EventCounters {
    ec: EventCounters
    
    para i = 0 hasta MAX_EVENT_TYPES - 1 hacer
        ec.counters[i].value = 0
    fin para
    
    return ec
}

funcin registrar_evento(ec: EventCounters, tipo: entero, thread_id: entero) {
    // Cada tipo de evento en cache line separada
    ec.counters[tipo].value++
    
    // Sin false sharing entre tipos de eventos
}

// Best practices
funcin mejores_practicas_padding() {
    // 1. Identificar variables compartidas frecuentemente escritas
    // 2. Medir impacto de false sharing primero
    // 3. Aplicar padding solo donde sea necesario
    // 4. Considerar trade-off memoria vs rendimiento
    // 5. Verificar alineacin en runtime
    // 6. Documentar uso de padding en cdigo
}`})})]})]}),e.jsxs(me,{value:"alignment",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-slate-800/30 p-6 rounded-lg border border-purple-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-300 mb-3",children:" Solucin 2: Alignment Directives"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Utiliza directivas del compilador para alinear estructuras a los lmites de cache line. Esto garantiza que las estructuras no crucen boundaries de cache lines, mejorando el rendimiento y reduciendo cache line splits."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Alinea datos a boundaries de cache line"}),e.jsx("li",{children:" Previene cache line splits"}),e.jsx("li",{children:" Usa atributos del compilador (alignas, __attribute__)"}),e.jsx("li",{children:" Mejora acceso a memoria"}),e.jsx("li",{children:" Reduce accesos a mltiples cache lines"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Alignment Directives"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Constantes de alineacin
constante CACHE_LINE_SIZE = 64
constante WORD_SIZE = sizeof(puntero)

// SIN ALINEACIN (problema de cache line crossing)
estructura DataSinAlinear {
    field1: entero      // offset 0, size 4
    field2: double      // offset 4, size 8
    field3: entero      // offset 12, size 4
    // Total: 16 bytes, puede cruzar cache line
}

funcin problema_sin_alinear() {
    // Si data est en offset 56:
    // field1: bytes 56-59 (lnea 0)
    // field2: bytes 60-67 (cruza a lnea 1!)
    // field3: bytes 68-71 (lnea 1)
    
    data: DataSinAlinear en offset 56
    
    // Acceso a field2 requiere 2 lecturas de cache
    valor = data.field2  // CACHE LINE SPLIT
}

// CON ALINEACIN (solucin)
alinear_a(CACHE_LINE_SIZE)
estructura DataAlineada {
    field1: entero
    field2: double
    field3: entero
    // Estructura completa alineada a 64 bytes
}

funcin solucion_con_alinear() {
    // data siempre empieza en mltiplo de 64
    // Nunca cruza cache line boundary
    
    data: DataAlineada  // offset 0, 64, 128, etc.
    
    // Acceso a field2 en 1 sola lectura
    valor = data.field2  // CACHE HIT
}

// Directivas de alineacin en diferentes lenguajes

// C11/C++11
_Alignas(CACHE_LINE_SIZE)
estructura AlignedStructC {
    data: entero
}

// C++11 tambin
alignas(CACHE_LINE_SIZE)
estructura AlignedStructCpp {
    data: entero
}

// GCC/Clang attribute
estructura AlignedStructGCC {
    data: entero
} __attribute__((aligned(CACHE_LINE_SIZE)))

// MSVC
__declspec(align(CACHE_LINE_SIZE))
estructura AlignedStructMSVC {
    data: entero
}

// Verificar alineacin en compilacin
static_assert(alignof(AlignedStructC) == CACHE_LINE_SIZE,
              "Estructura no est correctamente alineada")

// Verificar alineacin en runtime
funcin verificar_alineacion(ptr: puntero) -> booleano {
    address = convertir_a_entero(ptr)
    
    si address % CACHE_LINE_SIZE == 0 entonces
        return verdadero
    sino
        return falso
    fin si
}

// Alineacin dinmica en heap
funcin allocar_alineado(size: entero) -> puntero {
    // Asegurar que memoria heap est alineada
    ptr = aligned_alloc(CACHE_LINE_SIZE, size)
    
    assert(verificar_alineacion(ptr))
    
    return ptr
}

// Alineacin de arrays
alinear_a(CACHE_LINE_SIZE)
estructura ArrayAlineado {
    datos: arreglo[100] de entero
}

funcin usar_array_alineado() {
    arr: ArrayAlineado
    
    // Primer elemento alineado a 64 bytes
    assert(verificar_alineacion(&arr.datos[0]))
}

// Alineacin de campos individuales
estructura CamposAlineados {
    alinear_a(CACHE_LINE_SIZE) campo1: entero
    alinear_a(CACHE_LINE_SIZE) campo2: double
    alinear_a(CACHE_LINE_SIZE) campo3: entero
    // Cada campo en cache line separada
}

funcin calcular_offset_alineado(offset_actual: entero, alineacion: entero) -> entero {
    // Redondear hacia arriba al siguiente mltiplo
    si offset_actual % alineacion == 0 entonces
        return offset_actual
    fin si
    
    return ((offset_actual / alineacion) + 1) * alineacion
}

// Ejemplo: struct con mltiples campos
estructura MultiCampo {
    char c           // offset 0, size 1
    // padding: 7 bytes
    long l           // offset 8, size 8 (alineado a 8)
    int i            // offset 16, size 4
    // padding: 4 bytes (para alinear struct a 8)
    // Total: 24 bytes
}

// Forzar alineacin a cache line
alinear_a(CACHE_LINE_SIZE)
estructura MultiCampoAlineado {
    char c
    long l
    int i
    // padding hasta 64 bytes
}

// Alineacin para SIMD
alinear_a(16)  // SSE requiere alineacin de 16 bytes
estructura DatosSIMD {
    datos: arreglo[4] de flotante
}

alinear_a(32)  // AVX requiere alineacin de 32 bytes
estructura DatosAVX {
    datos: arreglo[8] de flotante
}

// Alineacin condicional segn arquitectura
#si ARQUITECTURA == X86_64 entonces
    constante ALINEACION_OPTIMA = 64
#sino_si ARQUITECTURA == ARM entonces
    constante ALINEACION_OPTIMA = 128
#sino
    constante ALINEACION_OPTIMA = 32
#fin si

alinear_a(ALINEACION_OPTIMA)
estructura DatosArquitectura {
    data: entero
}

// Alineacin de stack
funcin funcion_con_stack_alineado() {
    // Forzar alineacin de variables locales
    alinear_a(CACHE_LINE_SIZE) buffer: arreglo[256] de byte
    
    assert(verificar_alineacion(&buffer))
}

// Macro para facilitar uso
macro CACHE_ALIGNED_TYPE(tipo)
    alignas(CACHE_LINE_SIZE) tipo

// Uso
tipo AlignedInt = CACHE_ALIGNED_TYPE(entero)
tipo AlignedDouble = CACHE_ALIGNED_TYPE(double)

// Pool de objetos alineados
estructura PoolAlineado<T> {
    alinear_a(CACHE_LINE_SIZE) objetos: arreglo[MAX_OBJETOS] de T
}

funcin crear_pool<T>() -> PoolAlineado<T> {
    pool: PoolAlineado<T>
    
    // Verificar que cada objeto est alineado
    para i = 0 hasta MAX_OBJETOS - 1 hacer
        assert(verificar_alineacion(&pool.objetos[i]))
    fin para
    
    return pool
}

// Alineacin para DMA
// Hardware DMA puede requerir alineacin especfica
alinear_a(4096)  // Alineacin de pgina
estructura BufferDMA {
    datos: arreglo[4096] de byte
}

funcin preparar_buffer_dma() -> BufferDMA* {
    buffer = allocar_alineado(sizeof(BufferDMA))
    
    // Verificar alineacin de pgina
    assert((convertir_a_entero(buffer) % 4096) == 0)
    
    return buffer
}

// Deteccin de alineacin en compilacin
template<typename T>
funcin verificar_alineacion_tipo() {
    imprimir("Tipo: " + nombre_de_tipo(T))
    imprimir("Tamao: " + sizeof(T))
    imprimir("Alineacin: " + alignof(T))
    imprimir("Alineado a cache line: " + 
             (alignof(T) == CACHE_LINE_SIZE))
}

// Anlisis de layout de estructura
funcin analizar_layout() {
    imprimir("DataSinAlinear:")
    imprimir("  field1 offset: " + offsetof(DataSinAlinear, field1))
    imprimir("  field2 offset: " + offsetof(DataSinAlinear, field2))
    imprimir("  field3 offset: " + offsetof(DataSinAlinear, field3))
    imprimir("  Tamao total: " + sizeof(DataSinAlinear))
    
    imprimir("DataAlineada:")
    imprimir("  field1 offset: " + offsetof(DataAlineada, field1))
    imprimir("  field2 offset: " + offsetof(DataAlineada, field2))
    imprimir("  field3 offset: " + offsetof(DataAlineada, field3))
    imprimir("  Tamao total: " + sizeof(DataAlineada))
}

// Benchmark de alineacin
funcin benchmark_alineacion() {
    iteraciones = 10000000
    
    // Test sin alineacin
    data_sin: arreglo[100] de DataSinAlinear
    inicio = timestamp()
    
    para i = 1 hasta iteraciones hacer
        suma = 0
        para j = 0 hasta 99 hacer
            suma += data_sin[j].field2
        fin para
    fin para
    
    tiempo_sin = timestamp() - inicio
    
    // Test con alineacin
    data_con: arreglo[100] de DataAlineada
    inicio = timestamp()
    
    para i = 1 hasta iteraciones hacer
        suma = 0
        para j = 0 hasta 99 hacer
            suma += data_con[j].field2
        fin para
    fin para
    
    tiempo_con = timestamp() - inicio
    
    imprimir("Sin alineacin: " + tiempo_sin + "ms")
    imprimir("Con alineacin: " + tiempo_con + "ms")
    imprimir("Mejora: " + ((tiempo_sin - tiempo_con) / tiempo_sin * 100) + "%")
}

// Consideraciones de portable
funcin obtener_alineacion_cache_line() -> entero {
    // Diferentes arquitecturas tienen diferentes tamaos
    // x86/x64: tpicamente 64 bytes
    // ARM: puede ser 32, 64 o 128 bytes
    // PowerPC: tpicamente 128 bytes
    
    #si ARQUITECTURA_CONOCIDA entonces
        return CACHE_LINE_SIZE_CONOCIDO
    #sino
        // Valor conservador
        return 64
    #fin si
}

// Union para forzar alineacin
union AlineacionForzada {
    data: tipo_a_alinear
    padding: arreglo[CACHE_LINE_SIZE] de byte
}

// Best practices
funcin mejores_practicas_alineacion() {
    // 1. Usar alignas/alignof estndar cuando sea posible
    // 2. Verificar alineacin con static_assert
    // 3. Considerar requisitos de diferentes plataformas
    // 4. Documentar por qu se usa alineacin especfica
    // 5. Medir impacto real en rendimiento
    // 6. Considerar trade-off memoria vs rendimiento
}`})})]})]}),e.jsxs(me,{value:"threadlocal",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-slate-800/30 p-6 rounded-lg border border-green-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-300 mb-3",children:" Solucin 3: Thread-Local Accumulators"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Cada thread mantiene su propio acumulador local para operaciones de reduccin. Al finalizar, se combinan todos los acumuladores locales en un resultado global. Esto elimina la contencin y false sharing durante la acumulacin."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Cada thread tiene acumulador privado"}),e.jsx("li",{children:" Sin contencin durante acumulacin"}),e.jsx("li",{children:" Merge final de resultados"}),e.jsx("li",{children:" Ideal para operaciones de reduccin"}),e.jsx("li",{children:" Excelente escalabilidad"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Thread-Local Accumulators"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// PROBLEMA: Contador compartido (false sharing)
variable global counter_compartido: entero = 0
variable global lock: Mutex

funcin worker_compartido(id: entero, iteraciones: entero) {
    para i = 1 hasta iteraciones hacer
        adquirir(lock)
        counter_compartido++  // CONTENCIN!
        liberar(lock)
    fin para
    // Alto overhead de sincronizacin
}

funcin ejecutar_compartido(num_threads: entero) {
    threads: arreglo[num_threads] de Thread
    
    para i = 0 hasta num_threads - 1 hacer
        threads[i] = crear_thread(worker_compartido, i, 1000000)
    fin para
    
    para i = 0 hasta num_threads - 1 hacer
        esperar(threads[i])
    fin para
    
    imprimir("Resultado: " + counter_compartido)
}

// SOLUCIN 1: Array de contadores thread-local
estructura PaddedCounter {
    value: entero
    padding: arreglo[60] de byte  // Padding a 64 bytes
}

variable global counters_locales: arreglo[MAX_THREADS] de PaddedCounter

funcin worker_thread_local(id: entero, iteraciones: entero) {
    // Cada thread escribe SOLO en su contador
    para i = 1 hasta iteraciones hacer
        counters_locales[id].value++  // Sin lock, sin contencin
    fin para
}

funcin ejecutar_thread_local(num_threads: entero) -> entero {
    threads: arreglo[num_threads] de Thread
    
    // Inicializar contadores
    para i = 0 hasta num_threads - 1 hacer
        counters_locales[i].value = 0
    fin para
    
    // Ejecutar threads
    para i = 0 hasta num_threads - 1 hacer
        threads[i] = crear_thread(worker_thread_local, i, 1000000)
    fin para
    
    para i = 0 hasta num_threads - 1 hacer
        esperar(threads[i])
    fin para
    
    // Merge final (1 sola vez, sin contencin)
    total = 0
    para i = 0 hasta num_threads - 1 hacer
        total += counters_locales[i].value
    fin para
    
    return total
}

// SOLUCIN 2: Thread-Local Storage (TLS)
thread_local variable counter_tls: entero

funcin worker_tls(iteraciones: entero) {
    // Cada thread tiene su propia copia de counter_tls
    counter_tls = 0
    
    para i = 1 hasta iteraciones hacer
        counter_tls++  // Variable privada del thread
    fin para
}

funcin ejecutar_tls(num_threads: entero) -> entero {
    threads: arreglo[num_threads] de Thread
    resultados: arreglo[num_threads] de entero
    
    para i = 0 hasta num_threads - 1 hacer
        threads[i] = crear_thread(worker_tls, 1000000)
    fin para
    
    para i = 0 hasta num_threads - 1 hacer
        esperar(threads[i])
        // Obtener resultado de TLS de cada thread
        resultados[i] = obtener_tls_de_thread(threads[i], counter_tls)
    fin para
    
    // Combinar resultados
    total = 0
    para i = 0 hasta num_threads - 1 hacer
        total += resultados[i]
    fin para
    
    return total
}

// SOLUCIN 3: Acumuladores para operaciones complejas
estructura Acumulador {
    sum: double
    count: entero
    min: double
    max: double
    padding: arreglo[32] de byte  // Padding
}

variable global acumuladores: arreglo[MAX_THREADS] de Acumulador

funcin procesar_datos_local(id: entero, datos: arreglo de double) {
    // Inicializar acumulador local
    local_acc: Acumulador
    local_acc.sum = 0
    local_acc.count = 0
    local_acc.min = INFINITO
    local_acc.max = -INFINITO
    
    // Procesar datos sin contencin
    para cada valor en datos hacer
        local_acc.sum += valor
        local_acc.count++
        
        si valor < local_acc.min entonces
            local_acc.min = valor
        fin si
        
        si valor > local_acc.max entonces
            local_acc.max = valor
        fin si
    fin para
    
    // Guardar resultado local
    acumuladores[id] = local_acc
}

funcin merge_acumuladores(num_threads: entero) -> Acumulador {
    resultado: Acumulador
    resultado.sum = 0
    resultado.count = 0
    resultado.min = INFINITO
    resultado.max = -INFINITO
    
    // Combinar acumuladores locales
    para i = 0 hasta num_threads - 1 hacer
        resultado.sum += acumuladores[i].sum
        resultado.count += acumuladores[i].count
        
        si acumuladores[i].min < resultado.min entonces
            resultado.min = acumuladores[i].min
        fin si
        
        si acumuladores[i].max > resultado.max entonces
            resultado.max = acumuladores[i].max
        fin si
    fin para
    
    return resultado
}

// SOLUCIN 4: Reduction pattern
funcin parallel_sum(datos: arreglo de entero, num_threads: entero) -> entero {
    // Dividir datos entre threads
    chunk_size = tamao(datos) / num_threads
    
    // Acumuladores locales
    sumas_locales: arreglo[num_threads] de entero
    
    funcin worker_sum(id: entero) {
        inicio = id * chunk_size
        fin = min((id + 1) * chunk_size, tamao(datos))
        
        suma_local = 0
        para i = inicio hasta fin - 1 hacer
            suma_local += datos[i]
        fin para
        
        sumas_locales[id] = suma_local
    }
    
    // Ejecutar workers
    threads: arreglo[num_threads] de Thread
    para i = 0 hasta num_threads - 1 hacer
        threads[i] = crear_thread(worker_sum, i)
    fin para
    
    para i = 0 hasta num_threads - 1 hacer
        esperar(threads[i])
    fin para
    
    // Reduction final
    suma_total = 0
    para i = 0 hasta num_threads - 1 hacer
        suma_total += sumas_locales[i]
    fin para
    
    return suma_total
}

// Template genrico para reduction
template<T, Op>
funcin parallel_reduce(datos: arreglo de T, 
                        operacion: Op,
                        valor_inicial: T,
                        num_threads: entero) -> T {
    
    resultados: arreglo[num_threads] de T
    chunk_size = tamao(datos) / num_threads
    
    funcin worker_reduce(id: entero) {
        inicio = id * chunk_size
        fin = min((id + 1) * chunk_size, tamao(datos))
        
        resultado_local = valor_inicial
        para i = inicio hasta fin - 1 hacer
            resultado_local = operacion(resultado_local, datos[i])
        fin para
        
        resultados[id] = resultado_local
    }
    
    // Ejecutar workers
    threads: arreglo[num_threads] de Thread
    para i = 0 hasta num_threads - 1 hacer
        threads[i] = crear_thread(worker_reduce, i)
    fin para
    
    para i = 0 hasta num_threads - 1 hacer
        esperar(threads[i])
    fin para
    
    // Combinar resultados
    resultado_final = valor_inicial
    para i = 0 hasta num_threads - 1 hacer
        resultado_final = operacion(resultado_final, resultados[i])
    fin para
    
    return resultado_final
}

// Uso de parallel_reduce
funcin ejemplos_reduce() {
    datos: arreglo[1000000] de entero
    
    // Sum
    suma = parallel_reduce(datos, 
                          lambda (a, b) -> a + b,
                          0, 
                          8)
    
    // Max
    maximo = parallel_reduce(datos,
                            lambda (a, b) -> max(a, b),
                            -INFINITO,
                            8)
    
    // Producto
    producto = parallel_reduce(datos,
                              lambda (a, b) -> a * b,
                              1,
                              8)
}

// Thread-local con cleanup automtico
clase ThreadLocalAccumulator<T> {
    thread_local acumulador: T
    global lista_acumuladores: Lista<T*>
    global lock: Mutex
    
    funcin get() -> T* {
        si acumulador no inicializado entonces
            acumulador = crear_nuevo()
            
            adquirir(lock)
            lista_acumuladores.agregar(&acumulador)
            liberar(lock)
        fin si
        
        return &acumulador
    }
    
    funcin merge_all() -> T {
        resultado = valor_inicial()
        
        adquirir(lock)
        para cada acc en lista_acumuladores hacer
            resultado = combinar(resultado, *acc)
        fin para
        liberar(lock)
        
        return resultado
    }
}

// Uso de ThreadLocalAccumulator
funcin ejemplo_thread_local_accumulator() {
    accumulator: ThreadLocalAccumulator<entero>
    
    funcin worker() {
        local_sum = accumulator.get()
        
        para i = 1 hasta 1000000 hacer
            *local_sum += 1
        fin para
    }
    
    // Ejecutar workers
    threads: arreglo[8] de Thread
    para i = 0 hasta 7 hacer
        threads[i] = crear_thread(worker)
    fin para
    
    para i = 0 hasta 7 hacer
        esperar(threads[i])
    fin para
    
    // Obtener resultado final
    total = accumulator.merge_all()
    imprimir("Total: " + total)
}

// Benchmark
funcin benchmark_acumuladores() {
    iteraciones = 10000000
    num_threads = 8
    
    // Mtodo 1: Compartido con lock
    inicio = timestamp()
    ejecutar_compartido(num_threads)
    tiempo_compartido = timestamp() - inicio
    
    // Mtodo 2: Thread-local
    inicio = timestamp()
    ejecutar_thread_local(num_threads)
    tiempo_local = timestamp() - inicio
    
    imprimir("Compartido (con lock): " + tiempo_compartido + "ms")
    imprimir("Thread-local: " + tiempo_local + "ms")
    imprimir("Speedup: " + (tiempo_compartido / tiempo_local) + "x")
}

// Best practices
funcin mejores_practicas_thread_local() {
    // 1. Usar para operaciones de reduccin/agregacin
    // 2. Minimizar overhead de merge final
    // 3. Considerar nmero de threads vs overhead
    // 4. Usar padding para evitar false sharing
    // 5. Cleanup adecuado de recursos thread-local
}`})})]})]}),e.jsxs(me,{value:"reorganization",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-slate-800/30 p-6 rounded-lg border border-orange-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-300 mb-3",children:" Solucin 4: Structure Reorganization"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Reorganiza los campos de las estructuras agrupando aquellos con patrones de acceso similares. Separa campos read-only de read-write, y campos accedidos por diferentes threads para minimizar false sharing."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Agrupa campos por patrn de acceso"}),e.jsx("li",{children:" Separa read-only de read-write"}),e.jsx("li",{children:" Minimiza cache line sharing"}),e.jsx("li",{children:" Mejora localidad de datos"}),e.jsx("li",{children:" Sin overhead de runtime"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Structure Reorganization"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// PROBLEMA: Mala organizacin de estructura
estructura MalaOrganizacion {
    // Campos mezclados sin considerar patrones de acceso
    read_only_config: entero        // Ledo frecuentemente
    write_counter1: entero          // Escrito por Thread 1
    read_only_name: cadena          // Ledo frecuentemente
    write_counter2: entero          // Escrito por Thread 2
    shared_state: entero            // Ledo/escrito por todos
    write_timestamp: entero         // Escrito por Thread 1
    read_only_id: entero            // Ledo frecuentemente
    // FALSE SHARING: campos write mezclados con read-only
}

funcin problema_mala_organizacion() {
    data: MalaOrganizacion
    
    // Thread 1 lee read_only_config
    thread1_lee(data.read_only_config)
    
    // Thread 2 escribe write_counter2
    //  Invalida cache de Thread 1!
    thread2_escribe(data.write_counter2)
}

// SOLUCIN: Reorganizacin por patrn de acceso
estructura BuenaOrganizacion {
    // Grupo 1: Campos read-only (cache line 0)
    read_only_config: entero
    read_only_name: cadena
    read_only_id: entero
    padding1: arreglo[40] de byte  // Padding a 64 bytes
    
    // Grupo 2: Campos escritos por Thread 1 (cache line 1)
    write_counter1: entero
    write_timestamp: entero
    padding2: arreglo[52] de byte  // Padding a 64 bytes
    
    // Grupo 3: Campos escritos por Thread 2 (cache line 2)
    write_counter2: entero
    padding3: arreglo[60] de byte  // Padding a 64 bytes
    
    // Grupo 4: Estado compartido (cache line 3)
    shared_state: entero
    shared_lock: Mutex
    padding4: arreglo[44] de byte  // Padding a 64 bytes
}

funcin solucion_buena_organizacion() {
    data: BuenaOrganizacion
    
    // Thread 1 lee read_only_config
    thread1_lee(data.read_only_config)
    
    // Thread 2 escribe write_counter2
    //  NO invalida cache de Thread 1 (cache lines diferentes)
    thread2_escribe(data.write_counter2)
}

// Anlisis de patrones de acceso
estructura PatronAcceso {
    nombre_campo: cadena
    lecturas: entero
    escrituras: entero
    threads_lectores: conjunto de entero
    threads_escritores: conjunto de entero
    frecuencia: double
}

funcin analizar_patrones(estructura: TipoEstructura) -> arreglo de PatronAcceso {
    patrones: Lista de PatronAcceso
    
    para cada campo en estructura hacer
        patron: PatronAcceso
        patron.nombre_campo = campo.nombre
        patron.lecturas = contar_lecturas(campo)
        patron.escrituras = contar_escrituras(campo)
        patron.threads_lectores = identificar_lectores(campo)
        patron.threads_escritores = identificar_escritores(campo)
        patron.frecuencia = calcular_frecuencia_acceso(campo)
        
        patrones.agregar(patron)
    fin para
    
    return patrones
}

funcin clasificar_campo(patron: PatronAcceso) -> cadena {
    si patron.escrituras == 0 entonces
        return "READ_ONLY"
    sino_si patron.lecturas > patron.escrituras * 10 entonces
        return "READ_MOSTLY"
    sino_si tamao(patron.threads_escritores) == 1 entonces
        return "SINGLE_WRITER"
    sino
        return "SHARED_WRITE"
    fin si
}

funcin reorganizar_estructura(patrones: arreglo de PatronAcceso) -> EstructuraOptimizada {
    // Agrupar por clasificacin
    read_only: Lista de Campo
    read_mostly: Lista de Campo
    single_writers: Mapa de entero a Lista de Campo  // thread_id -> campos
    shared: Lista de Campo
    
    para cada patron en patrones hacer
        clasificacion = clasificar_campo(patron)
        
        si clasificacion == "READ_ONLY" entonces
            read_only.agregar(patron.nombre_campo)
        sino_si clasificacion == "READ_MOSTLY" entonces
            read_mostly.agregar(patron.nombre_campo)
        sino_si clasificacion == "SINGLE_WRITER" entonces
            writer_id = patron.threads_escritores.primero()
            single_writers[writer_id].agregar(patron.nombre_campo)
        sino
            shared.agregar(patron.nombre_campo)
        fin si
    fin para
    
    // Construir estructura reorganizada
    estructura_nueva: EstructuraOptimizada
    
    // Cache line 0: Read-only
    para cada campo en read_only hacer
        estructura_nueva.agregar(campo)
    fin para
    estructura_nueva.agregar_padding(CACHE_LINE_SIZE)
    
    // Cache lines siguientes: Read-mostly
    para cada campo en read_mostly hacer
        estructura_nueva.agregar(campo)
    fin para
    estructura_nueva.agregar_padding(CACHE_LINE_SIZE)
    
    // Cache lines para cada writer
    para cada (thread_id, campos) en single_writers hacer
        para cada campo en campos hacer
            estructura_nueva.agregar(campo)
        fin para
        estructura_nueva.agregar_padding(CACHE_LINE_SIZE)
    fin para
    
    // ltima cache line: Shared
    para cada campo en shared hacer
        estructura_nueva.agregar(campo)
    fin para
    estructura_nueva.agregar_padding(CACHE_LINE_SIZE)
    
    return estructura_nueva
}

// Ejemplo: Estructura de red (network packet)
// ANTES (mala organizacin)
estructura NetworkPacketBad {
    header_length: entero      // Read-only
    packet_counter: entero     // Write (por procesador)
    protocol_type: entero      // Read-only
    checksum: entero          // Write (por procesador)
    source_ip: entero         // Read-only
    processing_time: entero   // Write (por procesador)
    dest_ip: entero          // Read-only
    // False sharing entre read-only y write
}

// DESPUS (buena organizacin)
estructura NetworkPacketGood {
    // Grupo 1: Header read-only (64 bytes)
    header_length: entero
    protocol_type: entero
    source_ip: entero
    dest_ip: entero
    // ... otros campos read-only
    padding1: arreglo[36] de byte
    
    // Grupo 2: Metadata de procesamiento (64 bytes)
    packet_counter: entero
    checksum: entero
    processing_time: entero
    // ... otros campos de procesamiento
    padding2: arreglo[52] de byte
}

// Ejemplo: Contador de estadsticas multi-thread
// ANTES
estructura StatsBad {
    total_requests: AtomicInt      // Todos los threads
    success_count: AtomicInt       // Thread 1
    error_count: AtomicInt         // Thread 2
    timeout_count: AtomicInt       // Thread 3
    // Todos en misma cache line  false sharing
}

// DESPUS
estructura StatsGood {
    // Cada contador en cache line separada
    alinear_a(64) total_requests: AtomicInt
    padding1: arreglo[60] de byte
    
    alinear_a(64) success_count: AtomicInt
    padding2: arreglo[60] de byte
    
    alinear_a(64) error_count: AtomicInt
    padding3: arreglo[60] de byte
    
    alinear_a(64) timeout_count: AtomicInt
    padding4: arreglo[60] de byte
}

// Alternativa: Array de structs separados
estructura PerThreadStats {
    success_count: AtomicInt
    error_count: AtomicInt
    timeout_count: AtomicInt
    padding: arreglo[52] de byte
}

estructura StatsArray {
    per_thread: arreglo[MAX_THREADS] de PerThreadStats
    total: AtomicInt
}

// Reorganizacin para hot/cold data
estructura DataHotCold {
    // HOT: Datos accedidos frecuentemente (cache line 0)
    hot_counter: entero
    hot_timestamp: entero
    hot_flags: entero
    padding1: arreglo[52] de byte
    
    // COLD: Datos accedidos raramente (cache lines siguientes)
    config_string: cadena
    debug_info: cadena
    creation_time: entero
    // No necesita padding
}

// Reorganizacin para secuencia de acceso
estructura SequentialAccess {
    // Campos accedidos en secuencia (juntos en cache line)
    step1_input: entero
    step1_output: entero
    step2_input: entero
    step2_output: entero
    // Aprovecha prefetching de CPU
}

// Tool para detectar oportunidades de reorganizacin
funcin detectar_oportunidades_reorganizacion(estructura: Tipo) {
    patrones = analizar_patrones(estructura)
    problemas: Lista de cadena
    
    // Detectar campos read-only mezclados con write
    para i = 0 hasta tamao(patrones) - 2 hacer
        si clasificar_campo(patrones[i]) == "READ_ONLY" y
           clasificar_campo(patrones[i+1]) == "SINGLE_WRITER" entonces
            problemas.agregar("Campos read-only y write adyacentes: " +
                            patrones[i].nombre_campo + ", " +
                            patrones[i+1].nombre_campo)
        fin si
    fin para
    
    // Detectar campos escritos por diferentes threads adyacentes
    para i = 0 hasta tamao(patrones) - 2 hacer
        si tamao(interseccion(patrones[i].threads_escritores,
                              patrones[i+1].threads_escritores)) == 0 entonces
            problemas.agregar("Campos escritos por threads diferentes adyacentes: " +
                            patrones[i].nombre_campo + ", " +
                            patrones[i+1].nombre_campo)
        fin si
    fin para
    
    return problemas
}

// Benchmark antes/despus de reorganizacin
funcin benchmark_reorganizacion() {
    // Crear instancias
    bad: MalaOrganizacion
    good: BuenaOrganizacion
    
    // Test con mala organizacin
    inicio = timestamp()
    parallel_access_bad(bad, NUM_THREADS)
    tiempo_bad = timestamp() - inicio
    
    // Test con buena organizacin
    inicio = timestamp()
    parallel_access_good(good, NUM_THREADS)
    tiempo_good = timestamp() - inicio
    
    imprimir("Mala organizacin: " + tiempo_bad + "ms")
    imprimir("Buena organizacin: " + tiempo_good + "ms")
    imprimir("Mejora: " + ((tiempo_bad - tiempo_good) / tiempo_bad * 100) + "%")
}

// Best practices
funcin mejores_practicas_reorganizacion() {
    // 1. Perfilar acceso real antes de reorganizar
    // 2. Agrupar campos por patrn de acceso
    // 3. Separar read-only de read-write
    // 4. Considerar secuencia de acceso
    // 5. Usar padding entre grupos de diferentes threads
    // 6. Balancear organizacin lgica vs rendimiento
    // 7. Documentar decisiones de organizacin
}`})})]})]}),e.jsxs(me,{value:"cacheaware",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-900/30 to-slate-800/30 p-6 rounded-lg border border-red-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-red-300 mb-3",children:" Solucin 5: Cache-Aware Data Structures"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Disea estructuras de datos considerando la jerarqua de cache desde el inicio. Utiliza layouts como Structure of Arrays (SoA) en lugar de Array of Structures (AoS) cuando se accede a campos especficos, mejorando la localidad espacial."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Diseo considerando cache desde inicio"}),e.jsx("li",{children:" SoA vs AoS segn patrn de acceso"}),e.jsx("li",{children:" Mejora localidad espacial"}),e.jsx("li",{children:" Reduce cache misses"}),e.jsx("li",{children:" Aprovecha prefetching de hardware"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Cache-Aware Data Structures"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// PATRN 1: Array of Structures (AoS) vs Structure of Arrays (SoA)

// AoS: Estructura tradicional
estructura Particula {
    x: flotante
    y: flotante
    z: flotante
    vx: flotante
    vy: flotante
    vz: flotante
}

variable particulas_aos: arreglo[N] de Particula

funcin actualizar_posiciones_aos() {
    // Acceso a campo x de todas las partculas
    para i = 0 hasta N - 1 hacer
        particulas_aos[i].x += particulas_aos[i].vx
        // Carga struct completo (24 bytes)
        // Solo usa x (4 bytes)  desperdicio
    fin para
}

// SoA: Estructura optimizada para cache
estructura ParticlesSystem {
    x: arreglo[N] de flotante
    y: arreglo[N] de flotante
    z: arreglo[N] de flotante
    vx: arreglo[N] de flotante
    vy: arreglo[N] de flotante
    vz: arreglo[N] de flotante
}

variable particulas_soa: ParticlesSystem

funcin actualizar_posiciones_soa() {
    // Acceso contiguo a x[]
    para i = 0 hasta N - 1 hacer
        particulas_soa.x[i] += particulas_soa.vx[i]
        // Carga solo arrays de x y vx
        // Mejor localidad espacial
        // Prefetching ms efectivo
    fin para
}

// Comparacin de cache behavior
funcin analizar_cache_behavior() {
    cache_line_size = 64  // bytes
    float_size = 4        // bytes
    
    // AoS
    elementos_por_linea_aos = cache_line_size / sizeof(Particula)
    // 64 / 24 = 2.6  ~2 partculas por cache line
    
    // SoA
    elementos_por_linea_soa = cache_line_size / float_size
    // 64 / 4 = 16 flotantes por cache line
    
    imprimir("AoS: " + elementos_por_linea_aos + " partculas/lnea")
    imprimir("SoA: " + elementos_por_linea_soa + " elementos/lnea")
    imprimir("SoA es " + (elementos_por_linea_soa / elementos_por_linea_aos) + "x ms eficiente")
}

// Hbrido: AoSoA (Array of Structures of Arrays)
constante SOA_BLOCK_SIZE = 16  // Mltiplo de cache line

estructura ParticleBlock {
    x: arreglo[SOA_BLOCK_SIZE] de flotante
    y: arreglo[SOA_BLOCK_SIZE] de flotante
    z: arreglo[SOA_BLOCK_SIZE] de flotante
    vx: arreglo[SOA_BLOCK_SIZE] de flotante
    vy: arreglo[SOA_BLOCK_SIZE] de flotante
    vz: arreglo[SOA_BLOCK_SIZE] de flotante
}

variable particulas_aosoa: arreglo[N / SOA_BLOCK_SIZE] de ParticleBlock

funcin actualizar_posiciones_aosoa() {
    num_bloques = N / SOA_BLOCK_SIZE
    
    para bloque = 0 hasta num_bloques - 1 hacer
        // Procesar bloque completo (buena localidad)
        para i = 0 hasta SOA_BLOCK_SIZE - 1 hacer
            particulas_aosoa[bloque].x[i] += particulas_aosoa[bloque].vx[i]
        fin para
    fin para
}

// PATRN 2: Cache-Oblivious Data Structures

// B-Tree tradicional (malo para cache)
estructura NodoBTreeMalo {
    keys: arreglo[B] de entero
    children: arreglo[B+1] de puntero a NodoBTreeMalo
    // Nodos dispersos en memoria  cache misses
}

// B+ Tree cache-aware
constante NODO_SIZE = 64  // Tamao de cache line

estructura NodoBPlusTree {
    keys: arreglo[(NODO_SIZE - 8) / 4] de entero  // Llenar cache line
    next: puntero a NodoBPlusTree
    // Nodo cabe exactamente en 1 cache line
}

// Cache-Oblivious B-Tree (van Emde Boas layout)
funcin veb_layout(arbol: BTree, inicio: entero, fin: entero, salida: arreglo) {
    si fin - inicio <= 1 entonces
        salida.agregar(arbol[inicio])
        return
    fin si
    
    medio = (inicio + fin) / 2
    
    // Recursivamente dividir en mitades
    veb_layout(arbol, inicio, medio, salida)
    salida.agregar(arbol[medio])
    veb_layout(arbol, medio + 1, fin, salida)
    
    // Layout optimiza acceso en todos los niveles de cache
}

// PATRN 3: Hash Table cache-friendly

// Hash Table tradicional (malo)
estructura HashNodeMalo {
    key: entero
    value: entero
    next: puntero a HashNodeMalo
    // Listas encadenadas  malas para cache
}

// Open Addressing cache-friendly
estructura HashTableCacheFriendly {
    // Todos los datos en array contiguo
    entries: arreglo[SIZE] de struct {
        key: entero
        value: entero
        occupied: booleano
        padding: arreglo[3] de byte
    }
}

funcin buscar_cache_friendly(table: HashTableCacheFriendly, key: entero) -> entero {
    hash = hash_function(key)
    indice = hash % SIZE
    
    // Linear probing aprovecha prefetching
    mientras table.entries[indice].occupied hacer
        si table.entries[indice].key == key entonces
            return table.entries[indice].value
        fin si
        indice = (indice + 1) % SIZE
    fin mientras
    
    return NOT_FOUND
}

// PATRN 4: Blocked Algorithms

// Multiplicacin de matrices naive (malo para cache)
funcin matrix_mult_naive(A: matriz[N][N], B: matriz[N][N]) -> matriz[N][N] {
    C: matriz[N][N]
    
    para i = 0 hasta N - 1 hacer
        para j = 0 hasta N - 1 hacer
            suma = 0
            para k = 0 hasta N - 1 hacer
                suma += A[i][k] * B[k][j]
                // B accedido por columnas  cache misses
            fin para
            C[i][j] = suma
        fin para
    fin para
    
    return C
}

// Blocked matrix multiplication (cache-aware)
constante BLOCK_SIZE = 64  // Ajustar a tamao de cache L1

funcin matrix_mult_blocked(A: matriz[N][N], B: matriz[N][N]) -> matriz[N][N] {
    C: matriz[N][N] = 0
    
    // Dividir en bloques que caben en cache
    para ii = 0 hasta N - 1 step BLOCK_SIZE hacer
        para jj = 0 hasta N - 1 step BLOCK_SIZE hacer
            para kk = 0 hasta N - 1 step BLOCK_SIZE hacer
                
                // Procesar bloque
                para i = ii hasta min(ii + BLOCK_SIZE, N) - 1 hacer
                    para j = jj hasta min(jj + BLOCK_SIZE, N) - 1 hacer
                        suma = C[i][j]
                        para k = kk hasta min(kk + BLOCK_SIZE, N) - 1 hacer
                            suma += A[i][k] * B[k][j]
                        fin para
                        C[i][j] = suma
                    fin para
                fin para
                
            fin para
        fin para
    fin para
    
    return C
}

// PATRN 5: Spatial Data Structures

// Quadtree cache-aware
estructura QuadtreeNode {
    // Almacenar nodos hijos inline (no punteros)
    children: arreglo[4] de QuadtreeNode
    // Nodos contiguos  mejor localidad
    
    data: arreglo[MAX_ITEMS_PER_NODE] de Item
    num_items: entero
}

// Z-order curve (Morton code) para ordenamiento espacial
funcin morton_encode(x: entero, y: entero) -> entero {
    // Intercalar bits de x e y
    cdigo = 0
    
    para i = 0 hasta 15 hacer
        cdigo |= ((x & (1 << i)) << i) | ((y & (1 << i)) << (i + 1))
    fin para
    
    return cdigo
}

funcin ordenar_puntos_espacialmente(puntos: arreglo de Punto) {
    // Ordenar por Morton code
    para cada p en puntos hacer
        p.morton = morton_encode(p.x, p.y)
    fin para
    
    ordenar(puntos, lambda (a, b) -> a.morton < b.morton)
    
    // Puntos cercanos espacialmente  cercanos en memoria
}

// PATRN 6: Prefetch-Friendly Linked Lists

// Lista enlazada tradicional (malo)
estructura NodoListaMalo {
    data: entero
    next: puntero a NodoListaMalo
    // Nodos dispersos  no se puede prefetch
}

// Array-based linked list (cache-friendly)
estructura ListaArrayBased {
    data: arreglo[SIZE] de entero
    next: arreglo[SIZE] de entero  // ndices en lugar de punteros
    head: entero
}

funcin iterar_lista_array(lista: ListaArrayBased) {
    actual = lista.head
    
    mientras actual != -1 hacer
        procesar(lista.data[actual])
        
        // Prefetch siguiente nodo
        siguiente = lista.next[actual]
        si siguiente != -1 entonces
            __builtin_prefetch(&lista.data[siguiente])
        fin si
        
        actual = siguiente
    fin mientras
}

// PATRN 7: Cache-Partitioning Data Structures

// Estructura con hot/cold separation
estructura CachePartitionedStruct {
    // Hot data (cache line 0)
    alinear_a(64) hot_counter: AtomicInt
    hot_timestamp: entero
    hot_flags: entero
    padding1: arreglo[52] de byte
    
    // Warm data (cache line 1)
    alinear_a(64) warm_config: entero
    warm_stats: arreglo[14] de entero
    padding2: arreglo[4] de byte
    
    // Cold data (no padding necesario)
    cold_debug_info: cadena
    cold_creation_time: entero
}

// Benchmark AoS vs SoA
funcin benchmark_aos_vs_soa(N: entero) {
    // Setup AoS
    aos: arreglo[N] de Particula
    para i = 0 hasta N - 1 hacer
        aos[i] = inicializar_particula()
    fin para
    
    // Setup SoA
    soa: ParticlesSystem
    para i = 0 hasta N - 1 hacer
        soa.x[i] = valor_inicial_x()
        soa.vx[i] = valor_inicial_vx()
    fin para
    
    iteraciones = 1000
    
    // Benchmark AoS
    inicio = timestamp()
    para iter = 1 hasta iteraciones hacer
        para i = 0 hasta N - 1 hacer
            aos[i].x += aos[i].vx
        fin para
    fin para
    tiempo_aos = timestamp() - inicio
    
    // Benchmark SoA
    inicio = timestamp()
    para iter = 1 hasta iteraciones hacer
        para i = 0 hasta N - 1 hacer
            soa.x[i] += soa.vx[i]
        fin para
    fin para
    tiempo_soa = timestamp() - inicio
    
    imprimir("AoS: " + tiempo_aos + "ms")
    imprimir("SoA: " + tiempo_soa + "ms")
    imprimir("Speedup SoA: " + (tiempo_aos / tiempo_soa) + "x")
}

// Herramienta para elegir layout
funcin elegir_layout(patrn_acceso: cadena) -> cadena {
    si patrn_acceso == "TODOS_LOS_CAMPOS" entonces
        return "AoS"  // Acceso a struct completo
    sino_si patrn_acceso == "CAMPOS_INDIVIDUALES" entonces
        return "SoA"  // Acceso por columnas
    sino_si patrn_acceso == "MIXTO" entonces
        return "AoSoA"  // Hbrido
    fin si
}

// Best practices
funcin mejores_practicas_cache_aware() {
    // 1. Perfilar patrones de acceso reales
    // 2. Considerar tamao de cache (L1, L2, L3)
    // 3. Usar SoA para acceso columnar
    // 4. Usar AoS para acceso a objetos completos
    // 5. Considerar AoSoA como hbrido
    // 6. Implementar blocked algorithms para grandes datasets
    // 7. Medir impacto con performance counters
    // 8. Balancear complejidad vs beneficio
}`})})]})]})]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Da,{type:"single",defaultValue:"demos",collapsible:!0,className:"space-y-4",children:e.jsxs(sa,{value:"demos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"size-6 text-emerald-400"}),e.jsx("span",{className:"text-2xl font-semibold",children:"Demostraciones Interactivas"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"demo-padding",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"demo-padding",className:"data-[state=active]:bg-emerald-600",children:"Cache Line Padding"}),e.jsx(ce,{value:"demo-alignment",className:"data-[state=active]:bg-emerald-600",children:"Alignment"}),e.jsx(ce,{value:"demo-accumulator",className:"data-[state=active]:bg-emerald-600",children:"Thread-Local"}),e.jsx(ce,{value:"demo-structure",className:"data-[state=active]:bg-emerald-600",children:"Structure Reorg"}),e.jsx(ce,{value:"demo-cacheaware",className:"data-[state=active]:bg-emerald-600",children:"Cache-Aware DS"})]}),e.jsx(me,{value:"demo-padding",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-slate-800/20 p-6 rounded-lg border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-300 mb-4",children:"Demo: Cache Line Padding (Sin Padding vs Con Padding)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>i(!s),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${s?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Xe,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",n,"ms"]}),e.jsx(dt,{value:[n],onValueChange:([Ue])=>l(Ue),min:100,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-red-500/50",children:[e.jsx("h4",{className:"font-bold text-red-300 mb-3 flex items-center gap-2",children:" Sin Padding (False Sharing)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-red-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 0 (64 bytes)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`p-2 rounded text-center text-sm ${h[0].value>0?"bg-orange-600":"bg-slate-700"}`,children:[e.jsx("div",{className:"font-mono",children:"counter[0]"}),e.jsx("div",{className:"text-xs",children:"Thread 0"}),e.jsx("div",{className:"font-bold",children:h[0].value})]}),e.jsxs("div",{className:`p-2 rounded text-center text-sm ${h[1].value>0?"bg-orange-600":"bg-slate-700"}`,children:[e.jsx("div",{className:"font-mono",children:"counter[1]"}),e.jsx("div",{className:"text-xs",children:"Thread 1"}),e.jsx("div",{className:"font-bold",children:h[1].value})]})]})]}),e.jsxs("div",{className:"text-sm text-red-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Invalidaciones: ",g.withoutPadding]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3 flex items-center gap-2",children:" Con Padding (Sin False Sharing)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 0 (64 bytes)"}),e.jsxs("div",{className:`p-2 rounded text-center text-sm ${h[2].value>0?"bg-green-600":"bg-slate-700"}`,children:[e.jsx("div",{className:"font-mono",children:"counter[2]"}),e.jsx("div",{className:"text-xs",children:"Thread 0"}),e.jsx("div",{className:"font-bold",children:h[2].value})]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 1 (64 bytes)"}),e.jsxs("div",{className:`p-2 rounded text-center text-sm ${h[3].value>0?"bg-green-600":"bg-slate-700"}`,children:[e.jsx("div",{className:"font-mono",children:"counter[3]"}),e.jsx("div",{className:"text-xs",children:"Thread 1"}),e.jsx("div",{className:"font-bold",children:h[3].value})]})]}),e.jsxs("div",{className:"text-sm text-green-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Invalidaciones: ",g.withPadding]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:Me,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:v.map((Ue,kt)=>e.jsx("div",{className:`p-2 rounded ${Ue.type==="error"?"bg-red-900/30 text-red-300":Ue.type==="warning"?"bg-yellow-900/30 text-yellow-300":Ue.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:Ue.message},kt))})]})]})}),e.jsx(me,{value:"demo-alignment",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-slate-800/20 p-6 rounded-lg border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:"Demo: Alignment Directives (Cache Line Crossing)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>j(!N),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${N?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:N?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:We,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",_,"ms"]}),e.jsx(dt,{value:[_],onValueChange:([Ue])=>w(Ue),min:100,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-red-500/50",children:[e.jsx("h4",{className:"font-bold text-red-300 mb-3 flex items-center gap-2",children:" Unaligned (Cache Line Crossing)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative bg-slate-800 p-3 rounded border-2 border-red-500 h-24",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line Boundary (64 bytes)"}),e.jsxs("div",{className:"absolute top-8 left-2 w-1/3 h-12 bg-orange-600 rounded opacity-70 border-2 border-orange-400",children:[e.jsx("div",{className:"text-xs p-1",children:"Struct 1"}),e.jsx("div",{className:"text-xs px-1",children:"0-12"})]}),e.jsxs("div",{className:"absolute top-8 left-1/3 w-1/3 h-12 bg-red-600 rounded opacity-70 border-2 border-red-400",children:[e.jsx("div",{className:"text-xs p-1",children:"Struct 2"}),e.jsx("div",{className:"text-xs px-1",children:"12-24"}),e.jsx("div",{className:"text-[10px] px-1",children:"CRUZA!"})]}),e.jsx("div",{className:"absolute top-14 left-0 w-full h-px bg-yellow-500"}),e.jsx("div",{className:"absolute top-14 right-2 text-xs text-yellow-400",children:"64 bytes"})]}),e.jsxs("div",{className:"text-sm text-red-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Cache Line Crossings: ",D.unaligned]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3 flex items-center gap-2",children:" Aligned (No Crossing)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500 mb-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 0"}),e.jsxs("div",{className:"bg-green-600 rounded p-2 text-sm",children:[e.jsx("div",{className:"font-mono",children:"Struct 1 (aligned)"}),e.jsx("div",{className:"text-xs",children:"offset: 0"})]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 1"}),e.jsxs("div",{className:"bg-green-600 rounded p-2 text-sm",children:[e.jsx("div",{className:"font-mono",children:"Struct 2 (aligned)"}),e.jsx("div",{className:"text-xs",children:"offset: 64"})]})]}),e.jsxs("div",{className:"text-sm text-green-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Cache Line Crossings: ",D.aligned]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:De,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:V.map((Ue,kt)=>e.jsx("div",{className:`p-2 rounded ${Ue.type==="error"?"bg-red-900/30 text-red-300":Ue.type==="warning"?"bg-yellow-900/30 text-yellow-300":Ue.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:Ue.message},kt))})]})]})}),e.jsx(me,{value:"demo-accumulator",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-slate-800/20 p-6 rounded-lg border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-300 mb-4",children:"Demo: Thread-Local Accumulators (Shared vs Local)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>I(!ie),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${ie?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:ie?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:xt,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",k,"ms"]}),e.jsx(dt,{value:[k],onValueChange:([Ue])=>be(Ue),min:100,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-red-500/50",children:[e.jsx("h4",{className:"font-bold text-red-300 mb-3 flex items-center gap-2",children:" Shared Counter (Contencin)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-red-900/30 p-3 rounded border-2 border-red-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-300",children:"Global Counter"}),e.jsx("div",{className:"text-3xl font-bold text-red-300",children:ke.shared})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:oe.slice(0,2).map(Ue=>e.jsxs("div",{className:"bg-slate-800 p-2 rounded text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Thread ",Ue.id]}),e.jsxs("div",{className:"text-sm font-mono",children:["Writes: ",Ue.writes]})]},Ue.id))}),e.jsxs("div",{className:"text-sm text-red-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Contentiones: ",P]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3 flex items-center gap-2",children:" Thread-Local (Sin Contencin)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:oe.slice(2,4).map(Ue=>e.jsxs("div",{className:"bg-green-900/30 p-3 rounded border-2 border-green-500",children:[e.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Thread ",Ue.id]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-300",children:"Local Sum"}),e.jsx("div",{className:"text-2xl font-bold text-green-300",children:Ue.localSum})]}),e.jsxs("div",{className:"text-xs text-center mt-1",children:["Writes: ",Ue.writes]})]},Ue.id))}),e.jsx("div",{className:"bg-green-900/30 p-3 rounded border-2 border-green-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-300",children:"Global (after merge)"}),e.jsx("div",{className:"text-3xl font-bold text-green-300",children:ke.threadLocal})]})}),e.jsxs("div",{className:"text-sm text-green-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Contentiones: 0"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:Ge,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:F.map((Ue,kt)=>e.jsx("div",{className:`p-2 rounded ${Ue.type==="error"?"bg-red-900/30 text-red-300":Ue.type==="warning"?"bg-yellow-900/30 text-yellow-300":Ue.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:Ue.message},kt))})]})]})}),e.jsx(me,{value:"demo-structure",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/20 to-slate-800/20 p-6 rounded-lg border border-orange-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-300 mb-4",children:"Demo: Structure Reorganization (Field Layout)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>T(!qe),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${qe?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:qe?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ot,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",W,"ms"]}),e.jsx(dt,{value:[W],onValueChange:([Ue])=>re(Ue),min:100,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-red-500/50",children:[e.jsx("h4",{className:"font-bold text-red-300 mb-3 flex items-center gap-2",children:" Bad Layout (Mixed Access)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-red-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Structure Fields:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"bg-blue-600 p-2 rounded text-xs",children:"readFreq (read-only)"}),e.jsx("div",{className:"bg-orange-600 p-2 rounded text-xs",children:"writeFreq1 (write Thread A)"}),e.jsx("div",{className:"bg-orange-600 p-2 rounded text-xs",children:"writeFreq2 (write Thread B)"}),e.jsx("div",{className:"bg-blue-600 p-2 rounded text-xs",children:"readOnly (read-only)"})]})]}),e.jsxs("div",{className:"text-sm text-red-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Invalidaciones: ",M.badLayout]})]}),e.jsx("div",{className:"text-xs text-red-400",children:"Read/Write mezclados  False sharing"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3 flex items-center gap-2",children:" Good Layout (Grouped Access)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500 mb-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 0 (Read-only):"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"bg-blue-600 p-2 rounded text-xs",children:"readFreq"}),e.jsx("div",{className:"bg-blue-600 p-2 rounded text-xs",children:"readOnly"})]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Cache Line 1 (Write):"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"bg-orange-600 p-2 rounded text-xs",children:"writeFreq1"}),e.jsx("div",{className:"bg-orange-600 p-2 rounded text-xs",children:"writeFreq2"})]})]}),e.jsxs("div",{className:"text-sm text-green-300 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Invalidaciones: ",M.goodLayout]})]}),e.jsx("div",{className:"text-xs text-green-400",children:"Agrupados por patrn de acceso"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:ze,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:q.map((Ue,kt)=>e.jsx("div",{className:`p-2 rounded ${Ue.type==="error"?"bg-red-900/30 text-red-300":Ue.type==="warning"?"bg-yellow-900/30 text-yellow-300":Ue.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:Ue.message},kt))})]})]})}),e.jsx(me,{value:"demo-cacheaware",className:"space-y-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-slate-800/20 p-6 rounded-lg border border-red-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-red-300 mb-4",children:"Demo: Cache-Aware DS (AoS vs SoA)"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>Z(!ve),className:`px-4 py-2 rounded-lg font-semibold flex items-center gap-2 ${ve?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:ve?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:It,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm text-gray-300 mb-1 block",children:["Velocidad: ",z,"ms"]}),e.jsx(dt,{value:[z],onValueChange:([Ue])=>Oe(Ue),min:100,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-orange-500/50",children:[e.jsx("h4",{className:"font-bold text-orange-300 mb-3 flex items-center gap-2",children:"Array of Structs (AoS)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-orange-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Memory Layout:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[e.jsx("div",{className:"bg-orange-600 p-1 rounded text-[10px] text-center",children:"x y z"}),e.jsx("div",{className:"bg-orange-600 p-1 rounded text-[10px] text-center",children:"x y z"}),e.jsx("div",{className:"bg-orange-600 p-1 rounded text-[10px] text-center",children:"x y z"}),e.jsx("div",{className:"bg-orange-600 p-1 rounded text-[10px] text-center",children:"x y z"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Acceso a 'x': carga structs completos"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-green-900/30 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Cache Hits"}),e.jsx("div",{className:"font-bold text-green-300",children:se[0]?.cacheHits||0})]}),e.jsxs("div",{className:"bg-red-900/30 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Cache Misses"}),e.jsx("div",{className:"font-bold text-red-300",children:se[0]?.cacheMisses||0})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-green-500/50",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3 flex items-center gap-2",children:" Struct of Arrays (SoA)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border-2 border-green-500",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Memory Layout:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"bg-green-600 p-2 rounded text-xs",children:"x[]: x x x x (contiguos)"}),e.jsx("div",{className:"bg-blue-600 p-2 rounded text-xs",children:"y[]: y y y y"}),e.jsx("div",{className:"bg-purple-600 p-2 rounded text-xs",children:"z[]: z z z z"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Acceso a 'x': carga solo x[]"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-green-900/30 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Cache Hits"}),e.jsx("div",{className:"font-bold text-green-300",children:se[1]?.cacheHits||0})]}),e.jsxs("div",{className:"bg-red-900/30 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Cache Misses"}),e.jsx("div",{className:"font-bold text-red-300",children:se[1]?.cacheMisses||0})]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-semibold text-gray-300 mb-2",children:"Eventos"}),e.jsx("div",{ref:_e,className:"space-y-1 max-h-48 overflow-y-auto font-mono text-xs",children:jt.map((Ue,kt)=>e.jsx("div",{className:`p-2 rounded ${Ue.type==="error"?"bg-red-900/30 text-red-300":Ue.type==="warning"?"bg-yellow-900/30 text-yellow-300":Ue.type==="success"?"bg-green-900/30 text-green-300":"bg-blue-900/30 text-blue-300"}`,children:Ue.message},kt))})]})]})})]})})]})})})]})}const XR=Sa("/ActividadesSeminarioSO/actividad11/false-sharing")({component:YR});function QR(){const[s,i]=c.useState([]),[n,l]=c.useState(!1),[d,m]=c.useState(500),[h,x]=c.useState(0),[g,b]=c.useState(["Event Queue iniciado"]),v=c.useRef(null),[f,N]=c.useState(0),[j,_]=c.useState(0),[w,C]=c.useState(!1),[E,D]=c.useState(500),[L,V]=c.useState(["Event Ordering iniciado"]),J=c.useRef(null),[ie,I]=c.useState(0),[k,be]=c.useState(0),[te,G]=c.useState(!1),[oe,Ce]=c.useState(500),[ke,Ee]=c.useState(["Non-blocking Handlers iniciado"]),P=c.useRef(null),[Q,F]=c.useState([{id:1,status:"idle"},{id:2,status:"idle"},{id:3,status:"idle"},{id:4,status:"idle"}]),[ue,qe]=c.useState([]),[T,W]=c.useState(0),[re,A]=c.useState(!1),[K,M]=c.useState(500),[O,q]=c.useState(["Worker Threads iniciado"]),$=c.useRef(null),[ve,Z]=c.useState(1e3),[z,Oe]=c.useState(0),[Re,ae]=c.useState([]),[se,rt]=c.useState(!1),[jt,fe]=c.useState(500),[Me,De]=c.useState(["Event Sourcing: Balance=$1000"]),Ge=c.useRef(null),[ze,_e]=c.useState(0),[Xe,We]=c.useState(0),[xt,Ot]=c.useState(!1),[It,Ue]=c.useState(500),[kt,et]=c.useState(["Reactive Programming iniciado"]),R=c.useRef(null),[ne,Ve]=c.useState("IDLE"),[de,we]=c.useState(!1),[_t,St]=c.useState(500),[tt,Ye]=c.useState(["State Machine: IDLE"]),ft=c.useRef(null),[Ct,ye]=c.useState(0),[gt,Fe]=c.useState(0),[B,U]=c.useState([]),[Dt,Ke]=c.useState(0),[ge,Ft]=c.useState(!1),[Zt,pt]=c.useState(500),[zt,lt]=c.useState(["Backpressure: Buffer capacity 10"]),Be=c.useRef(null);return c.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[g]),c.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[L]),c.useEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[ke]),c.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[O]),c.useEffect(()=>{Ge.current&&(Ge.current.scrollTop=Ge.current.scrollHeight)},[Me]),c.useEffect(()=>{R.current&&(R.current.scrollTop=R.current.scrollHeight)},[kt]),c.useEffect(()=>{ft.current&&(ft.current.scrollTop=ft.current.scrollHeight)},[tt]),c.useEffect(()=>{Be.current&&(Be.current.scrollTop=Be.current.scrollHeight)},[zt]),c.useEffect(()=>{if(!n)return;const Pe=setInterval(()=>{if(Math.random()<.6&&s.length<12){const Je={id:Date.now(),type:["click","input","submit"][Math.floor(Math.random()*3)],status:"pending"};i(ot=>[...ot,Je]),b(ot=>[...ot.slice(-9),` ${Je.type} encolado`])}i(Je=>{if(Je.length===0)return Je;const[ot,...X]=Je;return x(Ie=>Ie+1),b(Ie=>[...Ie.slice(-9),` ${ot.type} procesado (FIFO)`]),X})},d);return()=>clearInterval(Pe)},[n,d,s.length]),c.useEffect(()=>{if(!w)return;const Pe=setInterval(()=>{const Je=f,ot=Math.random()<.9?Je:Je+Math.floor(Math.random()*3)+1;ot===Je?(N(X=>X+1),V(X=>[...X.slice(-9),` Evento #${ot} en orden`])):(_(X=>X+1),V(X=>[...X.slice(-9),` Violacin: esperado #${Je}, recibido #${ot}`]))},E);return()=>clearInterval(Pe)},[w,E,f]),c.useEffect(()=>{if(!te)return;const Pe=setInterval(()=>{const Je=["http","db","file"][Math.floor(Math.random()*3)];I(ot=>ot+1),Ee(ot=>[...ot.slice(-9),` Handler ${Je} ejecutando`]),setTimeout(()=>{I(ot=>ot-1),be(ot=>ot+1),Ee(ot=>[...ot.slice(-9),` Handler ${Je} completado`])},Math.random()*oe*2)},oe/2);return()=>clearInterval(Pe)},[te,oe]),c.useEffect(()=>{if(!re)return;const Pe=setInterval(()=>{if(Math.random()<.5&&ue.length<10){const ot={id:Date.now(),type:["compute","io"][Math.floor(Math.random()*2)],status:"pending"};qe(X=>[...X,ot]),q(X=>[...X.slice(-9),` Tarea ${ot.type} encolada`])}const Je=Q.findIndex(ot=>ot.status==="idle");Je!==-1&&ue.length>0&&qe(ot=>{const[,...X]=ot;return F(Ie=>Ie.map((st,Rt)=>Rt===Je?{...st,status:"working"}:st)),q(Ie=>[...Ie.slice(-9),` Worker ${Je+1} procesando`]),setTimeout(()=>{F(Ie=>Ie.map((st,Rt)=>Rt===Je?{...st,status:"idle"}:st)),W(Ie=>Ie+1),q(Ie=>[...Ie.slice(-9),` Worker ${Je+1} complet`])},K),X})},K/2);return()=>clearInterval(Pe)},[re,K,Q,ue.length]),c.useEffect(()=>{if(!se)return;const Pe=setInterval(()=>{const Je=["deposit","withdraw","buy"],ot=Je[Math.floor(Math.random()*Je.length)];if(ot==="deposit"){const X=Math.floor(Math.random()*200)+50;Z(Ie=>Ie+X),ae(Ie=>[...Ie.slice(-5),{id:Date.now(),type:"DEPOSIT",status:"completed",data:X}]),De(Ie=>[...Ie.slice(-9),` DEPOSIT $${X}`])}else if(ot==="withdraw"&&ve>=100){const X=Math.floor(Math.random()*100)+50;Z(Ie=>Ie-X),ae(Ie=>[...Ie.slice(-5),{id:Date.now(),type:"WITHDRAW",status:"completed",data:X}]),De(Ie=>[...Ie.slice(-9),` WITHDRAW $${X}`])}else if(ot==="buy"&&ve>=50){const X=Math.floor(Math.random()*50)+20;Z(Ie=>Ie-X),Oe(Ie=>Ie+1),ae(Ie=>[...Ie.slice(-5),{id:Date.now(),type:"BUY",status:"completed",data:X}]),De(Ie=>[...Ie.slice(-9),` BUY $${X}`])}},jt);return()=>clearInterval(Pe)},[se,jt,ve]),c.useEffect(()=>{if(!xt)return;const Pe=setInterval(()=>{const Je=Math.floor(Math.random()*100);Je>50?(_e(ot=>ot+1),We(ot=>ot+1),et(ot=>[...ot.slice(-9),` ${Je}  Filter   Map (*2) = ${Je*2}`])):et(ot=>[...ot.slice(-9),` ${Je}  Filter `])},It);return()=>clearInterval(Pe)},[xt,It]),c.useEffect(()=>{if(!de)return;const Pe=setInterval(()=>{const ot={IDLE:[{event:"start",next:"RUNNING"}],RUNNING:[{event:"pause",next:"PAUSED"},{event:"complete",next:"COMPLETED"}],PAUSED:[{event:"resume",next:"RUNNING"}],COMPLETED:[{event:"reset",next:"IDLE"}]}[ne]||[];if(ot.length>0){const X=ot[Math.floor(Math.random()*ot.length)];Ve(X.next),Ye(Ie=>[...Ie.slice(-9),` ${ne} --[${X.event}]--> ${X.next}`])}},_t);return()=>clearInterval(Pe)},[de,_t,ne]),c.useEffect(()=>{if(!ge)return;const Pe=setInterval(()=>{const ot=Math.floor(Math.random()*100);ye(X=>X+1),U(X=>X.length<10?(lt(Ie=>[...Ie.slice(-9),` Producer: ${ot}  Buffer (${X.length+1}/10)`]),[...X,ot]):(Ke(Ie=>Ie+1),lt(Ie=>[...Ie.slice(-9),` Buffer lleno! Dato ${ot} descartado`]),X))},Zt/3),Je=setInterval(()=>{U(ot=>{if(ot.length>0){const[X,...Ie]=ot;return Fe(st=>st+1),lt(st=>[...st.slice(-9),` Consumer: ${X} procesado  Buffer (${Ie.length}/10)`]),Ie}return ot})},Zt);return()=>{clearInterval(Pe),clearInterval(Je)}},[ge,Zt,B.length]),e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(hp,{className:"size-12 text-yellow-500"}),e.jsx("h1",{className:"text-4xl font-bold",children:" Programacin Basada en Eventos"})]}),e.jsx("p",{className:"text-lg text-gray-300",children:"Paradigma donde el flujo del programa est determinado por eventos. Fundamental para aplicaciones asncronas, UI, servidores de alta concurrencia y arquitecturas reactivas."}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Desacoplamiento, escalabilidad, responsividad.",e.jsx("span",{className:"font-bold ml-4",children:"Desafos:"})," Event ordering, backpressure, debugging."]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["pseudocodigos"],className:"space-y-4",children:[e.jsxs(sa,{value:"pseudocodigos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Pseudocdigos de las Soluciones"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"ps-queue",className:"px-6 pb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Qt,{className:"grid grid-cols-4 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"ps-queue",children:" Queue"}),e.jsx(ce,{value:"ps-order",children:" Ordering"}),e.jsx(ce,{value:"ps-handler",children:" Handlers"}),e.jsx(ce,{value:"ps-worker",children:" Workers"})]}),e.jsxs(Qt,{className:"grid grid-cols-4 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"ps-sourcing",children:" Sourcing"}),e.jsx(ce,{value:"ps-reactive",children:" Reactive"}),e.jsx(ce,{value:"ps-sm",children:" State"}),e.jsx(ce,{value:"ps-bp",children:" Backpressure"})]})]}),e.jsx(me,{value:"ps-queue",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:" Event Queue Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"1. Cola FIFO Bsica"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura EventQueue {
  cola: Queue<Event>
  mutex: Lock
  condVar: ConditionVariable
}

funcin enqueue(evento: Event) {
  mutex.lock()
  cola.push(evento)
  condVar.signal()  // Notificar que hay eventos
  mutex.unlock()
}

funcin dequeue() -> Event {
  mutex.lock()
  mientras cola.isEmpty():
    condVar.wait(mutex)  // Esperar eventos
  evento = cola.pop()
  mutex.unlock()
  retornar evento
}

funcin processEvents() {
  mientras true:
    evento = dequeue()
    handleEvent(evento)
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"2. Cola con Prioridades"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura PriorityEventQueue {
  colas: Array<Queue<Event>>  // Una cola por prioridad
  mutex: Lock
  maxPriority: entero = 5
}

funcin enqueue(evento: Event, prioridad: entero) {
  mutex.lock()
  si prioridad < 1 o prioridad > maxPriority:
    prioridad = maxPriority
  colas[prioridad].push(evento)
  mutex.unlock()
}

funcin dequeue() -> Event {
  mutex.lock()
  // Buscar desde mayor prioridad (1) a menor (5)
  para prioridad en 1 hasta maxPriority:
    si no colas[prioridad].isEmpty():
      evento = colas[prioridad].pop()
      mutex.unlock()
      retornar evento
  mutex.unlock()
  retornar null
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"3. Event Loop Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura EventLoop {
  running: booleano
  queue: EventQueue
  handlers: Map<TipoEvento, Handler>
}

funcin start() {
  running = true
  mientras running:
    evento = queue.dequeue()
    
    si evento != null:
      handler = handlers.get(evento.type)
      si handler != null:
        intentar:
          handler.execute(evento)
        capturar error:
          logError(error)
          evento.status = 'failed'
}

funcin registerHandler(tipo: TipoEvento, handler: Handler) {
  handlers.set(tipo, handler)
}

funcin stop() {
  running = false
}`})]}),e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," UI event handling, message brokers (RabbitMQ, Kafka), task queues (Celery, Bull), command pattern, pub/sub systems."]})})]})]})}),e.jsx(me,{value:"ps-order",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:" Event Ordering Guarantees"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"1. Nmeros de Secuencia"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura SequencedEvent {
  evento: Event
  secuencia: entero
  fuente: ID
}

estructura Sequencer {
  siguienteSecuencia: AtomicInteger = 0
  buffer: Map<entero, SequencedEvent>  // Out-of-order buffer
  esperado: entero = 0
}

funcin assignSequence(evento: Event) -> SequencedEvent {
  seq = siguienteSecuencia.incrementAndGet()
  retornar SequencedEvent(evento, seq, nodeId)
}

funcin processInOrder(seqEvento: SequencedEvent) {
  buffer[seqEvento.secuencia] = seqEvento
  
  mientras buffer.contains(esperado):
    evento = buffer.remove(esperado)
    handleEvent(evento.evento)
    esperado++
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"2. Vector Clocks (Causal Ordering)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura VectorClock {
  vector: Array<entero>  // Un contador por nodo
  nodeId: entero
}

funcin increment() {
  vector[nodeId]++
}

funcin update(other: VectorClock) {
  para i en 0 hasta vector.length:
    vector[i] = max(vector[i], other.vector[i])
  vector[nodeId]++
}

funcin happensBefore(vc1: VectorClock, vc2: VectorClock) -> booleano {
  menorIgual = true
  estrictamenteMenor = false
  
  para i en 0 hasta vc1.vector.length:
    si vc1.vector[i] > vc2.vector[i]:
      menorIgual = false
      break
    si vc1.vector[i] < vc2.vector[i]:
      estrictamenteMenor = true
  
  retornar menorIgual Y estrictamenteMenor
}

funcin sendEvent(evento: Event) {
  increment()
  evento.vectorClock = copiar(vector)
  enviar(evento)
}

funcin receiveEvent(evento: Event) {
  update(evento.vectorClock)
  procesarSiEsSeguro(evento)
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"3. Lamport Timestamps"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura LamportClock {
  timestamp: AtomicInteger = 0
  nodeId: entero
}

funcin tick() -> entero {
  retornar timestamp.incrementAndGet()
}

funcin update(recibido: entero) {
  mientras true:
    actual = timestamp.get()
    nuevo = max(actual, recibido) + 1
    si timestamp.compareAndSet(actual, nuevo):
      break
  retornar nuevo
}

funcin compare(t1: (timestamp, nodeId), t2: (timestamp, nodeId)) -> entero {
  si t1.timestamp < t2.timestamp:
    retornar -1
  sino si t1.timestamp > t2.timestamp:
    retornar 1
  sino:  // Desempate por nodeId
    retornar t1.nodeId - t2.nodeId
}`})]}),e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Event sourcing, distributed databases (Cassandra), replication systems, causal consistency, blockchain, distributed tracing."]})})]})]})}),e.jsx(me,{value:"ps-handler",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:" Non-blocking Event Handlers"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"1. Async/Await Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Patrn moderno con async/await
funcin async handleEventAsync(evento: Event) {
  intentar:
    evento.status = 'processing'
    
    // Operaciones no bloqueantes
    resultado = await operacionIO(evento.data)
    datos = await procesarDatos(resultado)
    await guardarResultado(datos)
    
    evento.status = 'completed'
  capturar error:
    evento.status = 'failed'
    logError(error)
    throw error
}

funcin async processEventsWithConcurrency(eventos: Array<Event>) {
  // Procesar mltiples eventos concurrentemente
  promesas = eventos.map(e => handleEventAsync(e))
  
  // Esperar todos con manejo de errores
  resultados = await Promise.allSettled(promesas)
  
  para resultado en resultados:
    si resultado.status == 'rejected':
      logError(resultado.reason)
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"2. Callback Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`funcin handleEventWithCallback(evento: Event, callback: Function) {
  // Iniciar operacin asncrona
  operacionAsync(evento.data, funcin(error, resultado) {
    si error:
      evento.status = 'failed'
      callback(error, null)
    sino:
      evento.status = 'completed'
      callback(null, resultado)
  })
  
  // Retornar inmediatamente sin bloquear
  retornar  // Handler no bloqueante
}

funcin processWithCallbacks(eventos: Array<Event>) {
  contador = AtomicInteger(eventos.length)
  resultados = []
  
  para evento en eventos:
    handleEventWithCallback(evento, funcin(error, resultado) {
      si error:
        logError(error)
      sino:
        resultados.push(resultado)
      
      si contador.decrementAndGet() == 0:
        onTodosCompletados(resultados)
    })
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"3. Promise Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`funcin handleEventWithPromise(evento: Event) -> Promise<Result> {
  retornar new Promise(funcin(resolve, reject) {
    intentar:
      evento.status = 'processing'
      
      // Operacin asncrona
      operacionAsync(evento.data)
        .then(funcin(resultado) {
          evento.status = 'completed'
          resolve(resultado)
        })
        .catch(funcin(error) {
          evento.status = 'failed'
          reject(error)
        })
    capturar error:
      reject(error)
  })
}

funcin processWithPromiseChain(eventos: Array<Event>) {
  // Procesar secuencialmente con promises
  promesa = Promise.resolve()
  
  para evento en eventos:
    promesa = promesa.then(funcin() {
      retornar handleEventWithPromise(evento)
    })
  
  retornar promesa
}`})]}),e.jsx("div",{className:"p-4 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Node.js event loop, web APIs (fetch), database queries, file I/O, network requests, microservices communication."]})})]})]})}),e.jsx(me,{value:"ps-worker",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-yellow-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:" Worker Threads para Eventos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Thread Pool Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura WorkerPool {
  workers: Array<Worker>
  taskQueue: BlockingQueue<Event>
  running: booleano
}

funcin iniciar(numWorkers: entero) {
  running = true
  para i en 1 hasta numWorkers:
    worker = new Worker(i, taskQueue)
    workers.push(worker)
    worker.start()
}

funcin submitEvent(evento: Event) {
  taskQueue.put(evento)
}

clase Worker extends Thread {
  id: entero
  queue: BlockingQueue<Event>
  
  funcin run() {
    mientras running:
      evento = queue.take()  // Bloquea hasta que haya trabajo
      procesarEvento(evento)
}`})]}),e.jsx("div",{className:"p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Uso:"})," Processing pools, parallel event handling"]})})]})]})}),e.jsx(me,{value:"ps-sourcing",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-cyan-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:" Event Sourcing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"Event Store Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura EventStore {
  events: List<Event>
  snapshots: Map<ID, Snapshot>
}

funcin appendEvent(evento: Event) {
  evento.timestamp = now()
  evento.version = events.size() + 1
  events.append(evento)
  
  si evento.version % 100 == 0:
    crearSnapshot(evento.aggregateId)
}

funcin rebuild(aggregateId: ID) -> Estado {
  snapshot = snapshots.get(aggregateId)
  estado = snapshot != null ? snapshot.estado : estadoInicial()
  
  desde = snapshot != null ? snapshot.version : 0
  para evento en events desde desde:
    estado = aplicarEvento(estado, evento)
  
  retornar estado
}`})]}),e.jsx("div",{className:"p-4 bg-cyan-900/30 border border-cyan-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Uso:"})," CQRS, audit logs, time travel debugging"]})})]})]})}),e.jsx(me,{value:"ps-reactive",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-pink-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-pink-400 mb-4",children:" Reactive Programming"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-pink-300 mb-3",children:"Observable Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`clase Observable<T> {
  observers: List<Observer<T>>
  
  funcin subscribe(observer: Observer<T>) {
    observers.add(observer)
    retornar funcin unsubscribe() {
      observers.remove(observer)
    }
  }
  
  funcin emit(valor: T) {
    para observer en observers:
      observer.onNext(valor)
  }
  
  funcin map<R>(transform: Function<T, R>) -> Observable<R> {
    retornar new Observable(funcin(observer) {
      this.subscribe(funcin(valor) {
        observer.onNext(transform(valor))
      })
    })
  }
  
  funcin filter(predicate: Function<T, boolean>) -> Observable<T> {
    retornar new Observable(funcin(observer) {
      this.subscribe(funcin(valor) {
        si predicate(valor):
          observer.onNext(valor)
      })
    })
  }
}`})]}),e.jsx("div",{className:"p-4 bg-pink-900/30 border border-pink-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-pink-200",children:[e.jsx("span",{className:"font-bold",children:"Uso:"})," RxJS, data streams, reactive UI"]})})]})]})}),e.jsx(me,{value:"ps-sm",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-orange-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-400 mb-4",children:" State Machine"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-orange-300 mb-3",children:"FSM Pattern"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura StateMachine {
  estadoActual: Estado
  transiciones: Map<(Estado, Evento), Estado>
  acciones: Map<(Estado, Evento), Action>
}

funcin handleEvent(evento: Evento) {
  clave = (estadoActual, evento.tipo)
  
  si transiciones.contains(clave):
    nuevoEstado = transiciones.get(clave)
    
    // Ejecutar accin si existe
    si acciones.contains(clave):
      accion = acciones.get(clave)
      accion.execute(evento)
    
    // Transicin
    onExit(estadoActual, evento)
    estadoActual = nuevoEstado
    onEnter(nuevoEstado, evento)
  sino:
    logWarning("Transicin invlida: " + clave)
}`})]}),e.jsx("div",{className:"p-4 bg-orange-900/30 border border-orange-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-200",children:[e.jsx("span",{className:"font-bold",children:"Uso:"})," Workflow engines, UI states, protocols"]})})]})]})}),e.jsx(me,{value:"ps-bp",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-teal-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-teal-400 mb-4",children:" Backpressure Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-teal-300 mb-3",children:"Backpressure Strategies"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura BackpressureBuffer<T> {
  buffer: BoundedQueue<T>
  strategy: Strategy  // DROP, BLOCK, ERROR
}

funcin produce(item: T) {
  cuando strategy:
    DROP:
      si no buffer.offer(item):
        logDrop(item)  // Descartar silenciosamente
    
    BLOCK:
      buffer.put(item)  // Bloquear hasta que haya espacio
    
    ERROR:
      si no buffer.offer(item):
        throw BufferOverflowException()
}

funcin consume() -> T {
  retornar buffer.take()
}

// Patrn Reactive Streams
interfaz Publisher<T> {
  funcin subscribe(subscriber: Subscriber<T>)
}

interfaz Subscriber<T> {
  funcin onSubscribe(subscription: Subscription)
  funcin onNext(item: T)
  funcin onError(error: Error)
  funcin onComplete()
}

interfaz Subscription {
  funcin request(n: long)  // Pull-based backpressure
  funcin cancel()
}`})]}),e.jsx("div",{className:"p-4 bg-teal-900/30 border border-teal-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-teal-200",children:[e.jsx("span",{className:"font-bold",children:"Uso:"})," Reactive Streams, flow control, rate limiting"]})})]})]})})]})})]}),e.jsxs(sa,{value:"demos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"queue",className:"px-6 pb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Qt,{className:"grid grid-cols-4 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"queue",children:" Queue"}),e.jsx(ce,{value:"order",children:" Ordering"}),e.jsx(ce,{value:"handler",children:" Handlers"}),e.jsx(ce,{value:"worker",children:" Workers"})]}),e.jsxs(Qt,{className:"grid grid-cols-4 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"sourcing",children:" Sourcing"}),e.jsx(ce,{value:"reactive",children:" Reactive"}),e.jsx(ce,{value:"sm",children:" State"}),e.jsx(ce,{value:"bp",children:" Backpressure"})]})]}),e.jsx(me,{value:"queue",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400",children:"Event Queue Management"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>l(!n),className:`px-4 py-2 rounded flex items-center gap-2 ${n?"bg-red-600":"bg-blue-600"}`,children:[n?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),n?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{l(!1),i([]),x(0),b(["Event Queue reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",d,"ms"]}),e.jsx(dt,{value:[d],onValueChange:([Pe])=>m(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Cola FIFO"}),e.jsx("div",{className:"bg-gray-800 rounded p-4 h-64 overflow-y-auto",children:s.length===0?e.jsx("div",{className:"text-center text-gray-500",children:"Cola vaca"}):s.map((Pe,Je)=>e.jsxs("div",{className:`p-2 mb-2 rounded border-2 ${Je===0?"bg-blue-900/50 border-blue-500":"bg-gray-700 border-gray-600"}`,children:[Je===0?"":""," ",Pe.type]},Pe.id))}),e.jsxs("div",{className:"mt-3 text-center text-blue-400 font-bold",children:["En cola: ",s.length]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estadsticas"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Procesados"}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:h})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"En Cola"}),e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.length})]}),e.jsxs("div",{className:"p-4 bg-blue-900/30 border border-blue-700/50 rounded text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("div",{className:"text-xs text-blue-300",children:"Orden FIFO Garantizado"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:v,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-blue-400",children:g.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"order",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Event Ordering Guarantees"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>C(!w),className:`px-4 py-2 rounded flex items-center gap-2 ${w?"bg-red-600":"bg-green-600"}`,children:[w?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),w?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{C(!1),N(0),_(0),V(["Event Ordering reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",E,"ms"]}),e.jsx(dt,{value:[E],onValueChange:([Pe])=>D(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Secuencia Actual"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:["#",f]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Violaciones"}),e.jsx("div",{className:"text-3xl font-bold text-red-400",children:j})]})]}),e.jsxs("div",{className:"p-6 bg-green-900/30 border border-green-700/50 rounded text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsxs("div",{className:"text-xl font-bold text-green-300",children:["Tasa de xito: ",f>0?Math.round((1-j/(f+j))*100):100,"%"]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Vector clocks, Lamport timestamps"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:J,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-green-400",children:L.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"handler",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400",children:"Non-blocking Handlers"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>G(!te),className:`px-4 py-2 rounded flex items-center gap-2 ${te?"bg-red-600":"bg-purple-600"}`,children:[te?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),te?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{G(!1),I(0),be(0),Ee(["Handlers reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",oe,"ms"]}),e.jsx(dt,{value:[oe],onValueChange:([Pe])=>Ce(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Handlers Activos"}),e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:ie})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Completados"}),e.jsx("div",{className:"text-3xl font-bold text-green-400",children:k})]})]}),e.jsxs("div",{className:"p-6 bg-purple-900/30 border border-purple-700/50 rounded text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("div",{className:"text-lg font-bold text-purple-300",children:"Procesamiento Asncrono"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Callbacks, Promises, Async/Await"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:P,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-purple-400",children:ke.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"worker",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:"Worker Threads"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>A(!re),className:`px-4 py-2 rounded flex items-center gap-2 ${re?"bg-red-600":"bg-yellow-600"}`,children:[re?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),re?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{A(!1),F(Pe=>Pe.map(Je=>({...Je,status:"idle"}))),qe([]),W(0),q(["Workers reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",K,"ms"]}),e.jsx(dt,{value:[K],onValueChange:([Pe])=>M(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Workers (4)"}),e.jsx("div",{className:"space-y-2",children:Q.map(Pe=>e.jsx("div",{className:`p-3 rounded border-2 ${Pe.status==="working"?"bg-yellow-900/50 border-yellow-500":"bg-gray-700 border-gray-600"}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[" Worker ",Pe.id]}),e.jsx("span",{className:Pe.status==="working"?"text-yellow-400":"text-gray-400",children:Pe.status==="working"?" Trabajando":" Idle"})]})},Pe.id))}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("span",{className:"text-gray-400",children:"Cola:"})," ",e.jsx("span",{className:"font-bold text-yellow-400",children:ue.length})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Completadas"}),e.jsx("div",{className:"text-3xl font-bold text-green-400",children:T})]}),e.jsxs("div",{className:"p-6 bg-yellow-900/30 border border-yellow-700/50 rounded text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("div",{className:"text-lg font-bold text-yellow-300",children:"Thread Pool"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:$,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-yellow-400",children:O.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"sourcing",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-400",children:"Event Sourcing"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>rt(!se),className:`px-4 py-2 rounded flex items-center gap-2 ${se?"bg-red-600":"bg-cyan-600"}`,children:[se?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),se?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{rt(!1),Z(1e3),Oe(0),ae([]),De(["Event Sourcing reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",jt,"ms"]}),e.jsx(dt,{value:[jt],onValueChange:([Pe])=>fe(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estado"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Balance"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:["$",ve]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Items"}),e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:z})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Eventos"}),e.jsx("div",{className:"bg-gray-800 rounded p-4 h-48 overflow-y-auto",children:Re.length===0?e.jsx("div",{className:"text-center text-gray-500",children:"Sin eventos"}):Re.map(Pe=>e.jsx("div",{className:"p-2 mb-2 rounded bg-cyan-900/30 border border-cyan-700/50",children:e.jsxs("span",{className:"text-sm",children:[Pe.type==="DEPOSIT"?"":Pe.type==="WITHDRAW"?"":""," ",Pe.type," $",Pe.data]})},Pe.id))})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:Ge,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-cyan-400",children:Me.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"reactive",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-400",children:"Reactive Programming"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>Ot(!xt),className:`px-4 py-2 rounded flex items-center gap-2 ${xt?"bg-red-600":"bg-pink-600"}`,children:[xt?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),xt?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{Ot(!1),_e(0),We(0),et(["Reactive reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",It,"ms"]}),e.jsx(dt,{value:[It],onValueChange:([Pe])=>Ue(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Filtrados (>50)"}),e.jsx("div",{className:"text-3xl font-bold text-pink-400",children:ze})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Mapeados (*2)"}),e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:Xe})]})]}),e.jsxs("div",{className:"p-6 bg-pink-900/30 border border-pink-700/50 rounded text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:""}),e.jsx("div",{className:"text-lg font-bold text-pink-300",children:"Reactive Streams"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Observables, filter, map"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:R,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-pink-400",children:kt.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"sm",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400",children:"State Machine"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>we(!de),className:`px-4 py-2 rounded flex items-center gap-2 ${de?"bg-red-600":"bg-orange-600"}`,children:[de?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),de?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{we(!1),Ve("IDLE"),Ye(["State Machine: IDLE"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",_t,"ms"]}),e.jsx(dt,{value:[_t],onValueChange:([Pe])=>St(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"p-8 bg-gray-800 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Estado Actual"}),e.jsx("div",{className:"text-5xl font-bold text-orange-400 mb-4",children:ne}),e.jsxs("div",{className:"text-xs text-gray-400",children:[ne==="IDLE"&&" En espera",ne==="RUNNING"&&" Ejecutando",ne==="PAUSED"&&" Pausado",ne==="COMPLETED"&&" Completado"]})]}),e.jsxs("div",{className:"p-6 bg-orange-900/30 border border-orange-700/50 rounded",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Transiciones"}),e.jsxs("div",{className:"text-xs text-gray-300 space-y-2",children:[e.jsx("div",{children:"IDLE  [start]  RUNNING"}),e.jsx("div",{children:"RUNNING  [pause]  PAUSED"}),e.jsx("div",{children:"RUNNING  [complete]  COMPLETED"}),e.jsx("div",{children:"PAUSED  [resume]  RUNNING"}),e.jsx("div",{children:"COMPLETED  [reset]  IDLE"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:ft,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-orange-400",children:tt.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})}),e.jsx(me,{value:"bp",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-teal-400",children:"Backpressure Management"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>Ft(!ge),className:`px-4 py-2 rounded flex items-center gap-2 ${ge?"bg-red-600":"bg-teal-600"}`,children:[ge?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),ge?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:()=>{Ft(!1),ye(0),Fe(0),U([]),Ke(0),lt(["Backpressure reiniciado"])},className:"px-4 py-2 bg-gray-700 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",Zt,"ms"]}),e.jsx(dt,{value:[Zt],onValueChange:([Pe])=>pt(Pe),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Mtricas"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Producidos"}),e.jsx("div",{className:"text-3xl font-bold text-blue-400",children:Ct})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Consumidos"}),e.jsx("div",{className:"text-3xl font-bold text-green-400",children:gt})]}),e.jsxs("div",{className:"p-4 bg-red-900/30 border border-red-700/50 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Descartados"}),e.jsx("div",{className:"text-3xl font-bold text-red-400",children:Dt})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Buffer (10)"}),e.jsxs("div",{className:"bg-gray-800 rounded p-4 h-64",children:[e.jsx("div",{className:"grid grid-cols-10 gap-1 h-full",children:[...Array(10)].map((Pe,Je)=>e.jsx("div",{className:`rounded ${Je<B.length?"bg-teal-500":"bg-gray-700"}`},Je))}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("span",{className:"text-teal-400 font-bold",children:[B.length,"/10"]}),B.length>=10&&e.jsx("span",{className:"ml-3 text-red-400",children:" LLENO"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log"}),e.jsx("div",{ref:Be,className:"bg-black rounded p-3 h-40 overflow-y-auto font-mono text-xs text-teal-400",children:zt.map((Pe,Je)=>e.jsx("div",{children:Pe},Je))})]})]})})]})})]})]})})]})}const ZR=Sa("/ActividadesSeminarioSO/actividad11/eventos")({component:QR});function JR(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-5xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Deadlock"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Interbloqueo / Abrazo Mortal"})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white text-gray-900 rounded-lg p-8 mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ia,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Descripcin del Problema"})]}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:["Un ",e.jsx("strong",{className:"text-red-600",children:"deadlock"})," (interbloqueo) ocurre cuando un conjunto de procesos est esperando por recursos que estn siendo retenidos por otros procesos del mismo conjunto. Ningn proceso puede continuar porque cada uno est esperando que otro libere un recurso."]}),e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded mt-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yn,{className:"size-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900 mb-2",children:"Condiciones de Coffman"}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Para que ocurra un deadlock, deben cumplirse simultneamente estas 4 condiciones:"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"1. Exclusin Mutua:"})," Al menos un recurso debe estar en modo no compartible"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2. Hold and Wait:"})," Un proceso retiene al menos un recurso y espera por otro"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"3. No Preemption:"})," Los recursos no pueden ser arrebatados, solo liberados voluntariamente"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"4. Espera Circular:"})," Existe una cadena circular de procesos esperando recursos"]})]})]})]})}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:" Estrategias:"})," Para prevenir deadlocks podemos romper una o ms de las condiciones de Coffman, detectar y recuperarnos del deadlock, o simplemente ignorarlo (algoritmo del avestruz)."]})})]}),e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"ordenar",className:"w-full",children:[e.jsxs(Qt,{className:"w-full justify-start flex-wrap h-auto gap-2 bg-gray-900 p-2",children:[e.jsx(ce,{value:"ordenar",children:"Ordenar Recursos"}),e.jsx(ce,{value:"todos",children:"Adquirir Todos"}),e.jsx(ce,{value:"timeout",children:"Timeouts"}),e.jsx(ce,{value:"banquero",children:"Algoritmo del Banquero"}),e.jsx(ce,{value:"grafo",children:"Anlisis de Grafos"}),e.jsx(ce,{value:"ciclos",children:"Detectar Ciclos"}),e.jsx(ce,{value:"abortar",children:"Abortar Procesos"}),e.jsx(ce,{value:"rollback",children:"Rollback"})]}),e.jsx(me,{value:"ordenar",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Ordenar la Adquisicin de Recursos"}),e.jsx("p",{className:"text-gray-300",children:"Establece un orden global para adquirir recursos. Todos los procesos deben solicitar recursos en el mismo orden, rompiendo la condicin de espera circular."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Orden Global de Recursos

// Definir orden de recursos (IDs nicos)
RECURSOS:
    R1 = 1  // Base de datos
    R2 = 2  // Archivo de log
    R3 = 3  // Buffer de red
    R4 = 4  // Impresora

PROCEDIMIENTO adquirir_recursos_ordenados(ids_recursos[]):
    // IMPORTANTE: Ordenar IDs antes de adquirir
    ids_ordenados = ORDENAR(ids_recursos)
    recursos_adquiridos = []
    
    PARA CADA id EN ids_ordenados:
        recurso = ADQUIRIR_LOCK(id)
        AGREGAR(recursos_adquiridos, recurso)
    FIN PARA
    
    RETORNAR recursos_adquiridos
FIN PROCEDIMIENTO

PROCEDIMIENTO liberar_recursos(recursos[]):
    // Liberar en orden inverso (opcional pero recomendado)
    PARA CADA recurso EN REVERSA(recursos):
        LIBERAR_LOCK(recurso)
    FIN PARA
FIN PROCEDIMIENTO

// Ejemplo: Dos procesos que necesitan mismos recursos
PROCEDIMIENTO proceso_A():
    // Necesita R2 y R4, pero los ordena primero
    recursos = adquirir_recursos_ordenados([R4, R2])  // Se ordena a [R2, R4]
    
    // Seccin crtica
    USAR(recursos)
    
    liberar_recursos(recursos)
FIN PROCEDIMIENTO

PROCEDIMIENTO proceso_B():
    // Tambin necesita R2 y R4
    recursos = adquirir_recursos_ordenados([R2, R4])  // Ya ordenados
    
    // Seccin crtica
    USAR(recursos)
    
    liberar_recursos(recursos)
FIN PROCEDIMIENTO

// Sin ordenamiento: posible deadlock
// A adquiere R4, B adquiere R2
// A espera R2, B espera R4 -> DEADLOCK

// Con ordenamiento: sin deadlock
// Ambos intentan R2 primero, uno espera, no hay ciclo`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Prevencin garantizada, simple de implementar, sin overhead en runtime.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Requiere conocer todos los recursos por adelantado, puede reducir concurrencia."]})})]})}),e.jsx(me,{value:"todos",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Adquirir Todos los Recursos de Una Vez"}),e.jsx("p",{className:"text-gray-300",children:'Un proceso debe adquirir todos los recursos que necesita de forma atmica antes de comenzar, o no adquirir ninguno. Rompe la condicin de "hold and wait".'}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Adquisicin Atmica

COMPARTIDO lock_global = NuevoMutex()

PROCEDIMIENTO adquirir_todos_o_ninguno(recursos_requeridos[]):
    recursos_obtenidos = []
    exito = FALSO
    
    // Usar lock global para hacer la adquisicin atmica
    lock_global.adquirir()
    
    INTENTAR:
        // Intentar adquirir todos
        PARA CADA recurso EN recursos_requeridos:
            SI recurso.esta_disponible():
                recurso.adquirir()
                AGREGAR(recursos_obtenidos, recurso)
            SINO:
                // Si alguno no est disponible, abortar
                IR_A liberar_y_fallar
            FIN SI
        FIN PARA
        
        exito = VERDADERO
        
    liberar_y_fallar:
        SI NO exito:
            // Liberar todo lo adquirido
            PARA CADA recurso EN recursos_obtenidos:
                recurso.liberar()
            FIN PARA
            recursos_obtenidos = []
        FIN SI
        
    FINALMENTE:
        lock_global.liberar()
    FIN INTENTAR
    
    RETORNAR recursos_obtenidos
FIN PROCEDIMIENTO

PROCEDIMIENTO proceso_con_retry():
    recursos_necesarios = [R1, R2, R3]
    recursos = []
    
    // Reintentar hasta obtener todos
    MIENTRAS VERDADERO:
        recursos = adquirir_todos_o_ninguno(recursos_necesarios)
        
        SI recursos.tamao() > 0:
            SALIR  // xito, tenemos todos los recursos
        SINO:
            DORMIR(tiempo_aleatorio())  // Esperar antes de reintentar
        FIN SI
    FIN MIENTRAS
    
    // Usar recursos
    TRABAJAR_CON(recursos)
    
    // Liberar todos
    PARA CADA recurso EN recursos:
        recurso.liberar()
    FIN PARA
FIN PROCEDIMIENTO

// Variante sin lock global (usando banderas)
PROCEDIMIENTO adquirir_no_bloqueante(recursos[]):
    PARA CADA recurso EN recursos:
        SI NO recurso.try_lock():  // Intento no bloqueante
            // Liberar lo ya adquirido
            liberar_adquiridos_hasta_ahora()
            RETORNAR FALSO
        FIN SI
    FIN PARA
    RETORNAR VERDADERO
FIN PROCEDIMIENTO`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Previene deadlock completamente, fcil de razonar.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Puede causar starvation, reduce concurrencia, desperdicio si solo necesita algunos recursos."]})})]})}),e.jsx(me,{value:"timeout",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Implementar Timeouts"}),e.jsx("p",{className:"text-gray-300",children:"Los procesos intentan adquirir recursos con un tiempo lmite. Si expira el timeout, liberan todos los recursos y reintentan, rompiendo el deadlock potencial."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Timeouts para Prevenir Deadlock

CONSTANTE TIMEOUT_MS = 5000  // 5 segundos
CONSTANTE MAX_REINTENTOS = 3

PROCEDIMIENTO adquirir_con_timeout(recurso, timeout_ms):
    tiempo_inicio = TIEMPO_ACTUAL()
    
    MIENTRAS (TIEMPO_ACTUAL() - tiempo_inicio) < timeout_ms:
        SI recurso.try_lock():
            RETORNAR VERDADERO  // xito
        FIN SI
        
        DORMIR(10)  // Esperar un poco antes de reintentar
    FIN MIENTRAS
    
    RETORNAR FALSO  // Timeout expir
FIN PROCEDIMIENTO

PROCEDIMIENTO proceso_con_timeout():
    recursos_adquiridos = []
    recursos_necesarios = [R1, R2, R3]
    intentos = 0
    
    MIENTRAS intentos < MAX_REINTENTOS:
        exito = VERDADERO
        
        // Intentar adquirir cada recurso con timeout
        PARA CADA recurso EN recursos_necesarios:
            SI adquirir_con_timeout(recurso, TIMEOUT_MS):
                AGREGAR(recursos_adquiridos, recurso)
            SINO:
                // Timeout: liberar todo y reintentar
                IMPRIMIR "Timeout al adquirir", recurso.id, "- Reintentando..."
                exito = FALSO
                SALIR_DEL_BUCLE
            FIN SI
        FIN PARA
        
        SI exito:
            // Tenemos todos los recursos
            TRABAJAR()
            
            // Liberar recursos
            PARA CADA recurso EN recursos_adquiridos:
                recurso.liberar()
            FIN PARA
            
            RETORNAR VERDADERO
        SINO:
            // Fall: liberar parciales
            PARA CADA recurso EN recursos_adquiridos:
                recurso.liberar()
            FIN PARA
            recursos_adquiridos = []
            
            // Backoff exponencial
            tiempo_espera = POTENCIA(2, intentos) * 100
            DORMIR(tiempo_espera + ALEATORIO(0, 100))
            
            intentos = intentos + 1
        FIN SI
    FIN MIENTRAS
    
    IMPRIMIR "ERROR: No se pudieron adquirir recursos tras", MAX_REINTENTOS, "intentos"
    RETORNAR FALSO
FIN PROCEDIMIENTO

// Variante con try_lock_for (C++/Java)
PROCEDIMIENTO ejemplo_moderno():
    mutex1 = NuevoMutex()
    mutex2 = NuevoMutex()
    
    SI mutex1.try_lock_for(2.segundos()):
        SI mutex2.try_lock_for(2.segundos()):
            // Ambos adquiridos
            TRABAJAR()
            mutex2.unlock()
        SINO:
            IMPRIMIR "Timeout en mutex2"
        FIN SI
        mutex1.unlock()
    SINO:
        IMPRIMIR "Timeout en mutex1"
    FIN SI
FIN PROCEDIMIENTO`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Flexible, permite recuperacin automtica, til en sistemas distribuidos.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," No garantiza prevencin, overhead de reinicios, difcil elegir timeout correcto."]})})]})}),e.jsx(me,{value:"banquero",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Algoritmo del Banquero (Dijkstra)"}),e.jsx("p",{className:"text-gray-300",children:"Verifica que cada asignacin de recursos deje al sistema en un estado seguro. Un estado es seguro si existe al menos una secuencia de ejecucin donde todos los procesos pueden terminar."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Algoritmo del Banquero

ESTRUCTURA EstadoSistema:
    disponible[]        // Recursos disponibles
    maximo[][]          // Mximo que necesita cada proceso
    asignacion[][]      // Recursos ya asignados
    necesidad[][]       // Recursos que an necesita (maximo - asignacion)
FIN ESTRUCTURA

FUNCION es_estado_seguro(estado):
    trabajo = COPIAR(estado.disponible)
    terminado[] = [FALSO, FALSO, ..., FALSO]  // Para cada proceso
    secuencia_segura = []
    
    // Intentar encontrar secuencia donde todos terminan
    REPETIR:
        encontro_proceso = FALSO
        
        PARA i = 0 HASTA num_procesos - 1:
            SI NO terminado[i]:
                // Verificar si puede ejecutar con recursos disponibles
                puede_ejecutar = VERDADERO
                
                PARA j = 0 HASTA num_recursos - 1:
                    SI estado.necesidad[i][j] > trabajo[j]:
                        puede_ejecutar = FALSO
                        SALIR
                    FIN SI
                FIN PARA
                
                SI puede_ejecutar:
                    // Simular que el proceso termina y libera recursos
                    PARA j = 0 HASTA num_recursos - 1:
                        trabajo[j] = trabajo[j] + estado.asignacion[i][j]
                    FIN PARA
                    
                    terminado[i] = VERDADERO
                    AGREGAR(secuencia_segura, i)
                    encontro_proceso = VERDADERO
                FIN SI
            FIN SI
        FIN PARA
        
    HASTA QUE NO encontro_proceso O TODOS(terminado)
    
    SI TODOS(terminado):
        IMPRIMIR "Estado seguro. Secuencia:", secuencia_segura
        RETORNAR VERDADERO
    SINO:
        IMPRIMIR "Estado INSEGURO - posible deadlock"
        RETORNAR FALSO
    FIN SI
FIN FUNCION

FUNCION solicitar_recursos(proceso_id, solicitud[]):
    // 1. Verificar que no exceda necesidad
    PARA i = 0 HASTA num_recursos - 1:
        SI solicitud[i] > estado.necesidad[proceso_id][i]:
            ERROR "Proceso excede su mximo declarado"
        FIN SI
    FIN PARA
    
    // 2. Verificar disponibilidad
    PARA i = 0 HASTA num_recursos - 1:
        SI solicitud[i] > estado.disponible[i]:
            RETORNAR FALSO  // Esperar
        FIN SI
    FIN PARA
    
    // 3. Simular asignacin
    estado_temporal = COPIAR(estado)
    PARA i = 0 HASTA num_recursos - 1:
        estado_temporal.disponible[i] -= solicitud[i]
        estado_temporal.asignacion[proceso_id][i] += solicitud[i]
        estado_temporal.necesidad[proceso_id][i] -= solicitud[i]
    FIN PARA
    
    // 4. Verificar si es seguro
    SI es_estado_seguro(estado_temporal):
        // Aplicar cambios reales
        estado = estado_temporal
        IMPRIMIR "Solicitud concedida - Estado seguro"
        RETORNAR VERDADERO
    SINO:
        IMPRIMIR "Solicitud rechazada - Estado inseguro"
        RETORNAR FALSO  // Proceso debe esperar
    FIN SI
FIN FUNCION

// Ejemplo de uso
INICIALIZAR:
    procesos = 5
    recursos = 3
    
    disponible = [10, 5, 7]
    
    maximo = [
        [7, 5, 3],   // P0
        [3, 2, 2],   // P1
        [9, 0, 2],   // P2
        [2, 2, 2],   // P3
        [4, 3, 3]    // P4
    ]
    
    asignacion = [
        [0, 1, 0],
        [2, 0, 0],
        [3, 0, 2],
        [2, 1, 1],
        [0, 0, 2]
    ]

VERIFICAR es_estado_seguro(estado_inicial)`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Garantiza prevencin, permite alta utilizacin de recursos.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Requiere conocer mximo por adelantado, overhead computacional O(nm), poco prctico en sistemas dinmicos."]})})]})}),e.jsx(me,{value:"grafo",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Anlisis de Grafos de Asignacin de Recursos"}),e.jsx("p",{className:"text-gray-300",children:"Representa el sistema como un grafo dirigido donde los procesos y recursos son nodos. Las aristas representan asignaciones (recursoproceso) y solicitudes (procesorecurso)."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Grafo de Asignacin de Recursos (RAG)

ESTRUCTURA Nodo:
    id: entero
    tipo: "PROCESO" | "RECURSO"
    instancias: entero  // Para recursos (cuntas instancias tiene)
FIN ESTRUCTURA

ESTRUCTURA Arista:
    desde: Nodo
    hacia: Nodo
    tipo: "SOLICITUD" | "ASIGNACION"
FIN ESTRUCTURA

ESTRUCTURA GrafoRAG:
    nodos: Lista<Nodo>
    aristas: Lista<Arista>
FIN ESTRUCTURA

// Agregar arista de solicitud: Proceso  Recurso
PROCEDIMIENTO solicitar(grafo, proceso, recurso):
    arista = NuevaArista(proceso, recurso, "SOLICITUD")
    AGREGAR(grafo.aristas, arista)
    
    // Verificar si causa ciclo
    SI detectar_ciclo(grafo):
        IMPRIMIR " Advertencia: Ciclo detectado - posible deadlock"
    FIN SI
FIN PROCEDIMIENTO

// Agregar arista de asignacin: Recurso  Proceso
PROCEDIMIENTO asignar(grafo, recurso, proceso):
    // Eliminar solicitud correspondiente
    ELIMINAR_ARISTA(proceso, recurso, "SOLICITUD")
    
    // Agregar asignacin
    arista = NuevaArista(recurso, proceso, "ASIGNACION")
    AGREGAR(grafo.aristas, arista)
FIN PROCEDIMIENTO

// Liberar recurso
PROCEDIMIENTO liberar(grafo, proceso, recurso):
    ELIMINAR_ARISTA(recurso, proceso, "ASIGNACION")
FIN PROCEDIMIENTO

// Detectar ciclos usando DFS
FUNCION detectar_ciclo(grafo):
    visitado = {}
    en_pila = {}
    
    PARA CADA nodo EN grafo.nodos:
        visitado[nodo] = FALSO
        en_pila[nodo] = FALSO
    FIN PARA
    
    PARA CADA nodo EN grafo.nodos:
        SI dfs_tiene_ciclo(nodo, grafo, visitado, en_pila):
            RETORNAR VERDADERO
        FIN SI
    FIN PARA
    
    RETORNAR FALSO
FIN FUNCION

FUNCION dfs_tiene_ciclo(nodo, grafo, visitado, en_pila):
    visitado[nodo] = VERDADERO
    en_pila[nodo] = VERDADERO
    
    // Obtener vecinos (aristas salientes)
    PARA CADA arista EN grafo.aristas:
        SI arista.desde == nodo:
            vecino = arista.hacia
            
            SI NO visitado[vecino]:
                SI dfs_tiene_ciclo(vecino, grafo, visitado, en_pila):
                    RETORNAR VERDADERO
                FIN SI
            SINO SI en_pila[vecino]:
                // Encontramos un ciclo
                RETORNAR VERDADERO
            FIN SI
        FIN SI
    FIN PARA
    
    en_pila[nodo] = FALSO
    RETORNAR FALSO
FIN FUNCION

// Anlisis para recursos de una sola instancia
FUNCION deadlock_en_recurso_unico(grafo):
    // Si hay ciclo, hay deadlock (recursos de 1 instancia)
    SI detectar_ciclo(grafo):
        ciclo = encontrar_ciclo(grafo)
        IMPRIMIR "DEADLOCK detectado en ciclo:", ciclo
        RETORNAR VERDADERO
    FIN SI
    RETORNAR FALSO
FIN FUNCION

// Anlisis para recursos de mltiples instancias
FUNCION deadlock_en_recurso_multiple(grafo):
    // Ciclo es condicin necesaria pero no suficiente
    // Usar reduccin de grafo
    
    procesos_sin_espera = encontrar_procesos_que_pueden_terminar(grafo)
    
    MIENTRAS procesos_sin_espera NO_ESTA_VACIO:
        proceso = SACAR(procesos_sin_espera)
        
        // Simular que el proceso termina y libera recursos
        liberar_todos_recursos(proceso, grafo)
        
        // Ver si ahora otros procesos pueden continuar
        nuevos = encontrar_procesos_que_pueden_terminar(grafo)
        AGREGAR_TODOS(procesos_sin_espera, nuevos)
    FIN MIENTRAS
    
    // Si quedan procesos, hay deadlock
    SI grafo_tiene_aristas():
        IMPRIMIR "DEADLOCK: Procesos bloqueados restantes"
        RETORNAR VERDADERO
    FIN SI
    
    RETORNAR FALSO
FIN FUNCION

// Ejemplo de uso
grafo = NuevoGrafoRAG()

// Crear nodos
P1 = NuevoNodo(1, "PROCESO")
P2 = NuevoNodo(2, "PROCESO")
R1 = NuevoNodo(1, "RECURSO", instancias=1)
R2 = NuevoNodo(2, "RECURSO", instancias=1)

// Escenario de deadlock
asignar(grafo, R1, P1)      // P1 tiene R1
solicitar(grafo, P1, R2)    // P1 quiere R2
asignar(grafo, R2, P2)      // P2 tiene R2
solicitar(grafo, P2, R1)    // P2 quiere R1

// Detectar
SI deadlock_en_recurso_unico(grafo):
    IMPRIMIR "Ciclo: P1  R2  P2  R1  P1"
FIN SI`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Visualizacin clara, deteccin precisa, til para debugging.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Overhead de mantener grafo, O(n) para detectar ciclos, solo detecta, no previene."]})})]})}),e.jsx(me,{value:"ciclos",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Detectar Ciclos en Grafo de Espera"}),e.jsx("p",{className:"text-gray-300",children:"Algoritmo ms ligero que mantiene solo las relaciones de espera entre procesos (wait-for graph). Ejecuta peridicamente para detectar deadlocks."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Wait-For Graph (Grafo de Espera)

// Estructura simplificada: solo procesos (no recursos)
ESTRUCTURA GrafoEspera:
    // Matriz de adyacencia: espera[i][j] = VERDADERO si Pi espera por Pj
    espera: matriz_booleana[n][n]
    procesos: conjunto_de_procesos
FIN ESTRUCTURA

// Agregar relacin de espera
PROCEDIMIENTO proceso_espera_a(grafo, pi, pj):
    grafo.espera[pi][pj] = VERDADERO
    IMPRIMIR "P", pi, "ahora espera a P", pj
FIN PROCEDIMIENTO

// Eliminar relacin (cuando recurso se libera)
PROCEDIMIENTO proceso_deja_esperar(grafo, pi, pj):
    grafo.espera[pi][pj] = FALSO
FIN PROCEDIMIENTO

// Deteccin de ciclos usando DFS
FUNCION detectar_ciclo_dfs(grafo):
    n = grafo.procesos.tamao()
    visitado = ARREGLO_FALSO(n)
    en_camino = ARREGLO_FALSO(n)
    ciclo_encontrado = []
    
    PARA i = 0 HASTA n-1:
        SI NO visitado[i]:
            SI dfs_ciclo(i, grafo, visitado, en_camino, ciclo_encontrado):
                RETORNAR ciclo_encontrado
            FIN SI
        FIN SI
    FIN PARA
    
    RETORNAR []  // Sin ciclo
FIN FUNCION

FUNCION dfs_ciclo(nodo, grafo, visitado, en_camino, ruta):
    visitado[nodo] = VERDADERO
    en_camino[nodo] = VERDADERO
    AGREGAR(ruta, nodo)
    
    // Explorar vecinos (procesos que espera este)
    PARA vecino = 0 HASTA grafo.procesos.tamao() - 1:
        SI grafo.espera[nodo][vecino]:  // Hay arista
            SI NO visitado[vecino]:
                SI dfs_ciclo(vecino, grafo, visitado, en_camino, ruta):
                    RETORNAR VERDADERO
                FIN SI
            SINO SI en_camino[vecino]:
                // Ciclo detectado
                AGREGAR(ruta, vecino)  // Completar el ciclo
                RETORNAR VERDADERO
            FIN SI
        FIN SI
    FIN PARA
    
    en_camino[nodo] = FALSO
    ELIMINAR_ULTIMO(ruta)
    RETORNAR FALSO
FIN FUNCION

// Deteccin usando algoritmo de Floyd (ms eficiente para grafos densos)
FUNCION detectar_ciclo_floyd(grafo):
    n = grafo.procesos.tamao()
    alcanzable = COPIAR(grafo.espera)  // Matriz de alcanzabilidad
    
    // Floyd-Warshall modificado
    PARA k = 0 HASTA n-1:
        PARA i = 0 HASTA n-1:
            PARA j = 0 HASTA n-1:
                alcanzable[i][j] = alcanzable[i][j] O 
                                   (alcanzable[i][k] Y alcanzable[k][j])
            FIN PARA
        FIN PARA
    FIN PARA
    
    // Verificar diagonal (si Pi puede alcanzarse a s mismo, hay ciclo)
    procesos_en_ciclo = []
    PARA i = 0 HASTA n-1:
        SI alcanzable[i][i]:
            AGREGAR(procesos_en_ciclo, i)
        FIN SI
    FIN PARA
    
    SI procesos_en_ciclo NO_ESTA_VACIO:
        IMPRIMIR "Deadlock: Procesos", procesos_en_ciclo, "en ciclo"
        RETORNAR procesos_en_ciclo
    FIN SI
    
    RETORNAR []
FIN FUNCION

// Detector peridico de deadlock
PROCEDIMIENTO detector_periodico(grafo, intervalo_ms):
    MIENTRAS VERDADERO:
        DORMIR(intervalo_ms)
        
        ciclo = detectar_ciclo_dfs(grafo)
        
        SI ciclo NO_ESTA_VACIO:
            IMPRIMIR " DEADLOCK DETECTADO "
            IMPRIMIR "Ciclo de espera:", ciclo
            
            // Invocar recuperacin
            recuperar_de_deadlock(ciclo)
        SINO:
            IMPRIMIR " Sistema sin deadlock"
        FIN SI
    FIN MIENTRAS
FIN PROCEDIMIENTO

// Construccin del grafo desde asignaciones
PROCEDIMIENTO construir_grafo_espera(asignaciones, solicitudes):
    grafo = NuevoGrafoEspera()
    
    // Para cada proceso que solicita un recurso
    PARA CADA (proceso, recurso) EN solicitudes:
        // Encontrar quin tiene ese recurso
        propietario = asignaciones[recurso]
        
        SI propietario EXISTE:
            // proceso espera a propietario
            proceso_espera_a(grafo, proceso, propietario)
        FIN SI
    FIN PARA
    
    RETORNAR grafo
FIN PROCEDIMIENTO

// Ejemplo de uso
grafo = NuevoGrafoEspera(4)  // 4 procesos

// P0 espera a P1, P1 espera a P2, P2 espera a P0 (ciclo)
proceso_espera_a(grafo, 0, 1)
proceso_espera_a(grafo, 1, 2)
proceso_espera_a(grafo, 2, 0)

ciclo = detectar_ciclo_dfs(grafo)
SI ciclo EXISTE:
    IMPRIMIR "Deadlock en:", ciclo  // [0, 1, 2, 0]
FIN SI`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Ms eficiente que RAG completo, O(n) con Floyd, deteccin precisa.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Solo detecta (no previene), overhead de ejecucin peridica, requiere recuperacin manual."]})})]})}),e.jsx(me,{value:"abortar",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Abortar Procesos"}),e.jsx("p",{className:"text-gray-300",children:"Una vez detectado el deadlock, se abortan uno o ms procesos para romper el ciclo. Se usan heursticas para minimizar el costo de abortar."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Recuperacin por Aborto de Procesos

ESTRUCTURA InfoProceso:
    id: entero
    prioridad: entero
    tiempo_ejecucion: entero
    recursos_retenidos: conjunto<Recurso>
    costo_abortar: real  // Clculo del dao de abortar
FIN ESTRUCTURA

// Estrategia 1: Abortar todos los procesos en deadlock
PROCEDIMIENTO abortar_todos(procesos_en_deadlock):
    IMPRIMIR " Abortando TODOS los procesos en deadlock"
    
    PARA CADA proceso EN procesos_en_deadlock:
        IMPRIMIR "Abortando proceso", proceso.id
        
        // Liberar recursos
        PARA CADA recurso EN proceso.recursos_retenidos:
            liberar_recurso(recurso)
        FIN PARA
        
        // Terminar proceso
        terminar_proceso(proceso)
        
        // Rollback opcional
        restaurar_checkpoint(proceso)
    FIN PARA
    
    IMPRIMIR "Deadlock resuelto - Todos los procesos abortados"
FIN PROCEDIMIENTO

// Estrategia 2: Abortar de a uno hasta romper el ciclo
PROCEDIMIENTO abortar_minimo(grafo_deadlock):
    IMPRIMIR " Abortando mnimo necesario de procesos"
    
    MIENTRAS detectar_ciclo(grafo_deadlock):
        // Seleccionar vctima con menor costo
        victima = seleccionar_victima(grafo_deadlock)
        
        IMPRIMIR "Abortando proceso", victima.id, "(costo:", victima.costo_abortar, ")"
        
        // Liberar sus recursos
        PARA CADA recurso EN victima.recursos_retenidos:
            liberar_recurso(recurso)
            
            // Actualizar grafo
            eliminar_aristas_proceso(grafo_deadlock, victima)
        FIN PARA
        
        terminar_proceso(victima)
        
        // Verificar si el deadlock se resolvi
        SI NO detectar_ciclo(grafo_deadlock):
            IMPRIMIR " Deadlock resuelto con", victimas_abortadas, "proceso(s)"
            SALIR
        FIN SI
    FIN MIENTRAS
FIN PROCEDIMIENTO

// Seleccin de vctima basada en mltiples criterios
FUNCION seleccionar_victima(procesos):
    mejor_victima = NULO
    costo_minimo = INFINITO
    
    PARA CADA proceso EN procesos:
        costo = calcular_costo_abortar(proceso)
        
        SI costo < costo_minimo:
            costo_minimo = costo
            mejor_victima = proceso
        FIN SI
    FIN PARA
    
    RETORNAR mejor_victima
FIN FUNCION

// Clculo de costo de abortar un proceso
FUNCION calcular_costo_abortar(proceso):
    // Factores a considerar:
    
    // 1. Prioridad (menor prioridad = menor costo)
    costo_prioridad = MAX_PRIORIDAD - proceso.prioridad
    
    // 2. Tiempo de ejecucin (menos ejecutado = menor costo)
    costo_tiempo = proceso.tiempo_ejecucion
    
    // 3. Recursos retenidos (menos recursos = menor costo)
    costo_recursos = proceso.recursos_retenidos.tamao()
    
    // 4. Progreso (menos avanzado = menor costo)
    costo_progreso = proceso.porcentaje_completado
    
    // 5. Nmero de veces que ya fue vctima (evitar starvation)
    costo_starvation = proceso.veces_abortado * 1000
    
    // Combinacin ponderada
    costo_total = (costo_prioridad * 0.3) +
                  (costo_tiempo * 0.2) +
                  (costo_recursos * 0.2) +
                  (costo_progreso * 0.2) +
                  (costo_starvation * 0.1)
    
    RETORNAR costo_total
FIN FUNCION

// Aborto con rollback
PROCEDIMIENTO abortar_con_rollback(proceso):
    IMPRIMIR "Abortando proceso", proceso.id, "con rollback"
    
    // 1. Guardar estado de los recursos antes de liberar
    estado_recursos = guardar_estado_recursos(proceso.recursos_retenidos)
    
    // 2. Liberar recursos
    PARA CADA recurso EN proceso.recursos_retenidos:
        liberar_recurso(recurso)
    FIN PARA
    
    // 3. Restaurar proceso a checkpoint anterior
    SI proceso.tiene_checkpoint():
        proceso.restaurar_checkpoint()
        proceso.estado = "LISTO"  // Volver a ejecutar
        IMPRIMIR "Proceso restaurado a checkpoint anterior"
    SINO:
        terminar_proceso(proceso)
        IMPRIMIR "Proceso terminado (sin checkpoint)"
    FIN SI
    
    // 4. Incrementar contador de abortos (prevenir starvation)
    proceso.veces_abortado += 1
    
    SI proceso.veces_abortado > LIMITE_ABORTOS:
        IMPRIMIR " Proceso", proceso.id, "abortado demasiadas veces"
        proceso.prioridad += 10  // Aumentar prioridad para evitar starvation
    FIN SI
FIN PROCEDIMIENTO

// Manejo de efectos en cascada
PROCEDIMIENTO abortar_con_dependencias(proceso):
    dependientes = encontrar_procesos_dependientes(proceso)
    
    SI dependientes NO_ESTA_VACIO:
        IMPRIMIR " Proceso tiene", dependientes.tamao(), "dependientes"
        
        // Opcin 1: Abortar todos
        PARA CADA dep EN dependientes:
            abortar_con_rollback(dep)
        FIN PARA
        
        // Opcin 2: Invalidar resultados
        // marcar_datos_invalidos(dependientes)
    FIN SI
    
    abortar_con_rollback(proceso)
FIN PROCEDIMIENTO

// Ejemplo de recuperacin
PROCEDIMIENTO ejemplo_recuperacion():
    grafo = detectar_deadlock()
    
    SI grafo.tiene_ciclo:
        procesos_bloqueados = grafo.obtener_procesos_en_ciclo()
        
        // Estrategia seleccionable
        ELEGIR estrategia:
            CASO "MINIMO":
                abortar_minimo(procesos_bloqueados)
            CASO "TODOS":
                abortar_todos(procesos_bloqueados)
            CASO "POR_PRIORIDAD":
                victima = proceso_menor_prioridad(procesos_bloqueados)
                abortar_con_rollback(victima)
        FIN ELEGIR
    FIN SI
FIN PROCEDIMIENTO`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Recuperacin rpida, simple de implementar, efectivo para romper deadlocks.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Prdida de trabajo, posible starvation, efectos en cascada, difcil elegir vctima ptima."]})})]})}),e.jsx(me,{value:"rollback",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Rollback de Transacciones"}),e.jsx("p",{className:"text-gray-300",children:"En lugar de abortar completamente, se deshacen las operaciones hasta un punto seguro (checkpoint). Comn en bases de datos y sistemas transaccionales."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Rollback con Checkpoints

ESTRUCTURA Checkpoint:
    id: entero
    tiempo: marca_temporal
    estado_variables: mapa<string, valor>
    recursos_retenidos: conjunto<Recurso>
    puntero_ejecucion: direccion_memoria
FIN ESTRUCTURA

ESTRUCTURA Transaccion:
    id: entero
    checkpoints: pila<Checkpoint>
    log_operaciones: lista<Operacion>
    estado: "ACTIVA" | "ABORTADA" | "COMPROMETIDA"
FIN ESTRUCTURA

// Crear checkpoint antes de operaciones crticas
PROCEDIMIENTO crear_checkpoint(transaccion):
    checkpoint = NuevoCheckpoint()
    checkpoint.id = generar_id()
    checkpoint.tiempo = TIEMPO_ACTUAL()
    
    // Guardar estado completo
    checkpoint.estado_variables = COPIAR(transaccion.variables)
    checkpoint.recursos_retenidos = COPIAR(transaccion.recursos)
    checkpoint.puntero_ejecucion = OBTENER_PC()
    
    APILAR(transaccion.checkpoints, checkpoint)
    
    IMPRIMIR " Checkpoint", checkpoint.id, "creado para T", transaccion.id
    RETORNAR checkpoint.id
FIN PROCEDIMIENTO

// Rollback a checkpoint especfico
PROCEDIMIENTO rollback_a_checkpoint(transaccion, checkpoint_id):
    IMPRIMIR " Iniciando rollback de T", transaccion.id, "a checkpoint", checkpoint_id
    
    // Deshacer operaciones hasta el checkpoint
    MIENTRAS transaccion.checkpoints NO_ESTA_VACIO:
        cp = DESAPILAR(transaccion.checkpoints)
        
        SI cp.id == checkpoint_id:
            // Restaurar estado
            transaccion.variables = cp.estado_variables
            transaccion.recursos = cp.recursos_retenidos
            SALTAR_A(cp.puntero_ejecucion)
            
            IMPRIMIR " Rollback completado a checkpoint", checkpoint_id
            RETORNAR VERDADERO
        SINO:
            // Liberar recursos del checkpoint descartado
            liberar_recursos(cp.recursos_retenidos)
        FIN SI
    FIN MIENTRAS
    
    IMPRIMIR " Checkpoint no encontrado"
    RETORNAR FALSO
FIN PROCEDIMIENTO

// Rollback completo (abortar transaccin)
PROCEDIMIENTO rollback_completo(transaccion):
    IMPRIMIR " Rollback completo de T", transaccion.id
    
    // Deshacer todas las operaciones en orden inverso
    PARA CADA operacion EN REVERSA(transaccion.log_operaciones):
        deshacer_operacion(operacion)
    FIN PARA
    
    // Liberar todos los recursos
    PARA CADA recurso EN transaccion.recursos:
        liberar_recurso(recurso)
    FIN PARA
    
    // Limpiar checkpoints
    transaccion.checkpoints.limpiar()
    transaccion.log_operaciones.limpiar()
    
    transaccion.estado = "ABORTADA"
    IMPRIMIR "Transaccin abortada - Estado inicial restaurado"
FIN PROCEDIMIENTO

// Sistema de log para operaciones
PROCEDIMIENTO log_operacion(transaccion, operacion):
    entrada_log = {
        tipo: operacion.tipo,
        dato_anterior: operacion.valor_viejo,
        dato_nuevo: operacion.valor_nuevo,
        recurso: operacion.recurso,
        timestamp: TIEMPO_ACTUAL()
    }
    
    AGREGAR(transaccion.log_operaciones, entrada_log)
FIN PROCEDIMIENTO

// Deshacer una operacin especfica
PROCEDIMIENTO deshacer_operacion(log_entrada):
    ELEGIR log_entrada.tipo:
        CASO "ESCRIBIR":
            // Restaurar valor anterior
            escribir(log_entrada.recurso, log_entrada.dato_anterior)
            
        CASO "MODIFICAR":
            restaurar(log_entrada.recurso, log_entrada.dato_anterior)
            
        CASO "INSERTAR":
            // Eliminar lo insertado
            eliminar(log_entrada.recurso, log_entrada.dato_nuevo)
            
        CASO "ELIMINAR":
            // Re-insertar lo eliminado
            insertar(log_entrada.recurso, log_entrada.dato_anterior)
    FIN ELEGIR
FIN PROCEDIMIENTO

// Recuperacin de deadlock con rollback selectivo
PROCEDIMIENTO recuperar_deadlock_con_rollback(transacciones_bloqueadas):
    // Seleccionar vctima
    victima = seleccionar_transaccion_victima(transacciones_bloqueadas)
    
    IMPRIMIR "Vctima seleccionada: T", victima.id
    
    // Intentar rollback parcial primero
    SI victima.checkpoints.tamao() > 0:
        checkpoint_mas_reciente = victima.checkpoints.tope()
        
        // Rollback al checkpoint antes de solicitar recurso conflictivo
        SI rollback_a_checkpoint(victima, checkpoint_mas_reciente.id):
            // Reintentar desde checkpoint
            IMPRIMIR "Reintentando desde checkpoint"
            reanudar_transaccion(victima)
            RETORNAR
        FIN SI
    FIN SI
    
    // Si rollback parcial falla, hacer rollback completo
    IMPRIMIR "Rollback parcial no posible - Abortando transaccin completa"
    rollback_completo(victima)
FIN PROCEDIMIENTO

// Seleccin de vctima para rollback
FUNCION seleccionar_transaccion_victima(transacciones):
    mejor_victima = NULO
    costo_minimo = INFINITO
    
    PARA CADA trans EN transacciones:
        // Factores de costo
        trabajo_realizado = trans.log_operaciones.tamao()
        tiempo_ejecucion = TIEMPO_ACTUAL() - trans.tiempo_inicio
        num_rollbacks_previos = trans.contador_rollbacks
        
        // Priorizar transacciones con menos trabajo
        costo = trabajo_realizado * 0.4 +
                tiempo_ejecucion * 0.3 +
                num_rollbacks_previos * 0.3
        
        SI costo < costo_minimo:
            costo_minimo = costo
            mejor_victima = trans
        FIN SI
    FIN PARA
    
    mejor_victima.contador_rollbacks += 1
    RETORNAR mejor_victima
FIN FUNCION

// Ejemplo: Transaccin bancaria con checkpoints
PROCEDIMIENTO transferencia_bancaria(origen, destino, monto):
    trans = nueva_transaccion()
    
    // Checkpoint inicial
    cp0 = crear_checkpoint(trans)
    
    // Adquirir cuenta origen
    adquirir_lock(origen)
    log_operacion(trans, {tipo: "LOCK", recurso: origen})
    
    // Checkpoint despus de primer lock
    cp1 = crear_checkpoint(trans)
    
    // Adquirir cuenta destino (posible deadlock aqu)
    SI NO adquirir_lock_timeout(destino, 5.segundos()):
        IMPRIMIR "Timeout - Posible deadlock"
        rollback_a_checkpoint(trans, cp1)  // Liberar origen
        DORMIR(aleatorio(100, 500))        // Backoff
        REINTENTAR
    FIN SI
    
    // Realizar transferencia
    origen.saldo -= monto
    log_operacion(trans, {tipo: "ESCRIBIR", recurso: origen, 
                         dato_anterior: origen.saldo + monto})
    
    destino.saldo += monto
    log_operacion(trans, {tipo: "ESCRIBIR", recurso: destino,
                         dato_anterior: destino.saldo - monto})
    
    // Commit
    trans.estado = "COMPROMETIDA"
    liberar_lock(origen)
    liberar_lock(destino)
    
    IMPRIMIR " Transferencia completada"
FIN PROCEDIMIENTO`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Preserva trabajo parcial, recuperacin flexible, mantiene consistencia, til en BD.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Overhead de checkpoints, espacio para logs, complejidad de implementacin, posible starvation."]})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"size-5"}),e.jsx("span",{children:"Demostracin Interactiva"})]})}),e.jsx(na,{children:e.jsx(e2,{})})]})]})]})]})}function e2(){const[s,i]=c.useState("sin-solucion"),[n,l]=c.useState(!1),[d,m]=c.useState(!1),[h,x]=c.useState([]),[g,b]=c.useState([]),[v,f]=c.useState([]),[N,j]=c.useState(4),[_,w]=c.useState(4),[C,E]=c.useState([50]),D=c.useRef(!1),L=c.useRef(!1),V=c.useRef(null),J=c.useRef(null),ie=c.useRef(!0),I=()=>2e3-C[0]*19,k=(A,K="text-green-400")=>{f(M=>[...M,{mensaje:`[${new Date().toLocaleTimeString()}] ${A}`,color:K}])};c.useEffect(()=>{ie.current&&V.current&&V.current.scrollIntoView({behavior:"smooth"})},[v]);const be=()=>{if(!J.current)return;const{scrollTop:A,scrollHeight:K,clientHeight:M}=J.current,O=Math.abs(K-M-A)<10;ie.current=O},te=async()=>{for(;D.current&&!L.current;)await new Promise(A=>setTimeout(A,100))},G=async A=>{await new Promise(K=>setTimeout(K,A)),await te()},oe=async()=>{k(" Iniciando simulacin SIN solucin - Deadlock circular","text-cyan-400"),k(" Los procesos adquirirn recursos en orden que causa deadlock","text-yellow-400");for(let A=0;A<N;A++){if(L.current)return;const K=A+1,M=A+1;x(O=>O.map(q=>q.id===K?{...q,estado:"Adquiriendo recurso",color:"bg-green-600",colorText:"text-green-400"}:q)),b(O=>O.map(q=>q.id===M?{...q,disponible:!1,propietario:K}:q)),x(O=>O.map(q=>q.id===K?{...q,recursosRetenidos:[M]}:q)),k(`Proceso ${K}:  Adquiri recurso R${M}`,"text-green-400"),await G(I()*.5)}k("".repeat(50),"text-gray-600");for(let A=0;A<N;A++){if(L.current)return;const K=A+1,M=(A+1)%N+1;x(O=>O.map(q=>q.id===K?{...q,estado:`Esperando R${M}`,color:"bg-red-600",colorText:"text-red-400",recursosSolicitados:[M]}:q)),k(`Proceso ${K}:  Solicitando R${M} (ocupado por P${g[M-1]?.propietario})`,"text-red-400"),await G(I()*.3)}k("".repeat(50),"text-gray-600"),k(" DEADLOCK DETECTADO: Espera circular","text-red-400"),k("P1 espera R2 (tiene P2)  P2 espera R3 (tiene P3)  P3 espera R4 (tiene P4)  P4 espera R1 (tiene P1)","text-red-300"),k(" Sistema bloqueado permanentemente","text-red-400")},Ce=async()=>{k(" Iniciando simulacin con ORDEN GLOBAL de recursos","text-cyan-400"),k(" Regla: Todos los procesos adquieren recursos en orden ascendente","text-blue-400");const A=[[1,2],[2,3],[1,3],[2,4]];for(let K=0;K<Math.min(N,A.length);K++){if(L.current)return;const M=K+1,O=A[K].sort((q,$)=>q-$);x(q=>q.map($=>$.id===M?{...$,estado:"Ordenando solicitudes",color:"bg-yellow-600",colorText:"text-yellow-400"}:$)),k(`Proceso ${M}: Necesita ${O.map(q=>`R${q}`).join(", ")}`,"text-gray-400"),await G(I()*.3);for(const q of O){for(x($=>$.map(ve=>ve.id===M?{...ve,estado:`Esperando R${q}`,color:"bg-yellow-600",colorText:"text-yellow-400"}:ve));!g[q-1]?.disponible;)if(k(`Proceso ${M}:  Esperando R${q}...`,"text-yellow-300"),await G(I()*.5),L.current)return;b($=>$.map(ve=>ve.id===q?{...ve,disponible:!1,propietario:M}:ve)),x($=>$.map(ve=>ve.id===M?{...ve,recursosRetenidos:[...ve.recursosRetenidos,q]}:ve)),k(`Proceso ${M}:  Adquiri R${q} en orden`,"text-green-400"),await G(I()*.3)}x(q=>q.map($=>$.id===M?{...$,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:$)),await G(I()*.8);for(const q of O.reverse())b($=>$.map(ve=>ve.id===q?{...ve,disponible:!0,propietario:null}:ve)),k(`Proceso ${M}:  Liber R${q}`,"text-cyan-400");x(q=>q.map($=>$.id===M?{...$,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500",recursosRetenidos:[]}:$)),k(`Proceso ${M}:  Terminado sin deadlock`,"text-green-400"),await G(I()*.2)}k("".repeat(50),"text-gray-600"),k(" Todos los procesos completados SIN deadlock","text-green-400"),k(" El orden global evit la espera circular","text-blue-400")},ke=async()=>{k(" Iniciando simulacin: Adquirir TODOS o NINGUNO","text-cyan-400"),k(" Regla: Intento atmico - si falla alguno, libera todo","text-blue-400");const A=[[1,2],[2,3],[1,4],[3,4]];for(let K=0;K<Math.min(N,A.length);K++){if(L.current)return;const M=K+1,O=A[K];let q=0,$=!1;for(;!$&&q<5;){if(q++,x(Z=>Z.map(z=>z.id===M?{...z,estado:`Intento ${q}`,color:"bg-yellow-600",colorText:"text-yellow-400"}:z)),k(`Proceso ${M}:  Intento ${q} - Solicitando ${O.map(Z=>`R${Z}`).join(", ")}`,"text-yellow-400"),O.every(Z=>g[Z-1]?.disponible)){for(const Z of O)b(z=>z.map(Oe=>Oe.id===Z?{...Oe,disponible:!1,propietario:M}:Oe));x(Z=>Z.map(z=>z.id===M?{...z,recursosRetenidos:O,estado:"Trabajando",color:"bg-green-600",colorText:"text-green-400"}:z)),k(`Proceso ${M}:  Adquiri TODOS los recursos atmicamente`,"text-green-400"),$=!0,await G(I()*1.2);for(const Z of O)b(z=>z.map(Oe=>Oe.id===Z?{...Oe,disponible:!0,propietario:null}:Oe));x(Z=>Z.map(z=>z.id===M?{...z,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500",recursosRetenidos:[]}:z)),k(`Proceso ${M}:  Completado y recursos liberados`,"text-cyan-400")}else k(`Proceso ${M}:  No todos disponibles - Abortando intento`,"text-red-400"),await G(I()*.5);await G(I()*.3)}}k("".repeat(50),"text-gray-600"),k(" Simulacin completada - No hubo deadlock","text-green-400"),k(" La adquisicin atmica evit hold-and-wait","text-blue-400")},Ee=async()=>{k(" Iniciando simulacin con TIMEOUTS","text-cyan-400"),k(" Timeout: 2 segundos por recurso","text-blue-400");for(let A=0;A<Math.min(N,3);A++){if(L.current)return;const K=A+1,M=A+1,O=(A+1)%_+1;for(x(ve=>ve.map(Z=>Z.id===K?{...Z,estado:`Adquiriendo R${M}`,color:"bg-green-600",colorText:"text-green-400"}:Z));!g[M-1]?.disponible;)if(await G(100),L.current)return;b(ve=>ve.map(Z=>Z.id===M?{...Z,disponible:!1,propietario:K}:Z)),x(ve=>ve.map(Z=>Z.id===K?{...Z,recursosRetenidos:[M]}:Z)),k(`Proceso ${K}:  Adquiri R${M}`,"text-green-400"),await G(I()*.3),x(ve=>ve.map(Z=>Z.id===K?{...Z,estado:`Timeout en R${O}`,color:"bg-yellow-600",colorText:"text-yellow-400"}:Z));let q=0;const $=3;for(;!g[O-1]?.disponible&&q<$;)k(`Proceso ${K}:  Esperando R${O}... (${q+1}/${$})`,"text-yellow-300"),await G(I()*.4),q++;q>=$?(k(`Proceso ${K}:  TIMEOUT - Liberando R${M} y reintentando`,"text-red-400"),b(ve=>ve.map(Z=>Z.id===M?{...Z,disponible:!0,propietario:null}:Z)),x(ve=>ve.map(Z=>Z.id===K?{...Z,recursosRetenidos:[],estado:"Reintentando",color:"bg-orange-600",colorText:"text-orange-400"}:Z)),await G(I()*.8)):(b(ve=>ve.map(Z=>Z.id===O?{...Z,disponible:!1,propietario:K}:Z)),x(ve=>ve.map(Z=>Z.id===K?{...Z,recursosRetenidos:[M,O],estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:Z)),k(`Proceso ${K}:  Adquiri ambos recursos`,"text-green-400"),await G(I()),b(ve=>ve.map(Z=>Z.id===M||Z.id===O?{...Z,disponible:!0,propietario:null}:Z)),x(ve=>ve.map(Z=>Z.id===K?{...Z,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500",recursosRetenidos:[]}:Z)),k(`Proceso ${K}:  Terminado`,"text-cyan-400")),await G(I()*.2)}k("".repeat(50),"text-gray-600"),k(" Timeouts evitaron deadlock permanente","text-green-400")},P=async()=>{k(" Iniciando simulacin: Algoritmo del BANQUERO","text-cyan-400"),k(" Verificando estado seguro antes de cada asignacin","text-blue-400");const A=[2,2,2],K=[[3,2,1],[2,3,2],[2,2,3]],M=[[0,0,0],[0,0,0],[0,0,0]];k(`Recursos disponibles: [${A.join(", ")}]`,"text-gray-400");for(let O=0;O<3;O++){if(L.current)return;const q=O+1,$=K[O];x(Z=>Z.map(z=>z.id===q?{...z,estado:"Solicitando recursos",color:"bg-yellow-600",colorText:"text-yellow-400"}:z)),k(`Proceso ${q}: Solicita [${$.join(", ")}]`,"text-yellow-400"),await G(I()*.5),$.every((Z,z)=>Z<=A[z])?(k(`Proceso ${q}:  Estado SEGURO - Asignacin aprobada`,"text-green-400"),x(Z=>Z.map(z=>z.id===q?{...z,estado:"Ejecutando",color:"bg-green-600",colorText:"text-green-400"}:z)),$.forEach((Z,z)=>{A[z]-=Z,M[O][z]=Z}),k(`Recursos disponibles ahora: [${A.join(", ")}]`,"text-gray-400"),await G(I()),$.forEach((Z,z)=>{A[z]+=Z}),x(Z=>Z.map(z=>z.id===q?{...z,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:z)),k(`Proceso ${q}:  Completado - Recursos liberados`,"text-cyan-400")):(k(`Proceso ${q}:  Estado INSEGURO - Solicitud RECHAZADA`,"text-red-400"),x(Z=>Z.map(z=>z.id===q?{...z,estado:"Esperando",color:"bg-orange-600",colorText:"text-orange-400"}:z))),await G(I()*.3)}k("".repeat(50),"text-gray-600"),k(" El banquero garantiz estado seguro - Sin deadlock","text-green-400")},Q=async()=>{k(" Iniciando simulacin: DETECCIN DE CICLOS","text-cyan-400"),k(" Monitoreando grafo de espera en tiempo real","text-blue-400");const A=[{proceso:1,recurso:1},{proceso:2,recurso:2},{proceso:3,recurso:3}];for(const{proceso:M,recurso:O}of A)b(q=>q.map($=>$.id===O?{...$,disponible:!1,propietario:M}:$)),x(q=>q.map($=>$.id===M?{...$,recursosRetenidos:[O]}:$)),k(`Proceso ${M}: Tiene R${O}`,"text-green-400"),await G(I()*.3);k("".repeat(50),"text-gray-600"),k(" Creando dependencias circulares...","text-yellow-400");const K=[{proceso:1,recurso:2},{proceso:2,recurso:3},{proceso:3,recurso:1}];for(const{proceso:M,recurso:O}of K){x($=>$.map(ve=>ve.id===M?{...ve,estado:`Esperando R${O}`,color:"bg-red-600",colorText:"text-red-400",recursosSolicitados:[O]}:ve));const q=g[O-1]?.propietario;k(`Proceso ${M}:  Espera R${O} (lo tiene P${q})`,"text-red-400"),await G(I()*.4)}k("".repeat(50),"text-gray-600"),k(" Ejecutando detector de ciclos DFS...","text-yellow-400"),await G(I()*.8),k(" CICLO DETECTADO:","text-red-400"),k("P1  R2 (P2)  P2  R3 (P3)  P3  R1 (P1)  [CICLO]","text-red-300"),k(" Accin: Abortar P1 para romper el ciclo","text-yellow-400"),await G(I()),b(M=>M.map(O=>O.id===1?{...O,disponible:!0,propietario:null}:O)),x(M=>M.map(O=>O.id===1?{...O,estado:"Abortado",color:"bg-gray-800",colorText:"text-gray-500",recursosRetenidos:[],recursosSolicitados:[]}:O)),k("Proceso 1:  ABORTADO - R1 liberado","text-orange-400"),await G(I()*.5),k("".repeat(50),"text-gray-600"),k(" Ciclo roto - P3 puede continuar","text-green-400")},F=async()=>{switch(L.current=!1,D.current=!1,l(!0),m(!1),f([]),re(),await G(300),s){case"sin-solucion":await oe();break;case"ordenar":await Ce();break;case"todos":await ke();break;case"timeout":await Ee();break;case"banquero":await P();break;case"ciclos":await Q();break;case"abortar":await Q();break;case"rollback":k(" Demostracin de Rollback en construccin","text-yellow-400");break}L.current||k(" Simulacin completada","text-cyan-400"),l(!1),m(!1)},ue=()=>{D.current=!D.current,m(!d),D.current?k(" Simulacin pausada","text-yellow-400"):k(" Simulacin reanudada","text-green-400")},qe=()=>{L.current=!0,D.current=!1,l(!1),m(!1),f([]),re()},T=A=>{const K=Math.max(3,Math.min(6,N+A));j(K)},W=A=>{const K=Math.max(3,Math.min(6,_+A));w(K)},re=c.useCallback(()=>{const A=Array.from({length:N},(M,O)=>({id:O+1,estado:"Iniciando",color:"bg-blue-600",colorText:"text-blue-400",recursosRetenidos:[],recursosSolicitados:[]}));x(A);const K=Array.from({length:_},(M,O)=>({id:O+1,nombre:`R${O+1}`,disponible:!0,propietario:null}));b(K)},[N,_]);return c.useEffect(()=>{re()},[re]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" Configuracin de la Simulacin"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de Procesos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(-1),disabled:n||N<=3,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(go,{className:"size-4"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:N}),e.jsx("div",{className:"text-xs text-gray-400",children:"Min: 3, Max: 6"})]}),e.jsx("button",{onClick:()=>T(1),disabled:n||N>=6,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(dr,{className:"size-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Velocidad de Simulacin"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(dt,{value:C,onValueChange:E,max:100,step:1,disabled:n,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"Lenta"}),e.jsxs("span",{className:"font-bold text-white",children:[C[0],"%"]}),e.jsx("span",{children:"Rpida"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de Recursos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(-1),disabled:n||_<=3,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(go,{className:"size-4"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:_}),e.jsx("div",{className:"text-xs text-gray-400",children:"Min: 3, Max: 6"})]}),e.jsx("button",{onClick:()=>W(1),disabled:n||_>=6,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(dr,{className:"size-4"})})]})]})]})]}),e.jsxs(ia,{value:s,onValueChange:i,className:"w-full",children:[e.jsxs(Qt,{className:"w-full justify-start flex-wrap h-auto gap-2 bg-gray-900 p-2",children:[e.jsx(ce,{value:"sin-solucion",children:" Sin Solucin"}),e.jsx(ce,{value:"ordenar",children:" Ordenar"}),e.jsx(ce,{value:"todos",children:" Todos/Ninguno"}),e.jsx(ce,{value:"timeout",children:" Timeout"}),e.jsx(ce,{value:"banquero",children:" Banquero"}),e.jsx(ce,{value:"ciclos",children:" Ciclos"}),e.jsx(ce,{value:"abortar",children:" Abortar"}),e.jsx(ce,{value:"rollback",children:" Rollback"})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:F,disabled:n&&!d,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(nt,{className:"size-5"}),n&&d?"Continuar Demostracin":"Ejecutar Demostracin"]}),n&&e.jsxs("button",{onClick:ue,className:"flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(ct,{className:"size-5"}),d?"Reanudar":"Pausar"]}),e.jsxs("button",{onClick:qe,disabled:!n&&v.length===0,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-800 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"size-5"}),"Reiniciar"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Estado de Procesos"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:h.map(A=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`size-3 rounded-full ${A.color} animate-pulse flex-shrink-0`}),e.jsxs("span",{className:"text-white font-mono text-sm w-16",children:["P",A.id,":"]}),e.jsx("span",{className:`${A.colorText} text-sm`,children:A.estado})]}),A.recursosRetenidos.length>0&&e.jsxs("div",{className:"ml-10 text-xs text-gray-400",children:["Tiene: ",A.recursosRetenidos.map(K=>`R${K}`).join(", ")]}),A.recursosSolicitados.length>0&&e.jsxs("div",{className:"ml-10 text-xs text-yellow-400",children:["Solicita: ",A.recursosSolicitados.map(K=>`R${K}`).join(", ")]})]},A.id))})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Estado de Recursos"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(A=>e.jsxs("div",{className:`p-3 rounded border ${A.disponible?"bg-green-900/30 border-green-700":"bg-red-900/30 border-red-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-mono font-bold text-white",children:A.nombre}),e.jsx("div",{className:`size-3 rounded-full ${A.disponible?"bg-green-500":"bg-red-500"}`})]}),e.jsx("div",{className:"text-xs mt-1 text-gray-400",children:A.disponible?"Libre":`P${A.propietario}`})]},A.id))})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Logs de Ejecucin"}),e.jsx("div",{ref:J,onScroll:be,className:"bg-black rounded p-4 h-[500px] overflow-y-auto font-mono text-sm",children:v.length===0?e.jsx("div",{className:"text-gray-500 text-center mt-8",children:'Selecciona un algoritmo y presiona "Ejecutar"'}):e.jsxs(e.Fragment,{children:[v.map((A,K)=>e.jsx("div",{className:`${A.color} mb-1`,children:A.mensaje},K)),e.jsx("div",{ref:V})]})})]})]}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-6",children:[e.jsxs("h4",{className:"font-bold text-blue-200 mb-2",children:[s==="sin-solucion"&&" Deadlock Clsico",s==="ordenar"&&" Orden Global de Recursos",s==="todos"&&" Adquisicin Atmica",s==="timeout"&&" Timeouts con Reintentos",s==="banquero"&&" Algoritmo del Banquero",s==="ciclos"&&" Deteccin de Ciclos",s==="abortar"&&" Abortar Procesos",s==="rollback"&&" Rollback de Transacciones"]}),e.jsxs("p",{className:"text-sm text-blue-100",children:[s==="sin-solucion"&&"Los procesos adquieren recursos sin orden, creando una espera circular (P1P2P3P4P1). Las 4 condiciones de Coffman se cumplen, resultando en deadlock permanente.",s==="ordenar"&&"Todos los procesos adquieren recursos en orden numrico ascendente. Esto rompe la condicin de espera circular, garantizando que no puede formarse un ciclo de dependencias.",s==="todos"&&"Los procesos intentan adquirir TODOS los recursos necesarios de forma atmica. Si alguno no est disponible, no adquieren ninguno. Rompe la condicin de hold-and-wait.",s==="timeout"&&"Los procesos esperan por recursos con un tiempo lmite. Si expira el timeout, liberan los recursos que tienen y reintentan despus. Evita deadlocks permanentes mediante recuperacin automtica.",s==="banquero"&&"Antes de cada asignacin, el sistema verifica que quedar en un estado seguro (existe una secuencia donde todos los procesos pueden terminar). Solo asigna si es seguro.",s==="ciclos"&&"El sistema monitorea el grafo de espera en tiempo real. Cuando detecta un ciclo usando DFS, identifica el deadlock y toma accin correctiva (ej: abortar un proceso del ciclo).",s==="abortar"&&'Cuando se detecta deadlock, se selecciona una "vctima" (proceso con menor costo) y se aborta para romper el ciclo. Los recursos liberados permiten que los dems procesos continen.',s==="rollback"&&"En lugar de abortar completamente, los procesos pueden retroceder a un checkpoint previo, liberando recursos parcialmente. til en sistemas transaccionales para minimizar prdida de trabajo."]})]})]})]})]})}const t2=Sa("/ActividadesSeminarioSO/actividad11/deadlock")({component:JR});function a2(){const[s,i]=c.useState(!1),[n,l]=c.useState(500),[d,m]=c.useState(0),[h,x]=c.useState([{id:1,state:"waiting",priority:5,type:"spinlock"},{id:2,state:"waiting",priority:3,type:"spinlock"},{id:3,state:"waiting",priority:8,type:"mutex"},{id:4,state:"waiting",priority:2,type:"mutex"}]),[g,b]=c.useState({spinlock:0,mutex:0}),[v,f]=c.useState([]),[N,j]=c.useState(!1),[_,w]=c.useState(500),[C,E]=c.useState(0),[D,L]=c.useState([{id:1,name:"Low",priority:10,effectivePriority:10,state:"waiting",hasLock:!1},{id:2,name:"Medium",priority:50,effectivePriority:50,state:"waiting",hasLock:!1},{id:3,name:"High",priority:100,effectivePriority:100,state:"waiting",hasLock:!1}]),[V,J]=c.useState(!1),[ie,I]=c.useState(!1),[k,be]=c.useState([]),[te,G]=c.useState(!1),[oe,Ce]=c.useState(500),[ke,Ee]=c.useState(0),[P,Q]=c.useState([{id:1,name:"Thread A",state:"ready",hasLock:!1,preemptDisabled:!1,criticalSection:!1},{id:2,name:"Thread B",state:"ready",hasLock:!1,preemptDisabled:!1,criticalSection:!1}]),[F,ue]=c.useState(!0),[qe,T]=c.useState(0),[W,re]=c.useState([]),[A,K]=c.useState(!1),[M,O]=c.useState(500),[q,$]=c.useState(0),[ve,Z]=c.useState([]),[z,Oe]=c.useState([{id:1,operation:"push",value:10,state:"ready",casAttempts:0},{id:2,operation:"pop",value:null,state:"ready",casAttempts:0},{id:3,operation:"push",value:20,state:"ready",casAttempts:0}]),[Re,ae]=c.useState(0),[se,rt]=c.useState([]),[jt,fe]=c.useState(!1),[Me,De]=c.useState(500),[Ge,ze]=c.useState(0),[_e,Xe]=c.useState([{id:1,state:"ready",spinning:!1,blocked:!1,spinCount:0},{id:2,state:"ready",spinning:!1,blocked:!1,spinCount:0},{id:3,state:"ready",spinning:!1,blocked:!1,spinCount:0}]),[We,xt]=c.useState(null),[Ot,It]=c.useState(!1),[Ue,kt]=c.useState({successful:0,failed:0}),[et,R]=c.useState([]),ne=c.useRef(null),Ve=c.useRef(null),de=c.useRef(null),we=c.useRef(null),_t=c.useRef(null);c.useEffect(()=>{ne.current?.scrollTo({top:ne.current.scrollHeight,behavior:"smooth"})},[v]),c.useEffect(()=>{Ve.current?.scrollTo({top:Ve.current.scrollHeight,behavior:"smooth"})},[k]),c.useEffect(()=>{de.current?.scrollTo({top:de.current.scrollHeight,behavior:"smooth"})},[W]),c.useEffect(()=>{we.current?.scrollTo({top:we.current.scrollHeight,behavior:"smooth"})},[se]),c.useEffect(()=>{_t.current?.scrollTo({top:_t.current.scrollHeight,behavior:"smooth"})},[et]),c.useEffect(()=>{if(!s)return;const ye=setTimeout(()=>{m(gt=>{const Fe=(gt+1)%12;return Fe===0?f(B=>[...B,{time:Date.now(),message:" Reiniciando simulacin",type:"info"}]):Fe===1?(f(B=>[...B,{time:Date.now(),message:"Thread 1 (spinlock, P=5) intenta adquirir lock",type:"info"}]),x(B=>B.map(U=>U.id===1?{...U,state:"spinning"}:U)),b({spinlock:100,mutex:0})):Fe===2?(f(B=>[...B,{time:Date.now(),message:" Thread 1 adquiri lock, ejecutando seccin crtica",type:"success"}]),x(B=>B.map(U=>U.id===1?{...U,state:"running"}:U))):Fe===3?(f(B=>[...B,{time:Date.now(),message:" Thread 2 (spinlock, P=3) hace SPINNING (consume CPU)",type:"warning"}]),x(B=>B.map(U=>U.id===2?{...U,state:"spinning"}:U)),b({spinlock:200,mutex:0})):Fe===4?(f(B=>[...B,{time:Date.now(),message:"Thread 3 (mutex, P=8) se BLOQUEA (no consume CPU)",type:"info"}]),x(B=>B.map(U=>U.id===3?{...U,state:"blocked"}:U)),b({spinlock:200,mutex:0})):Fe===5?f(B=>[...B,{time:Date.now(),message:" Thread 2 sigue haciendo SPINNING (desperdicio de CPU)",type:"warning"}]):Fe===6?(f(B=>[...B,{time:Date.now(),message:"Thread 1 libera lock",type:"info"}]),x(B=>B.map(U=>U.id===1?{...U,state:"finished"}:U))):Fe===7?(f(B=>[...B,{time:Date.now(),message:" Thread 2 adquiere lock INMEDIATAMENTE (ventaja del spinning)",type:"success"}]),x(B=>B.map(U=>U.id===2?{...U,state:"running"}:U)),b({spinlock:100,mutex:0})):Fe===8?f(B=>[...B,{time:Date.now(),message:"Thread 2 ejecutando seccin crtica",type:"info"}]):Fe===9?(f(B=>[...B,{time:Date.now(),message:"Thread 2 libera lock",type:"info"}]),x(B=>B.map(U=>U.id===2?{...U,state:"finished"}:U))):Fe===10?(f(B=>[...B,{time:Date.now(),message:"Thread 3 (mutex) despierta y adquiere lock",type:"success"}]),x(B=>B.map(U=>U.id===3?{...U,state:"running"}:U)),b({spinlock:0,mutex:0})):Fe===11&&(f(B=>[...B,{time:Date.now(),message:" Comparacin: Spinlock = baja latencia, alto CPU | Mutex = alta latencia, bajo CPU",type:"success"}]),x(B=>B.map(U=>U.id===3?{...U,state:"finished"}:U)),b({spinlock:0,mutex:0})),Fe})},n);return()=>clearTimeout(ye)},[s,d,n]),c.useEffect(()=>{if(!N)return;const ye=setTimeout(()=>{E(gt=>{const Fe=(gt+1)%10;return Fe===0?(be(B=>[...B,{time:Date.now(),message:" Reiniciando simulacin de Priority Inheritance",type:"info"}]),J(!1),I(!1)):Fe===1?(be(B=>[...B,{time:Date.now(),message:"Thread Low (P=10) adquiere lock",type:"info"}]),L(B=>B.map(U=>U.id===1?{...U,state:"running",hasLock:!0}:U))):Fe===2?(be(B=>[...B,{time:Date.now(),message:"Thread Medium (P=50) ejecuta trabajo (no necesita lock)",type:"info"}]),L(B=>B.map(U=>U.id===2?{...U,state:"running"}:U))):Fe===3?(be(B=>[...B,{time:Date.now(),message:" Thread High (P=100) intenta adquirir lock  BLOQUEADO",type:"warning"}]),L(B=>B.map(U=>U.id===3?{...U,state:"blocked"}:U)),J(!0)):Fe===4?be(B=>[...B,{time:Date.now(),message:" INVERSIN DE PRIORIDAD: Medium (P=50) ejecuta, High (P=100) espera!",type:"error"}]):Fe===5?(be(B=>[...B,{time:Date.now(),message:" PRIORITY INHERITANCE: Low hereda prioridad 100 de High",type:"success"}]),L(B=>B.map(U=>U.id===1?{...U,effectivePriority:100}:U)),I(!0)):Fe===6?(be(B=>[...B,{time:Date.now(),message:"Thread Low (P efectiva=100) desaloja a Medium",type:"info"}]),L(B=>B.map(U=>U.id===2?{...U,state:"ready"}:U))):Fe===7?(be(B=>[...B,{time:Date.now(),message:"Thread Low completa seccin crtica y libera lock",type:"info"}]),L(B=>B.map(U=>U.id===1?{...U,state:"finished",hasLock:!1,effectivePriority:10}:U)),I(!1)):Fe===8?(be(B=>[...B,{time:Date.now(),message:" Thread High adquiere lock y ejecuta",type:"success"}]),L(B=>B.map(U=>U.id===3?{...U,state:"running",hasLock:!0}:U)),J(!1)):Fe===9&&(be(B=>[...B,{time:Date.now(),message:" Priority Inheritance previno convoying prolongado",type:"success"}]),L(B=>B.map(U=>U.id===3?{...U,state:"finished",hasLock:!1}:U))),Fe})},_);return()=>clearTimeout(ye)},[N,C,_]),c.useEffect(()=>{if(!te)return;const ye=setTimeout(()=>{Ee(gt=>{const Fe=(gt+1)%10;return Fe===0?(re(B=>[...B,{time:Date.now(),message:" Reiniciando simulacin de Preemption Control",type:"info"}]),T(0)):Fe===1?(re(B=>[...B,{time:Date.now(),message:"Thread A adquiere lock y DESHABILITA preemption",type:"info"}]),Q(B=>B.map(U=>U.id===1?{...U,state:"running",hasLock:!0,preemptDisabled:!0,criticalSection:!0}:U)),ue(!1)):Fe===2?re(B=>[...B,{time:Date.now(),message:"Thread A en seccin crtica (preemption disabled)",type:"info"}]):Fe===3?re(B=>[...B,{time:Date.now(),message:" Timer interrupt: intento de preemption BLOQUEADO",type:"warning"}]):Fe===4?re(B=>[...B,{time:Date.now(),message:" Thread A NO es desalojado (previene convoying)",type:"success"}]):Fe===5?(re(B=>[...B,{time:Date.now(),message:"Thread A completa seccin crtica y libera lock",type:"info"}]),Q(B=>B.map(U=>U.id===1?{...U,criticalSection:!1,hasLock:!1}:U))):Fe===6?(re(B=>[...B,{time:Date.now(),message:"Thread A REACTIVA preemption",type:"info"}]),Q(B=>B.map(U=>U.id===1?{...U,preemptDisabled:!1}:U)),ue(!0)):Fe===7?(re(B=>[...B,{time:Date.now(),message:" Context switch a Thread B",type:"info"}]),Q(B=>B.map(U=>U.id===1?{...U,state:"ready"}:U.id===2?{...U,state:"running"}:U)),T(B=>B+1)):Fe===8?re(B=>[...B,{time:Date.now(),message:"Thread B ejecuta su trabajo",type:"info"}]):Fe===9&&(re(B=>[...B,{time:Date.now(),message:" Preemption control redujo context switches durante locks",type:"success"}]),Q(B=>B.map(U=>U.id===2?{...U,state:"finished"}:U))),Fe})},oe);return()=>clearTimeout(ye)},[te,ke,oe]),c.useEffect(()=>{if(!A)return;const ye=setTimeout(()=>{$(gt=>{const Fe=(gt+1)%12;return Fe===0?(rt(B=>[...B,{time:Date.now(),message:" Reiniciando simulacin Lock-Free",type:"info"}]),Z([]),ae(0)):Fe===1?(rt(B=>[...B,{time:Date.now(),message:"Thread 1 intenta PUSH(10)",type:"info"}]),Oe(B=>B.map(U=>U.id===1?{...U,state:"executing"}:U))):Fe===2?(rt(B=>[...B,{time:Date.now(),message:"Thread 1: CAS exitoso, 10 agregado al stack",type:"success"}]),Z([10]),ae(B=>B+1),Oe(B=>B.map(U=>U.id===1?{...U,state:"finished",casAttempts:1}:U))):Fe===3?(rt(B=>[...B,{time:Date.now(),message:"Thread 2 intenta POP, Thread 3 intenta PUSH(20) SIMULTNEAMENTE",type:"warning"}]),Oe(B=>B.map(U=>U.id===2||U.id===3?{...U,state:"executing"}:U))):Fe===4?(rt(B=>[...B,{time:Date.now(),message:"Thread 3: CAS exitoso, 20 agregado (Thread 2 fall CAS)",type:"success"}]),Z([20,10]),ae(B=>B+1),Oe(B=>B.map(U=>U.id===3?{...U,casAttempts:1}:U.id===2?{...U,casAttempts:1}:U))):Fe===5?rt(B=>[...B,{time:Date.now(),message:"Thread 2 REINTENTA POP con nuevo top",type:"info"}]):Fe===6?(rt(B=>[...B,{time:Date.now(),message:"Thread 2: CAS exitoso, POP(20) del stack",type:"success"}]),Z([10]),ae(B=>B+1),Oe(B=>B.map(U=>U.id===2?{...U,state:"finished",value:20,casAttempts:2}:U.id===3?{...U,state:"finished"}:U))):Fe===7?rt(B=>[...B,{time:Date.now(),message:" Stack final: [10]",type:"info"}]):Fe===8?rt(B=>[...B,{time:Date.now(),message:" Total CAS: "+(Re+1)+" (sin locks, sin bloqueos)",type:"success"}]):Fe===9?rt(B=>[...B,{time:Date.now(),message:" Ventajas: No convoying, no priority inversion",type:"success"}]):Fe===10?rt(B=>[...B,{time:Date.now(),message:" Desventajas: CAS puede fallar y reintentar (Thread 2: 2 intentos)",type:"warning"}]):Fe===11&&rt(B=>[...B,{time:Date.now(),message:"Lock-free elimina completamente el convoying",type:"success"}]),Fe})},M);return()=>clearTimeout(ye)},[A,q,M,Re]),c.useEffect(()=>{if(!jt)return;const ye=setTimeout(()=>{ze(gt=>{const Fe=(gt+1)%14;if(Fe===0)R(B=>[...B,{time:Date.now(),message:" Reiniciando Adaptive Spinning",type:"info"}]),kt({successful:0,failed:0});else if(Fe===1)R(B=>[...B,{time:Date.now(),message:"Thread 1 adquiere lock",type:"info"}]),Xe(B=>B.map(U=>U.id===1?{...U,state:"running"}:U)),xt(1),It(!0);else if(Fe===2)R(B=>[...B,{time:Date.now(),message:"Thread 2 intenta adquirir lock...",type:"info"}]);else if(Fe===3)R(B=>[...B,{time:Date.now(),message:" Heurstica: Owner (T1) EJECUTNDOSE  Decisin: SPIN",type:"warning"}]),Xe(B=>B.map(U=>U.id===2?{...U,spinning:!0,spinCount:1}:U));else if(Fe===4)R(B=>[...B,{time:Date.now(),message:"Thread 2 hace SPINNING (esperando lock)...",type:"info"}]),Xe(B=>B.map(U=>U.id===2?{...U,spinCount:U.spinCount+1}:U));else if(Fe===5)R(B=>[...B,{time:Date.now(),message:"Thread 1 libera lock",type:"info"}]),Xe(B=>B.map(U=>U.id===1?{...U,state:"finished"}:U)),xt(null),It(!1);else if(Fe===6)R(B=>[...B,{time:Date.now(),message:" Thread 2 adquiere lock INMEDIATAMENTE (spinning exitoso)",type:"success"}]),Xe(B=>B.map(U=>U.id===2?{...U,state:"running",spinning:!1}:U)),xt(2),It(!0),kt(B=>({...B,successful:B.successful+1}));else if(Fe===7)R(B=>[...B,{time:Date.now(),message:"Thread 3 intenta adquirir lock...",type:"info"}]),It(!1);else if(Fe===8)R(B=>[...B,{time:Date.now(),message:" Heurstica: Owner (T2) NO ejecutndose  Decisin: BLOCK",type:"warning"}]),Xe(B=>B.map(U=>U.id===3?{...U,blocked:!0}:U));else if(Fe===9)R(B=>[...B,{time:Date.now(),message:"Thread 3 se BLOQUEA (ahorra CPU)",type:"info"}]),kt(B=>({...B,failed:B.failed+1}));else if(Fe===10)R(B=>[...B,{time:Date.now(),message:"Thread 2 libera lock",type:"info"}]),Xe(B=>B.map(U=>U.id===2?{...U,state:"finished"}:U)),xt(null);else if(Fe===11)R(B=>[...B,{time:Date.now(),message:"Thread 3 despierta y adquiere lock",type:"success"}]),Xe(B=>B.map(U=>U.id===3?{...U,state:"running",blocked:!1}:U)),xt(3);else if(Fe===12)Xe(B=>B.map(U=>U.id===3?{...U,state:"finished"}:U)),xt(null);else if(Fe===13){const{successful:B,failed:U}=Ue,Dt=B+U,Ke=Dt>0?(B/Dt*100).toFixed(0):0;R(ge=>[...ge,{time:Date.now(),message:` Historial: ${B} exitosos, ${U} fallidos (${Ke}% efectividad)`,type:"success"}])}return Fe})},Me);return()=>clearTimeout(ye)},[jt,Ge,Me,Ue]);const St=()=>{i(!1),m(0),x([{id:1,state:"waiting",priority:5,type:"spinlock"},{id:2,state:"waiting",priority:3,type:"spinlock"},{id:3,state:"waiting",priority:8,type:"mutex"},{id:4,state:"waiting",priority:2,type:"mutex"}]),b({spinlock:0,mutex:0}),f([])},tt=()=>{j(!1),E(0),L([{id:1,name:"Low",priority:10,effectivePriority:10,state:"waiting",hasLock:!1},{id:2,name:"Medium",priority:50,effectivePriority:50,state:"waiting",hasLock:!1},{id:3,name:"High",priority:100,effectivePriority:100,state:"waiting",hasLock:!1}]),J(!1),I(!1),be([])},Ye=()=>{G(!1),Ee(0),Q([{id:1,name:"Thread A",state:"ready",hasLock:!1,preemptDisabled:!1,criticalSection:!1},{id:2,name:"Thread B",state:"ready",hasLock:!1,preemptDisabled:!1,criticalSection:!1}]),ue(!0),T(0),re([])},ft=()=>{K(!1),$(0),Z([]),Oe([{id:1,operation:"push",value:10,state:"ready",casAttempts:0},{id:2,operation:"pop",value:null,state:"ready",casAttempts:0},{id:3,operation:"push",value:20,state:"ready",casAttempts:0}]),ae(0),rt([])},Ct=()=>{fe(!1),ze(0),Xe([{id:1,state:"ready",spinning:!1,blocked:!1,spinCount:0},{id:2,state:"ready",spinning:!1,blocked:!1,spinCount:0},{id:3,state:"ready",spinning:!1,blocked:!1,spinCount:0}]),xt(null),It(!1),kt({successful:0,failed:0}),R([])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ia,{className:"size-8 text-amber-400"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Convoying  Pseudocdigos"})]}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Coleccin de pseudocdigos para las tcnicas que previenen el problema de convoying (convoy effect): spinlocks, priority boosting y control de preemption. El convoying ocurre cuando threads de alta prioridad esperan por threads de baja prioridad que mantienen locks."})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Da,{type:"single",defaultValue:"pseudocodigos",collapsible:!0,className:"space-y-4",children:e.jsxs(sa,{value:"pseudocodigos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oa,{className:"size-6 text-blue-400"}),e.jsx("span",{className:"text-2xl font-semibold",children:"Pseudocdigos de Soluciones"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"spinlocks",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"spinlocks",className:"data-[state=active]:bg-blue-600",children:"Spinlocks"}),e.jsx(ce,{value:"priority",className:"data-[state=active]:bg-blue-600",children:"Priority Boosting"}),e.jsx(ce,{value:"preemption",className:"data-[state=active]:bg-blue-600",children:"Preemption Control"}),e.jsx(ce,{value:"lockfree",className:"data-[state=active]:bg-blue-600",children:"Lock-Free"}),e.jsx(ce,{value:"adaptive",className:"data-[state=active]:bg-blue-600",children:"Adaptive Spinning"})]}),e.jsxs(me,{value:"spinlocks",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-slate-800/30 p-6 rounded-lg border border-blue-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-300 mb-3",children:" Solucin 1: Spinlocks"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Los spinlocks utilizan busy-waiting (espera activa) en lugar de bloquear el thread. Cuando un thread intenta adquirir un lock ocupado, sigue ejecutndose en un loop verificando el estado del lock. Esto evita el overhead de context switches y es eficiente para perodos de espera cortos."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Busy-waiting sin context switches"}),e.jsx("li",{children:" Ideal para secciones crticas cortas"}),e.jsx("li",{children:" Usa operaciones atmicas (CAS)"}),e.jsx("li",{children:" Evita overhead del scheduler"}),e.jsx("li",{children:" Puede causar uso excesivo de CPU"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Spinlocks"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Spinlock bsico con Test-and-Set
estructura Spinlock {
    locked: booleano atmico
}

funcin crear_spinlock() -> Spinlock {
    lock: Spinlock
    lock.locked = falso
    return lock
}

// Adquirir spinlock (busy-wait)
funcin spin_lock(lock: Spinlock) {
    mientras test_and_set(&lock.locked, verdadero) hacer
        // Busy-wait: consumir CPU hasta que el lock est libre
        // El thread NO se bloquea ni cede el CPU
    fin mientras
    
    // Lock adquirido
    memory_barrier()  // Garantizar orden de memoria
}

// Liberar spinlock
funcin spin_unlock(lock: Spinlock) {
    memory_barrier()  // Garantizar que todas las escrituras sean visibles
    atomic_store(&lock.locked, falso)
}

// Test-and-Set atmico
funcin test_and_set(addr: puntero a booleano, nuevo_valor: booleano) -> booleano {
    // Operacin atmica
    old_value = *addr
    *addr = nuevo_valor
    return old_value
}

// Spinlock mejorado con Compare-and-Swap
funcin spin_lock_cas(lock: Spinlock) {
    esperado = falso
    
    mientras no compare_and_swap(&lock.locked, esperado, verdadero) hacer
        esperado = falso  // Resetear para siguiente intento
        // Busy-wait
    fin mientras
    
    memory_barrier()
}

// Spinlock con exponential backoff (reduce contencin)
funcin spin_lock_backoff(lock: Spinlock) {
    delay = DELAY_INICIAL  // ej. 10 ciclos
    max_delay = DELAY_MAXIMO  // ej. 1000 ciclos
    
    mientras test_and_set(&lock.locked, verdadero) hacer
        // Esperar con backoff exponencial
        busy_wait(delay)
        delay = min(delay * 2, max_delay)
    fin mientras
    
    memory_barrier()
}

// Spinlock con yield (hbrido)
funcin spin_lock_yield(lock: Spinlock) {
    intentos = 0
    max_spins = 100
    
    mientras test_and_set(&lock.locked, verdadero) hacer
        intentos++
        
        si intentos >= max_spins entonces
            // Demasiados intentos, ceder CPU
            thread_yield()
            intentos = 0
        fin si
    fin mientras
    
    memory_barrier()
}

// Test-and-Test-and-Set (reducir trfico de bus)
funcin spin_lock_ttas(lock: Spinlock) {
    mientras verdadero hacer
        // Primera fase: solo leer (no escribe en el bus)
        mientras atomic_load(&lock.locked) == verdadero hacer
            cpu_relax()  // Hint al CPU (ej. PAUSE en x86)
        fin mientras
        
        // Segunda fase: intentar adquirir
        si no test_and_set(&lock.locked, verdadero) entonces
            break  // Lock adquirido
        fin si
    fin mientras
    
    memory_barrier()
}

// Ticket spinlock (garantiza fairness FIFO)
estructura TicketSpinlock {
    ticket_actual: entero atmico
    ticket_servido: entero atmico
}

funcin ticket_lock(lock: TicketSpinlock) {
    // Obtener ticket
    mi_ticket = atomic_fetch_add(&lock.ticket_actual, 1)
    
    // Esperar turno
    mientras atomic_load(&lock.ticket_servido) != mi_ticket hacer
        cpu_relax()
    fin mientras
    
    memory_barrier()
}

funcin ticket_unlock(lock: TicketSpinlock) {
    memory_barrier()
    atomic_fetch_add(&lock.ticket_servido, 1)
}

// MCS Lock (queue-based, mejor escalabilidad)
estructura MCS_Node {
    next: puntero a MCS_Node atmico
    locked: booleano atmico
}

estructura MCS_Lock {
    tail: puntero a MCS_Node atmico
}

funcin mcs_lock(lock: MCS_Lock, mi_nodo: MCS_Node) {
    mi_nodo.next = NULL
    mi_nodo.locked = verdadero
    
    // Aadirse a la cola
    pred = atomic_swap(&lock.tail, mi_nodo)
    
    si pred != NULL entonces
        // Hay threads esperando
        atomic_store(&pred.next, mi_nodo)
        
        // Esperar hasta que el predecesor nos libere
        mientras atomic_load(&mi_nodo.locked) hacer
            cpu_relax()
        fin mientras
    fin si
    
    memory_barrier()
}

funcin mcs_unlock(lock: MCS_Lock, mi_nodo: MCS_Node) {
    memory_barrier()
    
    next = atomic_load(&mi_nodo.next)
    
    si next == NULL entonces
        // Posiblemente somos el ltimo
        si compare_and_swap(&lock.tail, mi_nodo, NULL) entonces
            // ramos el ltimo, terminado
            return
        fin si
        
        // Alguien ms se est aadiendo, esperar
        mientras (next = atomic_load(&mi_nodo.next)) == NULL hacer
            cpu_relax()
        fin mientras
    fin si
    
    // Liberar al siguiente
    atomic_store(&next.locked, falso)
}

// Ejemplo: Usar spinlock para seccin crtica
funcin ejemplo_uso_spinlock() {
    lock: Spinlock = crear_spinlock()
    contador_compartido: entero = 0
    
    funcin worker_thread() {
        para i = 1 hasta 1000 hacer
            spin_lock(lock)
            
            // Seccin crtica (DEBE ser corta)
            contador_compartido++
            
            spin_unlock(lock)
        fin para
    }
    
    // Crear threads
    threads: arreglo[4] de Thread
    para i = 0 hasta 3 hacer
        threads[i] = crear_thread(worker_thread)
    fin para
    
    // Esperar
    para cada thread en threads hacer
        thread.join()
    fin para
    
    imprimir("Contador final: " + contador_compartido)
}

// Comparacin: Spinlock vs Mutex
funcin comparar_spinlock_mutex() {
    // SPINLOCK: Mejor para
    // - Secciones crticas MUY cortas (< 100 ciclos)
    // - Cuando el lock rara vez est contendido
    // - Contexto de kernel/interrupt handlers
    // - Sistemas con muchos cores
    
    // MUTEX: Mejor para
    // - Secciones crticas largas
    // - Alta contencin del lock
    // - Necesidad de dormir threads
    // - Ahorrar CPU
}

// Adaptive Mutex (hbrido: spin luego block)
funcin adaptive_mutex_lock(lock: Mutex) {
    intentos_spin = 0
    max_spins = 1000
    
    // Fase 1: Spin
    mientras intentos_spin < max_spins hacer
        si try_lock(lock) entonces
            return  // Lock adquirido
        fin si
        
        intentos_spin++
        cpu_relax()
    fin mientras
    
    // Fase 2: Block (usar mutex tradicional)
    mutex_lock(lock)
}

// Mtricas de rendimiento
funcin medir_spinlock_performance() {
    lock: Spinlock = crear_spinlock()
    threads = 8
    iteraciones = 100000
    
    inicio = timestamp()
    
    funcin thread_worker() {
        para i = 1 hasta iteraciones hacer
            spin_lock(lock)
            // Trabajo mnimo
            spin_unlock(lock)
        fin para
    }
    
    para i = 1 hasta threads hacer
        crear_thread(thread_worker)
    fin para
    
    wait_all_threads()
    
    fin = timestamp()
    tiempo_total = fin - inicio
    ops_por_segundo = (iteraciones * threads) / tiempo_total
    
    imprimir("Operaciones/seg: " + ops_por_segundo)
    imprimir("Latencia promedio: " + (tiempo_total / (iteraciones * threads)))
}`})})]})]}),e.jsxs(me,{value:"priority",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-slate-800/30 p-6 rounded-lg border border-purple-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-300 mb-3",children:" Solucin 2: Priority Boosting (Priority Inheritance)"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Priority boosting aumenta temporalmente la prioridad de un thread de baja prioridad que mantiene un lock necesitado por un thread de alta prioridad. Esto previene la inversin de prioridad y el convoying, asegurando que el thread con el lock complete rpidamente su seccin crtica."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Previene inversin de prioridad"}),e.jsx("li",{children:" Boost temporal de prioridad"}),e.jsx("li",{children:" Restaura prioridad al liberar lock"}),e.jsx("li",{children:" Usado en sistemas de tiempo real"}),e.jsx("li",{children:" Puede causar cadenas de herencia"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Priority Boosting"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Estructura de thread con prioridad
estructura Thread {
    id: entero
    prioridad_base: entero
    prioridad_efectiva: entero
    locks_mantenidos: Lista<Lock>
    esperando_lock: Lock o NULL
}

// Lock con informacin de propietario
estructura PriorityInheritanceLock {
    locked: booleano atmico
    owner: Thread o NULL
    wait_queue: Cola<Thread> ordenada por prioridad
    mutex: Mutex
}

// Crear lock con herencia de prioridad
funcin crear_pi_lock() -> PriorityInheritanceLock {
    lock: PriorityInheritanceLock
    lock.locked = falso
    lock.owner = NULL
    lock.wait_queue = nueva_cola_prioridad()
    return lock
}

// Adquirir lock con priority inheritance
funcin pi_lock(lock: PriorityInheritanceLock, thread: Thread) {
    lock.mutex.lock()
    
    si no lock.locked entonces
        // Lock disponible
        lock.locked = verdadero
        lock.owner = thread
        thread.locks_mantenidos.append(lock)
        lock.mutex.unlock()
        return
    fin si
    
    // Lock ocupado - aplicar priority inheritance
    owner = lock.owner
    
    si thread.prioridad_efectiva > owner.prioridad_efectiva entonces
        // Thread actual tiene mayor prioridad que el owner
        // Boost la prioridad del owner
        boost_priority(owner, thread.prioridad_efectiva)
    fin si
    
    // Aadir a cola de espera
    thread.esperando_lock = lock
    lock.wait_queue.enqueue(thread)
    
    lock.mutex.unlock()
    
    // Dormir hasta ser despertado
    thread.dormir()
    
    // Al despertar, el lock fue adquirido
    thread.esperando_lock = NULL
}

// Liberar lock con priority inheritance
funcin pi_unlock(lock: PriorityInheritanceLock, thread: Thread) {
    lock.mutex.lock()
    
    // Remover lock de la lista del thread
    thread.locks_mantenidos.remove(lock)
    
    // Restaurar prioridad del thread
    recalcular_prioridad(thread)
    
    // Despertar siguiente thread en espera
    si no lock.wait_queue.vacia() entonces
        next_thread = lock.wait_queue.dequeue()
        
        // Transferir ownership
        lock.owner = next_thread
        next_thread.locks_mantenidos.append(lock)
        
        lock.mutex.unlock()
        
        // Despertar thread
        next_thread.despertar()
    sino
        // No hay threads esperando
        lock.locked = falso
        lock.owner = NULL
        lock.mutex.unlock()
    fin si
}

// Boost de prioridad (herencia)
funcin boost_priority(thread: Thread, nueva_prioridad: entero) {
    si nueva_prioridad <= thread.prioridad_efectiva entonces
        return  // No necesita boost
    fin si
    
    old_priority = thread.prioridad_efectiva
    thread.prioridad_efectiva = nueva_prioridad
    
    // Reordenar en cola del scheduler
    scheduler_update_priority(thread, old_priority, nueva_prioridad)
    
    // Propagar boost a threads bloqueantes (cadena de herencia)
    si thread.esperando_lock != NULL entonces
        lock = thread.esperando_lock
        
        si lock.owner != NULL entonces
            // Propagar boost al owner del lock que estamos esperando
            boost_priority(lock.owner, nueva_prioridad)
        fin si
    fin si
}

// Recalcular prioridad despus de liberar lock
funcin recalcular_prioridad(thread: Thread) {
    max_inherited = thread.prioridad_base
    
    // Buscar la mxima prioridad heredada de threads esperando
    para cada lock en thread.locks_mantenidos hacer
        para cada waiter en lock.wait_queue hacer
            si waiter.prioridad_efectiva > max_inherited entonces
                max_inherited = waiter.prioridad_efectiva
            fin si
        fin para
    fin para
    
    si max_inherited != thread.prioridad_efectiva entonces
        old_priority = thread.prioridad_efectiva
        thread.prioridad_efectiva = max_inherited
        scheduler_update_priority(thread, old_priority, max_inherited)
    fin si
}

// Priority Ceiling Protocol (alternativa)
estructura PriorityCeilingLock {
    locked: booleano
    ceiling_priority: entero  // Prioridad mxima de todos los threads que lo usan
    owner: Thread o NULL
    wait_queue: Cola<Thread>
}

funcin pc_lock(lock: PriorityCeilingLock, thread: Thread) {
    lock.mutex.lock()
    
    // Elevar inmediatamente a ceiling priority
    old_priority = thread.prioridad_efectiva
    thread.prioridad_efectiva = lock.ceiling_priority
    scheduler_update_priority(thread, old_priority, lock.ceiling_priority)
    
    mientras lock.locked hacer
        thread.esperando_lock = lock
        lock.wait_queue.enqueue(thread)
        
        lock.mutex.unlock()
        thread.dormir()
        lock.mutex.lock()
    fin mientras
    
    lock.locked = verdadero
    lock.owner = thread
    thread.esperando_lock = NULL
    
    lock.mutex.unlock()
}

funcin pc_unlock(lock: PriorityCeilingLock, thread: Thread) {
    lock.mutex.lock()
    
    lock.locked = falso
    lock.owner = NULL
    
    // Restaurar prioridad original
    recalcular_prioridad(thread)
    
    // Despertar siguiente
    si no lock.wait_queue.vacia() entonces
        next = lock.wait_queue.dequeue()
        next.despertar()
    fin si
    
    lock.mutex.unlock()
}

// Ejemplo: Prevenir inversin de prioridad
funcin ejemplo_priority_inversion() {
    lock: PriorityInheritanceLock = crear_pi_lock()
    recurso_compartido: entero = 0
    
    // Thread de BAJA prioridad
    funcin low_priority_thread() {
        thread_actual.prioridad_base = 10
        thread_actual.prioridad_efectiva = 10
        
        pi_lock(lock, thread_actual)
        
        imprimir("Low: Lock adquirido (prioridad: " + thread_actual.prioridad_efectiva + ")")
        
        // Trabajo largo
        para i = 1 hasta 1000000 hacer
            recurso_compartido++
        fin para
        
        imprimir("Low: Liberando lock")
        pi_unlock(lock, thread_actual)
    }
    
    // Thread de MEDIA prioridad (no usa el lock)
    funcin medium_priority_thread() {
        thread_actual.prioridad_base = 50
        thread_actual.prioridad_efectiva = 50
        
        // Trabajo que consume CPU
        para i = 1 hasta 500000 hacer
            // Busy work
        fin para
    }
    
    // Thread de ALTA prioridad
    funcin high_priority_thread() {
        thread_actual.prioridad_base = 100
        thread_actual.prioridad_efectiva = 100
        
        dormir(100ms)  // Dar tiempo a low priority para adquirir lock
        
        imprimir("High: Intentando adquirir lock")
        pi_lock(lock, thread_actual)
        
        // Con Priority Inheritance:
        // El thread LOW ser boosted a prioridad 100
        // Esto previene que MEDIUM lo retrase
        
        imprimir("High: Lock adquirido")
        recurso_compartido += 1000
        
        pi_unlock(lock, thread_actual)
    }
    
    crear_thread(low_priority_thread)
    dormir(10ms)
    crear_thread(medium_priority_thread)
    crear_thread(high_priority_thread)
}

// Cadena de herencia de prioridad
funcin ejemplo_priority_chain() {
    lock_a: PriorityInheritanceLock = crear_pi_lock()
    lock_b: PriorityInheritanceLock = crear_pi_lock()
    
    // Thread 1 (prioridad 10) mantiene lock_a
    funcin thread1() {
        prioridad = 10
        pi_lock(lock_a, thread_actual)
        
        // Trabajo largo
        dormir(1000ms)
        
        pi_unlock(lock_a, thread_actual)
    }
    
    // Thread 2 (prioridad 50) mantiene lock_b, espera lock_a
    funcin thread2() {
        prioridad = 50
        pi_lock(lock_b, thread_actual)
        
        // Thread2 espera lock_a (owned by thread1)
        // Thread1 heredar prioridad 50
        pi_lock(lock_a, thread_actual)
        
        pi_unlock(lock_a, thread_actual)
        pi_unlock(lock_b, thread_actual)
    }
    
    // Thread 3 (prioridad 100) espera lock_b
    funcin thread3() {
        prioridad = 100
        
        // Thread3 espera lock_b (owned by thread2)
        // Thread2 heredar prioridad 100
        // Thread1 heredar prioridad 100 (cadena)
        pi_lock(lock_b, thread_actual)
        
        pi_unlock(lock_b, thread_actual)
    }
}

// Mtricas de inversin de prioridad
funcin medir_priority_inversion() {
    high_wait_time: entero = 0
    inversions_detected: entero = 0
    
    // Detectar cundo thread de alta prioridad espera por baja
    si thread_high.esperando_lock != NULL entonces
        owner = thread_high.esperando_lock.owner
        
        si owner.prioridad_base < thread_high.prioridad_base entonces
            inversions_detected++
            
            // Medir tiempo de espera
            high_wait_time = timestamp() - thread_high.wait_start
            
            imprimir("Inversin detectada!")
            imprimir("  High priority: " + thread_high.prioridad_base)
            imprimir("  Low priority: " + owner.prioridad_base)
            imprimir("  Tiempo de espera: " + high_wait_time + "ms")
        fin si
    fin si
}`})})]})]}),e.jsxs(me,{value:"preemption",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-slate-800/30 p-6 rounded-lg border border-green-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-300 mb-3",children:" Solucin 3: Preemption Control"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"El control de preemption desactiva temporalmente la capacidad del scheduler de interrumpir un thread mientras mantiene un lock. Esto previene el convoying al garantizar que el thread complete su seccin crtica sin ser desalojado por el scheduler, reduciendo el tiempo que otros threads deben esperar."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Desactiva preemption temporalmente"}),e.jsx("li",{children:" Garantiza completar seccin crtica"}),e.jsx("li",{children:" Reduce latencia de locks"}),e.jsx("li",{children:" Usado en kernels de sistemas operativos"}),e.jsx("li",{children:" Debe usarse con cuidado (afecta latencia)"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Preemption Control"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Control de preemption a nivel de thread
estructura PreemptionState {
    count: entero  // Contador de desactivaciones anidadas
    interrupts_enabled: booleano
}

// Variable por-thread
thread_local preempt_state: PreemptionState

// Desactivar preemption
funcin preempt_disable() {
    preempt_state.count++
    
    si preempt_state.count == 1 entonces
        // Primera desactivacin - deshabilitar interrupts del scheduler
        preempt_state.interrupts_enabled = scheduler_interrupts_enabled()
        disable_scheduler_interrupts()
    fin si
    
    // Barrera de compilador (prevenir reordenamiento)
    compiler_barrier()
}

// Reactivar preemption
funcin preempt_enable() {
    compiler_barrier()
    
    preempt_state.count--
    
    si preempt_state.count == 0 entonces
        // ltima reactivacin
        si preempt_state.interrupts_enabled entonces
            enable_scheduler_interrupts()
        fin si
        
        // Verificar si hay preemption pendiente
        si scheduler_should_preempt() entonces
            scheduler_preempt()
        fin si
    fin si
    
    si preempt_state.count < 0 entonces
        panic("Preemption count underflow!")
    fin si
}

// Lock con preemption disabled
estructura PreemptDisabledLock {
    spinlock: Spinlock
}

funcin pd_lock(lock: PreemptDisabledLock) {
    // Desactivar preemption ANTES de adquirir spinlock
    preempt_disable()
    
    // Ahora adquirir el spinlock
    spin_lock(&lock.spinlock)
    
    // En este punto:
    // - Tenemos el lock
    // - Preemption est desactivada
    // - No podemos ser desalojados
}

funcin pd_unlock(lock: PreemptDisabledLock) {
    // Liberar spinlock
    spin_unlock(&lock.spinlock)
    
    // Reactivar preemption (puede causar preemption inmediata)
    preempt_enable()
}

// Read-Copy-Update (RCU) con preemption control
estructura RCU_Section {
    nesting_level: entero
}

thread_local rcu: RCU_Section

funcin rcu_read_lock() {
    preempt_disable()
    rcu.nesting_level++
}

funcin rcu_read_unlock() {
    rcu.nesting_level--
    
    si rcu.nesting_level == 0 entonces
        preempt_enable()
    fin si
}

// Seccin crtica con preemption disabled
funcin critical_section_preempt_disabled(callback: funcin) {
    preempt_disable()
    
    intentar {
        callback()
    } capturar error {
        // Asegurar que preemption se reactive incluso con error
        preempt_enable()
        re_lanzar(error)
    }
    
    preempt_enable()
}

// Per-CPU data con preemption control
estructura PerCPUData {
    cpu_id: entero
    contador: entero
    buffer: arreglo de datos
}

per_cpu_data: arreglo[NUM_CPUS] de PerCPUData

funcin acceder_percpu_data() -> entero {
    preempt_disable()
    
    cpu = get_current_cpu()
    data = &per_cpu_data[cpu]
    
    // Acceso seguro - no podemos migrar a otro CPU
    data.contador++
    valor = data.contador
    
    preempt_enable()
    
    return valor
}

// Lock-free con preemption control
funcin incrementar_contador_lockfree() {
    preempt_disable()
    
    cpu = get_current_cpu()
    
    // Incrementar contador per-CPU sin locks
    per_cpu_data[cpu].contador++
    
    preempt_enable()
}

// Spinlock en kernel con IRQ disable
estructura KernelSpinlock {
    locked: booleano atmico
    irq_flags: entero
}

funcin kernel_spin_lock_irqsave(lock: KernelSpinlock) -> entero {
    // Guardar estado de interrupts y desactivarlos
    flags = save_and_disable_interrupts()
    
    // Desactivar preemption
    preempt_disable()
    
    // Adquirir spinlock
    mientras test_and_set(&lock.locked, verdadero) hacer
        cpu_relax()
    fin mientras
    
    lock.irq_flags = flags
    return flags
}

funcin kernel_spin_unlock_irqrestore(lock: KernelSpinlock, flags: entero) {
    // Liberar spinlock
    atomic_store(&lock.locked, falso)
    
    // Reactivar preemption
    preempt_enable()
    
    // Restaurar estado de interrupts
    restore_interrupts(flags)
}

// Big Kernel Lock (BKL) - ejemplo histrico
estructura BigKernelLock {
    lock: Spinlock
    owner: Thread o NULL
    depth: entero
}

global bkl: BigKernelLock

funcin lock_kernel() {
    thread = thread_actual
    
    si bkl.owner == thread entonces
        // Lock recursivo
        bkl.depth++
        return
    fin si
    
    preempt_disable()
    spin_lock(&bkl.lock)
    
    bkl.owner = thread
    bkl.depth = 1
}

funcin unlock_kernel() {
    thread = thread_actual
    
    si bkl.owner != thread entonces
        panic("Unlock kernel by non-owner!")
    fin si
    
    bkl.depth--
    
    si bkl.depth == 0 entonces
        bkl.owner = NULL
        spin_unlock(&bkl.lock)
        preempt_enable()
    fin si
}

// Secciones crticas cortas sin locks
funcin atomic_sequence_preempt_disabled() {
    preempt_disable()
    
    // Secuencia de operaciones que deben ser atmicas
    // (no necesariamente thread-safe entre CPUs)
    global_counter++
    global_sum += valor
    
    preempt_enable()
}

// Scheduler: implementacin de preempt_disable/enable
funcin scheduler_interrupts_enabled() -> booleano {
    return (current_cpu_flags & INTERRUPT_FLAG) != 0
}

funcin disable_scheduler_interrupts() {
    // Deshabilitar timer interrupts
    cli()  // Clear Interrupt Flag (x86)
}

funcin enable_scheduler_interrupts() {
    // Habilitar timer interrupts
    sti()  // Set Interrupt Flag (x86)
}

funcin scheduler_should_preempt() -> booleano {
    thread = thread_actual
    
    // Verificar si hay thread de mayor prioridad listo
    si run_queue_has_higher_priority(thread.prioridad) entonces
        return verdadero
    fin si
    
    // Verificar si se agot el time slice
    si thread.time_slice_expired entonces
        return verdadero
    fin si
    
    return falso
}

funcin scheduler_preempt() {
    // Guardar contexto del thread actual
    save_context(thread_actual)
    
    // Seleccionar siguiente thread
    next = scheduler_pick_next()
    
    // Cambiar contexto
    context_switch(thread_actual, next)
}

// Ejemplo: Cdigo de kernel con preemption control
funcin kernel_timer_handler() {
    // Los interrupt handlers ejecutan con preemption disabled
    
    actualizar_jiffies()
    
    // Procesar timers expirados
    para cada timer en timers_expirados hacer
        timer.callback()
    fin para
    
    // Al salir del handler, preemption puede ocurrir
}

// Work queues con preemption control
funcin queue_work(work: Work) {
    preempt_disable()
    
    cpu = get_current_cpu()
    queue = &per_cpu_work_queues[cpu]
    
    queue.enqueue(work)
    
    preempt_enable()
    
    // Despertar worker thread
    wake_up_worker(cpu)
}

// Mtricas de preemption
funcin medir_preemption_latency() {
    max_disabled_time: entero = 0
    total_disabled_time: entero = 0
    disable_count: entero = 0
    
    funcin instrumentar_preempt_disable() {
        preempt_state.disable_timestamp = timestamp()
        disable_count++
    }
    
    funcin instrumentar_preempt_enable() {
        disabled_time = timestamp() - preempt_state.disable_timestamp
        total_disabled_time += disabled_time
        
        si disabled_time > max_disabled_time entonces
            max_disabled_time = disabled_time
        fin si
    }
    
    imprimir("Desactivaciones de preemption: " + disable_count)
    imprimir("Tiempo total disabled: " + total_disabled_time + "s")
    imprimir("Tiempo mximo disabled: " + max_disabled_time + "s")
    imprimir("Promedio: " + (total_disabled_time / disable_count) + "s")
}

// Sistema de tiempo real con preemption control
funcin rt_task_execute() {
    // Task de tiempo real
    preempt_disable()
    disable_interrupts()
    
    // Cdigo crtico de tiempo real
    // Garanta: no ser interrumpido
    ejecutar_control_critico()
    
    enable_interrupts()
    preempt_enable()
}

// Comparacin: Con y sin preemption control
funcin comparar_preemption() {
    // SIN preemption control:
    // - Lock puede ser mantenido mientras el thread es desalojado
    // - Otros threads esperan ms tiempo
    // - Causa convoying
    
    funcin sin_preempt_control() {
        spin_lock(&lock)
        // Si somos desalojados aqu, otros esperan
        trabajo_largo()
        spin_unlock(&lock)
    }
    
    // CON preemption control:
    // - Thread completa seccin crtica sin interrupciones
    // - Otros threads esperan menos tiempo
    // - Previene convoying
    
    funcin con_preempt_control() {
        preempt_disable()
        spin_lock(&lock)
        // No podemos ser desalojados
        trabajo_largo()
        spin_unlock(&lock)
        preempt_enable()
    }
}`})})]})]}),e.jsxs(me,{value:"lockfree",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/30 to-slate-800/30 p-6 rounded-lg border border-cyan-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-cyan-300 mb-3",children:" Solucin 4: Lock-Free Algorithms"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Los algoritmos lock-free eliminan completamente el uso de locks tradicionales, utilizando operaciones atmicas (CAS, fetch-and-add) para manipular datos compartidos. Esto previene el convoying porque no hay locks que puedan ser mantenidos por threads de baja prioridad, eliminando la posibilidad de inversin de prioridad."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Sin locks tradicionales"}),e.jsx("li",{children:" Usa operaciones atmicas (CAS)"}),e.jsx("li",{children:" Garanta de progreso del sistema"}),e.jsx("li",{children:" Elimina convoying completamente"}),e.jsx("li",{children:" Alta complejidad de implementacin"}),e.jsx("li",{children:" Problemas: ABA, memory reclamation"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Lock-Free Algorithms"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Lock-Free Stack usando CAS
estructura LockFreeNode<T> {
    data: T
    next: puntero a LockFreeNode<T> atmico
}

estructura LockFreeStack<T> {
    top: puntero a LockFreeNode<T> atmico
}

funcin crear_lockfree_stack<T>() -> LockFreeStack<T> {
    stack: LockFreeStack<T>
    stack.top = NULL
    return stack
}

// Push lock-free
funcin lf_push<T>(stack: LockFreeStack<T>, valor: T) {
    nuevo_nodo = allocar<LockFreeNode<T>>()
    nuevo_nodo.data = valor
    
    mientras verdadero hacer
        // Leer top actual
        old_top = atomic_load(&stack.top)
        nuevo_nodo.next = old_top
        
        // Intentar CAS: si top no cambi, actualizar
        si compare_and_swap(&stack.top, old_top, nuevo_nodo) entonces
            return  // Push exitoso
        fin si
        
        // CAS fall, otro thread modific el stack
        // Reintentar con nuevo valor de top
    fin mientras
}

// Pop lock-free
funcin lf_pop<T>(stack: LockFreeStack<T>) -> T o NULL {
    mientras verdadero hacer
        old_top = atomic_load(&stack.top)
        
        si old_top == NULL entonces
            return NULL  // Stack vaco
        fin si
        
        next = atomic_load(&old_top.next)
        
        // Intentar CAS: si top no cambi, actualizar
        si compare_and_swap(&stack.top, old_top, next) entonces
            // Pop exitoso
            valor = old_top.data
            liberar(old_top)  // CUIDADO: ABA problem
            return valor
        fin si
        
        // CAS fall, reintentar
    fin mientras
}

// Lock-Free Queue (Michael-Scott Queue)
estructura LockFreeQueue<T> {
    head: puntero a LockFreeNode<T> atmico
    tail: puntero a LockFreeNode<T> atmico
}

funcin crear_lockfree_queue<T>() -> LockFreeQueue<T> {
    queue: LockFreeQueue<T>
    
    // Nodo dummy inicial
    dummy = allocar<LockFreeNode<T>>()
    dummy.next = NULL
    
    queue.head = dummy
    queue.tail = dummy
    
    return queue
}

// Enqueue lock-free
funcin lf_enqueue<T>(queue: LockFreeQueue<T>, valor: T) {
    nuevo_nodo = allocar<LockFreeNode<T>>()
    nuevo_nodo.data = valor
    nuevo_nodo.next = NULL
    
    mientras verdadero hacer
        tail = atomic_load(&queue.tail)
        next = atomic_load(&tail.next)
        
        // Verificar que tail no cambi
        si tail == atomic_load(&queue.tail) entonces
            si next == NULL entonces
                // Tail apunta al ltimo nodo
                si compare_and_swap(&tail.next, NULL, nuevo_nodo) entonces
                    // Enqueue exitoso, intentar actualizar tail
                    compare_and_swap(&queue.tail, tail, nuevo_nodo)
                    return
                fin si
            sino
                // Tail est retrasado, ayudar a avanzarlo
                compare_and_swap(&queue.tail, tail, next)
            fin si
        fin si
    fin mientras
}

// Dequeue lock-free
funcin lf_dequeue<T>(queue: LockFreeQueue<T>) -> T o NULL {
    mientras verdadero hacer
        head = atomic_load(&queue.head)
        tail = atomic_load(&queue.tail)
        next = atomic_load(&head.next)
        
        // Verificar consistencia
        si head == atomic_load(&queue.head) entonces
            si head == tail entonces
                si next == NULL entonces
                    return NULL  // Queue vaca
                fin si
                
                // Tail retrasado, ayudar
                compare_and_swap(&queue.tail, tail, next)
            sino
                // Leer valor antes de CAS
                valor = next.data
                
                si compare_and_swap(&queue.head, head, next) entonces
                    // Dequeue exitoso
                    liberar(head)  // Liberar nodo dummy viejo
                    return valor
                fin si
            fin si
        fin si
    fin mientras
}

// Lock-Free Counter
estructura LockFreeCounter {
    value: entero atmico
}

funcin lf_increment(counter: LockFreeCounter) -> entero {
    mientras verdadero hacer
        old_value = atomic_load(&counter.value)
        new_value = old_value + 1
        
        si compare_and_swap(&counter.value, old_value, new_value) entonces
            return new_value
        fin si
    fin mientras
}

// Alternativa: usar fetch-and-add (ms eficiente)
funcin lf_increment_faa(counter: LockFreeCounter) -> entero {
    return atomic_fetch_add(&counter.value, 1) + 1
}

// Lock-Free Hash Table (simplified)
estructura LockFreeHashBucket<K, V> {
    key: K
    value: V atmico
    next: puntero a LockFreeHashBucket<K, V> atmico
}

estructura LockFreeHashTable<K, V> {
    buckets: arreglo de (puntero a LockFreeHashBucket<K, V> atmico)
    size: entero
}

funcin lf_hash_insert<K, V>(table: LockFreeHashTable<K, V>, key: K, value: V) -> booleano {
    hash = hash_function(key) % table.size
    bucket_head = &table.buckets[hash]
    
    nuevo_nodo = allocar<LockFreeHashBucket<K, V>>()
    nuevo_nodo.key = key
    nuevo_nodo.value = value
    
    mientras verdadero hacer
        old_head = atomic_load(bucket_head)
        
        // Verificar si key ya existe
        actual = old_head
        mientras actual != NULL hacer
            si actual.key == key entonces
                // Key existe, actualizar valor
                atomic_store(&actual.value, value)
                liberar(nuevo_nodo)
                return falso  // No insertado, solo actualizado
            fin si
            actual = atomic_load(&actual.next)
        fin mientras
        
        // Insertar al inicio de la lista
        nuevo_nodo.next = old_head
        
        si compare_and_swap(bucket_head, old_head, nuevo_nodo) entonces
            return verdadero  // Insertado exitosamente
        fin si
    fin mientras
}

funcin lf_hash_lookup<K, V>(table: LockFreeHashTable<K, V>, key: K) -> V o NULL {
    hash = hash_function(key) % table.size
    bucket_head = &table.buckets[hash]
    
    actual = atomic_load(bucket_head)
    
    mientras actual != NULL hacer
        si actual.key == key entonces
            return atomic_load(&actual.value)
        fin si
        actual = atomic_load(&actual.next)
    fin mientras
    
    return NULL  // No encontrado
}

// Lock-Free Reference Counting (para memory reclamation)
estructura LockFreeRefCounted<T> {
    data: T
    ref_count: entero atmico
}

funcin lf_acquire_ref<T>(obj: LockFreeRefCounted<T>) -> booleano {
    mientras verdadero hacer
        old_count = atomic_load(&obj.ref_count)
        
        si old_count == 0 entonces
            return falso  // Objeto siendo destruido
        fin si
        
        si compare_and_swap(&obj.ref_count, old_count, old_count + 1) entonces
            return verdadero
        fin si
    fin mientras
}

funcin lf_release_ref<T>(obj: LockFreeRefCounted<T>) {
    old_count = atomic_fetch_sub(&obj.ref_count, 1)
    
    si old_count == 1 entonces
        // ltima referencia, liberar objeto
        destruir(obj.data)
        liberar(obj)
    fin si
}

// Hazard Pointers (alternativa para memory reclamation)
constante MAX_HAZARD_POINTERS = 100

estructura HazardPointer {
    pointer: puntero atmico
}

global hazard_pointers: arreglo[MAX_HAZARD_POINTERS] de HazardPointer

funcin acquire_hazard_pointer<T>(ptr: puntero a T) -> entero {
    // Buscar slot libre
    para i = 0 hasta MAX_HAZARD_POINTERS - 1 hacer
        si atomic_load(&hazard_pointers[i].pointer) == NULL entonces
            atomic_store(&hazard_pointers[i].pointer, ptr)
            return i
        fin si
    fin para
    
    return -1  // No hay slots disponibles
}

funcin release_hazard_pointer(index: entero) {
    atomic_store(&hazard_pointers[index].pointer, NULL)
}

funcin is_hazardous<T>(ptr: puntero a T) -> booleano {
    para i = 0 hasta MAX_HAZARD_POINTERS - 1 hacer
        si atomic_load(&hazard_pointers[i].pointer) == ptr entonces
            return verdadero
        fin si
    fin para
    
    return falso
}

// Pop con hazard pointers (evita ABA)
funcin lf_pop_hazard<T>(stack: LockFreeStack<T>) -> T o NULL {
    mientras verdadero hacer
        old_top = atomic_load(&stack.top)
        
        si old_top == NULL entonces
            return NULL
        fin si
        
        // Proteger con hazard pointer
        hp_index = acquire_hazard_pointer(old_top)
        
        si hp_index == -1 entonces
            continue  // No hay hazard pointers, reintentar
        fin si
        
        // Verificar que top no cambi
        si atomic_load(&stack.top) != old_top entonces
            release_hazard_pointer(hp_index)
            continue  // Top cambi, reintentar
        fin si
        
        next = atomic_load(&old_top.next)
        
        si compare_and_swap(&stack.top, old_top, next) entonces
            // Pop exitoso
            valor = old_top.data
            
            release_hazard_pointer(hp_index)
            
            // Agregar a lista de nodos a liberar
            // Solo liberar cuando NO sea hazardous
            si no is_hazardous(old_top) entonces
                liberar(old_top)
            sino
                defer_free(old_top)
            fin si
            
            return valor
        fin si
        
        release_hazard_pointer(hp_index)
    fin mientras
}

// Lock-Free Skip List (estructura avanzada)
estructura LockFreeSkipNode<T> {
    value: T
    next: arreglo dinmico de (puntero a LockFreeSkipNode<T> atmico)
    top_level: entero
}

funcin lf_skiplist_insert<T>(skiplist: LockFreeSkipList<T>, value: T) -> booleano {
    // Generar nivel aleatorio
    nivel = random_level()
    
    nuevo_nodo = crear_skip_node(value, nivel)
    
    mientras verdadero hacer
        // Encontrar predecesores
        preds = encontrar_predecesores(skiplist, value)
        
        // Intentar insertar en nivel 0
        next = atomic_load(&preds[0].next[0])
        
        si next != NULL y next.value == value entonces
            return falso  // Valor ya existe
        fin si
        
        nuevo_nodo.next[0] = next
        
        si compare_and_swap(&preds[0].next[0], next, nuevo_nodo) entonces
            // Insercin en nivel 0 exitosa
            
            // Insertar en niveles superiores
            para i = 1 hasta nivel hacer
                mientras verdadero hacer
                    next = atomic_load(&preds[i].next[i])
                    nuevo_nodo.next[i] = next
                    
                    si compare_and_swap(&preds[i].next[i], next, nuevo_nodo) entonces
                        break
                    fin si
                    
                    // Actualizar predecesores si CAS falla
                    preds = encontrar_predecesores(skiplist, value)
                fin mientras
            fin para
            
            return verdadero
        fin si
    fin mientras
}

// Wait-Free vs Lock-Free
// Lock-Free: Al menos un thread hace progreso
// Wait-Free: Todos los threads hacen progreso en tiempo acotado

// Ejemplo wait-free: Counter con fetch-and-add
funcin wf_increment(counter: entero atmico) -> entero {
    // Una sola operacin atmica - wait-free
    return atomic_fetch_add(&counter, 1) + 1
}

// Compare con lock-free usando CAS (puede hacer loop infinito)
funcin lf_increment_cas(counter: entero atmico) -> entero {
    mientras verdadero hacer  // Puede loop infinitamente
        old = atomic_load(&counter)
        new = old + 1
        
        si compare_and_swap(&counter, old, new) entonces
            return new
        fin si
    fin mientras
}

// Double-CAS (DCAS) - no disponible en hardware comn
// Simular con version counters para evitar ABA
estructura VersionedPointer<T> {
    pointer: puntero a T
    version: entero
}

funcin lf_pop_versioned<T>(stack: LockFreeStack<T>) -> T o NULL {
    // Stack.top ahora es VersionedPointer
    mientras verdadero hacer
        old_top = atomic_load(&stack.top)  // {pointer, version}
        
        si old_top.pointer == NULL entonces
            return NULL
        fin si
        
        next_ptr = atomic_load(&old_top.pointer.next)
        new_top = {next_ptr, old_top.version + 1}
        
        // CAS comparando tanto pointer como version
        si compare_and_swap_128(&stack.top, old_top, new_top) entonces
            valor = old_top.pointer.data
            liberar(old_top.pointer)
            return valor
        fin si
    fin mientras
}

// Lock-Free Work Stealing Queue
estructura LockFreeDeque<T> {
    items: arreglo circular de T
    top: entero atmico      // Owner escribe
    bottom: entero atmico   // Owner escribe, thieves leen
}

funcin lf_deque_push<T>(deque: LockFreeDeque<T>, item: T) {
    // Solo el owner thread puede hacer push
    b = atomic_load_relaxed(&deque.bottom)
    deque.items[b % SIZE] = item
    
    atomic_store_release(&deque.bottom, b + 1)
}

funcin lf_deque_pop<T>(deque: LockFreeDeque<T>) -> T o NULL {
    // Solo el owner thread puede hacer pop
    b = atomic_load_relaxed(&deque.bottom) - 1
    atomic_store_relaxed(&deque.bottom, b)
    
    t = atomic_load_acquire(&deque.top)
    
    si b < t entonces
        // Deque vaco
        atomic_store_relaxed(&deque.bottom, t)
        return NULL
    fin si
    
    item = deque.items[b % SIZE]
    
    si b > t entonces
        return item
    fin si
    
    // ltimo item - competir con thieves
    atomic_store_relaxed(&deque.bottom, t + 1)
    
    si compare_and_swap(&deque.top, t, t + 1) entonces
        return item
    fin si
    
    return NULL  // Thief gan
}

funcin lf_deque_steal<T>(deque: LockFreeDeque<T>) -> T o NULL {
    // Thieves pueden hacer steal
    mientras verdadero hacer
        t = atomic_load_acquire(&deque.top)
        b = atomic_load_acquire(&deque.bottom)
        
        si t >= b entonces
            return NULL  // Deque vaco
        fin si
        
        item = deque.items[t % SIZE]
        
        si compare_and_swap(&deque.top, t, t + 1) entonces
            return item
        fin si
        
        // CAS fall, otro thief rob, reintentar
    fin mientras
}

// Ejemplo: Sistema completo lock-free
funcin ejemplo_sistema_lockfree() {
    queue: LockFreeQueue<Work> = crear_lockfree_queue()
    counter: LockFreeCounter
    counter.value = 0
    
    funcin producer() {
        para i = 1 hasta 10000 hacer
            work: Work
            work.id = i
            
            lf_enqueue(queue, work)
            lf_increment_faa(counter)
        fin para
    }
    
    funcin consumer() {
        mientras verdadero hacer
            work = lf_dequeue(queue)
            
            si work != NULL entonces
                procesar(work)
            sino
                break
            fin si
        fin mientras
    }
    
    // Mltiples producers y consumers
    para i = 1 hasta 4 hacer
        crear_thread(producer)
    fin para
    
    para i = 1 hasta 4 hacer
        crear_thread(consumer)
    fin para
}`})})]})]}),e.jsxs(me,{value:"adaptive",className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-slate-800/30 p-6 rounded-lg border border-orange-700/50",children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-300 mb-3",children:" Solucin 5: Adaptive Spinning"}),e.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"Adaptive spinning es una tcnica hbrida que decide dinmicamente entre hacer spinning (busy-wait) o bloquear el thread basndose en heursticas sobre el estado del lock. Si el lock est siendo mantenido por un thread en ejecucin, hace spinning. Si el owner est bloqueado, el thread se duerme. Esto previene convoying al evitar esperas innecesarias cuando el lock estar disponible pronto."}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded border border-slate-600",children:[e.jsx("h4",{className:"font-mono text-sm text-emerald-400 mb-2",children:"Caractersticas:"}),e.jsxs("ul",{className:"text-gray-300 space-y-1 text-sm",children:[e.jsx("li",{children:" Decisin dinmica: spin vs block"}),e.jsx("li",{children:" Monitorea estado del owner thread"}),e.jsx("li",{children:" Heursticas basadas en historial"}),e.jsx("li",{children:" Reduce context switches innecesarios"}),e.jsx("li",{children:" Balancea latencia y uso de CPU"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur p-6 rounded-lg border border-slate-600",children:[e.jsxs("h4",{className:"text-xl font-bold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),"Pseudocdigo: Adaptive Spinning"]}),e.jsx("pre",{className:"bg-slate-950 p-4 rounded-lg overflow-x-auto border border-slate-700",children:e.jsx("code",{className:"text-sm text-gray-100 font-mono",children:`// Estructura de mutex adaptivo
estructura AdaptiveMutex {
    locked: booleano atmico
    owner: Thread o NULL
    wait_queue: Cola<Thread>
    spin_history: SpinHistory
    mutex: Mutex
}

estructura SpinHistory {
    recent_spins: arreglo circular de booleano  // ltimas N decisiones
    successful_spins: entero  // Spins que adquirieron lock
    failed_spins: entero      // Spins que bloquearon
    index: entero
}

constante HISTORY_SIZE = 16
constante MAX_SPIN_ITERATIONS = 1000

// Crear mutex adaptivo
funcin crear_adaptive_mutex() -> AdaptiveMutex {
    mutex: AdaptiveMutex
    mutex.locked = falso
    mutex.owner = NULL
    mutex.wait_queue = nueva_cola()
    mutex.spin_history.successful_spins = 0
    mutex.spin_history.failed_spins = 0
    mutex.spin_history.index = 0
    return mutex
}

// Adquirir mutex adaptivo
funcin adaptive_lock(mutex: AdaptiveMutex, thread: Thread) {
    // Primer intento rpido
    si no atomic_swap(&mutex.locked, verdadero) entonces
        mutex.owner = thread
        return  // Lock adquirido inmediatamente
    fin si
    
    // Lock ocupado - decidir: spin o block?
    si should_spin(mutex, thread) entonces
        // Intentar spinning
        si adaptive_spin(mutex, thread) entonces
            // Spinning exitoso, lock adquirido
            registrar_spin_exitoso(mutex)
            return
        fin si
        
        // Spinning fall, caer a bloqueo
        registrar_spin_fallido(mutex)
    fin si
    
    // Bloquear thread
    adaptive_block(mutex, thread)
}

// Decidir si hacer spinning basado en heursticas
funcin should_spin(mutex: AdaptiveMutex, thread: Thread) -> booleano {
    owner = atomic_load(&mutex.owner)
    
    si owner == NULL entonces
        return falso  // No hay owner, no hacer spin
    fin si
    
    // Heurstica 1: El owner est ejecutndose?
    si no thread_is_running(owner) entonces
        return falso  // Owner no est en CPU, no hacer spin
    fin si
    
    // Heurstica 2: Estamos en el mismo CPU?
    si get_cpu(owner) == get_cpu(thread) entonces
        return falso  // Mismo CPU, spinning no ayuda
    fin si
    
    // Heurstica 3: El historial sugiere spinning?
    si mutex.spin_history.successful_spins < mutex.spin_history.failed_spins entonces
        // Ms fallos que xitos recientes
        return falso
    fin si
    
    // Heurstica 4: Hay muchos threads esperando?
    si queue_length(mutex.wait_queue) > NUM_CPUS entonces
        return falso  // Demasiada contencin
    fin si
    
    return verdadero  // Hacer spinning
}

// Spinning adaptivo
funcin adaptive_spin(mutex: AdaptiveMutex, thread: Thread) -> booleano {
    iterations = 0
    backoff = 1
    
    mientras iterations < MAX_SPIN_ITERATIONS hacer
        // Verificar si lock est disponible
        si no atomic_load(&mutex.locked) entonces
            // Lock parece libre, intentar adquirir
            si no atomic_swap(&mutex.locked, verdadero) entonces
                mutex.owner = thread
                return verdadero  // Lock adquirido
            fin si
        fin si
        
        // Verificar si el owner sigue ejecutndose
        owner = atomic_load(&mutex.owner)
        
        si owner == NULL o no thread_is_running(owner) entonces
            // Owner ya no est ejecutndose, dejar de hacer spin
            return falso
        fin si
        
        // Backoff exponencial
        para i = 1 hasta backoff hacer
            cpu_relax()  // PAUSE instruction
        fin para
        
        backoff = min(backoff * 2, 64)
        iterations++
    fin mientras
    
    return falso  // Spinning agotado
}

// Bloquear thread
funcin adaptive_block(mutex: AdaptiveMutex, thread: Thread) {
    mutex.mutex.lock()
    
    // Verificar nuevamente (podra haberse liberado)
    si no mutex.locked entonces
        si no atomic_swap(&mutex.locked, verdadero) entonces
            mutex.owner = thread
            mutex.mutex.unlock()
            return
        fin si
    fin si
    
    // Aadir a cola de espera
    mutex.wait_queue.enqueue(thread)
    
    mutex.mutex.unlock()
    
    // Dormir hasta ser despertado
    thread.dormir()
    
    // Al despertar, lock fue adquirido
    mutex.owner = thread
}

// Liberar mutex adaptivo
funcin adaptive_unlock(mutex: AdaptiveMutex, thread: Thread) {
    mutex.mutex.lock()
    
    mutex.owner = NULL
    atomic_store(&mutex.locked, falso)
    
    // Despertar siguiente thread
    si no mutex.wait_queue.vacia() entonces
        next = mutex.wait_queue.dequeue()
        next.despertar()
    fin si
    
    mutex.mutex.unlock()
}

// Registrar resultado de spinning
funcin registrar_spin_exitoso(mutex: AdaptiveMutex) {
    hist = &mutex.spin_history
    
    hist.recent_spins[hist.index] = verdadero
    hist.successful_spins++
    hist.index = (hist.index + 1) % HISTORY_SIZE
    
    // Decaer contador de fallos
    hist.failed_spins = hist.failed_spins * 9 / 10
}

funcin registrar_spin_fallido(mutex: AdaptiveMutex) {
    hist = &mutex.spin_history
    
    hist.recent_spins[hist.index] = falso
    hist.failed_spins++
    hist.index = (hist.index + 1) % HISTORY_SIZE
    
    // Decaer contador de xitos
    hist.successful_spins = hist.successful_spins * 9 / 10
}

// Verificar si thread est ejecutndose
funcin thread_is_running(thread: Thread) -> booleano {
    // Verificar estado del thread
    estado = atomic_load(&thread.estado)
    
    si estado == RUNNING entonces
        return verdadero
    fin si
    
    // En algunos sistemas, verificar si est en CPU
    para cada cpu en cpus hacer
        si cpu.current_thread == thread entonces
            return verdadero
        fin si
    fin para
    
    return falso
}

// Adaptive Spinning con Pause Heuristics
funcin adaptive_spin_pause(mutex: AdaptiveMutex, thread: Thread) -> booleano {
    iterations = 0
    pause_duration = INITIAL_PAUSE
    
    mientras iterations < MAX_SPIN_ITERATIONS hacer
        // Intentar adquirir
        si no atomic_swap(&mutex.locked, verdadero) entonces
            mutex.owner = thread
            return verdadero
        fin si
        
        // Verificar owner
        owner = atomic_load(&mutex.owner)
        
        si owner != NULL entonces
            // Owner existe, ajustar pause basado en su estado
            si thread_is_running(owner) entonces
                // Owner ejecutndose, pause corto
                pause_duration = min_pause
            sino
                // Owner bloqueado, pause largo o detener
                pause_duration = max_pause
                
                si iterations > MAX_SPIN_ITERATIONS / 2 entonces
                    return falso  // Detener spinning
                fin si
            fin si
        fin si
        
        // Ejecutar pause
        para i = 1 hasta pause_duration hacer
            cpu_relax()
        fin para
        
        iterations++
    fin mientras
    
    return falso
}

// Adaptive Mutex con prediccin de duracin
estructura PredictiveAdaptiveMutex {
    mutex: AdaptiveMutex
    avg_hold_time: entero  // Tiempo promedio de hold
    last_acquire_time: timestamp atmico
}

funcin predictive_lock(pmutex: PredictiveAdaptiveMutex, thread: Thread) {
    // Primer intento
    si no atomic_swap(&pmutex.mutex.locked, verdadero) entonces
        pmutex.mutex.owner = thread
        pmutex.last_acquire_time = timestamp()
        return
    fin si
    
    // Estimar cunto tiempo quedar el lock ocupado
    now = timestamp()
    acquire_time = atomic_load(&pmutex.last_acquire_time)
    elapsed = now - acquire_time
    
    estimated_remaining = pmutex.avg_hold_time - elapsed
    
    si estimated_remaining > 0 y estimated_remaining < SPIN_THRESHOLD entonces
        // Lock debera liberarse pronto, hacer spin
        si adaptive_spin(&pmutex.mutex, thread) entonces
            pmutex.last_acquire_time = timestamp()
            return
        fin si
    fin si
    
    // Bloquear
    adaptive_block(&pmutex.mutex, thread)
    pmutex.last_acquire_time = timestamp()
}

funcin predictive_unlock(pmutex: PredictiveAdaptiveMutex, thread: Thread) {
    now = timestamp()
    acquire_time = atomic_load(&pmutex.last_acquire_time)
    hold_time = now - acquire_time
    
    // Actualizar tiempo promedio de hold (EWMA)
    pmutex.avg_hold_time = (pmutex.avg_hold_time * 7 + hold_time) / 8
    
    adaptive_unlock(&pmutex.mutex, thread)
}

// Adaptive Spinning con feedback del scheduler
estructura SchedulerAdaptiveMutex {
    mutex: AdaptiveMutex
    scheduler_hints: SchedulerHints
}

estructura SchedulerHints {
    load_average: flotante  // Carga del sistema
    context_switch_cost: entero  // Costo estimado de CS
}

funcin scheduler_adaptive_lock(samutex: SchedulerAdaptiveMutex, thread: Thread) {
    // Primer intento
    si no atomic_swap(&samutex.mutex.locked, verdadero) entonces
        samutex.mutex.owner = thread
        return
    fin si
    
    hints = &samutex.scheduler_hints
    
    // Decidir basado en carga del sistema
    si hints.load_average < NUM_CPUS * 0.7 entonces
        // Sistema no muy cargado, spinning es razonable
        max_spins = MAX_SPIN_ITERATIONS
    sino si hints.load_average < NUM_CPUS * 1.5 entonces
        // Sistema moderadamente cargado, reducir spinning
        max_spins = MAX_SPIN_ITERATIONS / 2
    sino
        // Sistema sobrecargado, ir directo a bloqueo
        max_spins = 0
    fin si
    
    si max_spins > 0 entonces
        si adaptive_spin_limited(&samutex.mutex, thread, max_spins) entonces
            return
        fin si
    fin si
    
    adaptive_block(&samutex.mutex, thread)
}

funcin adaptive_spin_limited(mutex: AdaptiveMutex, thread: Thread, max: entero) -> booleano {
    para i = 1 hasta max hacer
        si no atomic_load(&mutex.locked) entonces
            si no atomic_swap(&mutex.locked, verdadero) entonces
                mutex.owner = thread
                return verdadero
            fin si
        fin si
        
        cpu_relax()
    fin mientras
    
    return falso
}

// Two-Phase Adaptive Lock
funcin two_phase_adaptive_lock(mutex: AdaptiveMutex, thread: Thread) {
    // Fase 1: Spinning agresivo corto
    si aggressive_spin(mutex, thread, 100) entonces
        return  // Lock adquirido en fase 1
    fin si
    
    // Fase 2: Verificar si owner sigue ejecutndose
    owner = atomic_load(&mutex.owner)
    
    si owner != NULL y thread_is_running(owner) entonces
        // Fase 2: Spinning conservador
        si conservative_spin(mutex, thread, 1000) entonces
            return  // Lock adquirido en fase 2
        fin si
    fin si
    
    // Fase 3: Bloquear
    adaptive_block(mutex, thread)
}

funcin aggressive_spin(mutex: AdaptiveMutex, thread: Thread, iterations: entero) -> booleano {
    // Spinning sin pause, mxima velocidad
    para i = 1 hasta iterations hacer
        si no atomic_swap(&mutex.locked, verdadero) entonces
            mutex.owner = thread
            return verdadero
        fin si
    fin para
    
    return falso
}

funcin conservative_spin(mutex: AdaptiveMutex, thread: Thread, iterations: entero) -> booleano {
    // Spinning con pause y verificaciones
    backoff = 1
    
    para i = 1 hasta iterations hacer
        si no atomic_swap(&mutex.locked, verdadero) entonces
            mutex.owner = thread
            return verdadero
        fin si
        
        // Verificar owner peridicamente
        si i % 50 == 0 entonces
            owner = atomic_load(&mutex.owner)
            
            si owner == NULL o no thread_is_running(owner) entonces
                return falso  // Detener spinning
            fin si
        fin si
        
        para j = 1 hasta backoff hacer
            cpu_relax()
        fin para
        
        backoff = min(backoff + 1, 16)
    fin para
    
    return falso
}

// Ejemplo: Comparacin de estrategias
funcin benchmark_adaptive_strategies() {
    normal_mutex: Mutex
    adaptive_mutex: AdaptiveMutex
    
    // Test 1: Baja contencin
    imprimir("=== Baja Contencin ===")
    bench_lock(normal_mutex, 4, 1000)
    bench_lock(adaptive_mutex, 4, 1000)
    
    // Test 2: Alta contencin
    imprimir("=== Alta Contencin ===")
    bench_lock(normal_mutex, 16, 10000)
    bench_lock(adaptive_mutex, 16, 10000)
}

funcin bench_lock(lock: cualquier, threads: entero, ops: entero) {
    contador = 0
    inicio = timestamp()
    
    funcin worker() {
        para i = 1 hasta ops hacer
            adquirir(lock)
            contador++
            liberar(lock)
        fin para
    }
    
    para i = 1 hasta threads hacer
        crear_thread(worker)
    fin para
    
    wait_all_threads()
    
    fin = timestamp()
    tiempo = fin - inicio
    throughput = (threads * ops) / tiempo
    
    imprimir("Tiempo: " + tiempo + "ms")
    imprimir("Throughput: " + throughput + " ops/s")
}

// Mtricas de adaptive spinning
funcin medir_adaptive_performance(mutex: AdaptiveMutex) {
    hist = mutex.spin_history
    
    total_decisiones = hist.successful_spins + hist.failed_spins
    
    si total_decisiones > 0 entonces
        tasa_exito = (hist.successful_spins * 100.0) / total_decisiones
        
        imprimir("Decisiones de spinning:")
        imprimir("  Exitosos: " + hist.successful_spins)
        imprimir("  Fallidos: " + hist.failed_spins)
        imprimir("  Tasa de xito: " + tasa_exito + "%")
    fin si
}`})})]})]})]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx(Da,{type:"single",defaultValue:"demos",collapsible:!0,className:"space-y-4",children:e.jsxs(sa,{value:"demos",className:"bg-slate-800/50 backdrop-blur rounded-xl border border-slate-700",children:[e.jsx(ra,{className:"px-6 py-4 hover:bg-slate-700/30 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"size-6 text-green-400"}),e.jsx("span",{className:"text-2xl font-semibold",children:"Demostraciones Interactivas"})]})}),e.jsx(na,{className:"px-6 pb-6",children:e.jsxs(ia,{defaultValue:"demo-spinlock",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5 bg-slate-900/50 p-1 rounded-lg mb-6",children:[e.jsx(ce,{value:"demo-spinlock",className:"data-[state=active]:bg-green-600",children:"Spinlock vs Mutex"}),e.jsx(ce,{value:"demo-priority",className:"data-[state=active]:bg-green-600",children:"Priority Inheritance"}),e.jsx(ce,{value:"demo-preemption",className:"data-[state=active]:bg-green-600",children:"Preemption Control"}),e.jsx(ce,{value:"demo-lockfree",className:"data-[state=active]:bg-green-600",children:"Lock-Free Stack"}),e.jsx(ce,{value:"demo-adaptive",className:"data-[state=active]:bg-green-600",children:"Adaptive Spinning"})]}),e.jsx(me,{value:"demo-spinlock",className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-slate-800/20 p-6 rounded-lg border border-blue-700/30",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-300 mb-4",children:" Demo: Spinlock vs Mutex"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Compara spinlocks (busy-wait) con mutexes (bloqueo). Observa el uso de CPU."}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>i(!s),className:`px-6 py-2 rounded-lg font-semibold transition-colors ${s?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"inline size-5 mr-2"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"inline size-5 mr-2"}),"Iniciar"]})}),e.jsxs("button",{onClick:St,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"inline size-5 mr-2"}),"Resetear"]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[n],onValueChange:ye=>l(ye[0]),min:100,max:2e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[n,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-3",children:"Threads"}),e.jsx("div",{className:"space-y-2",children:h.map(ye=>e.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${ye.state==="running"?"bg-green-900/30 border-green-500":ye.state==="spinning"?"bg-yellow-900/30 border-yellow-500 animate-pulse":ye.state==="blocked"?"bg-red-900/30 border-red-500":ye.state==="finished"?"bg-gray-900/30 border-gray-500":"bg-slate-800/30 border-slate-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-mono text-sm",children:["T",ye.id," (",ye.type,")"]}),e.jsxs("span",{className:"text-xs bg-slate-700 px-2 py-1 rounded",children:["P=",ye.priority]})]}),e.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:["Estado: ",ye.state,ye.state==="spinning"&&"  (Consume CPU)"]})]},ye.id))})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-orange-400 mb-3",children:"Uso de CPU"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Spinlocks"}),e.jsxs("span",{className:"text-yellow-400",children:[g.spinlock,"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-500 to-orange-500 transition-all duration-300",style:{width:`${Math.min(g.spinlock,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Mutexes"}),e.jsxs("span",{className:"text-green-400",children:[g.mutex,"%"]})]}),e.jsx("div",{className:"h-6 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-300",style:{width:`${Math.min(g.mutex,100)}%`}})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-4 p-2 bg-slate-800/50 rounded",children:[" Spinlocks: baja latencia, alto CPU",e.jsx("br",{})," Mutexes: alta latencia, bajo CPU"]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-purple-400 mb-3",children:"Event Log"}),e.jsx("div",{ref:ne,className:"h-48 overflow-y-auto space-y-1 font-mono text-xs",children:v.map((ye,gt)=>e.jsx("div",{className:`p-2 rounded ${ye.type==="success"?"bg-green-900/20 text-green-300":ye.type==="warning"?"bg-yellow-900/20 text-yellow-300":ye.type==="error"?"bg-red-900/20 text-red-300":"bg-slate-800/20 text-gray-300"}`,children:ye.message},gt))})]})]})}),e.jsx(me,{value:"demo-priority",className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 to-slate-800/20 p-6 rounded-lg border border-purple-700/30",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-300 mb-4",children:" Demo: Priority Inheritance"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Observa cmo priority inheritance previene inversin de prioridad y convoying."}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>j(!N),className:`px-6 py-2 rounded-lg font-semibold transition-colors ${N?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:N?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"inline size-5 mr-2"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"inline size-5 mr-2"}),"Iniciar"]})}),e.jsxs("button",{onClick:tt,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"inline size-5 mr-2"}),"Resetear"]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[_],onValueChange:ye=>w(ye[0]),min:100,max:2e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[_,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-3",children:"Threads (Prioridad)"}),e.jsx("div",{className:"space-y-3",children:D.map(ye=>e.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${ye.state==="running"?"bg-green-900/30 border-green-500":ye.state==="blocked"?"bg-red-900/30 border-red-500":ye.state==="finished"?"bg-gray-900/30 border-gray-500":"bg-slate-800/30 border-slate-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-bold",children:ye.name}),ye.hasLock&&e.jsx("span",{className:"text-xs bg-yellow-600 px-2 py-1 rounded",children:" Lock"})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base:"}),e.jsx("span",{className:"text-blue-400",children:ye.priority})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Efectiva:"}),e.jsxs("span",{className:`font-bold ${ye.effectivePriority>ye.priority?"text-yellow-400":"text-gray-400"}`,children:[ye.effectivePriority,ye.effectivePriority>ye.priority&&" "]})]}),e.jsxs("div",{className:"text-gray-400",children:["Estado: ",ye.state]})]})]},ye.id))})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-orange-400 mb-3",children:"Indicadores"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${V?"bg-red-900/30 border-red-500 animate-pulse":"bg-slate-800/30 border-slate-600"}`,children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Inversin de Prioridad"}),e.jsx("div",{className:"text-2xl",children:V?" DETECTADA":" No"})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${ie?"bg-yellow-900/30 border-yellow-500":"bg-slate-800/30 border-slate-600"}`,children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Priority Boost"}),e.jsx("div",{className:"text-2xl",children:ie?" ACTIVO":" Inactivo"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-4 p-2 bg-slate-800/50 rounded",children:" Priority inheritance eleva temporalmente la prioridad del thread que mantiene un lock necesitado por un thread de alta prioridad."})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-purple-400 mb-3",children:"Event Log"}),e.jsx("div",{ref:Ve,className:"h-48 overflow-y-auto space-y-1 font-mono text-xs",children:k.map((ye,gt)=>e.jsx("div",{className:`p-2 rounded ${ye.type==="success"?"bg-green-900/20 text-green-300":ye.type==="warning"?"bg-yellow-900/20 text-yellow-300":ye.type==="error"?"bg-red-900/20 text-red-300":"bg-slate-800/20 text-gray-300"}`,children:ye.message},gt))})]})]})}),e.jsx(me,{value:"demo-preemption",className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 to-slate-800/20 p-6 rounded-lg border border-green-700/30",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-300 mb-4",children:" Demo: Preemption Control"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Desactivar preemption durante secciones crticas previene context switches innecesarios."}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>G(!te),className:`px-6 py-2 rounded-lg font-semibold transition-colors ${te?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:te?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"inline size-5 mr-2"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"inline size-5 mr-2"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ye,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"inline size-5 mr-2"}),"Resetear"]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[oe],onValueChange:ye=>Ce(ye[0]),min:100,max:2e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[oe,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-3",children:"Threads"}),e.jsx("div",{className:"space-y-3",children:P.map(ye=>e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${ye.state==="running"?"bg-green-900/30 border-green-500":ye.state==="ready"?"bg-blue-900/30 border-blue-500":"bg-gray-900/30 border-gray-500"}`,children:[e.jsx("div",{className:"font-bold mb-2",children:ye.name}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Estado: ",ye.state]}),e.jsxs("div",{children:["Lock: ",ye.hasLock?" S":" No"]}),e.jsxs("div",{children:["Preemption: ",ye.preemptDisabled?" Disabled":" Enabled"]}),e.jsxs("div",{children:["Seccin Crtica: ",ye.criticalSection?" S":"No"]})]})]},ye.id))})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-orange-400 mb-3",children:"Estado del Sistema"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${F?"bg-green-900/30 border-green-500":"bg-red-900/30 border-red-500"}`,children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Preemption Global"}),e.jsx("div",{className:"text-2xl",children:F?" Enabled":" DISABLED"})]}),e.jsxs("div",{className:"p-4 rounded-lg border-2 bg-slate-800/30 border-slate-600",children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Context Switches"}),e.jsx("div",{className:"text-3xl text-cyan-400",children:qe})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-4 p-2 bg-slate-800/50 rounded",children:" Preemption disabled garantiza que el thread complete su seccin crtica sin interrupciones, reduciendo el tiempo total que otros threads esperan por el lock."})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-purple-400 mb-3",children:"Event Log"}),e.jsx("div",{ref:de,className:"h-48 overflow-y-auto space-y-1 font-mono text-xs",children:W.map((ye,gt)=>e.jsx("div",{className:`p-2 rounded ${ye.type==="success"?"bg-green-900/20 text-green-300":ye.type==="warning"?"bg-yellow-900/20 text-yellow-300":ye.type==="error"?"bg-red-900/20 text-red-300":"bg-slate-800/20 text-gray-300"}`,children:ye.message},gt))})]})]})}),e.jsx(me,{value:"demo-lockfree",className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/20 to-slate-800/20 p-6 rounded-lg border border-cyan-700/30",children:[e.jsx("h3",{className:"text-2xl font-bold text-cyan-300 mb-4",children:" Demo: Lock-Free Stack"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Operaciones lock-free usando CAS. Sin locks = sin convoying."}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>K(!A),className:`px-6 py-2 rounded-lg font-semibold transition-colors ${A?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:A?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"inline size-5 mr-2"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"inline size-5 mr-2"}),"Iniciar"]})}),e.jsxs("button",{onClick:ft,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"inline size-5 mr-2"}),"Resetear"]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[M],onValueChange:ye=>O(ye[0]),min:100,max:2e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[M,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-3",children:"Lock-Free Stack"}),e.jsx("div",{className:"space-y-2 mb-4",children:ve.length===0?e.jsx("div",{className:"text-gray-500 text-center py-8 border-2 border-dashed border-slate-600 rounded",children:"Stack vaco"}):e.jsx(e.Fragment,{children:[...ve].reverse().map((ye,gt)=>e.jsxs("div",{className:"p-3 bg-blue-900/30 border-2 border-blue-500 rounded-lg text-center font-bold text-xl animate-pulse",children:[ye,gt===0&&e.jsx("span",{className:"text-xs ml-2",children:" TOP"})]},gt))})}),e.jsxs("div",{className:"text-xs text-gray-400 bg-slate-800/50 p-2 rounded",children:["Total CAS operations: ",e.jsx("span",{className:"text-cyan-400 font-bold",children:Re})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-orange-400 mb-3",children:"Threads"}),e.jsx("div",{className:"space-y-3",children:z.map(ye=>e.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${ye.state==="executing"?"bg-yellow-900/30 border-yellow-500 animate-pulse":ye.state==="finished"?"bg-green-900/30 border-green-500":"bg-slate-800/30 border-slate-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-bold",children:["Thread ",ye.id]}),e.jsx("span",{className:"text-xs bg-slate-700 px-2 py-1 rounded",children:ye.operation.toUpperCase()})]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Valor: ",ye.operation==="push"?ye.value:ye.value??""]}),e.jsxs("div",{children:["CAS attempts: ",ye.casAttempts]}),e.jsxs("div",{className:"text-gray-400",children:["Estado: ",ye.state]})]})]},ye.id))}),e.jsx("div",{className:"text-xs text-gray-400 mt-4 p-2 bg-slate-800/50 rounded",children:" Los threads pueden fallar CAS y reintentar, pero NUNCA se bloquean esperando un lock."})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-purple-400 mb-3",children:"Event Log"}),e.jsx("div",{ref:we,className:"h-48 overflow-y-auto space-y-1 font-mono text-xs",children:se.map((ye,gt)=>e.jsx("div",{className:`p-2 rounded ${ye.type==="success"?"bg-green-900/20 text-green-300":ye.type==="warning"?"bg-yellow-900/20 text-yellow-300":ye.type==="error"?"bg-red-900/20 text-red-300":"bg-slate-800/20 text-gray-300"}`,children:ye.message},gt))})]})]})}),e.jsx(me,{value:"demo-adaptive",className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/20 to-slate-800/20 p-6 rounded-lg border border-orange-700/30",children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-300 mb-4",children:" Demo: Adaptive Spinning"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Decisin inteligente: spin si owner ejecutndose, block si no."}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>fe(!jt),className:`px-6 py-2 rounded-lg font-semibold transition-colors ${jt?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:jt?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"inline size-5 mr-2"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"inline size-5 mr-2"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ct,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"inline size-5 mr-2"}),"Resetear"]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Velocidad:"}),e.jsx(dt,{value:[Me],onValueChange:ye=>De(ye[0]),min:100,max:2e3,step:100,className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-400 w-16",children:[Me,"ms"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-3",children:"Threads"}),e.jsx("div",{className:"space-y-3",children:_e.map(ye=>e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${ye.state==="running"?"bg-green-900/30 border-green-500":ye.spinning?"bg-yellow-900/30 border-yellow-500 animate-pulse":ye.blocked?"bg-red-900/30 border-red-500":ye.state==="finished"?"bg-gray-900/30 border-gray-500":"bg-slate-800/30 border-slate-600"}`,children:[e.jsxs("div",{className:"font-bold mb-2",children:["Thread ",ye.id]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Estado: ",ye.state]}),e.jsxs("div",{children:["Spinning: ",ye.spinning?" S":"No"]}),e.jsxs("div",{children:["Blocked: ",ye.blocked?" S":"No"]}),e.jsxs("div",{children:["Spin count: ",ye.spinCount]})]})]},ye.id))})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-orange-400 mb-3",children:"Estado del Owner & Historial"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border-2 bg-slate-800/30 border-slate-600",children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Lock Owner"}),e.jsx("div",{className:"text-2xl",children:We?`Thread ${We}`:"Ninguno"})]}),e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${Ot?"bg-green-900/30 border-green-500":"bg-red-900/30 border-red-500"}`,children:[e.jsx("div",{className:"text-sm font-bold mb-1",children:"Owner Estado"}),e.jsx("div",{className:"text-xl",children:Ot?" RUNNING":" Bloqueado"})]}),e.jsxs("div",{className:"p-4 rounded-lg border-2 bg-slate-800/30 border-slate-600",children:[e.jsx("div",{className:"text-sm font-bold mb-2",children:"Historial de Spinning"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Exitosos:"}),e.jsx("span",{className:"text-green-400 font-bold",children:Ue.successful})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fallidos:"}),e.jsx("span",{className:"text-red-400 font-bold",children:Ue.failed})]}),e.jsxs("div",{className:"flex justify-between border-t border-slate-600 pt-1 mt-1",children:[e.jsx("span",{children:"Efectividad:"}),e.jsxs("span",{className:"text-cyan-400 font-bold",children:[Ue.successful+Ue.failed>0?Math.round(Ue.successful/(Ue.successful+Ue.failed)*100):0,"%"]})]})]})]}),e.jsx("div",{className:"text-xs text-gray-400 p-2 bg-slate-800/50 rounded",children:" Adaptive spinning decide dinmicamente entre spinning y bloqueo basndose en si el owner est ejecutndose."})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"font-bold text-purple-400 mb-3",children:"Event Log"}),e.jsx("div",{ref:_t,className:"h-48 overflow-y-auto space-y-1 font-mono text-xs",children:et.map((ye,gt)=>e.jsx("div",{className:`p-2 rounded ${ye.type==="success"?"bg-green-900/20 text-green-300":ye.type==="warning"?"bg-yellow-900/20 text-yellow-300":ye.type==="error"?"bg-red-900/20 text-red-300":"bg-slate-800/20 text-gray-300"}`,children:ye.message},gt))})]})]})})]})})]})})})]})}const s2=Sa("/ActividadesSeminarioSO/actividad11/convoying")({component:a2});function r2(){const[s,i]=c.useState([]),[n,l]=c.useState(!1),[d,m]=c.useState(0),[h,x]=c.useState(500),[g,b]=c.useState([]),[v,f]=c.useState(["Simulacin Lock-free iniciada. Usando operaciones CAS."]),N=c.useRef(null),[j,_]=c.useState([{id:1,status:"idle",partition:0},{id:2,status:"idle",partition:1},{id:3,status:"idle",partition:2},{id:4,status:"idle",partition:3}]),[w,C]=c.useState(!1),[E,D]=c.useState(0),[L,V]=c.useState(500),[J,ie]=c.useState(new Map([[0,[]],[1,[]],[2,[]],[3,[]]])),[I,k]=c.useState(["Simulacin de Particionamiento iniciada. 4 particiones independientes."]),be=c.useRef(null),[te,G]=c.useState([{id:1,status:"idle",partition:0},{id:2,status:"idle",partition:1},{id:3,status:"idle",partition:2},{id:4,status:"idle",partition:0}]),[oe,Ce]=c.useState(!1),[ke,Ee]=c.useState(0),[P,Q]=c.useState(500),[F,ue]=c.useState([!1,!1,!1,!1]),[qe,T]=c.useState(["Simulacin Lock Striping iniciada. 4 stripes con locks independientes."]),W=c.useRef(null),[re,A]=c.useState([{id:1,status:"idle",localValue:0},{id:2,status:"idle",localValue:0},{id:3,status:"idle",localValue:0},{id:4,status:"idle",localValue:0}]),[K,M]=c.useState(!1),[O,q]=c.useState(0),[$,ve]=c.useState(500),[Z,z]=c.useState(0),[Oe,Re]=c.useState(["Simulacin Thread-local iniciada. Cada thread tiene su contador local."]),ae=c.useRef(null),[se,rt]=c.useState([{id:1,status:"idle",version:0},{id:2,status:"idle",version:0},{id:3,status:"idle",version:0},{id:4,status:"idle",version:0}]),[jt,fe]=c.useState(!1),[Me,De]=c.useState(0),[Ge,ze]=c.useState(500),[_e,Xe]=c.useState(100),[We,xt]=c.useState(0),[Ot,It]=c.useState(0),[Ue,kt]=c.useState(["Simulacin OCC iniciada. Validacin optimista con versionado."]),et=c.useRef(null),[R,ne]=c.useState([{id:1,status:"idle",batchSize:0},{id:2,status:"idle",batchSize:0},{id:3,status:"idle",batchSize:0},{id:4,status:"idle",batchSize:0}]),[Ve,de]=c.useState(!1),[we,_t]=c.useState(0),[St,tt]=c.useState(500),[Ye,ft]=c.useState([]),[Ct,ye]=c.useState(0),[gt,Fe]=c.useState(["Simulacin Batching iniciada. Agrupa operaciones en lotes."]),B=c.useRef(null),[U,Dt]=c.useState([{id:1,status:"idle",partition:0},{id:2,status:"idle",partition:1},{id:3,status:"idle",partition:2},{id:4,status:"idle",partition:3}]),[Ke,ge]=c.useState(!1),[Ft,Zt]=c.useState(0),[pt,zt]=c.useState(500),[lt,Be]=c.useState([!1,!1,!1,!1]),[Pe,Je]=c.useState(["read","read","read","read"]),[ot,X]=c.useState(["Simulacin Fine-grained Locks iniciada. Locks por nodo."]),Ie=c.useRef(null);c.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[v]),c.useEffect(()=>{be.current&&(be.current.scrollTop=be.current.scrollHeight)},[I]),c.useEffect(()=>{W.current&&(W.current.scrollTop=W.current.scrollHeight)},[qe]),c.useEffect(()=>{ae.current&&(ae.current.scrollTop=ae.current.scrollHeight)},[Oe]),c.useEffect(()=>{et.current&&(et.current.scrollTop=et.current.scrollHeight)},[Ue]),c.useEffect(()=>{B.current&&(B.current.scrollTop=B.current.scrollHeight)},[gt]),c.useEffect(()=>{Ie.current&&(Ie.current.scrollTop=Ie.current.scrollHeight)},[ot]),c.useEffect(()=>{if(!n)return;const je=setInterval(()=>{if(m(He=>He+1),Math.random()<.7){const He=Math.floor(Math.random()*4)+1,ht=Math.random()<.5?"push":"pop",Lt=ht==="push"?Math.floor(Math.random()*100):void 0,ut={id:Date.now()+Math.random(),type:ht,threadId:He,status:"pending",value:Lt,attempts:0};i(Y=>[...Y.slice(-6),ut]),Math.random()<.85?setTimeout(()=>{i(Y=>Y.map(Se=>Se.id===ut.id?{...Se,status:"success"}:Se)),ht==="push"&&Lt!==void 0?(b(Y=>[...Y,Lt].slice(-8)),f(Y=>[...Y.slice(-9),`T${He}: PUSH(${Lt}) exitoso - CAS success`])):ht==="pop"&&b(Y=>{if(Y.length>0){const Se=Y[Y.length-1];return f(Pt=>[...Pt.slice(-9),`T${He}: POP() = ${Se} - CAS success`]),Y.slice(0,-1)}return f(Se=>[...Se.slice(-9),`T${He}: POP() = null (stack vaco)`]),Y})},h/2):setTimeout(()=>{i(Y=>Y.map(Se=>Se.id===ut.id?{...Se,status:"retry",attempts:(Se.attempts||0)+1}:Se)),f(Y=>[...Y.slice(-9),`T${He}: CAS fall, reintentando ${ht.toUpperCase()}...`]),setTimeout(()=>{i(Y=>Y.map(Se=>Se.id===ut.id?{...Se,status:"success"}:Se)),ht==="push"&&Lt!==void 0?(b(Y=>[...Y,Lt].slice(-8)),f(Y=>[...Y.slice(-9),`T${He}: PUSH(${Lt}) exitoso tras reintento`])):ht==="pop"&&b(Y=>{if(Y.length>0){const Se=Y[Y.length-1];return f(Pt=>[...Pt.slice(-9),`T${He}: POP() = ${Se} tras reintento`]),Y.slice(0,-1)}return Y})},h/2)},h/3)}},h);return()=>clearInterval(je)},[n,h]),c.useEffect(()=>{if(!w)return;const je=setInterval(()=>{D(ut=>ut+1);const He=Math.floor(Math.random()*4),ht=j[He].partition,Lt=Math.floor(Math.random()*100);_(ut=>ut.map((at,Y)=>Y===He?{...at,status:"working"}:at)),k(ut=>[...ut.slice(-9),`T${He+1}: Escribiendo ${Lt} en Particin ${ht}`]),setTimeout(()=>{ie(ut=>{const at=new Map(ut),Y=at.get(ht)||[];return at.set(ht,[...Y,Lt].slice(-5)),at}),_(ut=>ut.map((at,Y)=>Y===He?{...at,status:"success"}:at)),k(ut=>[...ut.slice(-9),`T${He+1}: Escritura exitosa (sin contencin)`]),setTimeout(()=>{_(ut=>ut.map((at,Y)=>Y===He?{...at,status:"idle"}:at))},L/3)},L/2)},L);return()=>clearInterval(je)},[w,L,j]),c.useEffect(()=>{if(!oe)return;const je=setInterval(()=>{Ee(Lt=>Lt+1);const He=Math.floor(Math.random()*4),ht=te[He].partition;ue(Lt=>{if(Lt[ht])return T(at=>[...at.slice(-9),`T${He+1}: Esperando lock del Stripe ${ht}...`]),G(at=>at.map((Y,Se)=>Se===He?{...Y,status:"waiting"}:Y)),Lt;const ut=[...Lt];return ut[ht]=!0,T(at=>[...at.slice(-9),`T${He+1}: Lock adquirido en Stripe ${ht}`]),G(at=>at.map((Y,Se)=>Se===He?{...Y,status:"working"}:Y)),setTimeout(()=>{ue(at=>{const Y=[...at];return Y[ht]=!1,Y}),T(at=>[...at.slice(-9),`T${He+1}: Lock liberado del Stripe ${ht}`]),G(at=>at.map((Y,Se)=>Se===He?{...Y,status:"success"}:Y)),setTimeout(()=>{G(at=>at.map((Y,Se)=>Se===He?{...Y,status:"idle"}:Y))},P/3)},P/2),ut})},P);return()=>clearInterval(je)},[oe,P,te]),c.useEffect(()=>{if(!K)return;const je=setInterval(()=>{q(ht=>ht+1);const He=Math.floor(Math.random()*4);A(ht=>ht.map((Lt,ut)=>{if(ut===He){const at=(Lt.localValue||0)+1;return Re(Y=>[...Y.slice(-9),`T${ut+1}: Incremento local ${Lt.localValue}  ${at} (sin contencin)`]),{...Lt,status:"working",localValue:at}}return Lt})),setTimeout(()=>{A(ht=>ht.map((Lt,ut)=>ut===He?{...Lt,status:"success"}:Lt)),setTimeout(()=>{A(ht=>ht.map((Lt,ut)=>ut===He?{...Lt,status:"idle"}:Lt))},$/3)},$/2)},$);return()=>clearInterval(je)},[K,$]),c.useEffect(()=>{if(K&&O%3===0){const je=re.reduce((He,ht)=>He+(ht.localValue||0),0);z(je)}},[O,K,re]),c.useEffect(()=>{if(!jt)return;const je=setInterval(()=>{De(ut=>ut+1);const He=Math.floor(Math.random()*4),ht=Math.floor(Math.random()*10)+1,Lt=We;rt(ut=>ut.map((at,Y)=>Y===He?{...at,status:"working",version:Lt}:at)),kt(ut=>[...ut.slice(-9),`T${He+1}: Ley valor=${_e} (v${Lt}), calculando +${ht}...`]),setTimeout(()=>{const ut=We;Lt===ut?(Xe(at=>at+ht),xt(at=>at+1),rt(at=>at.map((Y,Se)=>Se===He?{...Y,status:"success"}:Y)),kt(at=>[...at.slice(-9),`T${He+1}: Commit exitoso! ${_e}  ${_e+ht} (v${ut+1})`])):(It(at=>at+1),rt(at=>at.map((Y,Se)=>Se===He?{...Y,status:"retry"}:Y)),kt(at=>[...at.slice(-9),`T${He+1}:  CONFLICTO! Versin cambi (v${Lt}v${ut}), reintentando...`])),setTimeout(()=>{rt(at=>at.map((Y,Se)=>Se===He?{...Y,status:"idle"}:Y))},Ge/3)},Ge/2)},Ge);return()=>clearInterval(je)},[jt,Ge,We,_e]),c.useEffect(()=>{if(!Ve)return;const je=setInterval(()=>{_t(Lt=>Lt+1);const He=Math.floor(Math.random()*4),ht=Math.floor(Math.random()*100);ne(Lt=>Lt.map((ut,at)=>{if(at===He){const Y=(ut.batchSize||0)+1;return{...ut,status:"working",batchSize:Y}}return ut})),ft(Lt=>[...Lt,ht]),Fe(Lt=>[...Lt.slice(-9),`T${He+1}: Agreg ${ht} al buffer local (tamao: ${(R[He].batchSize||0)+1})`]),(R[He].batchSize||0)>=2?setTimeout(()=>{ft(Lt=>{const ut=Lt.slice(-5);return Fe(at=>[...at.slice(-9),` Procesando LOTE de ${ut.length} operaciones: [${ut.join(", ")}]`]),ye(at=>at+ut.length),[]}),ne(Lt=>Lt.map(ut=>({...ut,batchSize:0,status:"success"}))),setTimeout(()=>{ne(Lt=>Lt.map(ut=>({...ut,status:"idle"})))},St/3)},St/2):setTimeout(()=>{ne(Lt=>Lt.map((ut,at)=>at===He?{...ut,status:"idle"}:ut))},St/3)},St);return()=>clearInterval(je)},[Ve,St,R]),c.useEffect(()=>{if(!Ke)return;const je=setInterval(()=>{Zt(ut=>ut+1);const He=Math.floor(Math.random()*4),ht=U[He].partition;(Math.random()<.7?"read":"write")==="read"?(Je(ut=>{const at=[...ut];return at[ht]="read",at}),Dt(ut=>ut.map((at,Y)=>Y===He?{...at,status:"working"}:at)),X(ut=>[...ut.slice(-9),`T${He+1}: Leyendo Nodo ${ht} (lectura concurrente permitida)`]),setTimeout(()=>{Dt(ut=>ut.map((at,Y)=>Y===He?{...at,status:"success"}:at)),setTimeout(()=>{Dt(ut=>ut.map((at,Y)=>Y===He?{...at,status:"idle"}:at))},pt/3)},pt/2)):Be(ut=>{if(ut[ht])return X(Y=>[...Y.slice(-9),`T${He+1}: Esperando lock exclusivo del Nodo ${ht}...`]),Dt(Y=>Y.map((Se,Pt)=>Pt===He?{...Se,status:"waiting"}:Se)),ut;const at=[...ut];return at[ht]=!0,Je(Y=>{const Se=[...Y];return Se[ht]="write",Se}),X(Y=>[...Y.slice(-9),`T${He+1}: Lock exclusivo adquirido en Nodo ${ht} (escritura)`]),Dt(Y=>Y.map((Se,Pt)=>Pt===He?{...Se,status:"working"}:Se)),setTimeout(()=>{Be(Y=>{const Se=[...Y];return Se[ht]=!1,Se}),X(Y=>[...Y.slice(-9),`T${He+1}: Lock liberado del Nodo ${ht}`]),Dt(Y=>Y.map((Se,Pt)=>Pt===He?{...Se,status:"success"}:Se)),setTimeout(()=>{Dt(Y=>Y.map((Se,Pt)=>Pt===He?{...Se,status:"idle"}:Se))},pt/3)},pt/2),at})},pt);return()=>clearInterval(je)},[Ke,pt,U]);const st=()=>{l(!1),m(0),i([]),b([]),f(["Simulacin Lock-free reiniciada."])},Rt=()=>{C(!1),D(0),_(je=>je.map(He=>({...He,status:"idle"}))),ie(new Map([[0,[]],[1,[]],[2,[]],[3,[]]])),k(["Simulacin de Particionamiento reiniciada."])},Qe=()=>{Ce(!1),Ee(0),G(je=>je.map(He=>({...He,status:"idle"}))),ue([!1,!1,!1,!1]),T(["Simulacin Lock Striping reiniciada."])},$e=()=>{M(!1),q(0),A([{id:1,status:"idle",localValue:0},{id:2,status:"idle",localValue:0},{id:3,status:"idle",localValue:0},{id:4,status:"idle",localValue:0}]),z(0),Re(["Simulacin Thread-local reiniciada."])},mt=()=>{fe(!1),De(0),rt(je=>je.map(He=>({...He,status:"idle",version:0}))),Xe(100),xt(0),It(0),kt(["Simulacin OCC reiniciada."])},Jt=()=>{de(!1),_t(0),ne([{id:1,status:"idle",batchSize:0},{id:2,status:"idle",batchSize:0},{id:3,status:"idle",batchSize:0},{id:4,status:"idle",batchSize:0}]),ft([]),ye(0),Fe(["Simulacin Batching reiniciada."])},pa=()=>{ge(!1),Zt(0),Dt(je=>je.map(He=>({...He,status:"idle"}))),Be([!1,!1,!1,!1]),Je(["read","read","read","read"]),X(["Simulacin Fine-grained Locks reiniciada."])};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(hp,{className:"size-12 text-orange-500"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:" Contencin de Recursos"})]}),e.jsxs("p",{className:"text-lg text-gray-300 leading-relaxed",children:["La ",e.jsx("span",{className:"font-bold text-orange-400",children:"Contencin de Recursos"})," ocurre cuando mltiples threads o procesos compiten por el mismo recurso compartido, causando degradacin del rendimiento debido a la espera y sincronizacin excesiva. Este problema es crtico en sistemas de alta concurrencia."]}),e.jsx("div",{className:"mt-4 p-4 bg-orange-900/30 border border-orange-700/50 rounded-lg",children:e.jsxs("p",{className:"text-orange-200",children:[e.jsx("span",{className:"font-bold",children:"Impacto:"})," La contencin puede causar hasta un 90% de degradacin del rendimiento en sistemas con muchos cores, convirtiendo locks en cuellos de botella crticos. Las soluciones se enfocan en reducir o eliminar la necesidad de sincronizacin tradicional."]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones (Pseudocdigo)"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"lockfree",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-7 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"lockfree",children:" Lock-free"}),e.jsx(ce,{value:"partitioning",children:" Particionamiento"}),e.jsx(ce,{value:"striping",children:" Striping"}),e.jsx(ce,{value:"threadlocal",children:" Thread-local"}),e.jsx(ce,{value:"optimistic",children:" Optimistic"}),e.jsx(ce,{value:"batching",children:" Batching"}),e.jsx(ce,{value:"granularity",children:" Granularidad"})]}),e.jsx(me,{value:"lockfree",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:" Lock-free Data Structures"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Estructuras de datos que garantizan progreso del sistema sin usar locks, mediante operaciones atmicas como CAS (Compare-And-Swap)."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Lock-free Stack (Treiber Stack)
estructura Node<T> {
  valor: T
  siguiente: AtomicReference<Node<T>>
}

estructura LockFreeStack<T> {
  cabeza: AtomicReference<Node<T>> = null
}

funcin push(stack: LockFreeStack<T>, valor: T) {
  nuevoNodo = new Node(valor)
  
  loop:
    cabezaActual = cargar_atomico(stack.cabeza)
    nuevoNodo.siguiente = cabezaActual
    
    // Intenta actualizar cabeza atmicamente
    si compare_and_swap(stack.cabeza, cabezaActual, nuevoNodo):
      retornar  // xito
    // Si falla, otro thread modific la cabeza, reintentar
}

funcin pop(stack: LockFreeStack<T>): T | null {
  loop:
    cabezaActual = cargar_atomico(stack.cabeza)
    
    si cabezaActual == null:
      retornar null
    
    siguiente = cabezaActual.siguiente
    
    // Intenta mover cabeza al siguiente nodo
    si compare_and_swap(stack.cabeza, cabezaActual, siguiente):
      retornar cabezaActual.valor
    // Reintentar si fall
}

// Lock-free Queue (Michael-Scott Queue)
estructura LockFreeQueue<T> {
  cabeza: AtomicReference<Node<T>>
  cola: AtomicReference<Node<T>>
}

funcin inicializarQueue() -> LockFreeQueue<T> {
  nodoSentinel = new Node(null)
  queue = new LockFreeQueue()
  queue.cabeza = nodoSentinel
  queue.cola = nodoSentinel
  retornar queue
}

funcin enqueue(queue: LockFreeQueue<T>, valor: T) {
  nuevoNodo = new Node(valor)
  nuevoNodo.siguiente = null
  
  loop:
    colaActual = cargar_atomico(queue.cola)
    siguienteActual = cargar_atomico(colaActual.siguiente)
    
    si colaActual == cargar_atomico(queue.cola):
      si siguienteActual == null:
        // Intenta enlazar nuevo nodo
        si compare_and_swap(colaActual.siguiente, null, nuevoNodo):
          // Intenta mover cola
          compare_and_swap(queue.cola, colaActual, nuevoNodo)
          retornar
      sino:
        // Ayudar a otro thread
        compare_and_swap(queue.cola, colaActual, siguienteActual)
}

funcin dequeue(queue: LockFreeQueue<T>): T | null {
  loop:
    cabezaActual = cargar_atomico(queue.cabeza)
    colaActual = cargar_atomico(queue.cola)
    siguienteActual = cargar_atomico(cabezaActual.siguiente)
    
    si cabezaActual == cargar_atomico(queue.cabeza):
      si cabezaActual == colaActual:
        si siguienteActual == null:
          retornar null  // Queue vaca
        // Ayudar a mover cola
        compare_and_swap(queue.cola, colaActual, siguienteActual)
      sino:
        valor = siguienteActual.valor
        si compare_and_swap(queue.cabeza, cabezaActual, siguienteActual):
          retornar valor
}

// Lock-free Counter
estructura LockFreeCounter {
  valor: AtomicInteger = 0
}

funcin incrementar(counter: LockFreeCounter, delta: entero = 1): entero {
  loop:
    valorActual = cargar_atomico(counter.valor)
    nuevoValor = valorActual + delta
    
    si compare_and_swap(counter.valor, valorActual, nuevoValor):
      retornar nuevoValor
}

// Ventajas: Sin bloqueos, escalabilidad, tolerancia a fallos
// Desventajas: Complejidad, ABA problem, overhead de CAS`})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Sin deadlocks ni bloqueos, excelente escalabilidad.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Complejidad de implementacin, problema ABA."]})})]})}),e.jsx(me,{value:"partitioning",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:" Particionamiento de Recursos"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Divide un recurso compartido en mltiples particiones independientes, reduciendo la contencin al permitir acceso concurrente a diferentes particiones."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Hash Table Particionada
estructura Particion<K, V> {
  datos: Mapa<K, V>
  lock: Lock
}

estructura HashTableParticionada<K, V> {
  particiones: Arreglo<Particion<K, V>>
  numParticiones: entero
}

funcin crear(numParticiones: entero) -> HashTableParticionada<K, V> {
  tabla = new HashTableParticionada()
  tabla.numParticiones = numParticiones
  tabla.particiones = new Arreglo<Particion>(numParticiones)
  
  para i en 0..numParticiones-1:
    tabla.particiones[i] = new Particion()
    tabla.particiones[i].datos = new Mapa()
    tabla.particiones[i].lock = new Lock()
  
  retornar tabla
}

funcin obtenerParticion(tabla: HashTableParticionada<K, V>, clave: K) -> entero {
  hashCode = hash(clave)
  retornar hashCode % tabla.numParticiones
}

funcin insertar(tabla: HashTableParticionada<K, V>, clave: K, valor: V) {
  indiceParticion = obtenerParticion(tabla, clave)
  particion = tabla.particiones[indiceParticion]
  
  particion.lock.adquirir()
  particion.datos[clave] = valor
  particion.lock.liberar()
}

funcin obtener(tabla: HashTableParticionada<K, V>, clave: K) -> V | null {
  indiceParticion = obtenerParticion(tabla, clave)
  particion = tabla.particiones[indiceParticion]
  
  particion.lock.adquirir()
  valor = particion.datos.obtener(clave)
  particion.lock.liberar()
  
  retornar valor
}

funcin eliminar(tabla: HashTableParticionada<K, V>, clave: K) {
  indiceParticion = obtenerParticion(tabla, clave)
  particion = tabla.particiones[indiceParticion]
  
  particion.lock.adquirir()
  particion.datos.eliminar(clave)
  particion.lock.liberar()
}

// Contador Particionado (para reducir contencin)
estructura ContadorParticionado {
  contadores: Arreglo<AtomicInteger>
  numParticiones: entero
}

funcin incrementar(contador: ContadorParticionado) {
  threadId = obtenerThreadId()
  particion = threadId % contador.numParticiones
  
  incrementar_atomico(contador.contadores[particion])
}

funcin obtenerTotal(contador: ContadorParticionado) -> entero {
  suma = 0
  para i en 0..contador.numParticiones-1:
    suma += cargar_atomico(contador.contadores[i])
  retornar suma
}

// Ejemplo de uso con base de datos
estructura BaseDatosParticionada {
  shards: Arreglo<Shard>
  numShards: entero
}

funcin routearConsulta(db: BaseDatosParticionada, userId: entero) -> Shard {
  shardId = userId % db.numShards
  retornar db.shards[shardId]
}

// Beneficio: Reduccin de contencin proporcional al nmero de particiones
// Costo: Operaciones globales ms complejas (ej: contar total)`})}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/30 border border-green-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Escalabilidad lineal, fcil de implementar.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Operaciones globales costosas, posible desbalance."]})})]})}),e.jsx(me,{value:"striping",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:" Lock Striping"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Tcnica que usa mltiples locks para proteger diferentes secciones de una estructura de datos, similar al particionamiento pero con locks explcitos por segmento."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// ConcurrentHashMap estilo Java
estructura Segment<K, V> {
  tabla: Arreglo<Entry<K, V>>
  lock: ReentrantLock
  tamao: AtomicInteger
}

estructura Entry<K, V> {
  clave: K
  valor: V
  hash: entero
  siguiente: Entry<K, V> | null
}

estructura StripedHashMap<K, V> {
  segmentos: Arreglo<Segment<K, V>>
  numSegmentos: entero
  mascara: entero  // numSegmentos - 1
}

funcin crear(concurrencyLevel: entero) -> StripedHashMap<K, V> {
  // Redondear a potencia de 2
  numSegmentos = siguientePotenciaDe2(concurrencyLevel)
  
  mapa = new StripedHashMap()
  mapa.numSegmentos = numSegmentos
  mapa.mascara = numSegmentos - 1
  mapa.segmentos = new Arreglo<Segment>(numSegmentos)
  
  para i en 0..numSegmentos-1:
    mapa.segmentos[i] = new Segment()
    mapa.segmentos[i].lock = new ReentrantLock()
    mapa.segmentos[i].tabla = new Arreglo<Entry>(16)
    mapa.segmentos[i].tamao = new AtomicInteger(0)
  
  retornar mapa
}

funcin obtenerSegmento(mapa: StripedHashMap<K, V>, hash: entero) -> Segment<K, V> {
  // Usar bits altos del hash para mejor distribucin
  indice = (hash >>> 16) & mapa.mascara
  retornar mapa.segmentos[indice]
}

funcin put(mapa: StripedHashMap<K, V>, clave: K, valor: V): V | null {
  hash = hash(clave)
  segmento = obtenerSegmento(mapa, hash)
  
  segmento.lock.adquirir()
  intentar:
    // Buscar en la cadena
    indiceTabla = hash & (segmento.tabla.longitud - 1)
    entrada = segmento.tabla[indiceTabla]
    
    mientras entrada != null:
      si entrada.hash == hash Y entrada.clave == clave:
        valorViejo = entrada.valor
        entrada.valor = valor
        retornar valorViejo
      entrada = entrada.siguiente
    
    // Insertar nueva entrada
    nuevaEntrada = new Entry(clave, valor, hash)
    nuevaEntrada.siguiente = segmento.tabla[indiceTabla]
    segmento.tabla[indiceTabla] = nuevaEntrada
    
    incrementar_atomico(segmento.tamao)
    
    retornar null
  finalmente:
    segmento.lock.liberar()
}

funcin get(mapa: StripedHashMap<K, V>, clave: K): V | null {
  hash = hash(clave)
  segmento = obtenerSegmento(mapa, hash)
  
  // Lectura optimista sin lock
  indiceTabla = hash & (segmento.tabla.longitud - 1)
  entrada = segmento.tabla[indiceTabla]
  
  mientras entrada != null:
    si entrada.hash == hash Y entrada.clave == clave:
      retornar entrada.valor
    entrada = entrada.siguiente
  
  retornar null
}

funcin size(mapa: StripedHashMap<K, V>) -> entero {
  tamao = 0
  
  // Adquirir todos los locks para garantizar consistencia
  para segmento en mapa.segmentos:
    segmento.lock.adquirir()
  
  intentar:
    para segmento en mapa.segmentos:
      tamao += cargar_atomico(segmento.tamao)
    retornar tamao
  finalmente:
    para segmento en mapa.segmentos:
      segmento.lock.liberar()
}

// Lock Striping en Array
estructura StripedArray<T> {
  datos: Arreglo<T>
  locks: Arreglo<Lock>
  numLocks: entero
}

funcin obtenerLock(array: StripedArray<T>, indice: entero) -> Lock {
  lockIndice = indice % array.numLocks
  retornar array.locks[lockIndice]
}

funcin set(array: StripedArray<T>, indice: entero, valor: T) {
  lock = obtenerLock(array, indice)
  
  lock.adquirir()
  array.datos[indice] = valor
  lock.liberar()
}

// Ventaja: Concurrencia proporcional al nmero de stripes
// Nota: Java's ConcurrentHashMap usa esta tcnica (16 segmentos por defecto)`})}),e.jsx("div",{className:"mt-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Balance entre simplicidad y concurrencia.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Operaciones que cruzan segmentos son costosas."]})})]})}),e.jsx(me,{value:"threadlocal",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:" Thread-local Storage"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Cada thread mantiene su propia copia de los datos, eliminando completamente la contencin para lecturas y escrituras locales."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Thread-local Storage Bsico
estructura ThreadLocalStorage<T> {
  valores: Mapa<ThreadId, T>
  lock: Lock
  valorInicial: funcin() -> T
}

funcin obtener(tls: ThreadLocalStorage<T>) -> T {
  threadId = obtenerThreadId()
  
  tls.lock.adquirir()
  si no tls.valores.contiene(threadId):
    tls.valores[threadId] = tls.valorInicial()
  valor = tls.valores[threadId]
  tls.lock.liberar()
  
  retornar valor
}

funcin establecer(tls: ThreadLocalStorage<T>, valor: T) {
  threadId = obtenerThreadId()
  
  tls.lock.adquirir()
  tls.valores[threadId] = valor
  tls.lock.liberar()
}

// Contador con Thread-local (sin contencin)
estructura ThreadLocalCounter {
  contadores: ThreadLocalStorage<AtomicInteger>
}

funcin incrementar(counter: ThreadLocalCounter) {
  localCounter = counter.contadores.obtener()
  incrementar_atomico(localCounter)
}

funcin obtenerTotal(counter: ThreadLocalCounter) -> entero {
  suma = 0
  para valor en counter.contadores.valores.valores():
    suma += cargar_atomico(valor)
  retornar suma
}

// Pool de Objetos Thread-local
estructura ThreadLocalPool<T> {
  pools: ThreadLocalStorage<Cola<T>>
  fabricaObjetos: funcin() -> T
}

funcin obtenerObjeto(pool: ThreadLocalPool<T>) -> T {
  colaLocal = pool.pools.obtener()
  
  si no colaLocal.vacia():
    retornar colaLocal.desencolar()
  sino:
    retornar pool.fabricaObjetos()
}

funcin devolverObjeto(pool: ThreadLocalPool<T>, objeto: T) {
  colaLocal = pool.pools.obtener()
  colaLocal.encolar(objeto)
}

// Ejemplo: Generador de IDs Thread-local
estructura ThreadLocalIdGenerator {
  contadores: ThreadLocalStorage<entero>
  offsetPorThread: entero
}

funcin crear(numThreads: entero) -> ThreadLocalIdGenerator {
  gen = new ThreadLocalIdGenerator()
  gen.offsetPorThread = 1000000  // Espacio por thread
  gen.contadores = new ThreadLocalStorage(() => 0)
  retornar gen
}

funcin siguienteId(gen: ThreadLocalIdGenerator) -> entero {
  threadId = obtenerThreadId()
  contador = gen.contadores.obtener()
  nuevoContador = contador + 1
  gen.contadores.establecer(nuevoContador)
  
  retornar (threadId * gen.offsetPorThread) + nuevoContador
}

// Agregacin Thread-local (reduce escrituras globales)
estructura ThreadLocalAggregator<T> {
  valoresLocales: ThreadLocalStorage<T>
  funcionCombinar: funcin(T, T) -> T
  valorNeutro: T
}

funcin agregar(agg: ThreadLocalAggregator<T>, valor: T) {
  localVal = agg.valoresLocales.obtener()
  nuevoVal = agg.funcionCombinar(localVal, valor)
  agg.valoresLocales.establecer(nuevoVal)
}

funcin obtenerResultado(agg: ThreadLocalAggregator<T>) -> T {
  resultado = agg.valorNeutro
  
  para valorLocal en agg.valoresLocales.valores.valores():
    resultado = agg.funcionCombinar(resultado, valorLocal)
  
  retornar resultado
}

// Uso: Buffer de escritura Thread-local
estructura ThreadLocalWriteBuffer<T> {
  buffers: ThreadLocalStorage<Lista<T>>
  tamao_lote: entero
  procesarLote: funcin(Lista<T>)
}

funcin escribir(buffer: ThreadLocalWriteBuffer<T>, item: T) {
  bufferLocal = buffer.buffers.obtener()
  bufferLocal.agregar(item)
  
  si bufferLocal.tamao() >= buffer.tamao_lote:
    buffer.procesarLote(bufferLocal)
    bufferLocal.limpiar()
}

// Ventajas: Cero contencin, excelente rendimiento
// Desventajas: Uso de memoria (copia por thread), agregacin costosa`})}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-900/30 border border-yellow-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Cero contencin, rendimiento mximo.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Mayor uso de memoria, agregacin compleja."]})})]})}),e.jsx(me,{value:"optimistic",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-400 mb-4",children:" Optimistic Concurrency Control"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Asume que los conflictos son raros y permite operaciones concurrentes sin locks, validando al final y reintentando si hubo conflicto."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Control de Concurrencia Optimista con Versionado
estructura VersionedData<T> {
  datos: T
  version: AtomicInteger
}

funcin leerOptimista<T>(datos: VersionedData<T>) -> (T, entero) {
  loop:
    version = cargar_atomico(datos.version)
    valor = datos.datos  // Lectura sin lock
    versionDespues = cargar_atomico(datos.version)
    
    // Verificar que no hubo escritura durante la lectura
    si version == versionDespues Y (version % 2) == 0:
      retornar (valor, version)
    // Reintentar si hubo escritura
}

funcin escribirOptimista<T>(datos: VersionedData<T>, nuevoValor: T) {
  loop:
    versionActual = cargar_atomico(datos.version)
    
    // Marcar como "en escritura" (versin impar)
    si compare_and_swap(datos.version, versionActual, versionActual + 1):
      datos.datos = nuevoValor
      
      // Completar escritura (versin par)
      almacenar_atomico(datos.version, versionActual + 2)
      retornar
    // Reintentar si otro thread tom el lock
}

// Transacciones Optimistas (estilo STM - Software Transactional Memory)
estructura Transaccion {
  lecturas: Mapa<Variable, entero>  // Variable -> versin leda
  escrituras: Mapa<Variable, Valor>
  estado: ACTIVA | COMMITED | ABORTADA
}

funcin iniciarTransaccion() -> Transaccion {
  tx = new Transaccion()
  tx.lecturas = new Mapa()
  tx.escrituras = new Mapa()
  tx.estado = ACTIVA
  retornar tx
}

funcin leer<T>(tx: Transaccion, variable: VersionedData<T>) -> T {
  // Verificar si ya escribimos esta variable
  si tx.escrituras.contiene(variable):
    retornar tx.escrituras[variable]
  
  // Leer valor y registrar versin
  (valor, version) = leerOptimista(variable)
  tx.lecturas[variable] = version
  
  retornar valor
}

funcin escribir<T>(tx: Transaccion, variable: VersionedData<T>, valor: T) {
  tx.escrituras[variable] = valor
}

funcin commit(tx: Transaccion) -> booleano {
  // Fase 1: Validacin
  para (variable, versionLeida) en tx.lecturas:
    versionActual = cargar_atomico(variable.version)
    
    si versionActual != versionLeida:
      tx.estado = ABORTADA
      retornar falso  // Conflicto detectado
  
  // Fase 2: Aplicar escrituras
  para (variable, valor) en tx.escrituras:
    escribirOptimista(variable, valor)
  
  tx.estado = COMMITED
  retornar verdadero
}

funcin ejecutarConReintentos<T>(operacion: funcin() -> T, maxReintentos: entero) -> T {
  para intento en 1..maxReintentos:
    tx = iniciarTransaccion()
    
    resultado = operacion()  // Ejecutar en contexto de tx
    
    si commit(tx):
      retornar resultado
    
    // Backoff exponencial antes de reintentar
    esperar(random(0, 2^intento))
  
  lanzar_error("Demasiados reintentos")
}

// OCC para Base de Datos
estructura RegistroDB {
  datos: Mapa<Clave, Valor>
  version: entero
  bloqueado: booleano
}

funcin leerRegistro(db: BaseDatos, clave: Clave) -> (Valor, entero) {
  registro = db.registros[clave]
  retornar (registro.datos, registro.version)
}

funcin actualizarRegistro(db: BaseDatos, clave: Clave, 
                           nuevoValor: Valor, versionEsperada: entero) -> booleano {
  registro = db.registros[clave]
  
  // Intentar adquirir lock
  si compare_and_swap(registro.bloqueado, falso, verdadero):
    si registro.version == versionEsperada:
      registro.datos = nuevoValor
      registro.version++
      registro.bloqueado = falso
      retornar verdadero
    sino:
      registro.bloqueado = falso
      retornar falso  // Versin cambiada, abortar
  
  retornar falso  // No se pudo adquirir lock
}

// Ejemplo: Transferencia bancaria optimista
funcin transferir(cuentaOrigen: Cuenta, cuentaDestino: Cuenta, monto: decimal) {
  loop:
    // Leer valores actuales
    (saldoOrigen, versionOrigen) = leerOptimista(cuentaOrigen.saldo)
    (saldoDestino, versionDestino) = leerOptimista(cuentaDestino.saldo)
    
    si saldoOrigen < monto:
      lanzar_error("Fondos insuficientes")
    
    // Calcular nuevos saldos
    nuevoSaldoOrigen = saldoOrigen - monto
    nuevoSaldoDestino = saldoDestino + monto
    
    // Intentar actualizar (validacin implcita)
    si actualizarRegistro(cuentaOrigen, nuevoSaldoOrigen, versionOrigen):
      si actualizarRegistro(cuentaDestino, nuevoSaldoDestino, versionDestino):
        retornar  // xito
      sino:
        // Revertir primera actualizacin
        actualizarRegistro(cuentaOrigen, saldoOrigen, versionOrigen + 1)
    // Reintentar transaccin completa
}

// Ventaja: Excelente para baja contencin
// Desventaja: Reintentos costosos en alta contencin`})}),e.jsx("div",{className:"mt-4 p-3 bg-cyan-900/30 border border-cyan-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Sin locks en lectura, ideal para baja contencin.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Reintentos frecuentes en alta contencin."]})})]})}),e.jsx(me,{value:"batching",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:" Batching"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Agrupa mltiples operaciones individuales en lotes, reduciendo la frecuencia de sincronizacin y amortizando el costo de los locks."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Batching de Operaciones
estructura OperationBatcher<T> {
  cola: ColaThreadSafe<Operacion<T>>
  tamaoLote: entero
  procesarLote: funcin(Lista<Operacion<T>>)
  threadProcesador: Thread
}

estructura Operacion<T> {
  tipo: INSERTAR | ACTUALIZAR | ELIMINAR
  datos: T
  callback: funcin(Resultado)
}

funcin crear(tamaoLote: entero) -> OperationBatcher<T> {
  batcher = new OperationBatcher()
  batcher.cola = new ColaThreadSafe()
  batcher.tamaoLote = tamaoLote
  
  // Iniciar thread procesador
  batcher.threadProcesador = iniciarThread(() => {
    procesarContinuamente(batcher)
  })
  
  retornar batcher
}

funcin procesarContinuamente(batcher: OperationBatcher<T>) {
  mientras verdadero:
    lote = new Lista<Operacion<T>>()
    
    // Esperar primera operacin (bloqueante)
    primeraOp = batcher.cola.desencolar()
    lote.agregar(primeraOp)
    
    // Recolectar operaciones adicionales (no bloqueante)
    mientras lote.tamao() < batcher.tamaoLote:
      op = batcher.cola.intentarDesencolar(timeout: 10ms)
      si op == null:
        break
      lote.agregar(op)
    
    // Procesar lote completo
    batcher.procesarLote(lote)
}

funcin agregar(batcher: OperationBatcher<T>, op: Operacion<T>) {
  batcher.cola.encolar(op)
}

// Batching de Escrituras a Base de Datos
estructura DatabaseBatchWriter<T> {
  buffer: Lista<T>
  lock: Lock
  tamaoLote: entero
  timeoutMs: entero
  ultimoFlush: Timestamp
}

funcin insertar(writer: DatabaseBatchWriter<T>, item: T) {
  writer.lock.adquirir()
  
  writer.buffer.agregar(item)
  ahoraMs = obtenerTiempoMs()
  
  debeFlush = (writer.buffer.tamao() >= writer.tamaoLote) O
              (ahoraMs - writer.ultimoFlush >= writer.timeoutMs)
  
  si debeFlush:
    flush(writer)
  
  writer.lock.liberar()
}

funcin flush(writer: DatabaseBatchWriter<T>) {
  si writer.buffer.vacio():
    retornar
  
  // Hacer copia del buffer
  itemsParaProcesar = copiar(writer.buffer)
  writer.buffer.limpiar()
  writer.ultimoFlush = obtenerTiempoMs()
  
  // Procesar fuera del lock
  writer.lock.liberar()
  
  // Escritura en lote a la base de datos
  ejecutarBatchInsert(itemsParaProcesar)
  
  writer.lock.adquirir()
}

// Log Batching (combinar mltiples logs)
estructura LogBatcher {
  bufferLocal: ThreadLocalStorage<Lista<LogEntry>>
  bufferGlobal: ColaThreadSafe<LogEntry>
  tamaoLoteLocal: entero
  threadWriter: Thread
}

funcin log(batcher: LogBatcher, mensaje: string, nivel: LogLevel) {
  bufferLocal = batcher.bufferLocal.obtener()
  
  entrada = new LogEntry(mensaje, nivel, obtenerTimestamp())
  bufferLocal.agregar(entrada)
  
  si bufferLocal.tamao() >= batcher.tamaoLoteLocal:
    flushLocal(batcher, bufferLocal)
}

funcin flushLocal(batcher: LogBatcher, bufferLocal: Lista<LogEntry>) {
  para entrada en bufferLocal:
    batcher.bufferGlobal.encolar(entrada)
  
  bufferLocal.limpiar()
}

funcin procesadorGlobal(batcher: LogBatcher) {
  mientras verdadero:
    lote = new Lista<LogEntry>()
    
    // Recolectar hasta 1000 entradas o 100ms timeout
    timeout = 100  // ms
    inicioMs = obtenerTiempoMs()
    
    mientras lote.tamao() < 1000 Y 
          (obtenerTiempoMs() - inicioMs) < timeout:
      entrada = batcher.bufferGlobal.intentarDesencolar(10ms)
      si entrada != null:
        lote.agregar(entrada)
    
    si lote.tamao() > 0:
      escribirLogsADisco(lote)
}

// Batching con Coalescing (combinar operaciones duplicadas)
estructura CoalescingBatcher<K, V> {
  pendientes: MapaConcurrente<K, V>
  lock: Lock
  threadProcesador: Thread
}

funcin actualizar(batcher: CoalescingBatcher<K, V>, clave: K, valor: V) {
  // ltima escritura gana (coalescing)
  batcher.pendientes.put(clave, valor)
}

funcin procesarPeriodicamente(batcher: CoalescingBatcher<K, V>) {
  mientras verdadero:
    esperar(100ms)  // Intervalo de batching
    
    batcher.lock.adquirir()
    
    // Tomar snapshot de pendientes
    snapshot = copiar(batcher.pendientes)
    batcher.pendientes.limpiar()
    
    batcher.lock.liberar()
    
    // Procesar fuera del lock
    para (clave, valor) en snapshot:
      aplicarActualizacion(clave, valor)
}

// Request Batching para RPCs
estructura RPCBatcher<Req, Resp> {
  solicitudesPendientes: Lista<(Req, Promise<Resp>)>
  lock: Lock
  tamaoLote: entero
}

funcin enviarSolicitud(batcher: RPCBatcher<Req, Resp>, req: Req) -> Promise<Resp> {
  promesa = new Promise<Resp>()
  
  batcher.lock.adquirir()
  batcher.solicitudesPendientes.agregar((req, promesa))
  
  si batcher.solicitudesPendientes.tamao() >= batcher.tamaoLote:
    procesarLote(batcher)
  
  batcher.lock.liberar()
  
  retornar promesa
}

funcin procesarLote(batcher: RPCBatcher<Req, Resp>) {
  lote = copiar(batcher.solicitudesPendientes)
  batcher.solicitudesPendientes.limpiar()
  
  // Enviar todas las solicitudes en un solo RPC
  solicitudes = extraerSolicitudes(lote)
  respuestas = enviarBatchRPC(solicitudes)
  
  // Resolver promesas
  para i en 0..lote.tamao()-1:
    lote[i].promesa.resolver(respuestas[i])
}

// Ventaja: Amortiza costo de locks, reduce overhead de I/O
// Trade-off: Latencia vs throughput`})}),e.jsx("div",{className:"mt-4 p-3 bg-pink-900/30 border border-pink-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-pink-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Amortiza costos de sincronizacin, mayor throughput.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Mayor latencia, complejidad en manejo de errores."]})})]})}),e.jsx(me,{value:"granularity",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:" Reducir Granularidad de Locks"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Usar locks ms finos que protejan solo las secciones crticas mnimas necesarias, permitiendo mayor concurrencia."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Lock Grueso (protege todo el objeto)
estructura ListaConLockGrueso<T> {
  datos: Arreglo<T>
  tamao: entero
  lock: Lock  // Un solo lock para todo
}

funcin agregar(lista: ListaConLockGrueso<T>, item: T) {
  lista.lock.adquirir()
  
  lista.datos[lista.tamao] = item
  lista.tamao++
  
  lista.lock.liberar()
}

funcin obtener(lista: ListaConLockGrueso<T>, indice: entero) -> T {
  lista.lock.adquirir()
  
  item = lista.datos[indice]
  
  lista.lock.liberar()
  
  retornar item
}
// Problema: Lectores bloquean a otros lectores

// Mejor: Lock Fino (read-write lock)
estructura ListaConRWLock<T> {
  datos: Arreglo<T>
  tamao: AtomicInteger
  rwlock: ReadWriteLock
}

funcin agregar(lista: ListaConRWLock<T>, item: T) {
  lista.rwlock.writeLock().adquirir()
  
  indice = cargar_atomico(lista.tamao)
  lista.datos[indice] = item
  incrementar_atomico(lista.tamao)
  
  lista.rwlock.writeLock().liberar()
}

funcin obtener(lista: ListaConRWLock<T>, indice: entero) -> T {
  lista.rwlock.readLock().adquirir()
  
  item = lista.datos[indice]
  
  lista.rwlock.readLock().liberar()
  
  retornar item
}
// Ventaja: Mltiples lectores concurrentes

// ptimo: Lock por Nodo (linked list)
estructura Nodo<T> {
  valor: T
  siguiente: Nodo<T> | null
  lock: Lock
}

estructura ListaEnlazadaFinaGrain<T> {
  cabeza: Nodo<T>
  lockCabeza: Lock
}

funcin buscar(lista: ListaEnlazadaFinaGrain<T>, valorBuscado: T) -> Nodo<T> | null {
  lista.lockCabeza.adquirir()
  nodo = lista.cabeza
  
  si nodo != null:
    nodo.lock.adquirir()
  
  lista.lockCabeza.liberar()
  
  mientras nodo != null:
    si nodo.valor == valorBuscado:
      nodo.lock.liberar()
      retornar nodo
    
    // Hand-over-hand locking
    siguiente = nodo.siguiente
    si siguiente != null:
      siguiente.lock.adquirir()
    
    nodo.lock.liberar()
    nodo = siguiente
  
  retornar null
}

funcin insertar(lista: ListaEnlazadaFinaGrain<T>, valor: T) {
  nuevoNodo = new Nodo(valor)
  nuevoNodo.lock = new Lock()
  
  lista.lockCabeza.adquirir()
  
  pred = null
  curr = lista.cabeza
  
  si curr != null:
    curr.lock.adquirir()
  
  // Buscar posicin de insercin
  mientras curr != null Y curr.valor < valor:
    si pred != null:
      pred.lock.liberar()
    
    pred = curr
    curr = curr.siguiente
    
    si curr != null:
      curr.lock.adquirir()
  
  // Insertar
  nuevoNodo.siguiente = curr
  
  si pred == null:
    lista.cabeza = nuevoNodo
    lista.lockCabeza.liberar()
  sino:
    pred.siguiente = nuevoNodo
    pred.lock.liberar()
    lista.lockCabeza.liberar()
  
  si curr != null:
    curr.lock.liberar()
}

// Lock Splitting (separar locks para diferentes propiedades)
estructura CuentaBancaria {
  saldo: decimal
  lockSaldo: Lock
  
  transacciones: Lista<Transaccion>
  lockTransacciones: Lock
  
  metadatos: Mapa<string, string>
  lockMetadatos: Lock
}

funcin depositar(cuenta: CuentaBancaria, monto: decimal) {
  // Solo lock de saldo necesario
  cuenta.lockSaldo.adquirir()
  cuenta.saldo += monto
  cuenta.lockSaldo.liberar()
  
  // Lock separado para transacciones
  cuenta.lockTransacciones.adquirir()
  cuenta.transacciones.agregar(new Transaccion(DEPOSITO, monto))
  cuenta.lockTransacciones.liberar()
}

funcin obtenerMetadato(cuenta: CuentaBancaria, clave: string) -> string {
  // No interfiere con operaciones de saldo
  cuenta.lockMetadatos.adquirir()
  valor = cuenta.metadatos[clave]
  cuenta.lockMetadatos.liberar()
  
  retornar valor
}

// Lock Ordering (para evitar deadlock con locks finos)
funcin transferir(cuentaA: CuentaBancaria, cuentaB: CuentaBancaria, monto: decimal) {
  // Adquirir locks en orden consistente (por ID)
  primera = cuentaA.id < cuentaB.id ? cuentaA : cuentaB
  segunda = cuentaA.id < cuentaB.id ? cuentaB : cuentaA
  
  primera.lockSaldo.adquirir()
  segunda.lockSaldo.adquirir()
  
  si cuentaA.saldo >= monto:
    cuentaA.saldo -= monto
    cuentaB.saldo += monto
  
  segunda.lockSaldo.liberar()
  primera.lockSaldo.liberar()
}

// Ejemplo: HashMap con Lock por Bucket
estructura HashMapFinoGrain<K, V> {
  buckets: Arreglo<Lista<Entry<K,V>>>
  locks: Arreglo<Lock>
}

funcin put(mapa: HashMapFinoGrain<K, V>, clave: K, valor: V) {
  hash = hash(clave)
  bucketIndice = hash % mapa.buckets.longitud
  
  // Solo lock del bucket especfico
  mapa.locks[bucketIndice].adquirir()
  
  bucket = mapa.buckets[bucketIndice]
  para entry en bucket:
    si entry.clave == clave:
      entry.valor = valor
      mapa.locks[bucketIndice].liberar()
      retornar
  
  bucket.agregar(new Entry(clave, valor))
  
  mapa.locks[bucketIndice].liberar()
}

// Principios:
// 1. Lock solo lo mnimo necesario
// 2. Mantener locks el menor tiempo posible
// 3. Evitar operaciones costosas dentro de locks
// 4. Usar locks de lectura/escritura cuando sea apropiado
// 5. Considerar lock-free para casos crticos`})}),e.jsx("div",{className:"mt-4 p-3 bg-orange-900/30 border border-orange-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-orange-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Mayor concurrencia, mejor escalabilidad.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Mayor complejidad, riesgo de deadlocks."]})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"lockfree-demo",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-7 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"lockfree-demo",children:" Lock-free"}),e.jsx(ce,{value:"part-demo",children:" Particiones"}),e.jsx(ce,{value:"stripe-demo",children:" Striping"}),e.jsx(ce,{value:"tls-demo",children:" TLS"}),e.jsx(ce,{value:"opt-demo",children:" Optimistic"}),e.jsx(ce,{value:"batch-demo",children:" Batching"}),e.jsx(ce,{value:"gran-demo",children:" Fine-grained"})]}),e.jsx(me,{value:"lockfree-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:" Demostracin: Lock-free Data Structures"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Visualizacin de operaciones lock-free usando CAS (Compare-And-Swap). Observa cmo las operaciones se reintentan cuando fallan."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(!n),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${n?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:st,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-blue-400 font-mono",children:[d,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-blue-400",children:[h,"ms"]})]}),e.jsx(dt,{value:[h],onValueChange:je=>x(je[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-400 mb-3",children:"Stack Lock-free"}),e.jsx("div",{className:"space-y-2",children:g.length===0?e.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"Stack vaco"}):g.slice().reverse().map((je,He)=>e.jsx("div",{className:"bg-blue-600/20 border border-blue-500 rounded px-3 py-2 text-center font-mono text-blue-300",children:je},He))})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-400 mb-3",children:"Operaciones Recientes"}),e.jsx("div",{className:"space-y-2",children:s.map(je=>e.jsxs("div",{className:`rounded px-3 py-2 text-sm ${je.status==="success"?"bg-green-600/20 border border-green-500 text-green-300":je.status==="retry"?"bg-yellow-600/20 border border-yellow-500 text-yellow-300":"bg-gray-700 border border-gray-600 text-gray-300"}`,children:["T",je.threadId,": ",je.type.toUpperCase(),je.value!==void 0&&`(${je.value})`,je.status==="retry"&&` [Reintento ${je.attempts}]`]},je.id))})]})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:N,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:v.map((je,He)=>e.jsx("div",{children:je},He))})]})]})}),e.jsx(me,{value:"part-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:" Demostracin: Particionamiento de Recursos"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Visualizacin de datos particionados. Cada thread accede a su particin sin contencin."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(!w),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${w?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Rt,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-green-400 font-mono",children:[E,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-green-400",children:[L,"ms"]})]}),e.jsx(dt,{value:[L],onValueChange:je=>V(je[0]),min:100,max:1e3,step:50,className:"w-full"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[0,1,2,3].map(je=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-green-400 mb-2",children:["Particin ",je]}),e.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Thread ",je+1]}),e.jsx("div",{className:"space-y-1",children:(J.get(je)||[]).map((He,ht)=>e.jsx("div",{className:"bg-green-600/20 border border-green-500 rounded px-2 py-1 text-center font-mono text-green-300 text-sm",children:He},ht))})]},je))}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-400 mb-3",children:"Estado de Threads"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:j.map(je=>e.jsxs("div",{className:`rounded px-3 py-2 text-center text-sm font-semibold ${je.status==="working"?"bg-yellow-600/30 border border-yellow-500 text-yellow-300":je.status==="success"?"bg-green-600/30 border border-green-500 text-green-300":"bg-gray-700 border border-gray-600 text-gray-400"}`,children:["T",je.id,"  P",je.partition,e.jsx("div",{className:"text-xs mt-1",children:je.status})]},je.id))})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:be,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:I.map((je,He)=>e.jsx("div",{children:je},He))})]})]})}),e.jsx(me,{value:"stripe-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:" Demostracin: Lock Striping"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Visualizacin de locks por stripe. Threads pueden trabajar en diferentes stripes simultneamente."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ce(!oe),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${oe?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:oe?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Qe,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-purple-400 font-mono",children:[ke,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-purple-400",children:[P,"ms"]})]}),e.jsx(dt,{value:[P],onValueChange:je=>Q(je[0]),min:100,max:1e3,step:50})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[0,1,2,3].map(je=>e.jsxs("div",{className:`rounded-lg p-4 border-2 ${F[je]?"bg-red-600/20 border-red-500":"bg-gray-800/50 border-gray-600"}`,children:[e.jsxs("h4",{className:"text-sm font-semibold text-purple-400 mb-2",children:["Stripe ",je]}),e.jsx("div",{className:"text-center py-6",children:F[je]?e.jsx("div",{className:"text-red-400 font-bold text-2xl",children:" LOCKED"}):e.jsx("div",{className:"text-green-400 font-bold text-2xl",children:" FREE"})})]},je))}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-400 mb-3",children:"Estado de Threads"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:te.map(je=>e.jsxs("div",{className:`rounded px-3 py-2 text-center text-sm font-semibold ${je.status==="waiting"?"bg-yellow-600/30 border border-yellow-500 text-yellow-300 animate-pulse":je.status==="working"?"bg-purple-600/30 border border-purple-500 text-purple-300":je.status==="success"?"bg-green-600/30 border border-green-500 text-green-300":"bg-gray-700 border border-gray-600 text-gray-400"}`,children:["T",je.id,"  S",je.partition,e.jsx("div",{className:"text-xs mt-1",children:je.status})]},je.id))})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:W,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:qe.map((je,He)=>e.jsx("div",{children:je},He))})]})]})}),e.jsx(me,{value:"tls-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:" Demostracin: Thread-local Storage"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Cada thread mantiene su propio contador local. No hay contencin entre threads."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(!K),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${K?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:K?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:$e,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-yellow-400 font-mono",children:[O,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-yellow-400",children:[$,"ms"]})]}),e.jsx(dt,{value:[$],onValueChange:je=>ve(je[0]),min:100,max:1e3,step:50})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:re.map(je=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-yellow-400 mb-2",children:["Thread ",je.id]}),e.jsxs("div",{className:`text-center py-6 rounded ${je.status==="working"?"bg-yellow-600/20 animate-pulse":"bg-gray-700/50"}`,children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-300",children:je.localValue||0}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:je.status})]})]},je.id))}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border border-yellow-700 rounded-lg p-6 text-center mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-400 mb-2",children:"Valor Global (Suma de Locales)"}),e.jsx("div",{className:"text-5xl font-bold text-yellow-300",children:Z}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Sin contencin en incrementos individuales"})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:ae,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:Oe.map((je,He)=>e.jsx("div",{children:je},He))})]})]})}),e.jsx(me,{value:"opt-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:" Demostracin: Optimistic Concurrency Control"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Visualizacin de transacciones optimistas con versionado. Detecta conflictos al commit."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>fe(!jt),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${jt?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:jt?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:mt,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-cyan-400 font-mono",children:[Me,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-cyan-400",children:[Ge,"ms"]})]}),e.jsx(dt,{value:[Ge],onValueChange:je=>ze(je[0]),min:100,max:1e3,step:50})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-cyan-900/30 to-blue-900/30 border border-cyan-700 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-2",children:"Valor Compartido"}),e.jsx("div",{className:"text-4xl font-bold text-cyan-300",children:_e})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-2",children:"Versin Actual"}),e.jsxs("div",{className:"text-4xl font-bold text-cyan-300",children:["v",We]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-red-400 mb-2",children:"Conflictos"}),e.jsx("div",{className:"text-4xl font-bold text-red-300",children:Ot})]})]})}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-3",children:"Estado de Threads"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:se.map(je=>e.jsxs("div",{className:`rounded px-3 py-2 text-center text-sm font-semibold ${je.status==="retry"?"bg-red-600/30 border border-red-500 text-red-300 animate-pulse":je.status==="working"?"bg-cyan-600/30 border border-cyan-500 text-cyan-300":je.status==="success"?"bg-green-600/30 border border-green-500 text-green-300":"bg-gray-700 border border-gray-600 text-gray-400"}`,children:["T",je.id,e.jsx("div",{className:"text-xs mt-1",children:je.status}),je.version!==void 0&&e.jsxs("div",{className:"text-xs",children:["v",je.version]})]},je.id))})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:et,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:Ue.map((je,He)=>e.jsx("div",{children:je},He))})]})]})}),e.jsx(me,{value:"batch-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-pink-400 mb-4",children:" Demostracin: Batching"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Operaciones se agrupan en lotes antes de procesarse, reduciendo overhead de sincronizacin."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>de(!Ve),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${Ve?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:Ve?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:Jt,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-pink-400 font-mono",children:[we,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-pink-400",children:[St,"ms"]})]}),e.jsx(dt,{value:[St],onValueChange:je=>tt(je[0]),min:100,max:1e3,step:50})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-pink-900/30 border border-pink-700 rounded-lg p-4 text-center",children:[e.jsx("h4",{className:"text-sm font-semibold text-pink-400 mb-2",children:"Cola de Operaciones"}),e.jsx("div",{className:"text-4xl font-bold text-pink-300",children:Ye.length})]}),e.jsxs("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4 text-center",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-400 mb-2",children:"Operaciones Procesadas"}),e.jsx("div",{className:"text-4xl font-bold text-green-300",children:Ct})]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-pink-400 mb-3",children:"Cola de Lote Actual"}),e.jsx("div",{className:"flex gap-2 flex-wrap min-h-[60px]",children:Ye.length===0?e.jsx("div",{className:"text-gray-500 text-sm",children:"Cola vaca"}):Ye.map((je,He)=>e.jsx("div",{className:"bg-pink-600/20 border border-pink-500 rounded px-3 py-1 font-mono text-pink-300",children:je},He))})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-pink-400 mb-3",children:"Buffer Local por Thread"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:R.map(je=>e.jsxs("div",{className:`rounded px-3 py-2 text-center text-sm font-semibold ${je.status==="working"?"bg-pink-600/30 border border-pink-500 text-pink-300":je.status==="success"?"bg-green-600/30 border border-green-500 text-green-300":"bg-gray-700 border border-gray-600 text-gray-400"}`,children:["T",je.id,e.jsxs("div",{className:"text-xs mt-1",children:["Buffer: ",je.batchSize||0]}),e.jsx("div",{className:"text-xs",children:je.status})]},je.id))})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-pink-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:B,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:gt.map((je,He)=>e.jsx("div",{children:je},He))})]})]})}),e.jsx(me,{value:"gran-demo",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-400 mb-4",children:" Demostracin: Fine-grained Locks"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Locks por nodo permiten acceso concurrente a diferentes nodos. Lecturas concurrentes, escrituras exclusivas."}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ge(!Ke),className:`px-4 py-2 rounded font-semibold flex items-center gap-2 ${Ke?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:Ke?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"})," Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"})," Iniciar"]})}),e.jsxs("button",{onClick:pa,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded font-semibold flex items-center gap-2",children:[e.jsx(it,{className:"size-4"})," Reiniciar"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Tiempo: ",e.jsxs("span",{className:"text-orange-400 font-mono",children:[Ft,"s"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-400 block mb-2",children:["Velocidad: ",e.jsxs("span",{className:"text-orange-400",children:[pt,"ms"]})]}),e.jsx(dt,{value:[pt],onValueChange:je=>zt(je[0]),min:100,max:1e3,step:50})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[0,1,2,3].map(je=>e.jsxs("div",{className:`rounded-lg p-4 border-2 ${lt[je]?"bg-red-600/20 border-red-500":Pe[je]==="read"?"bg-blue-600/20 border-blue-500":"bg-gray-800/50 border-gray-600"}`,children:[e.jsxs("h4",{className:"text-sm font-semibold text-orange-400 mb-2",children:["Nodo ",je]}),e.jsx("div",{className:"text-center py-6",children:lt[je]?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-red-400 font-bold text-xl",children:" WRITE LOCK"}),e.jsx("div",{className:"text-xs text-red-300 mt-2",children:"Exclusivo"})]}):Pe[je]==="read"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-blue-400 font-bold text-xl",children:" READING"}),e.jsx("div",{className:"text-xs text-blue-300 mt-2",children:"Concurrente"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-green-400 font-bold text-xl",children:" FREE"}),e.jsx("div",{className:"text-xs text-green-300 mt-2",children:"Disponible"})]})})]},je))}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-orange-400 mb-3",children:"Estado de Threads"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:U.map(je=>e.jsxs("div",{className:`rounded px-3 py-2 text-center text-sm font-semibold ${je.status==="waiting"?"bg-yellow-600/30 border border-yellow-500 text-yellow-300 animate-pulse":je.status==="working"?"bg-orange-600/30 border border-orange-500 text-orange-300":je.status==="success"?"bg-green-600/30 border border-green-500 text-green-300":"bg-gray-700 border border-gray-600 text-gray-400"}`,children:["T",je.id,"  N",je.partition,e.jsx("div",{className:"text-xs mt-1",children:je.status})]},je.id))})]}),e.jsxs("div",{className:"bg-black rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-orange-400 mb-2",children:" Registro de Eventos"}),e.jsx("div",{ref:Ie,className:"font-mono text-xs text-green-400 space-y-1 max-h-40 overflow-y-auto",children:ot.map((je,He)=>e.jsx("div",{children:je},He))})]})]})})]})})]})]})})]})}const n2=Sa("/ActividadesSeminarioSO/actividad11/contencion-recursos")({component:r2});function o2(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-5xl",children:""}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Condicin de Carrera"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Race Condition"})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white text-gray-900 rounded-lg p-8 mb-8 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ia,{className:"size-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Descripcin del Problema"})]}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:["Una ",e.jsx("strong",{className:"text-red-600",children:"condicin de carrera"})," (race condition) ocurre cuando dos o ms threads acceden a datos compartidos simultneamente y al menos uno de ellos modifica los datos. El resultado final depende del orden de ejecucin de los threads, lo que puede llevar a comportamientos impredecibles y errores difciles de reproducir."]}),e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded mt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yn,{className:"size-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900 mb-2",children:"Por qu es peligroso?"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Las condiciones de carrera pueden causar corrupcin de datos, resultados incorrectos, crashes del sistema e incluso vulnerabilidades de seguridad. Son especialmente peligrosas porque pueden aparecer de manera intermitente y ser difciles de depurar."})]})]})})]}),e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"mutex",className:"w-full",children:[e.jsxs(Qt,{className:"w-full justify-start flex-wrap h-auto gap-2 bg-gray-900 p-2",children:[e.jsx(ce,{value:"mutex",children:"Mutex"}),e.jsx(ce,{value:"semaforos",children:"Semforos"}),e.jsx(ce,{value:"atomicas",children:"Variables Atmicas"}),e.jsx(ce,{value:"monitores",children:"Monitores"}),e.jsx(ce,{value:"rwlocks",children:"Locks Lectura/Escritura"})]}),e.jsx(me,{value:"mutex",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Mutex (Mutual Exclusion)"}),e.jsx("p",{className:"text-gray-300",children:"Un mutex garantiza que solo un thread pueda acceder a la seccin crtica a la vez. Cuando un thread adquiere el mutex, todos los dems deben esperar."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Mutex para proteger contador compartido

// Declaracin de recursos compartidos
COMPARTIDO contador = 0
COMPARTIDO mutex = NuevoMutex()

PROCEDIMIENTO incrementar():
    mutex.adquirir()           // Entrar a seccin crtica
    
    // Seccin crtica - solo un thread a la vez
    temp = contador
    temp = temp + 1
    contador = temp
    
    mutex.liberar()            // Salir de seccin crtica
FIN PROCEDIMIENTO

PROCEDIMIENTO thread_worker(id):
    PARA i = 1 HASTA 1000:
        incrementar()
    FIN PARA
    
    IMPRIMIR "Thread", id, "terminado"
FIN PROCEDIMIENTO

// Programa principal
CREAR thread1 QUE EJECUTE thread_worker(1)
CREAR thread2 QUE EJECUTE thread_worker(2)

ESPERAR thread1
ESPERAR thread2

IMPRIMIR "Valor final del contador:", contador  // Resultado: 2000`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Simple, garantiza exclusin mutua, previene condiciones de carrera.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Puede causar contencin, reduce concurrencia, riesgo de deadlock."]})})]})}),e.jsx(me,{value:"semaforos",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Semforos"}),e.jsx("p",{className:"text-gray-300",children:"Los semforos permiten controlar el acceso a un recurso mediante un contador. Un semforo binario (valor 0 o 1) funciona similar a un mutex."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Semforo binario

// Declaracin
COMPARTIDO contador = 0
COMPARTIDO semaforo = NuevoSemaforo(1)  // Valor inicial: 1

PROCEDIMIENTO incrementar():
    semaforo.esperar()         // P(s) o wait(s) - decrementa
    
    // Seccin crtica
    contador = contador + 1
    
    semaforo.sealar()         // V(s) o signal(s) - incrementa
FIN PROCEDIMIENTO

// Ejemplo: Semforo con mltiples recursos
COMPARTIDO recursos_disponibles = NuevoSemaforo(5)  // 5 recursos

PROCEDIMIENTO usar_recurso(id):
    IMPRIMIR "Thread", id, "esperando recurso..."
    recursos_disponibles.esperar()
    
    IMPRIMIR "Thread", id, "usando recurso"
    DORMIR(2)  // Simular trabajo
    
    IMPRIMIR "Thread", id, "liberando recurso"
    recursos_disponibles.sealar()
FIN PROCEDIMIENTO

// Crear 10 threads compitiendo por 5 recursos
PARA i = 1 HASTA 10:
    CREAR thread QUE EJECUTE usar_recurso(i)
FIN PARA`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Flexible, permite mltiples accesos simultneos, til para productores-consumidores.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Ms complejo que mutex, fcil cometer errores (olvidar sealar)."]})})]})}),e.jsx(me,{value:"atomicas",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Variables Atmicas"}),e.jsx("p",{className:"text-gray-300",children:"Las operaciones atmicas se ejecutan como una unidad indivisible. El hardware garantiza que no pueden ser interrumpidas."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Variables atmicas

// Declaracin de variable atmica
COMPARTIDO ATOMICA contador = 0

PROCEDIMIENTO incrementar_atomico():
    // Operacin atmica - garantizada por hardware
    ATOMICO_INCREMENTAR(contador, 1)
    
    // Equivalente a:
    // atomicamente { contador = contador + 1 }
FIN PROCEDIMIENTO

PROCEDIMIENTO compare_and_swap(id):
    intentos = 0
    
    REPETIR:
        viejo = contador
        nuevo = viejo + 1
        intentos = intentos + 1
        
        // CAS: solo actualiza si valor no cambi
        exito = ATOMICO_CAS(contador, viejo, nuevo)
        
    HASTA QUE exito
    
    IMPRIMIR "Thread", id, "exitoso en intento", intentos
FIN PROCEDIMIENTO

// Operaciones atmicas comunes:
ATOMICO_LEER(variable)           // Lectura atmica
ATOMICO_ESCRIBIR(variable, valor) // Escritura atmica
ATOMICO_INTERCAMBIAR(var, nuevo)  // Exchange
ATOMICO_SUMAR(variable, valor)    // Fetch-and-add
ATOMICO_CAS(var, viejo, nuevo)    // Compare-and-swap

// Ejemplo de uso
PROCEDIMIENTO thread_worker():
    PARA i = 1 HASTA 1000:
        ATOMICO_INCREMENTAR(contador, 1)
    FIN PARA
FIN PROCEDIMIENTO

CREAR 10 threads workers
ESPERAR todos los threads
IMPRIMIR "Total:", contador  // Siempre 10000`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Muy rpidas, no requieren locks, sin deadlocks, alta concurrencia.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Solo para operaciones simples, limitadas por hardware, puede causar ABA problem."]})})]})}),e.jsx(me,{value:"monitores",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Monitores"}),e.jsx("p",{className:"text-gray-300",children:"Un monitor encapsula datos compartidos y mtodos de acceso con sincronizacin implcita. Solo un thread puede estar activo dentro del monitor a la vez."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Monitor

MONITOR ContadorSeguro:
    // Variables privadas del monitor
    PRIVADO contador = 0
    
    // Mtodos sincronizados automticamente
    PROCEDIMIENTO incrementar():
        // Solo un thread puede ejecutar esto a la vez
        contador = contador + 1
    FIN PROCEDIMIENTO
    
    PROCEDIMIENTO decrementar():
        contador = contador - 1
    FIN PROCEDIMIENTO
    
    FUNCION obtener_valor():
        RETORNAR contador
    FIN FUNCION
FIN MONITOR

// Monitor con variables de condicin
MONITOR Buffer:
    PRIVADO datos = []
    PRIVADO capacidad = 10
    PRIVADO no_lleno = NuevaCondicion()
    PRIVADO no_vacio = NuevaCondicion()
    
    PROCEDIMIENTO insertar(item):
        // Esperar si el buffer est lleno
        MIENTRAS longitud(datos) >= capacidad:
            no_lleno.esperar()      // Libera el monitor y espera
        FIN MIENTRAS
        
        agregar(datos, item)
        no_vacio.sealar()          // Despertar consumidores
    FIN PROCEDIMIENTO
    
    FUNCION extraer():
        // Esperar si el buffer est vaco
        MIENTRAS longitud(datos) == 0:
            no_vacio.esperar()
        FIN MIENTRAS
        
        item = remover_primero(datos)
        no_lleno.sealar()          // Despertar productores
        RETORNAR item
    FIN FUNCION
FIN MONITOR

// Uso del monitor
COMPARTIDO monitor = NuevoContadorSeguro()

PROCEDIMIENTO thread_incrementador():
    PARA i = 1 HASTA 1000:
        monitor.incrementar()      // Sincronizacin automtica
    FIN PARA
FIN PROCEDIMIENTO`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Sincronizacin implcita, encapsulacin, menos errores de programacin.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Overhead mayor, requiere soporte del lenguaje, menos control fino."]})})]})}),e.jsx(me,{value:"rwlocks",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Locks de Lectura/Escritura"}),e.jsx("p",{className:"text-gray-300",children:"Permiten mltiples lectores simultneos, pero escritura exclusiva. Optimiza el caso comn de muchas lecturas y pocas escrituras."}),e.jsx("div",{className:"bg-black rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-green-400 text-sm",children:e.jsx("code",{children:`// Pseudocdigo: Read-Write Lock

COMPARTIDO datos = []
COMPARTIDO rwlock = NuevoRWLock()

PROCEDIMIENTO leer_datos(id):
    rwlock.adquirir_lectura()   // Mltiples lectores permitidos
    
    // Seccin de lectura
    IMPRIMIR "Thread", id, "leyendo:", datos
    DORMIR(1)  // Simular lectura larga
    
    rwlock.liberar_lectura()
FIN PROCEDIMIENTO

PROCEDIMIENTO escribir_datos(id, valor):
    rwlock.adquirir_escritura()  // Acceso exclusivo
    
    // Seccin de escritura
    IMPRIMIR "Thread", id, "escribiendo:", valor
    agregar(datos, valor)
    DORMIR(2)  // Simular escritura larga
    
    rwlock.liberar_escritura()
FIN PROCEDIMIENTO

// Implementacin interna simplificada
ESTRUCTURA RWLock:
    lectores_activos = 0
    escritor_activo = FALSO
    mutex = NuevoMutex()
    puede_leer = NuevaCondicion()
    puede_escribir = NuevaCondicion()
    
    PROCEDIMIENTO adquirir_lectura():
        mutex.adquirir()
        
        // Esperar si hay escritor activo
        MIENTRAS escritor_activo:
            puede_leer.esperar(mutex)
        FIN MIENTRAS
        
        lectores_activos = lectores_activos + 1
        mutex.liberar()
    FIN PROCEDIMIENTO
    
    PROCEDIMIENTO liberar_lectura():
        mutex.adquirir()
        lectores_activos = lectores_activos - 1
        
        SI lectores_activos == 0:
            puede_escribir.sealar()  // Permitir escritor
        FIN SI
        
        mutex.liberar()
    FIN PROCEDIMIENTO
    
    PROCEDIMIENTO adquirir_escritura():
        mutex.adquirir()
        
        // Esperar a que no haya lectores ni escritores
        MIENTRAS lectores_activos > 0 O escritor_activo:
            puede_escribir.esperar(mutex)
        FIN MIENTRAS
        
        escritor_activo = VERDADERO
        mutex.liberar()
    FIN PROCEDIMIENTO
    
    PROCEDIMIENTO liberar_escritura():
        mutex.adquirir()
        escritor_activo = FALSO
        
        puede_escribir.sealar()   // Permitir otro escritor
        puede_leer.sealar_todos() // Permitir lectores
        
        mutex.liberar()
    FIN PROCEDIMIENTO
FIN ESTRUCTURA

// Uso: 90% lecturas, 10% escrituras
CREAR 9 threads lectores
CREAR 1 thread escritor`})})}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded p-4",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("strong",{children:" Ventajas:"})," Alta concurrencia en lecturas, eficiente para lectura-pesada.",e.jsx("br",{}),e.jsx("strong",{children:" Desventajas:"})," Ms complejo, puede causar starvation de escritores, overhead adicional."]})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"size-5"}),e.jsx("span",{children:"Demostracin Interactiva"})]})}),e.jsx(na,{children:e.jsx(i2,{})})]})]})]})]})}function i2(){const[s,i]=c.useState("sin-proteccion"),[n,l]=c.useState(!1),[d,m]=c.useState(!1),[h,x]=c.useState(0),[g,b]=c.useState([]),[v,f]=c.useState([]),[N,j]=c.useState(5),[_,w]=c.useState(3),[C,E]=c.useState([50]),D=c.useRef(!1),L=c.useRef(!1),V=c.useRef(null),J=c.useRef(null),ie=c.useRef(!0),I=()=>2e3-C[0]*19,k=(A,K="text-green-400")=>{b(M=>[...M,{mensaje:`[${new Date().toLocaleTimeString()}] ${A}`,color:K}])};c.useEffect(()=>{ie.current&&V.current&&V.current.scrollIntoView({behavior:"smooth"})},[g]);const be=()=>{if(!J.current)return;const{scrollTop:A,scrollHeight:K,clientHeight:M}=J.current,O=Math.abs(K-M-A)<10;ie.current=O},te=async()=>{for(;D.current&&!L.current;)await new Promise(A=>setTimeout(A,100))},G=async A=>{await new Promise(K=>setTimeout(K,A)),await te()},oe=async A=>{for(let M=0;M<3;M++){if(L.current)return;f(q=>q.map($=>$.id===A?{...$,estado:"Esperando",color:"bg-gray-600",colorText:"text-gray-400"}:$)),k(`Thread ${A}: Esperando para acceder`,"text-gray-400"),await G(I()*Math.random()),f(q=>q.map($=>$.id===A?{...$,estado:"Accediendo",color:"bg-red-600",colorText:"text-red-400"}:$)),k(`Thread ${A}:  Accediendo SIN proteccin`,"text-red-400");const O=h;await G(I()*.5),x(O+1),k(`Thread ${A}: Increment contador (posible race condition)`,"text-red-300"),f(q=>q.map($=>$.id===A?{...$,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:$)),await G(I()*.3)}f(M=>M.map(O=>O.id===A?{...O,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:O)),k(`Thread ${A}:  Terminado`,"text-green-400")},Ce=async(A,K)=>{for(let O=0;O<3;O++){if(L.current)return;for(f(q=>q.map($=>$.id===A?{...$,estado:"Esperando lock",color:"bg-yellow-600",colorText:"text-yellow-400"}:$)),k(`Thread ${A}:  Intentando adquirir mutex`,"text-yellow-400");K.length>0&&K[0]!==A;)if(await G(100),L.current)return;f(q=>q.map($=>$.id===A?{...$,estado:"Seccin crtica",color:"bg-green-600",colorText:"text-green-400"}:$)),k(`Thread ${A}:  Adquiri mutex - En seccin crtica`,"text-green-400"),await G(I()*.8),x(q=>q+1),k(`Thread ${A}: Increment contador de forma segura`,"text-green-300"),await G(I()*.5),K.shift(),k(`Thread ${A}:  Liber mutex`,"text-cyan-400"),f(q=>q.map($=>$.id===A?{...$,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:$)),await G(I()*.3)}f(O=>O.map(q=>q.id===A?{...q,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:q)),k(`Thread ${A}:  Terminado`,"text-green-400")},ke=async(A,K)=>{for(let O=0;O<3;O++){if(L.current)return;for(f(q=>q.map($=>$.id===A?{...$,estado:"Esperando semforo",color:"bg-yellow-600",colorText:"text-yellow-400"}:$)),k(`Thread ${A}:  Esperando semforo (valor: ${K.valor})`,"text-yellow-400");K.valor<=0;)if(await G(100),L.current)return;K.valor--,f(q=>q.map($=>$.id===A?{...$,estado:"Usando recurso",color:"bg-green-600",colorText:"text-green-400"}:$)),k(`Thread ${A}:  Ejecut wait(S) - Usando recurso (S=${K.valor})`,"text-green-400"),await G(I()*.8),x(q=>q+1),k(`Thread ${A}: Increment contador`,"text-green-300"),await G(I()*.5),K.valor++,k(`Thread ${A}:  Ejecut signal(S) - Liber recurso (S=${K.valor})`,"text-cyan-400"),f(q=>q.map($=>$.id===A?{...$,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:$)),await G(I()*.3)}f(O=>O.map(q=>q.id===A?{...q,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:q)),k(`Thread ${A}:  Terminado`,"text-green-400")},Ee=async A=>{for(let M=0;M<3;M++){if(L.current)return;f(O=>O.map(q=>q.id===A?{...q,estado:"Preparando CAS",color:"bg-yellow-600",colorText:"text-yellow-400"}:q)),k(`Thread ${A}:  Preparando operacin atmica`,"text-yellow-400"),await G(I()*.3),f(O=>O.map(q=>q.id===A?{...q,estado:"Ejecutando CAS",color:"bg-green-600",colorText:"text-green-400"}:q)),k(`Thread ${A}:  Ejecutando ATOMIC_INCREMENT`,"text-green-400"),await G(I()*.2),x(O=>O+1),k(`Thread ${A}:  Operacin atmica completada`,"text-green-300"),f(O=>O.map(q=>q.id===A?{...q,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:q)),await G(I()*.3)}f(M=>M.map(O=>O.id===A?{...O,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:O)),k(`Thread ${A}:  Terminado`,"text-green-400")},P=async(A,K)=>{for(let O=0;O<3;O++){if(L.current)return;for(f(q=>q.map($=>$.id===A?{...$,estado:"Esperando monitor",color:"bg-yellow-600",colorText:"text-yellow-400"}:$)),k(`Thread ${A}:  Intentando entrar al monitor`,"text-yellow-400");K.ocupado;)if(await G(100),L.current)return;K.ocupado=!0,f(q=>q.map($=>$.id===A?{...$,estado:"Dentro del monitor",color:"bg-green-600",colorText:"text-green-400"}:$)),k(`Thread ${A}:  Entr al monitor - Ejecutando mtodo sincronizado`,"text-green-400"),await G(I()*.8),x(q=>q+1),k(`Thread ${A}: Increment contador (sincronizacin implcita)`,"text-green-300"),await G(I()*.5),K.ocupado=!1,k(`Thread ${A}:  Sali del monitor`,"text-cyan-400"),f(q=>q.map($=>$.id===A?{...$,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:$)),await G(I()*.3)}f(O=>O.map(q=>q.id===A?{...q,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:q)),k(`Thread ${A}:  Terminado`,"text-green-400")},Q=async(A,K)=>{const O=A%3===0;for(let q=0;q<3;q++){if(L.current)return;if(O){for(f($=>$.map(ve=>ve.id===A?{...ve,estado:"Esperando write lock",color:"bg-yellow-600",colorText:"text-yellow-400"}:ve)),k(`Thread ${A}:  Esperando write lock`,"text-yellow-400");K.lectores>0||K.escritor;)if(await G(100),L.current)return;K.escritor=!0,f($=>$.map(ve=>ve.id===A?{...ve,estado:"Escribiendo",color:"bg-purple-600",colorText:"text-purple-400"}:ve)),k(`Thread ${A}:  Adquiri write lock - Escribiendo`,"text-purple-400"),await G(I()*1.2),x($=>$+1),k(`Thread ${A}: Modific datos (escritura exclusiva)`,"text-purple-300"),await G(I()*.5),K.escritor=!1,k(`Thread ${A}:  Liber write lock`,"text-cyan-400")}else{for(f($=>$.map(ve=>ve.id===A?{...ve,estado:"Esperando read lock",color:"bg-yellow-600",colorText:"text-yellow-400"}:ve)),k(`Thread ${A}:  Esperando read lock`,"text-yellow-400");K.escritor;)if(await G(100),L.current)return;K.lectores++,f($=>$.map(ve=>ve.id===A?{...ve,estado:`Leyendo (${K.lectores} lectores)`,color:"bg-green-600",colorText:"text-green-400"}:ve)),k(`Thread ${A}:  Adquiri read lock - Leyendo (${K.lectores} lectores activos)`,"text-green-400"),await G(I()*.6),k(`Thread ${A}: Ley datos (compartido con otros lectores)`,"text-green-300"),await G(I()*.4),K.lectores--,k(`Thread ${A}:  Liber read lock (${K.lectores} lectores restantes)`,"text-cyan-400")}f($=>$.map(ve=>ve.id===A?{...ve,estado:"Trabajando",color:"bg-blue-600",colorText:"text-blue-400"}:ve)),await G(I()*.3)}f(q=>q.map($=>$.id===A?{...$,estado:"Terminado",color:"bg-gray-800",colorText:"text-gray-500"}:$)),k(`Thread ${A}:  Terminado`,"text-green-400")},F=async()=>{L.current=!1,D.current=!1,l(!0),m(!1),x(0),b([]);const A=Array.from({length:N},(O,q)=>({id:q+1,estado:"Iniciando",color:"bg-blue-600",colorText:"text-blue-400"}));f(A);const K=N*3;k(` Iniciando demostracin: ${T()}`,"text-cyan-400"),k(` Configuracin: ${N} threads, ${_} recursos`,"text-gray-400"),k(` Objetivo: Incrementar contador ${K} veces (3 por thread)`,"text-gray-400"),k("".repeat(50),"text-gray-600");const M=[];switch(s){case"sin-proteccion":{for(let O=1;O<=N;O++)M.push(oe(O));await Promise.all(M);break}case"mutex":{const O=Array.from({length:N},(q,$)=>$+1);for(let q=1;q<=N;q++)M.push(Ce(q,O));await Promise.all(M);break}case"semaforo":{const O={valor:_};for(let q=1;q<=N;q++)M.push(ke(q,O));await Promise.all(M);break}case"atomica":{for(let O=1;O<=N;O++)M.push(Ee(O));await Promise.all(M);break}case"monitor":{const O={ocupado:!1};for(let q=1;q<=N;q++)M.push(P(q,O));await Promise.all(M);break}case"rwlock":{const O={lectores:0,escritor:!1};for(let q=1;q<=N;q++)M.push(Q(q,O));await Promise.all(M);break}}L.current||(k("".repeat(50),"text-gray-600"),k(` Resultado final: ${h}`,"text-cyan-400"),h===K?k(` Correcto! Se alcanz el valor esperado (${K})`,"text-green-400"):k(` Race condition detectada! Esperado: ${K}, Obtenido: ${h}`,"text-red-400")),l(!1),m(!1)},ue=()=>{D.current=!D.current,m(!d),D.current?k(" Demostracin pausada","text-yellow-400"):k(" Demostracin reanudada","text-green-400")},qe=()=>{L.current=!0,D.current=!1,l(!1),m(!1),x(0),b([]),f(Array.from({length:N},(A,K)=>({id:K+1,estado:"Esperando",color:"bg-gray-600",colorText:"text-gray-400"})))},T=()=>({"sin-proteccion":"Sin Proteccin",mutex:"Mutex",semaforo:"Semforo",atomica:"Variable Atmica",monitor:"Monitor",rwlock:"Read-Write Lock"})[s]||s,W=A=>{const K=Math.max(3,Math.min(10,N+A));j(K),n||f(Array.from({length:K},(M,O)=>({id:O+1,estado:"Esperando",color:"bg-gray-600",colorText:"text-gray-400"})))},re=A=>{const K=Math.max(1,Math.min(20,_+A));w(K)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" Configuracin de la Simulacin"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nmero de Threads"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(-1),disabled:n||N<=3,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(go,{className:"size-4"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:N}),e.jsx("div",{className:"text-xs text-gray-400",children:"Min: 3, Max: 10"})]}),e.jsx("button",{onClick:()=>W(1),disabled:n||N>=10,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(dr,{className:"size-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Velocidad de Simulacin"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(dt,{value:C,onValueChange:E,max:100,step:1,disabled:n,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"Lenta"}),e.jsxs("span",{className:"font-bold text-white",children:[C[0],"%"]}),e.jsx("span",{children:"Rpida"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Recursos Compartidos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re(-1),disabled:n||_<=1,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(go,{className:"size-4"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:_}),e.jsx("div",{className:"text-xs text-gray-400",children:"Min: 1, Max: 20"})]}),e.jsx("button",{onClick:()=>re(1),disabled:n||_>=20,className:"p-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed rounded",children:e.jsx(dr,{className:"size-4"})})]})]})]})]}),e.jsxs(ia,{value:s,onValueChange:i,className:"w-full",children:[e.jsxs(Qt,{className:"w-full justify-start flex-wrap h-auto gap-2 bg-gray-900 p-2",children:[e.jsx(ce,{value:"sin-proteccion",children:" Sin Proteccin"}),e.jsx(ce,{value:"mutex",children:" Mutex"}),e.jsx(ce,{value:"semaforo",children:" Semforo"}),e.jsx(ce,{value:"atomica",children:" Atmica"}),e.jsx(ce,{value:"monitor",children:" Monitor"}),e.jsx(ce,{value:"rwlock",children:" RW Lock"})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:F,disabled:n&&!d,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(nt,{className:"size-5"}),n&&d?"Continuar Demostracin":"Ejecutar Demostracin"]}),n&&e.jsxs("button",{onClick:ue,className:"flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(ct,{className:"size-5"}),d?"Reanudar":"Pausar"]}),e.jsxs("button",{onClick:qe,disabled:!n&&g.length===0,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-800 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:[e.jsx(it,{className:"size-5"}),"Reiniciar"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Estado de Threads"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:v.map(A=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`size-3 rounded-full ${A.color} animate-pulse flex-shrink-0`}),e.jsxs("span",{className:"text-white font-mono text-sm w-20",children:["Thread ",A.id,":"]}),e.jsx("span",{className:`${A.colorText} text-sm`,children:A.estado})]},A.id))}),e.jsx("div",{className:"mt-6 p-4 bg-gray-800 rounded border border-gray-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Contador Compartido"}),e.jsx("div",{className:"text-5xl font-bold text-white font-mono",children:h}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["Esperado: ",N*3]})]})})]}),e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Logs de Ejecucin"}),e.jsx("div",{ref:J,onScroll:be,className:"bg-black rounded p-4 h-96 overflow-y-auto font-mono text-sm",children:g.length===0?e.jsx("div",{className:"text-gray-500 text-center mt-8",children:'Configura los parmetros y presiona "Ejecutar" para comenzar'}):e.jsxs(e.Fragment,{children:[g.map((A,K)=>e.jsx("div",{className:`${A.color} mb-1`,children:A.mensaje},K)),e.jsx("div",{ref:V})]})})]})]}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-6",children:[s==="sin-proteccion"&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-2",children:" Sin Proteccin"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Los threads acceden al contador simultneamente sin sincronizacin. Esto causa race conditions donde mltiples threads leen el mismo valor antes de incrementar, resultando en incrementos perdidos. El resultado final ser menor al esperado en la mayora de las ejecuciones."})]}),s==="mutex"&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-2",children:" Mutex (Mutual Exclusion)"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Un mutex protege la seccin crtica garantizando que solo un thread pueda incrementar el contador a la vez. Los threads se organizan en una cola y esperan su turno, eliminando completamente las race conditions. El resultado siempre ser exacto."})]}),s==="semaforo"&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-2",children:" Semforo"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Un semforo controla el acceso mediante un contador. Permite que mltiples threads (hasta el lmite del semforo) accedan simultneamente al recurso. Usa operaciones wait(S) para decrementar y signal(S) para incrementar. Ideal cuando hay mltiples recursos disponibles."})]}),s==="atomica"&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-2",children:" Variable Atmica"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Las operaciones atmicas garantizan que el incremento se realiza como una unidad indivisible a nivel de hardware. Usa instrucciones especiales del procesador (como Compare-And-Swap) sin necesidad de locks explcitos. Es la solucin ms eficiente y rpida. El resultado siempre es exacto."})]}),s==="monitor"&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-2",children:" Monitor"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Un monitor encapsula datos y mtodos con sincronizacin automtica. Solo un thread puede estar activo dentro del monitor a la vez. La sincronizacin es implcita, reduciendo errores de programacin. Comn en lenguajes orientados a objetos como Java (synchronized)."})]}),s==="rwlock"&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-2",children:" Read-Write Lock"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Permite mltiples lectores simultneos pero escritura exclusiva. Los threads lectores () pueden acceder al mismo tiempo, mientras que los escritores () requieren acceso exclusivo. Optimiza escenarios donde las lecturas son ms frecuentes que las escrituras."})]})]})]})]})]})}const l2=Sa("/ActividadesSeminarioSO/actividad11/condicion-carrera")({component:o2});function c2(){const[s,i]=c.useState([{id:1,status:"idle",lockHeld:!1},{id:2,status:"idle",lockHeld:!1},{id:3,status:"idle",lockHeld:!1},{id:4,status:"idle",lockHeld:!1}]),[n,l]=c.useState(!1),[d,m]=c.useState(0),[h,x]=c.useState(500),[g,b]=c.useState([!1,!1,!1,!1]),[v,f]=c.useState(0),[N,j]=c.useState(["Simulacin Fine-grained Locking iniciada. Locks independientes por seccin."]),_=c.useRef(null),[w,C]=c.useState([{id:1,status:"idle"},{id:2,status:"idle"},{id:3,status:"idle"},{id:4,status:"idle"}]),[E,D]=c.useState(!1),[L,V]=c.useState(0),[J,ie]=c.useState(500),[I,k]=c.useState(0),[be,te]=c.useState(0),[G,oe]=c.useState(["Simulacin Lock-free iniciada. Operaciones sin bloqueos."]),Ce=c.useRef(null),[ke,Ee]=c.useState([{id:1,status:"idle"},{id:2,status:"idle"},{id:3,status:"idle"},{id:4,status:"idle"}]),[P,Q]=c.useState(!1),[F,ue]=c.useState(0),[qe,T]=c.useState(500),[W,re]=c.useState([]),[A,K]=c.useState(0),[M,O]=c.useState(["Simulacin Non-blocking I/O iniciada. Event loop procesando requests."]),q=c.useRef(null),[$,ve]=c.useState([{id:1,status:"idle",task:void 0},{id:2,status:"idle",task:void 0},{id:3,status:"idle",task:void 0},{id:4,status:"idle",task:void 0}]),[Z,z]=c.useState(!1),[Oe,Re]=c.useState(0),[ae,se]=c.useState(500),[rt,jt]=c.useState([]),[fe,Me]=c.useState(0),[De,Ge]=c.useState(["Simulacin Thread Pool iniciada. Pool de 4 workers."]),ze=c.useRef(null),[_e,Xe]=c.useState([]),[We,xt]=c.useState(!1),[Ot,It]=c.useState(0),[Ue,kt]=c.useState(500),[et,R]=c.useState(0),[ne,Ve]=c.useState(0),[de,we]=c.useState(["Simulacin Async/Await iniciada. Ejecucin concurrente sin bloqueos."]),_t=c.useRef(null),[St,tt]=c.useState([{id:1,status:"idle",lockHeld:!1},{id:2,status:"idle",lockHeld:!1},{id:3,status:"idle",lockHeld:!1},{id:4,status:"idle",lockHeld:!1}]),[Ye,ft]=c.useState(!1),[Ct,ye]=c.useState(0),[gt,Fe]=c.useState(500),[B,U]=c.useState(0),[Dt,Ke]=c.useState(0),[ge,Ft]=c.useState(["Simulacin Scope Reducido iniciada. Minimizando tiempo en seccin crtica."]),Zt=c.useRef(null),[pt,zt]=c.useState([{id:1,status:"idle"},{id:2,status:"idle"},{id:3,status:"idle"},{id:4,status:"idle"}]),[lt,Be]=c.useState(!1),[Pe,Je]=c.useState(0),[ot,X]=c.useState(500),[Ie,st]=c.useState([!1,!1,!1,!1]),[Rt,Qe]=c.useState(0),[$e,mt]=c.useState(["Simulacin Lazy Initialization iniciada. Recursos se inicializan solo cuando se necesitan."]),Jt=c.useRef(null);c.useEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[N]),c.useEffect(()=>{Ce.current&&(Ce.current.scrollTop=Ce.current.scrollHeight)},[G]),c.useEffect(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},[M]),c.useEffect(()=>{ze.current&&(ze.current.scrollTop=ze.current.scrollHeight)},[De]),c.useEffect(()=>{_t.current&&(_t.current.scrollTop=_t.current.scrollHeight)},[de]),c.useEffect(()=>{Zt.current&&(Zt.current.scrollTop=Zt.current.scrollHeight)},[ge]),c.useEffect(()=>{Jt.current&&(Jt.current.scrollTop=Jt.current.scrollHeight)},[$e]),c.useEffect(()=>{if(!n)return;const Y=setInterval(()=>{m(Ze=>Ze+1);const Se=Math.floor(Math.random()*4),Pt=Math.floor(Math.random()*4);b(Ze=>{if(Ze[Pt])return f(Tt=>Tt+1),j(Tt=>[...Tt.slice(-9),`T${Se+1}: Bloqueado esperando Seccin ${Pt}`]),i(Tt=>Tt.map((Na,La)=>La===Se?{...Na,status:"blocked"}:Na)),Ze;const vt=[...Ze];return vt[Pt]=!0,j(Tt=>[...Tt.slice(-9),`T${Se+1}: Lock adquirido en Seccin ${Pt}`]),i(Tt=>Tt.map((Na,La)=>La===Se?{...Na,status:"working",lockHeld:!0}:Na)),setTimeout(()=>{b(Tt=>{const Na=[...Tt];return Na[Pt]=!1,Na}),j(Tt=>[...Tt.slice(-9),`T${Se+1}: Lock liberado de Seccin ${Pt}`]),i(Tt=>Tt.map((Na,La)=>La===Se?{...Na,status:"idle",lockHeld:!1}:Na))},h/2),vt})},h);return()=>clearInterval(Y)},[n,h]),c.useEffect(()=>{if(!E)return;const Y=setInterval(()=>{V(Ze=>Ze+1);const Se=Math.floor(Math.random()*4);C(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"working"}:vt)),Math.random()<.9?(k(Ze=>Ze+1),oe(Ze=>[...Ze.slice(-9),`W${Se+1}: Operacin CAS exitosa sin bloqueos`]),setTimeout(()=>{C(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"idle"}:vt))},J/3)):(te(Ze=>Ze+1),oe(Ze=>[...Ze.slice(-9),`W${Se+1}: CAS fall, reintentando (sin bloqueo)`]),setTimeout(()=>{k(Ze=>Ze+1),oe(Ze=>[...Ze.slice(-9),`W${Se+1}: Operacin exitosa tras reintento`]),C(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"idle"}:vt))},J/2))},J);return()=>clearInterval(Y)},[E,J]),c.useEffect(()=>{if(!P)return;const Y=setInterval(()=>{if(ue(Se=>Se+1),Math.random()<.7){const Se=Date.now()+Math.random();re(Ze=>[...Ze,Se].slice(-8)),O(Ze=>[...Ze.slice(-9),` Nueva solicitud I/O recibida (ID: ${Math.floor(Se%1e3)})`]);const Pt=Math.floor(Math.random()*4);Ee(Ze=>Ze.map((vt,Tt)=>Tt===Pt?{...vt,status:"working"}:vt)),setTimeout(()=>{re(Ze=>Ze.filter(vt=>vt!==Se)),K(Ze=>Ze+1),O(Ze=>[...Ze.slice(-9),` I/O completado por W${Pt+1} (sin bloquear otros)`]),Ee(Ze=>Ze.map((vt,Tt)=>Tt===Pt?{...vt,status:"idle"}:vt))},qe)}},qe/2);return()=>clearInterval(Y)},[P,qe]),c.useEffect(()=>{if(!Z)return;const Y=setInterval(()=>{if(Re(Pt=>Pt+1),Math.random()<.6&&rt.length<12){const Pt={id:Date.now()+Math.random(),status:"pending",type:["compute","io","db"][Math.floor(Math.random()*3)]};jt(Ze=>[...Ze,Pt]),Ge(Ze=>[...Ze.slice(-9),` Nueva tarea agregada a la cola (${Pt.type})`])}const Se=$.findIndex(Pt=>Pt.status==="idle");Se!==-1&&rt.length>0&&jt(Pt=>{const[Ze,...vt]=Pt;return ve(Tt=>Tt.map((Na,La)=>La===Se?{...Na,status:"working",task:Ze.id}:Na)),Ge(Tt=>[...Tt.slice(-9),` Worker ${Se+1} procesando tarea ${Ze.type}`]),setTimeout(()=>{Me(Tt=>Tt+1),ve(Tt=>Tt.map((Na,La)=>La===Se?{...Na,status:"idle",task:void 0}:Na)),Ge(Tt=>[...Tt.slice(-9),` Worker ${Se+1} complet tarea`])},ae),vt})},ae/2);return()=>clearInterval(Y)},[Z,ae,$,rt.length]),c.useEffect(()=>{if(!We)return;const Y=setInterval(()=>{if(It(Se=>Se+1),Math.random()<.7){const Se=Date.now()+Math.random(),Pt=Math.floor(Math.random()*3)+1,Ze={id:Se,status:"executing",duration:Pt,startTime:Ot};Xe(vt=>[...vt.slice(-6),Ze]),R(vt=>vt+1),we(vt=>[...vt.slice(-9),` Async task iniciada (durar ${Pt}s)`]),setTimeout(()=>{Xe(vt=>vt.map(Tt=>Tt.id===Se?{...Tt,status:"completed"}:Tt)),R(vt=>vt-1),Ve(vt=>vt+1),we(vt=>[...vt.slice(-9)," Async task completada sin bloquear otras"])},Pt*Ue)}},Ue/2);return()=>clearInterval(Y)},[We,Ue,Ot]),c.useEffect(()=>{if(!Ye)return;const Y=setInterval(()=>{ye(Ze=>Ze+1);const Se=Math.floor(Math.random()*4),Pt=Math.floor(Math.random()*30)+10;tt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"working"}:vt)),Ft(Ze=>[...Ze.slice(-9),`T${Se+1}: Preparando datos fuera de lock...`]),setTimeout(()=>{tt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,lockHeld:!0}:vt)),Ft(Ze=>[...Ze.slice(-9),`T${Se+1}: Lock adquirido (solo ${Pt}ms)`]),U(Ze=>Ze+Pt),setTimeout(()=>{tt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"idle",lockHeld:!1}:vt)),Ft(Ze=>[...Ze.slice(-9),`T${Se+1}: Lock liberado rpidamente`]),Ke(B/(Ct||1))},Pt)},gt/2)},gt);return()=>clearInterval(Y)},[Ye,gt,B,Ct]),c.useEffect(()=>{if(!lt)return;const Y=setInterval(()=>{Je(Ze=>Ze+1);const Se=Math.floor(Math.random()*4),Pt=Math.floor(Math.random()*4);Qe(Ze=>Ze+1),Ie[Pt]?(zt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"working"}:vt)),mt(Ze=>[...Ze.slice(-9),`W${Se+1}: Usando Recurso ${Pt} (ya inicializado)`]),setTimeout(()=>{zt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"idle"}:vt))},ot/3)):(zt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"waiting"}:vt)),mt(Ze=>[...Ze.slice(-9),`W${Se+1}: Inicializando Recurso ${Pt} por primera vez...`]),setTimeout(()=>{st(Ze=>{const vt=[...Ze];return vt[Pt]=!0,vt}),zt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"working"}:vt)),mt(Ze=>[...Ze.slice(-9),`W${Se+1}: Recurso ${Pt} inicializado y listo`]),setTimeout(()=>{zt(Ze=>Ze.map((vt,Tt)=>Tt===Se?{...vt,status:"idle"}:vt))},ot/3)},ot))},ot);return()=>clearInterval(Y)},[lt,ot,Ie]);const pa=()=>{l(!1),m(0),i(Y=>Y.map(Se=>({...Se,status:"idle",lockHeld:!1}))),b([!1,!1,!1,!1]),f(0),j(["Simulacin Fine-grained Locking reiniciada."])},je=()=>{D(!1),V(0),C(Y=>Y.map(Se=>({...Se,status:"idle"}))),k(0),te(0),oe(["Simulacin Lock-free reiniciada."])},He=()=>{Q(!1),ue(0),Ee(Y=>Y.map(Se=>({...Se,status:"idle"}))),re([]),K(0),O(["Simulacin Non-blocking I/O reiniciada."])},ht=()=>{z(!1),Re(0),ve(Y=>Y.map(Se=>({...Se,status:"idle",task:void 0}))),jt([]),Me(0),Ge(["Simulacin Thread Pool reiniciada."])},Lt=()=>{xt(!1),It(0),Xe([]),R(0),Ve(0),we(["Simulacin Async/Await reiniciada."])},ut=()=>{ft(!1),ye(0),tt(Y=>Y.map(Se=>({...Se,status:"idle",lockHeld:!1}))),U(0),Ke(0),Ft(["Simulacin Scope Reducido reiniciada."])},at=()=>{Be(!1),Je(0),zt(Y=>Y.map(Se=>({...Se,status:"idle"}))),st([!1,!1,!1,!1]),Qe(0),mt(["Simulacin Lazy Initialization reiniciada."])};return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[e.jsx("div",{className:"bg-gray-800 border-b border-gray-700 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(vb,{className:"size-12 text-red-500"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:" Bloqueos Innecesarios"})]}),e.jsxs("p",{className:"text-lg text-gray-300 leading-relaxed",children:["Los ",e.jsx("span",{className:"font-bold text-red-400",children:"Bloqueos Innecesarios"})," son sincronizaciones que podran evitarse o reducirse mediante tcnicas ms eficientes. Estos bloqueos reducen el paralelismo y degradan el rendimiento del sistema al forzar la serializacin de operaciones que podran ejecutarse concurrentemente."]}),e.jsx("div",{className:"mt-4 p-4 bg-red-900/30 border border-red-700/50 rounded-lg",children:e.jsxs("p",{className:"text-red-200",children:[e.jsx("span",{className:"font-bold",children:"Problema:"})," Locks excesivos o de granularidad gruesa pueden reducir la concurrencia en un 80-90%. Las tcnicas modernas permiten eliminar o minimizar bloqueos, mejorando significativamente el throughput y la latencia."]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["soluciones","demostracion"],className:"space-y-4",children:[e.jsxs(sa,{value:"soluciones",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Soluciones (Pseudocdigo)"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"fine",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-7 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"fine",children:" Fine-grained"}),e.jsx(ce,{value:"lockfree",children:" Lock-free"}),e.jsx(ce,{value:"nonblocking",children:" Non-blocking"}),e.jsx(ce,{value:"threadpool",children:" Thread Pool"}),e.jsx(ce,{value:"async",children:" Async/Await"}),e.jsx(ce,{value:"scope",children:" Scope"}),e.jsx(ce,{value:"lazy",children:" Lazy Init"})]}),e.jsx(me,{value:"fine",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:" Fine-grained Locking"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Usar locks especficos para cada seccin independiente en lugar de un lock global, aumentando el paralelismo."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Lock Grueso (serializa TODO)
estructura SistemaGrueso {
  usuarios: Lista<Usuario>
  productos: Lista<Producto>
  pedidos: Lista<Pedido>
  lockGlobal: Lock  //  Un solo lock para todo
}

funcin agregarUsuario(sistema: SistemaGrueso, usuario: Usuario) {
  sistema.lockGlobal.adquirir()  // Bloquea TODO
  
  sistema.usuarios.agregar(usuario)
  
  sistema.lockGlobal.liberar()
}

funcin agregarProducto(sistema: SistemaGrueso, producto: Producto) {
  sistema.lockGlobal.adquirir()  // Bloquea incluso usuarios y pedidos
  
  sistema.productos.agregar(producto)
  
  sistema.lockGlobal.liberar()
}
// Problema: Operaciones independientes se bloquean mutuamente

// Bien: Fine-grained Locking
estructura SistemaFino {
  usuarios: Lista<Usuario>
  lockUsuarios: Lock
  
  productos: Lista<Producto>
  lockProductos: Lock
  
  pedidos: Lista<Pedido>
  lockPedidos: Lock
}

funcin agregarUsuario(sistema: SistemaFino, usuario: Usuario) {
  sistema.lockUsuarios.adquirir()  // Solo lock de usuarios
  
  sistema.usuarios.agregar(usuario)
  
  sistema.lockUsuarios.liberar()
}

funcin agregarProducto(sistema: SistemaFino, producto: Producto) {
  sistema.lockProductos.adquirir()  // Lock independiente
  
  sistema.productos.agregar(producto)
  
  sistema.lockProductos.liberar()
  // Puede ejecutarse concurrentemente con agregarUsuario()
}

// Lista Enlazada con Hand-over-hand Locking
estructura NodoFino<T> {
  valor: T
  siguiente: NodoFino<T> | null
  lock: Lock
}

funcin buscar(lista: ListaFina<T>, valor: T) -> booleano {
  pred = null
  curr = lista.cabeza
  
  lista.lockCabeza.adquirir()
  si curr != null:
    curr.lock.adquirir()
  
  mientras curr != null:
    si curr.valor == valor:
      curr.lock.liberar()
      si pred != null:
        pred.lock.liberar()
      lista.lockCabeza.liberar()
      retornar verdadero
    
    // Hand-over-hand: adquirir siguiente antes de liberar actual
    siguiente = curr.siguiente
    si siguiente != null:
      siguiente.lock.adquirir()
    
    si pred != null:
      pred.lock.liberar()
    
    pred = curr
    curr = siguiente
  
  si pred != null:
    pred.lock.liberar()
  lista.lockCabeza.liberar()
  
  retornar falso
}

// Hash Table con Lock por Bucket
estructura HashMapFino<K, V> {
  buckets: Arreglo<Lista<Entry<K,V>>>
  locks: Arreglo<Lock>
  numBuckets: entero
}

funcin put(mapa: HashMapFino<K, V>, clave: K, valor: V) {
  hash = hash(clave)
  bucketIdx = hash % mapa.numBuckets
  
  // Solo lock del bucket especfico
  mapa.locks[bucketIdx].adquirir()
  
  bucket = mapa.buckets[bucketIdx]
  para entry en bucket:
    si entry.clave == clave:
      entry.valor = valor
      mapa.locks[bucketIdx].liberar()
      retornar
  
  bucket.agregar(new Entry(clave, valor))
  mapa.locks[bucketIdx].liberar()
}

// Ventaja: Operaciones en diferentes buckets son concurrentes
// Mejora: Paralelismo proporcional al nmero de locks`})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Permite concurrencia en secciones independientes.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Mayor complejidad, cuidado con deadlocks."]})})]})}),e.jsx(me,{value:"lockfree",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:" Lock-free Algorithms"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Eliminar completamente los locks usando operaciones atmicas. Sin bloqueos = sin contencin."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Contador con Lock
estructura ContadorConLock {
  valor: entero
  lock: Lock
}

funcin incrementar(contador: ContadorConLock) {
  contador.lock.adquirir()  //  Serializa accesos
  
  contador.valor++
  
  contador.lock.liberar()
}
// Problema: Threads esperan innecesariamente

// Bien: Contador Lock-free
estructura ContadorLockFree {
  valor: AtomicInteger
}

funcin incrementar(contador: ContadorLockFree) {
  // Sin locks, operacin atmica
  incrementar_atomico(contador.valor)
}

// Stack Lock-free (Treiber Stack)
estructura NodoStack<T> {
  valor: T
  siguiente: AtomicReference<NodoStack<T>>
}

estructura StackLockFree<T> {
  cabeza: AtomicReference<NodoStack<T>>
}

funcin push(stack: StackLockFree<T>, valor: T) {
  nuevoNodo = new NodoStack(valor)
  
  loop:
    cabezaActual = cargar_atomico(stack.cabeza)
    nuevoNodo.siguiente = cabezaActual
    
    // Intenta actualizar cabeza atmicamente
    si compare_and_swap(stack.cabeza, cabezaActual, nuevoNodo):
      retornar  // xito sin bloqueos
    // Si falla, reintentar (sin esperar lock)
}

funcin pop(stack: StackLockFree<T>) -> T | null {
  loop:
    cabezaActual = cargar_atomico(stack.cabeza)
    
    si cabezaActual == null:
      retornar null
    
    siguiente = cabezaActual.siguiente
    
    si compare_and_swap(stack.cabeza, cabezaActual, siguiente):
      retornar cabezaActual.valor
    // Reintentar sin bloquear
}

// Queue Lock-free (Michael-Scott Queue)
estructura QueueLockFree<T> {
  cabeza: AtomicReference<Nodo<T>>
  cola: AtomicReference<Nodo<T>>
}

funcin enqueue(queue: QueueLockFree<T>, valor: T) {
  nuevoNodo = new Nodo(valor)
  nuevoNodo.siguiente = null
  
  loop:
    colaActual = cargar_atomico(queue.cola)
    siguienteActual = cargar_atomico(colaActual.siguiente)
    
    si colaActual == cargar_atomico(queue.cola):
      si siguienteActual == null:
        si compare_and_swap(colaActual.siguiente, null, nuevoNodo):
          compare_and_swap(queue.cola, colaActual, nuevoNodo)
          retornar
      sino:
        compare_and_swap(queue.cola, colaActual, siguienteActual)
}

funcin dequeue(queue: QueueLockFree<T>) -> T | null {
  loop:
    cabezaActual = cargar_atomico(queue.cabeza)
    colaActual = cargar_atomico(queue.cola)
    siguienteActual = cargar_atomico(cabezaActual.siguiente)
    
    si cabezaActual == cargar_atomico(queue.cabeza):
      si cabezaActual == colaActual:
        si siguienteActual == null:
          retornar null
        compare_and_swap(queue.cola, colaActual, siguienteActual)
      sino:
        valor = siguienteActual.valor
        si compare_and_swap(queue.cabeza, cabezaActual, siguienteActual):
          retornar valor
}

// Lista enlazada Lock-free (Harris Linked List)
funcin eliminar(lista: ListaLockFree<T>, valor: T) -> booleano {
  loop:
    (pred, curr) = buscar(lista, valor)
    
    si curr == null O curr.valor != valor:
      retornar falso
    
    // Marcar nodo para eliminacin (bit marking)
    siguiente = cargar_atomico(curr.siguiente)
    si est_marcado(siguiente):
      continue
    
    // Intentar marcar
    si compare_and_swap(curr.siguiente, siguiente, marcar(siguiente)):
      // Intentar desenlazar fsicamente
      compare_and_swap(pred.siguiente, curr, siguiente)
      retornar verdadero
}

// Ventajas:
// - Sin bloqueos = sin contencin
// - Sin deadlocks
// - Progreso garantizado del sistema
// - Escalabilidad en mltiples cores

// Desventajas:
// - Complejidad de implementacin
// - Problema ABA (requiere gestin de memoria especial)
// - Overhead de CAS en alta contencin`})}),e.jsx("div",{className:"mt-4 p-3 bg-green-900/30 border border-green-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Elimina bloqueos completamente, mximo paralelismo.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Complejidad, problema ABA, overhead de CAS."]})})]})}),e.jsx(me,{value:"nonblocking",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:" Non-blocking I/O"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Evitar bloqueos en operaciones de I/O usando event loops y callbacks asncronos."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: I/O Bloqueante
funcin servidorBloqueante() {
  socket = crearSocket()
  socket.bind(puerto)
  socket.listen()
  
  mientras verdadero:
    cliente = socket.accept()  //  BLOQUEA hasta nueva conexin
    datos = cliente.read()     //  BLOQUEA hasta recibir datos
    
    respuesta = procesarDatos(datos)
    
    cliente.write(respuesta)   //  BLOQUEA hasta enviar
    cliente.close()
}
// Problema: Un thread bloqueado por cliente (escalabilidad limitada)

// Bien: Non-blocking I/O con Event Loop
estructura EventLoop {
  selectores: Selector
  handlers: Mapa<Socket, Handler>
}

funcin servidorNoBlockeante() {
  eventLoop = new EventLoop()
  serverSocket = crearSocket()
  serverSocket.setNonBlocking(verdadero)
  serverSocket.bind(puerto)
  serverSocket.listen()
  
  eventLoop.registrar(serverSocket, LEER, onNuevaConexion)
  
  // Event loop (sin bloqueos)
  mientras verdadero:
    eventos = eventLoop.selectores.select(timeout: 0)  // No bloquea
    
    para evento en eventos:
      handler = eventLoop.handlers[evento.socket]
      handler(evento)
}

funcin onNuevaConexion(evento: Evento) {
  cliente = evento.socket.accept()
  cliente.setNonBlocking(verdadero)
  
  // Registrar para futuras lecturas
  eventLoop.registrar(cliente, LEER, onDatosRecibidos)
}

funcin onDatosRecibidos(evento: Evento) {
  cliente = evento.socket
  
  intentar:
    datos = cliente.read()
    
    si datos == EOF:
      eventLoop.desregistrar(cliente)
      cliente.close()
      retornar
    
    // Procesar sin bloquear
    procesarAsync(datos, funcin(respuesta) {
      // Registrar para escritura cuando est listo
      eventLoop.registrar(cliente, ESCRIBIR, onListoParaEscribir, respuesta)
    })
  
  capturar WouldBlock:
    // No hay datos an, seguir esperando
    pasar

funcin onListoParaEscribir(evento: Evento, respuesta: bytes) {
  cliente = evento.socket
  
  intentar:
    bytesEscritos = cliente.write(respuesta)
    
    si bytesEscritos == longitud(respuesta):
      // Escritura completa
      eventLoop.desregistrar(cliente, ESCRIBIR)
      eventLoop.registrar(cliente, LEER, onDatosRecibidos)
    sino:
      // Escritura parcial, continuar despus
      respuestaRestante = respuesta[bytesEscritos:]
      eventLoop.actualizar(cliente, ESCRIBIR, onListoParaEscribir, respuestaRestante)
  
  capturar WouldBlock:
    // Socket no listo, seguir esperando
    pasar

// Ejemplo Node.js style (callback-based)
funcin leerArchivoAsync(ruta: string, callback: (datos: bytes) -> void) {
  // Inicia operacin I/O en background
  operacionIO = iniciarLecturaAsync(ruta)
  
  // Registra callback (sin bloquear)
  operacionIO.onCompleted(funcin(datos) {
    callback(datos)
  })
  
  // Retorna inmediatamente
}

// Cliente HTTP no bloqueante
funcin fetchMultiple(urls: Lista<string>) -> Lista<Respuesta> {
  respuestas = []
  pendientes = longitud(urls)
  
  para url en urls:
    httpClienteAsync.get(url, funcin(respuesta) {
      respuestas.agregar(respuesta)
      pendientes--
      
      si pendientes == 0:
        procesarTodasRespuestas(respuestas)
    })
  
  // Retorna sin esperar (event loop maneja callbacks)
}

// Reactor Pattern (epoll/kqueue)
estructura Reactor {
  epoll: EPollDescriptor
  handlers: Mapa<fd, Handler>
}

funcin ejecutar(reactor: Reactor) {
  mientras verdadero:
    eventos = reactor.epoll.wait(timeout: -1)
    
    para evento en eventos:
      fd = evento.fileDescriptor
      handler = reactor.handlers[fd]
      
      si evento.tipo == EPOLL_IN:
        handler.onLeer(fd)
      sino si evento.tipo == EPOLL_OUT:
        handler.onEscribir(fd)
      sino si evento.tipo == EPOLL_ERR:
        handler.onError(fd)
}

// Ventajas:
// - Un solo thread maneja miles de conexiones
// - Sin overhead de context switch
// - Escalabilidad (C10K problem resuelto)
// - Memoria constante por conexin

// Casos de uso:
// - Servidores web (nginx, Node.js)
// - Bases de datos (Redis, memcached)
// - Proxies de alta performance`})}),e.jsx("div",{className:"mt-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Miles de conexiones con un solo thread.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Callback hell, complejidad de debugging."]})})]})}),e.jsx(me,{value:"threadpool",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400 mb-4",children:" Thread Pools"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Reutilizar threads para evitar overhead de creacin/destruccin constante."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Crear Thread por Tarea
funcin procesarTareaMal(tarea: Tarea) {
  thread = new Thread(funcin() {  //  Crea nuevo thread
    tarea.ejecutar()
  })
  thread.start()
  thread.join()  //  Espera bloquea
}
// Overhead: ~1-2ms por creacin thread, cientos de MB memoria

// Bien: Thread Pool
estructura ThreadPool {
  workers: Lista<Thread>
  colaTrabajos: Queue<Tarea>
  mutex: Lock
  condicion: ConditionVariable
  ejecutando: booleano
}

funcin crearThreadPool(numThreads: entero) -> ThreadPool {
  pool = new ThreadPool()
  pool.colaTrabajos = new Queue()
  pool.ejecutando = verdadero
  
  para i en 0 hasta numThreads:
    worker = new Thread(funcionWorker, pool)
    worker.start()
    pool.workers.agregar(worker)
  
  retornar pool
}

funcin funcionWorker(pool: ThreadPool) {
  mientras verdadero:
    pool.mutex.adquirir()
    
    // Esperar hasta que haya trabajo
    mientras pool.colaTrabajos.estaVacia() Y pool.ejecutando:
      pool.condicion.wait(pool.mutex)
    
    si no pool.ejecutando:
      pool.mutex.liberar()
      break
    
    tarea = pool.colaTrabajos.dequeue()
    pool.mutex.liberar()
    
    // Ejecutar sin lock
    tarea.ejecutar()
}

funcin submit(pool: ThreadPool, tarea: Tarea) {
  pool.mutex.adquirir()
  
  pool.colaTrabajos.enqueue(tarea)
  pool.condicion.signal()  // Despertar un worker
  
  pool.mutex.liberar()
}

funcin shutdown(pool: ThreadPool) {
  pool.mutex.adquirir()
  pool.ejecutando = falso
  pool.condicion.broadcast()  // Despertar todos
  pool.mutex.liberar()
  
  para worker en pool.workers:
    worker.join()
}

// Thread Pool con Futures
estructura Future<T> {
  valor: T | null
  completo: booleano
  mutex: Lock
  condicion: ConditionVariable
}

funcin submitConResultado(pool: ThreadPool, tarea: () -> T) -> Future<T> {
  future = new Future<T>()
  
  tareaWrapper = funcin() {
    resultado = tarea()
    
    future.mutex.adquirir()
    future.valor = resultado
    future.completo = verdadero
    future.condicion.broadcast()
    future.mutex.liberar()
  }
  
  submit(pool, tareaWrapper)
  retornar future
}

funcin get(future: Future<T>) -> T {
  future.mutex.adquirir()
  
  mientras no future.completo:
    future.condicion.wait(future.mutex)
  
  resultado = future.valor
  future.mutex.liberar()
  
  retornar resultado
}

// Work Stealing Thread Pool (Java ForkJoinPool style)
estructura WorkStealingPool {
  workers: Lista<Worker>
  colas: Lista<Deque<Tarea>>  // Una cola por worker
}

estructura Worker {
  id: entero
  cola: Deque<Tarea>
  pool: WorkStealingPool
}

funcin ejecutarWorker(worker: Worker) {
  mientras verdadero:
    // Intentar tarea de cola propia (extremo local)
    tarea = worker.cola.pollFirst()
    
    si tarea == null:
      // Intentar robar de otra cola (extremo remoto)
      tarea = intentarRobar(worker.pool, worker.id)
    
    si tarea != null:
      tarea.ejecutar()
    sino:
      dormir(1)  // No hay trabajo
}

funcin intentarRobar(pool: WorkStealingPool, idPropio: entero) -> Tarea | null {
  // Intentar robar de colas de otros workers
  para i en 0 hasta longitud(pool.colas):
    si i == idPropio:
      continue
    
    tarea = pool.colas[i].pollLast()  // Desde el otro extremo
    si tarea != null:
      retornar tarea
  
  retornar null
}

// Thread Pool con Prioridades
estructura ThreadPoolConPrioridades {
  workers: Lista<Thread>
  colaAlta: Queue<Tarea>
  colaMedia: Queue<Tarea>
  colaBaja: Queue<Tarea>
  mutex: Lock
  condicion: ConditionVariable
}

funcin obtenerSiguienteTarea(pool: ThreadPoolConPrioridades) -> Tarea | null {
  pool.mutex.adquirir()
  
  mientras todasColasVacias(pool):
    pool.condicion.wait(pool.mutex)
  
  tarea = null
  si no pool.colaAlta.estaVacia():
    tarea = pool.colaAlta.dequeue()
  sino si no pool.colaMedia.estaVacia():
    tarea = pool.colaMedia.dequeue()
  sino:
    tarea = pool.colaBaja.dequeue()
  
  pool.mutex.liberar()
  retornar tarea
}

// Ajuste dinmico de tamao
funcin ajustarTamao(pool: ThreadPool, carga: real) {
  si carga > 0.8 Y pool.numThreads < MAX_THREADS:
    // Alta carga: agregar workers
    agregarWorker(pool)
  sino si carga < 0.2 Y pool.numThreads > MIN_THREADS:
    // Baja carga: reducir workers
    removerWorker(pool)
}

// Ventajas:
// - Reutilizacin reduce overhead (100x ms rpido)
// - Memoria fija (no crece con tareas)
// - Control de concurrencia (lmite threads)

// Casos de uso:
// - Servidores (Tomcat, Apache)
// - Procesamiento paralelo
// - Tareas I/O bound`})}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-900/30 border border-yellow-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Reutilizacin, control de recursos.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Complejidad de tuning, posible starvation."]})})]})}),e.jsx(me,{value:"async",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-400 mb-4",children:" Async/Await Patterns"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Sintaxis sncrona para cdigo asncrono, evitando bloqueos con corutinas."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Cdigo Sncrono Bloqueante
funcin obtenerDatosUsuarioMal(userId: entero) -> Usuario {
  // Cada llamada BLOQUEA el thread
  usuario = db.query("SELECT * FROM users WHERE id = ?", userId)  //  Bloquea ~50ms
  pedidos = db.query("SELECT * FROM orders WHERE user_id = ?", userId)  //  Bloquea ~30ms
  perfil = http.get("https://api.com/profile/" + userId)  //  Bloquea ~200ms
  
  retornar combinar(usuario, pedidos, perfil)
}
// Total: ~280ms bloqueado, thread inactivo

// Bien: Async/Await (No Bloqueante)
async funcin obtenerDatosUsuario(userId: entero) -> Usuario {
  // Lanza 3 operaciones concurrentemente
  tareaUsuario = db.queryAsync("SELECT * FROM users WHERE id = ?", userId)
  tareaPedidos = db.queryAsync("SELECT * FROM orders WHERE user_id = ?", userId)
  tareaPerfil = http.getAsync("https://api.com/profile/" + userId)
  
  // Espera sin bloquear (thread hace otro trabajo)
  usuario = await tareaUsuario     // Retorna cuando completa
  pedidos = await tareaPedidos
  perfil = await tareaPerfil
  
  retornar combinar(usuario, pedidos, perfil)
}
// Total: ~200ms (paralelo), thread NO bloqueado

// Implementacin de Async/Await con Corutinas
estructura Corutina {
  estado: enum { CREADA, EJECUTANDO, SUSPENDIDA, COMPLETADA }
  pilaEjecucion: Pila
  punteroInstruccion: entero
  valorRetorno: any
}

funcin async_funcin(funcion: () -> T) -> Corutina {
  corutina = new Corutina()
  corutina.estado = CREADA
  corutina.pilaEjecucion = new Pila()
  
  retornar corutina
}

funcin await(corutina: Corutina, tarea: Tarea) -> T {
  si tarea.completa():
    retornar tarea.resultado()
  
  // Suspender corutina (sin bloquear thread)
  corutina.estado = SUSPENDIDA
  
  // Registrar callback para reanudar
  tarea.onCompleted(funcin(resultado) {
    corutina.valorRetorno = resultado
    corutina.estado = EJECUTANDO
    scheduler.encolar(corutina)  // Reanudar despus
  })
  
  // Ceder control (thread ejecuta otra cosa)
  scheduler.yield()
}

// Scheduler de Corutinas
estructura Scheduler {
  colaListas: Queue<Corutina>
  ejecutando: Corutina | null
}

funcin ejecutar(scheduler: Scheduler) {
  mientras verdadero:
    si scheduler.colaListas.estaVacia():
      // No hay trabajo, dormir o hacer I/O
      epoll.wait()
      continue
    
    corutina = scheduler.colaListas.dequeue()
    scheduler.ejecutando = corutina
    
    // Ejecutar hasta siguiente await
    ejecutarCorutina(corutina)
    
    si corutina.estado == COMPLETADA:
      // Liberar recursos
      liberarCorutina(corutina)
    sino si corutina.estado == SUSPENDIDA:
      // Esperando I/O, ya encolada para reanudar
      continue
}

// Async con mltiples tareas concurrentes
async funcin procesarMultiple(items: Lista<Item>) -> Lista<Resultado> {
  tareas = []
  
  para item en items:
    tarea = procesarItemAsync(item)
    tareas.agregar(tarea)
  
  // Espera todas concurrentemente
  resultados = await all(tareas)
  
  retornar resultados
}

funcin all(tareas: Lista<Tarea<T>>) -> Tarea<Lista<T>> {
  pendientes = longitud(tareas)
  resultados = new Lista<T>(longitud(tareas))
  tareaCompuesta = new Tarea<Lista<T>>()
  
  para i, tarea en enumerar(tareas):
    tarea.onCompleted(funcin(resultado) {
      resultados[i] = resultado
      pendientes--
      
      si pendientes == 0:
        tareaCompuesta.completar(resultados)
    })
  
  retornar tareaCompuesta
}

// Async con timeout
async funcin conTimeout(tarea: Tarea<T>, timeout: entero) -> T {
  temporizador = crearTemporizador(timeout)
  
  resultado = await race([tarea, temporizador])
  
  si resultado == TIMEOUT:
    lanzar TimeoutError()
  
  retornar resultado
}

// Generador asncrono
async funcin* leerArchivoPorLineas(archivo: string) {
  handle = await abrirAsync(archivo)
  
  mientras verdadero:
    linea = await handle.leerLineaAsync()
    
    si linea == EOF:
      break
    
    yield linea  // Retorna valor y suspende
  
  await handle.cerrarAsync()
}

// Uso de generador
async funcin procesarArchivo(ruta: string) {
  async para linea en leerArchivoPorLineas(ruta):
    await procesarLineaAsync(linea)
}

// Stream asncrono con backpressure
estructura StreamAsync<T> {
  buffer: Queue<T>
  capacidad: entero
  productorSuspendido: booleano
  consumidorEsperando: Promise | null
}

async funcin escribir(stream: StreamAsync<T>, item: T) {
  mientras stream.buffer.tamao() >= stream.capacidad:
    // Backpressure: esperar espacio
    await stream.espacioDisponible()
  
  stream.buffer.enqueue(item)
  
  si stream.consumidorEsperando != null:
    stream.consumidorEsperando.resolver(item)
}

async funcin leer(stream: StreamAsync<T>) -> T {
  si stream.buffer.estaVacia():
    // Esperar nuevo item
    item = await new Promise(funcin(resolve) {
      stream.consumidorEsperando = resolve
    })
    retornar item
  
  retornar stream.buffer.dequeue()
}

// Ventajas:
// - Sintaxis clara (parece cdigo sncrono)
// - Alto concurrency (miles de corutinas/thread)
// - Sin bloqueos (cooperative multitasking)
// - Memoria eficiente

// Casos de uso:
// - I/O intensivo (servidores web, APIs)
// - Pipelines de datos
// - Interfaces de usuario responsivas`})}),e.jsx("div",{className:"mt-4 p-3 bg-cyan-900/30 border border-cyan-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Sintaxis clara, alta concurrencia sin bloqueos.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Debugging complejo, propagacin de async."]})})]})}),e.jsx(me,{value:"scope",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:" Reducir Scope Crtico"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Minimizar el tiempo dentro de secciones crticas, moviendo trabajo fuera de los locks."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Scope Crtico Extenso
estructura Cache {
  datos: Mapa<string, Valor>
  lock: Lock
}

funcin obtenerOMal(cache: Cache, clave: string) -> Valor {
  cache.lock.adquirir()  //  Lock demasiado temprano
  
  // Trabajo que NO necesita lock (serializado innecesariamente)
  claveNormalizada = clave.toLower().trim()
  timestamp = obtenerTimestamp()
  
  si cache.datos.contiene(claveNormalizada):
    valor = cache.datos[claveNormalizada]
    
    // Clculo pesado dentro del lock 
    si timestamp - valor.timestamp < TTL:
      valorDeserializado = deserializar(valor.datos)  //  Lento
      valorProcesado = procesarValor(valorDeserializado)  //  Muy lento
      
      cache.lock.liberar()
      retornar valorProcesado
  
  // Query DB dentro del lock 
  valorDB = db.query(claveNormalizada)  //  50ms bloqueado
  valorSerializado = serializar(valorDB)  //  Lento
  
  cache.datos[claveNormalizada] = new CacheEntry(valorSerializado, timestamp)
  
  cache.lock.liberar()  //  Lock mantenido ~55ms
  retornar valorDB
}
// Problema: Lock retenido durante I/O y procesamiento (contencin alta)

// Bien: Scope Crtico Mnimo
funcin obtenerO(cache: Cache, clave: string) -> Valor {
  // Trabajo fuera del lock
  claveNormalizada = clave.toLower().trim()
  timestamp = obtenerTimestamp()
  
  // Lock solo para acceso al mapa
  cache.lock.adquirir()
  valorBruto = cache.datos[claveNormalizada]
  cache.lock.liberar()  //  Liberado rpido (~1s)
  
  si valorBruto != null:
    // Deserializacin fuera del lock
    valorDeserializado = deserializar(valorBruto.datos)
    
    si timestamp - valorBruto.timestamp < TTL:
      // Procesamiento fuera del lock
      retornar procesarValor(valorDeserializado)
  
  // Query DB sin lock
  valorDB = db.query(claveNormalizada)  // Sin bloquear otros
  valorSerializado = serializar(valorDB)
  
  // Lock solo para actualizar mapa
  cache.lock.adquirir()
  cache.datos[claveNormalizada] = new CacheEntry(valorSerializado, timestamp)
  cache.lock.liberar()  //  Liberado rpido (~1s)
  
  retornar valorDB
}

// Lista enlazada: insercin ordenada
funcin insertarOrdenadoMal(lista: Lista, valor: entero) {
  lista.lock.adquirir()  //  Lock todo el tiempo
  
  nodo = lista.cabeza
  
  // Bsqueda dentro del lock 
  mientras nodo != null Y nodo.valor < valor:
    nodo = nodo.siguiente
  
  // Creacin del nodo dentro del lock 
  nuevoNodo = new Nodo(valor)
  
  // Insercin
  nuevoNodo.siguiente = nodo
  // ... enlazar
  
  lista.lock.liberar()
}

funcin insertarOrdenado(lista: Lista, valor: entero) {
  // Crear nodo ANTES del lock
  nuevoNodo = new Nodo(valor)
  
  lista.lock.adquirir()
  
  nodo = lista.cabeza
  
  // Bsqueda e insercin (mnimo necesario)
  mientras nodo != null Y nodo.valor < valor:
    nodo = nodo.siguiente
  
  nuevoNodo.siguiente = nodo
  // ... enlazar
  
  lista.lock.liberar()  //  Scope reducido 50%
}

// Patrn: Copiar-Modificar-Actualizar
estructura ConfiguracionCompartida {
  datos: AtomicReference<Config>
}

funcin actualizarConfigMal(config: ConfiguracionCompartida, nuevos: Cambios) {
  lock.adquirir()  //  Bloquea lectores
  
  configActual = config.datos.cargar()
  
  // Modificacin lenta dentro del lock 
  para cambio en nuevos:
    aplicarCambio(configActual, cambio)
  
  validar(configActual)  //  Lento
  
  config.datos.almacenar(configActual)
  
  lock.liberar()
}

funcin actualizarConfig(config: ConfiguracionCompartida, nuevos: Cambios) {
  // Cargar sin lock (lectores no bloqueados)
  configActual = config.datos.cargar()
  
  // Clonar y modificar SIN lock
  configNueva = clonar(configActual)
  para cambio en nuevos:
    aplicarCambio(configNueva, cambio)
  
  validar(configNueva)
  
  // Solo CAS atmico (sin lock)
  compare_and_swap(config.datos, configActual, configNueva)
  //  Sin bloqueos, lectores siempre pueden leer
}

// Preparar trabajo antes del lock
funcin enviarMensajeMal(conexion: Conexion, mensaje: Mensaje) {
  conexion.lock.adquirir()  //  Lock temprano
  
  // Serializacin dentro del lock 
  bytes = mensaje.serializar()  // 5ms
  
  // Compresin dentro del lock 
  bytesComprimidos = comprimir(bytes)  // 10ms
  
  // Envo
  conexion.socket.enviar(bytesComprimidos)
  
  conexion.lock.liberar()  //  Retenido 15ms
}

funcin enviarMensaje(conexion: Conexion, mensaje: Mensaje) {
  // Preparar TODO fuera del lock
  bytes = mensaje.serializar()
  bytesComprimidos = comprimir(bytes)
  
  // Lock solo para envo por socket
  conexion.lock.adquirir()
  conexion.socket.enviar(bytesComprimidos)
  conexion.lock.liberar()  //  ~0.1ms
}

// Double-checked locking (evitar lock en caso comn)
estructura Singleton {
  instancia: AtomicReference<Objeto>
  lock: Lock
}

funcin obtenerInstancia(singleton: Singleton) -> Objeto {
  // Primera verificacin SIN lock (rpido)
  instancia = singleton.instancia.cargar()
  si instancia != null:
    retornar instancia
  
  // Caso raro: necesita inicializacin
  singleton.lock.adquirir()
  
  // Segunda verificacin CON lock
  instancia = singleton.instancia.cargar()
  si instancia != null:
    singleton.lock.liberar()
    retornar instancia
  
  // Crear instancia
  instancia = crearInstancia()
  singleton.instancia.almacenar(instancia)
  
  singleton.lock.liberar()
  retornar instancia
}

// Principios:
// 1. Lock lo ms tarde posible
// 2. Liberar lo ms temprano posible
// 3. Mover I/O fuera del lock
// 4. Mover cmputo pesado fuera del lock
// 5. Preparar datos antes del lock
// 6. Usar atomic operations para lecturas`})}),e.jsx("div",{className:"mt-4 p-3 bg-pink-900/30 border border-pink-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-pink-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Reduce contencin drsticamente (10-100x mejora).",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Requiere anlisis cuidadoso del cdigo."]})})]})}),e.jsx(me,{value:"lazy",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:" Lazy Initialization"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Inicializar recursos solo cuando se necesitan, evitando sincronizacin prematura."}),e.jsx("pre",{className:"bg-black rounded p-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm text-green-400",children:`// Mal: Inicializacin Eager (al inicio)
estructura SistemaMal {
  cache: Cache
  conexionDB: BaseDatos
  servicioExterno: Cliente
  logger: Logger
  metricas: Metricas
  // ... 20 componentes ms
}

funcin inicializarSistemaMal() -> SistemaMal {
  sistema = new SistemaMal()
  
  // Inicializa TODO al inicio (lento, puede no usarse)
  sistema.cache = new Cache(capacidad: 10000)  //  500ms
  sistema.conexionDB = conectarDB(config)      //  2s
  sistema.servicioExterno = new Cliente(url)   //  1s
  sistema.logger = new Logger(archivo)         //  200ms
  sistema.metricas = new Metricas(config)      //  300ms
  // ... ms inicializaciones 
  
  // Startup: 5+ segundos, incluso si no se usa todo
  retornar sistema
}

// Bien: Lazy Initialization
estructura Sistema {
  cache: Cache | null
  cacheLock: Lock
  
  conexionDB: BaseDatos | null
  dbLock: Lock
  
  // ... otros componentes
}

funcin obtenerCache(sistema: Sistema) -> Cache {
  // Double-checked locking
  si sistema.cache != null:
    retornar sistema.cache
  
  sistema.cacheLock.adquirir()
  
  si sistema.cache != null:
    sistema.cacheLock.liberar()
    retornar sistema.cache
  
  // Inicializar solo cuando se necesita
  sistema.cache = new Cache(capacidad: 10000)
  
  sistema.cacheLock.liberar()
  retornar sistema.cache
}

funcin obtenerDB(sistema: Sistema) -> BaseDatos {
  si sistema.conexionDB != null:
    retornar sistema.conexionDB
  
  sistema.dbLock.adquirir()
  
  si sistema.conexionDB != null:
    sistema.dbLock.liberar()
    retornar sistema.conexionDB
  
  sistema.conexionDB = conectarDB(config)
  
  sistema.dbLock.liberar()
  retornar sistema.conexionDB
}
// Ventaja: Startup ~10ms, componentes se crean solo cuando se usan

// Lazy con std::call_once (C++ style)
estructura RecursoLazy<T> {
  recurso: T | null
  bandera: AtomicFlag
}

funcin obtener(lazy: RecursoLazy<T>, inicializador: () -> T) -> T {
  si lazy.recurso != null:
    retornar lazy.recurso
  
  si atomic_flag_test_and_set(lazy.bandera) == falso:
    // Primera llamada: inicializar
    lazy.recurso = inicializador()
  sino:
    // Otro thread est inicializando, esperar
    mientras lazy.recurso == null:
      cpu_relax()
  
  retornar lazy.recurso
}

// Lazy con holder idiom (thread-safe en Java)
estructura SinClienteLazy {
  estructura Holder {
    constante INSTANCIA = new SinClient()
  }
  
  funcin obtenerInstancia() -> SinClient {
    retornar Holder.INSTANCIA
    // Inicializado solo cuando Holder se carga (thread-safe)
  }
}

// Lazy para colecciones
estructura CacheLazy<K, V> {
  datos: Mapa<K, V>
  fabricas: Mapa<K, () -> V>
  lock: Lock
}

funcin obtener(cache: CacheLazy<K, V>, clave: K) -> V {
  // Verificacin rpida
  cache.lock.adquirir()
  si cache.datos.contiene(clave):
    valor = cache.datos[clave]
    cache.lock.liberar()
    retornar valor
  cache.lock.liberar()
  
  // Crear valor (fuera del lock si es posible)
  fabrica = cache.fabricas[clave]
  valor = fabrica()
  
  // Almacenar
  cache.lock.adquirir()
  cache.datos[clave] = valor
  cache.lock.liberar()
  
  retornar valor
}

// Lazy con CompletableFuture (async)
estructura RecursoAsync<T> {
  promesa: AtomicReference<Future<T>>
}

async funcin obtenerAsync(recurso: RecursoAsync<T>, inicializador: async () -> T) -> T {
  future = recurso.promesa.cargar()
  
  si future != null:
    retornar await future
  
  // Iniciar inicializacin
  nuevaPromesa = inicializador()
  
  si compare_and_swap(recurso.promesa, null, nuevaPromesa):
    // Este thread gan, esperar resultado
    retornar await nuevaPromesa
  sino:
    // Otro thread gan, usar su promesa
    retornar await recurso.promesa.cargar()
}

// Lazy con expiracin (timed lazy)
estructura RecursoTimedLazy<T> {
  recurso: T | null
  timestampCreacion: entero
  ttl: entero
  lock: Lock
}

funcin obtener(lazy: RecursoTimedLazy<T>, fabrica: () -> T) -> T {
  ahora = obtenerTimestamp()
  
  lazy.lock.adquirir()
  
  si lazy.recurso != null Y (ahora - lazy.timestampCreacion < lazy.ttl):
    recurso = lazy.recurso
    lazy.lock.liberar()
    retornar recurso
  
  // Recrear si expir
  lazy.recurso = fabrica()
  lazy.timestampCreacion = ahora
  
  recurso = lazy.recurso
  lazy.lock.liberar()
  
  retornar recurso
}

// Thread-local lazy (sin sincronizacin)
estructura ThreadLocalLazy<T> {
  threadLocals: Mapa<ThreadID, T>
  fabrica: () -> T
}

funcin obtenerLocal(lazy: ThreadLocalLazy<T>) -> T {
  tid = obtenerThreadID()
  
  // Sin lock: cada thread su propia copia
  si no lazy.threadLocals.contiene(tid):
    lazy.threadLocals[tid] = lazy.fabrica()
  
  retornar lazy.threadLocals[tid]
}

// Patrn: Lazy con precondiciones
estructura ConexionPoolLazy {
  pool: ConexionPool | null
  config: Config
  lock: Lock
}

funcin obtenerConexion(poolLazy: ConexionPoolLazy) -> Conexion {
  poolLazy.lock.adquirir()
  
  si poolLazy.pool == null:
    // Validar config antes de inicializar
    validarConfiguracion(poolLazy.config)
    
    // Inicializar pool
    poolLazy.pool = new ConexionPool(poolLazy.config)
    
    // Warm-up inicial
    para i en 0 hasta poolLazy.config.minConexiones:
      poolLazy.pool.agregarConexion()
  
  pool = poolLazy.pool
  poolLazy.lock.liberar()
  
  retornar pool.obtenerConexion()
}

// Ventajas:
// - Startup rpido (inicializacin bajo demanda)
// - Menor uso de memoria (recursos no usados no se crean)
// - Evita trabajo innecesario
// - Reduce locks al inicio (menos contencin)

// Casos de uso:
// - Singletons
// - Conexiones DB/Red
// - Cachs grandes
// - Recursos costosos
// - Plugins/Mdulos opcionales`})}),e.jsx("div",{className:"mt-4 p-3 bg-orange-900/30 border border-orange-700/50 rounded",children:e.jsxs("p",{className:"text-sm text-orange-200",children:[e.jsx("span",{className:"font-bold",children:"Ventaja:"})," Startup rpido, recursos solo cuando se usan.",e.jsx("span",{className:"font-bold",children:" Desventaja:"})," Primera llamada ms lenta, complejidad en thread-safety."]})})]})})]})})]}),e.jsxs(sa,{value:"demostracion",className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx(ra,{className:"text-xl font-bold text-white hover:no-underline px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"demo-fine",className:"px-6 pb-6",children:[e.jsxs(Qt,{className:"grid grid-cols-7 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"demo-fine",children:" Fine-grained"}),e.jsx(ce,{value:"demo-lockfree",children:" Lock-free"}),e.jsx(ce,{value:"demo-io",children:" Non-blocking"}),e.jsx(ce,{value:"demo-pool",children:" Pool"}),e.jsx(ce,{value:"demo-async",children:" Async"}),e.jsx(ce,{value:"demo-scope",children:" Scope"}),e.jsx(ce,{value:"demo-lazy",children:" Lazy"})]}),e.jsx(me,{value:"demo-fine",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400",children:"Demo: Fine-grained Locking"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>l(!n),className:`px-4 py-2 rounded flex items-center gap-2 ${n?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[n?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),n?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:pa,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",d,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",h,"ms"]}),e.jsx(dt,{value:[h],onValueChange:([Y])=>x(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Threads"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="working"?"bg-blue-900/50 border-blue-500":Y.status==="blocked"?"bg-red-900/50 border-red-500 animate-pulse":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["T",Y.id]}),e.jsx("div",{className:"text-sm font-bold",children:Y.status==="idle"?"":Y.status==="blocked"?"":""}),e.jsx("div",{className:"text-xs",children:Y.lockHeld?"":""})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Secciones (Locks Independientes)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.map((Y,Se)=>e.jsx("div",{className:`p-3 rounded border-2 ${Y?"bg-red-900/50 border-red-500":"bg-green-900/50 border-green-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Seccin ",Se]}),e.jsx("div",{className:"text-2xl",children:Y?"":""})]})},Se))}),e.jsxs("div",{className:"mt-3 p-2 bg-gray-800 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Threads Bloqueados"}),e.jsx("div",{className:"text-lg font-bold text-red-400",children:v})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:_,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-green-400",children:N.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})}),e.jsx(me,{value:"demo-lockfree",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400",children:"Demo: Lock-free Algorithms"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>D(!E),className:`px-4 py-2 rounded flex items-center gap-2 ${E?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:[E?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),E?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:je,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",L,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",J,"ms"]}),e.jsx(dt,{value:[J],onValueChange:([Y])=>ie(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Workers"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="working"?"bg-green-900/50 border-green-500":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["W",Y.id]}),e.jsx("div",{className:"text-2xl",children:Y.status==="working"?"":""})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Mtricas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Operaciones CAS"}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:I})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Reintentos"}),e.jsx("div",{className:"text-lg font-bold text-yellow-400",children:be})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estado"}),e.jsxs("div",{className:"p-4 bg-green-900/30 border border-green-700/50 rounded text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("div",{className:"text-sm text-green-300",children:"Sin Locks"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Operaciones atmicas CAS"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:Ce,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-green-400",children:G.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})}),e.jsx(me,{value:"demo-io",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400",children:"Demo: Non-blocking I/O"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>Q(!P),className:`px-4 py-2 rounded flex items-center gap-2 ${P?"bg-red-600 hover:bg-red-700":"bg-purple-600 hover:bg-purple-700"}`,children:[P?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),P?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:He,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",F,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",qe,"ms"]}),e.jsx(dt,{value:[qe],onValueChange:([Y])=>T(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Event Loop Workers"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ke.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="working"?"bg-purple-900/50 border-purple-500":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["W",Y.id]}),e.jsx("div",{className:"text-2xl",children:Y.status==="working"?"":""})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Requests Pendientes"}),e.jsx("div",{className:"p-4 bg-gray-800 rounded h-32 overflow-y-auto",children:W.length===0?e.jsx("div",{className:"text-center text-gray-500 text-xs",children:"Sin requests pendientes"}):W.map(Y=>e.jsxs("div",{className:"text-xs text-purple-400 mb-1",children:[" Request #",Math.floor(Y%1e3)]},Y))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estadsticas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Pendientes"}),e.jsx("div",{className:"text-lg font-bold text-purple-400",children:W.length})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Completados"}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:A})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:q,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-purple-400",children:M.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})}),e.jsx(me,{value:"demo-pool",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-yellow-400",children:"Demo: Thread Pool"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>z(!Z),className:`px-4 py-2 rounded flex items-center gap-2 ${Z?"bg-red-600 hover:bg-red-700":"bg-yellow-600 hover:bg-yellow-700"}`,children:[Z?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),Z?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:ht,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",Oe,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",ae,"ms"]}),e.jsx(dt,{value:[ae],onValueChange:([Y])=>se(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Workers del Pool"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:$.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="working"?"bg-yellow-900/50 border-yellow-500":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Worker ",Y.id]}),e.jsx("div",{className:"text-xl",children:Y.status==="working"?"":""}),Y.task&&e.jsxs("div",{className:"text-xs text-yellow-400 mt-1",children:["Task #",Math.floor(Y.task%100)]})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Cola de Tareas"}),e.jsx("div",{className:"p-4 bg-gray-800 rounded h-32 overflow-y-auto",children:rt.length===0?e.jsx("div",{className:"text-center text-gray-500 text-xs",children:"Cola vaca"}):rt.map(Y=>e.jsxs("div",{className:"text-xs text-yellow-400 mb-1",children:[" ",Y.type," Task"]},Y.id))}),e.jsxs("div",{className:"mt-2 text-center text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Tareas en cola:"})," ",e.jsx("span",{className:"font-bold text-yellow-400",children:rt.length})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estadsticas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Tareas Completadas"}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:fe})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Workers Activos"}),e.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:[$.filter(Y=>Y.status==="working").length,"/4"]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:ze,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-yellow-400",children:De.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})}),e.jsx(me,{value:"demo-async",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-400",children:"Demo: Async/Await Patterns"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>xt(!We),className:`px-4 py-2 rounded flex items-center gap-2 ${We?"bg-red-600 hover:bg-red-700":"bg-cyan-600 hover:bg-cyan-700"}`,children:[We?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),We?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:Lt,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",Ot,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",Ue,"ms"]}),e.jsx(dt,{value:[Ue],onValueChange:([Y])=>kt(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Async Tasks en Ejecucin"}),e.jsx("div",{className:"space-y-2",children:_e.length===0?e.jsx("div",{className:"text-center text-gray-500 text-sm p-8",children:"Sin tasks activas"}):_e.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="executing"?"bg-cyan-900/50 border-cyan-500":"bg-green-900/50 border-green-500"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["Task #",Math.floor(Y.id%1e3)]}),e.jsx("span",{className:"ml-3 text-sm",children:Y.status==="executing"?" Ejecutando":" Completada"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Duracin: ",Y.duration,"s"]})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Mtricas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Tasks Activas"}),e.jsx("div",{className:"text-lg font-bold text-cyan-400",children:et})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Completadas"}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:ne})]}),e.jsxs("div",{className:"p-4 bg-cyan-900/30 border border-cyan-700/50 rounded text-center mt-4",children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:"text-xs text-cyan-300",children:"Concurrencia sin bloqueos"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:_t,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-cyan-400",children:de.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})}),e.jsx(me,{value:"demo-scope",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-pink-400",children:"Demo: Reducir Scope Crtico"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>ft(!Ye),className:`px-4 py-2 rounded flex items-center gap-2 ${Ye?"bg-red-600 hover:bg-red-700":"bg-pink-600 hover:bg-pink-700"}`,children:[Ye?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),Ye?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:ut,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",Ct,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",gt,"ms"]}),e.jsx(dt,{value:[gt],onValueChange:([Y])=>Fe(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Threads"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:St.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="working"?"bg-pink-900/50 border-pink-500":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["T",Y.id]}),e.jsx("div",{className:"text-xl",children:Y.status==="working"?"":""}),Y.lockHeld&&e.jsx("div",{className:"text-lg mt-1",children:""})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Tiempo en Lock"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Total Acumulado"}),e.jsxs("div",{className:"text-lg font-bold text-pink-400",children:[B,"ms"]})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Promedio por Op"}),e.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:[Dt.toFixed(1),"ms"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estrategia"}),e.jsx("div",{className:"p-4 bg-pink-900/30 border border-pink-700/50 rounded",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("div",{className:"text-xs text-pink-300",children:"Scope Mnimo"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Preparar fuera, lock solo para actualizar"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:Zt,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-pink-400",children:ge.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})}),e.jsx(me,{value:"demo-lazy",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400",children:"Demo: Lazy Initialization"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>Be(!lt),className:`px-4 py-2 rounded flex items-center gap-2 ${lt?"bg-red-600 hover:bg-red-700":"bg-orange-600 hover:bg-orange-700"}`,children:[lt?e.jsx(ct,{className:"size-4"}):e.jsx(nt,{className:"size-4"}),lt?"Pausar":"Iniciar"]}),e.jsxs("button",{onClick:at,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded flex items-center gap-2",children:[e.jsx(it,{className:"size-4"}),"Reiniciar"]}),e.jsxs("span",{className:"text-gray-400",children:["Tiempo: ",Pe,"s"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm text-gray-400 mb-2 block",children:["Velocidad: ",ot,"ms"]}),e.jsx(dt,{value:[ot],onValueChange:([Y])=>X(Y),min:100,max:1e3,step:50,className:"w-64"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Workers"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:pt.map(Y=>e.jsx("div",{className:`p-3 rounded border-2 ${Y.status==="working"?"bg-orange-900/50 border-orange-500":Y.status==="waiting"?"bg-yellow-900/50 border-yellow-500 animate-pulse":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["W",Y.id]}),e.jsx("div",{className:"text-xl",children:Y.status==="waiting"?"":Y.status==="working"?"":""})]})},Y.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Recursos"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ie.map((Y,Se)=>e.jsx("div",{className:`p-3 rounded border-2 ${Y?"bg-green-900/50 border-green-500":"bg-gray-800 border-gray-600"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Recurso ",Se]}),e.jsx("div",{className:"text-2xl",children:Y?"":""}),e.jsx("div",{className:"text-xs text-gray-400",children:Y?"Inicializado":"Lazy"})]})},Se))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-3",children:"Estadsticas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Total Accesos"}),e.jsx("div",{className:"text-lg font-bold text-orange-400",children:Rt})]}),e.jsxs("div",{className:"p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Inicializados"}),e.jsxs("div",{className:"text-lg font-bold text-green-400",children:[Ie.filter(Y=>Y).length,"/4"]})]}),e.jsxs("div",{className:"p-4 bg-orange-900/30 border border-orange-700/50 rounded text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:""}),e.jsx("div",{className:"text-xs text-orange-300",children:"Init on-demand"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Log de Eventos"}),e.jsx("div",{ref:Jt,className:"bg-black rounded p-3 h-48 overflow-y-auto font-mono text-xs text-orange-400",children:$e.map((Y,Se)=>e.jsx("div",{children:Y},Se))})]})]})})]})})]})]})})]})}const d2=Sa("/ActividadesSeminarioSO/actividad11/bloqueos-innecesarios")({component:c2});function u2(){const[s,i]=c.useState(!1),[n,l]=c.useState(1e3),[d,m]=c.useState({nodes:[{id:"A",value:"A",version:0,next:"B"},{id:"B",value:"B",version:0,next:"C"},{id:"C",value:"C",version:0,next:null}],head:"A",version:0}),[h,x]=c.useState([" Stack inicializado: A(v0)  B(v0)  C(v0)"]),[,g]=c.useState(0),[b,v]=c.useState(!1),[f,N]=c.useState(1e3),[j,_]=c.useState({nodes:[{id:"A",value:"A",next:"B"},{id:"B",value:"B",next:"C"},{id:"C",value:"C",next:null}],head:"A",version:0}),[w,C]=c.useState([]),[E,D]=c.useState([]),[L,V]=c.useState([" Sistema de Hazard Pointers inicializado"]),[,J]=c.useState(0),[ie,I]=c.useState(!1),[k,be]=c.useState(1e3),[te,G]=c.useState({nodes:[{id:"A",value:"A",version:0,next:"B"},{id:"B",value:"B",version:0,next:null}],head:"A",version:0}),[oe,Ce]=c.useState({pointer1:null,version1:0,pointer2:null,version2:0}),[ke,Ee]=c.useState([" Sistema DCAS (128-bit CAS) inicializado"]),[,P]=c.useState(0),[Q,F]=c.useState(!1),[ue,qe]=c.useState(1e3),[T,W]=c.useState({nodes:[{id:"A",value:"A",next:"B"},{id:"B",value:"B",next:"C"},{id:"C",value:"C",next:null}],head:"A",version:0}),[re,A]=c.useState(0),[K,M]=c.useState([0,0]),[O,q]=c.useState(new Map),[$,ve]=c.useState([" Epoch-Based Reclamation inicializado (epoch 0)"]),[,Z]=c.useState(0),[z,Oe]=c.useState(!1),[Re,ae]=c.useState(1e3),[se,rt]=c.useState({nodes:[{id:"A",value:"A",next:"B"},{id:"B",value:"B",next:"C"},{id:"C",value:"C",next:null}],head:"A",version:0}),[jt,fe]=c.useState({active:!1,address:null,value:null}),[Me,De]=c.useState([" Sistema LL/SC inicializado"]),[,Ge]=c.useState(0),ze=c.useRef(null),_e=c.useRef(null),Xe=c.useRef(null),We=c.useRef(null),xt=c.useRef(null);c.useEffect(()=>{ze.current&&(ze.current.scrollTop=ze.current.scrollHeight)},[h]),c.useEffect(()=>{_e.current&&(_e.current.scrollTop=_e.current.scrollHeight)},[L]),c.useEffect(()=>{Xe.current&&(Xe.current.scrollTop=Xe.current.scrollHeight)},[ke]),c.useEffect(()=>{We.current&&(We.current.scrollTop=We.current.scrollHeight)},[$]),c.useEffect(()=>{xt.current&&(xt.current.scrollTop=xt.current.scrollHeight)},[Me]),c.useEffect(()=>{if(!s)return;const R=setInterval(()=>{g(ne=>{const Ve=ne+1;return Ve===1?x(de=>[...de," Thread 1: Inicia pop() - lee head = A(v0)"]):Ve===2?(x(de=>[...de," Thread 2: pop() exitoso - A(v0)  B(v1)"]),m(de=>({...de,head:"B",version:1,nodes:de.nodes.map(we=>we.id==="B"?{...we,version:1}:we)}))):Ve===3?(x(de=>[...de," Thread 2: pop() exitoso - B(v1)  C(v2)"]),m(de=>({...de,head:"C",version:2,nodes:de.nodes.map(we=>we.id==="C"?{...we,version:2}:we)}))):Ve===4?(x(de=>[...de," Thread 2: push(A) exitoso - C(v2)  A(v3)"]),m(de=>({...de,head:"A",version:3,nodes:[{id:"A",value:"A",version:3,next:"C"},...de.nodes.filter(we=>we.id!=="A")]}))):Ve===5?x(de=>[...de," Head es A nuevamente, pero versin cambi: v0  v3"]):Ve===6?x(de=>[...de," Thread 1: Intenta CAS(A, v0)  (B, v1)"]):Ve===7&&(x(de=>[...de," CAS FALLA: expected=(A, v0) != actual=(A, v3)"," ABA DETECTADO: versioning previno corrupcin"]),i(!1)),Ve})},n);return()=>clearInterval(R)},[s,n]),c.useEffect(()=>{if(!b)return;const R=setInterval(()=>{J(ne=>{const Ve=ne+1;return Ve===1?(V(de=>[...de," Thread 1: acquire() hazard pointer"]),C(["A"])):Ve===2?V(de=>[...de," Thread 1: protect(head)  HP[0] = A"]):Ve===3?V(de=>[...de," Thread 2: pop() - intenta remover A"]):Ve===4?(V(de=>[...de," Thread 2: CAS exitoso, A removido del stack"]),_(de=>({...de,head:"B"}))):Ve===5?(V(de=>[...de," Thread 2: retire(A) - agregado a retire list"]),D(["A"])):Ve===6?V(de=>[...de," Thread 2: scan() - verifica hazard pointers"]):Ve===7?V(de=>[...de," A est protegido por HP[0], NO se puede liberar"," Hazard pointer previene use-after-free"]):Ve===8?(V(de=>[...de," Thread 1: release(HP[0]) - A ya no est protegido"]),C([])):Ve===9?V(de=>[...de," Thread 2: scan() nuevamente"]):Ve===10&&(V(de=>[...de," A no est protegido, se puede liberar: free(A)"]),D([]),_(de=>({...de,nodes:de.nodes.filter(we=>we.id!=="A")})),v(!1)),Ve})},f);return()=>clearInterval(R)},[b,f]),c.useEffect(()=>{if(!ie)return;const R=setInterval(()=>{P(ne=>{const Ve=ne+1;return Ve===1?(Ee(de=>[...de," Thread 1: Inicia pop() - lee (pointer=A, version=0)"]),Ce({pointer1:"A",version1:0,pointer2:"B",version2:1})):Ve===2?(Ee(de=>[...de," Thread 2: DCAS exitoso - (A,v0)  (B,v1)"]),G(de=>({...de,head:"B",version:1}))):Ve===3?(Ee(de=>[...de," Thread 2: DCAS exitoso - (B,v1)  (null,v2)"]),G(de=>({...de,head:null,version:2}))):Ve===4?(Ee(de=>[...de," Thread 2: push(A) - DCAS exitoso (null,v2)  (A,v3)"]),G(de=>({...de,head:"A",version:3,nodes:[{id:"A",value:"A",version:3,next:null}]}))):Ve===5?Ee(de=>[...de," Puntero volvi a A, pero versin: v0  v3"]):Ve===6?Ee(de=>[...de," Thread 1: DCAS intenta (A,v0)  (B,v1)"]):Ve===7&&(Ee(de=>[...de," DCAS FALLA: (pointer,version) no coinciden","   Expected: (A, 0)","   Actual:   (A, 3)"," DCAS detect cambio intermedio"]),Ce({pointer1:null,version1:0,pointer2:null,version2:0}),I(!1)),Ve})},k);return()=>clearInterval(R)},[ie,k]),c.useEffect(()=>{if(!Q)return;const R=setInterval(()=>{Z(ne=>{const Ve=ne+1;return Ve===1?(ve(de=>[...de," Thread 1: enterEpoch() - thread epoch = 0"]),M([0,-1])):Ve===2?ve(de=>[...de," Thread 1: pop() en progreso..."]):Ve===3?(ve(de=>[...de," Thread 2: enterEpoch() - thread epoch = 0"]),M([0,0])):Ve===4?(ve(de=>[...de," Thread 2: pop(A) exitoso - retire(A) en epoch 0"]),W(de=>({...de,head:"B"})),q(new Map([[0,["A"]]]))):Ve===5?(ve(de=>[...de," Thread 2: exitEpoch() - thread epoch = -1"]),M([0,-1])):Ve===6?(ve(de=>[...de," Thread 1: exitEpoch() - thread epoch = -1"]),M([-1,-1])):Ve===7?ve(de=>[...de," Todos los threads salieron del epoch 0"]):Ve===8?(ve(de=>[...de," Avanzar global epoch: 0  1"]),A(1)):Ve===9&&(ve(de=>[...de," Liberar nodos del epoch 0: free(A)"," Safe: ningn thread est en epoch 0"]),q(new Map),W(de=>({...de,nodes:de.nodes.filter(we=>we.id!=="A")})),F(!1)),Ve})},ue);return()=>clearInterval(R)},[Q,ue]),c.useEffect(()=>{if(!z)return;const R=setInterval(()=>{Ge(ne=>{const Ve=ne+1;return Ve===1?(De(de=>[...de," Thread 1: LL(&head) - lee A, activa link register"]),fe({active:!0,address:"head",value:"A"})):Ve===2?De(de=>[...de," Thread 2: pop(A) - escribe en head"]):Ve===3?(De(de=>[...de," Thread 2: head = A  B (ESCRITURA detectada por HW)"]),rt(de=>({...de,head:"B"})),fe(de=>({...de,active:!1}))):Ve===4?De(de=>[...de," Thread 2: pop(B), luego push(A)"]):Ve===5?(De(de=>[...de," Thread 2: head = B  C"]),rt(de=>({...de,head:"C"}))):Ve===6?(De(de=>[...de," Thread 2: push(A)  head = C  A"]),rt(de=>({...de,head:"A",nodes:[{id:"A",value:"A",next:"C"},...de.nodes.filter(we=>we.id!=="A")]}))):Ve===7?De(de=>[...de," Head volvi a A (ABA ocurri)"]):Ve===8?De(de=>[...de," Thread 1: SC(&head, B) - intenta escribir"]):Ve===9&&(De(de=>[...de," SC FALLA: link register inactivo","   Hardware detect escritura intermedia"," LL/SC detect ABA automticamente"]),Oe(!1)),Ve})},Re);return()=>clearInterval(R)},[z,Re]);const Ot=()=>{i(!1),g(0),m({nodes:[{id:"A",value:"A",version:0,next:"B"},{id:"B",value:"B",version:0,next:"C"},{id:"C",value:"C",version:0,next:null}],head:"A",version:0}),x([" Stack reinicializado: A(v0)  B(v0)  C(v0)"])},It=()=>{v(!1),J(0),_({nodes:[{id:"A",value:"A",next:"B"},{id:"B",value:"B",next:"C"},{id:"C",value:"C",next:null}],head:"A",version:0}),C([]),D([]),V([" Sistema reinicializado"])},Ue=()=>{I(!1),P(0),G({nodes:[{id:"A",value:"A",version:0,next:"B"},{id:"B",value:"B",version:0,next:null}],head:"A",version:0}),Ce({pointer1:null,version1:0,pointer2:null,version2:0}),Ee([" Sistema DCAS reinicializado"])},kt=()=>{F(!1),Z(0),W({nodes:[{id:"A",value:"A",next:"B"},{id:"B",value:"B",next:"C"},{id:"C",value:"C",next:null}],head:"A",version:0}),A(0),M([0,0]),q(new Map),ve([" Sistema EBR reinicializado (epoch 0)"])},et=()=>{Oe(!1),Ge(0),rt({nodes:[{id:"A",value:"A",next:"B"},{id:"B",value:"B",next:"C"},{id:"C",value:"C",next:null}],head:"A",version:0}),fe({active:!1,address:null,value:null}),De([" Sistema LL/SC reinicializado"])};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-900/50 to-red-900/50 border-b border-orange-700/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(yn,{className:"size-8 text-orange-400"}),e.jsx("h1",{className:"text-4xl font-bold",children:"ABA Problem"})]}),e.jsxs("p",{className:"text-lg text-gray-300 leading-relaxed",children:["El ",e.jsx("span",{className:"text-orange-400 font-semibold",children:"problema ABA"})," ocurre en programacin concurrente lock-free cuando un valor cambia de A  B  A, y un thread usando CAS (Compare-And-Swap) no detecta que el valor intermedio B existi, asumiendo incorrectamente que nada ha cambiado."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-orange-900/30 border border-orange-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-orange-300 mb-2",children:" Problema"}),e.jsx("p",{className:"text-sm text-gray-300",children:"CAS(expected: A, new: C) puede tener xito incluso si el valor pas por B, causando corrupcin de memoria, use-after-free, o estados inconsistentes en estructuras de datos."})]}),e.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-red-300 mb-2",children:" Soluciones"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Versioning/tagging, hazard pointers, DCAS, garbage collection, o instrucciones LL/SC que detectan cualquier cambio intermedio en la memoria."})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs(Da,{type:"multiple",defaultValue:["pseudocodigos","demos"],className:"space-y-4",children:[e.jsxs(sa,{value:"pseudocodigos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oa,{className:"size-5"}),e.jsx("span",{children:"Pseudocdigos de las Soluciones"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"ps-versioning",className:"px-6 pb-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs(Qt,{className:"grid grid-cols-5 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"ps-versioning",children:" Versioning"}),e.jsx(ce,{value:"ps-hazard",children:" Hazard"}),e.jsx(ce,{value:"ps-dcas",children:" DCAS"}),e.jsx(ce,{value:"ps-gc",children:" GC"}),e.jsx(ce,{value:"ps-llsc",children:" LL/SC"})]})}),e.jsx(me,{value:"ps-versioning",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:" Versioning / Tagged Pointers"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"1. Tagged Pointer Bsico"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Empaquetar puntero + versin en un solo valor atmico

estructura TaggedPointer<T> {
  pointer: T*              // Puntero real (48-52 bits)
  version: entero          // Versin/tag (12-16 bits)
}

// Empaquetar en un entero de 64 bits
funcin pack(ptr: T*, version: entero) -> uint64 {
  // Asumir que punteros usan 48 bits (arquitecturas x86-64)
  // Los 16 bits superiores se usan para versin
  ptrBits = (uint64)ptr & 0x0000FFFFFFFFFFFF
  versionBits = ((uint64)version & 0xFFFF) << 48
  retornar ptrBits | versionBits
}

// Desempaquetar
funcin unpack(tagged: uint64) -> (T*, entero) {
  ptr = (T*)(tagged & 0x0000FFFFFFFFFFFF)
  version = (entero)((tagged >> 48) & 0xFFFF)
  retornar (ptr, version)
}

// Uso con CAS
funcin compareAndSwap(location: Atomic<uint64>, 
                      expected: TaggedPointer<T>,
                      newPtr: T*) -> booleano {
  
  expectedPacked = pack(expected.pointer, expected.version)
  newVersion = expected.version + 1  // INCREMENTAR versin
  newPacked = pack(newPtr, newVersion)
  
  retornar location.compareAndSwap(expectedPacked, newPacked)
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"2. Lock-Free Stack con Versioning"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura Node<T> {
  value: T
  next: Node<T>*
}

estructura VersionedStack<T> {
  head: Atomic<uint64>  // Empaqueta (Node*, version)
}

funcin push(stack: VersionedStack<T>, value: T) {
  newNode = allocate(Node<T>)
  newNode.value = value
  
  mientras true:
    // Leer head actual
    currentPacked = stack.head.load()
    (currentHead, currentVersion) = unpack(currentPacked)
    
    // Preparar nuevo nodo
    newNode.next = currentHead
    
    // CAS con versin incrementada
    expectedPacked = currentPacked
    newVersion = currentVersion + 1
    newPacked = pack(newNode, newVersion)
    
    si stack.head.compareAndSwap(expectedPacked, newPacked):
      retornar  // xito
    
    // Fallo: otro thread modific head, reintentar
}

funcin pop(stack: VersionedStack<T>) -> T {
  mientras true:
    currentPacked = stack.head.load()
    (currentHead, currentVersion) = unpack(currentPacked)
    
    si currentHead == null:
      throw EmptyStackException()
    
    // Leer siguiente nodo
    nextNode = currentHead.next
    
    // CAS con versin incrementada
    expectedPacked = currentPacked
    newVersion = currentVersion + 1
    newPacked = pack(nextNode, newVersion)
    
    si stack.head.compareAndSwap(expectedPacked, newPacked):
      value = currentHead.value
      // PROBLEMA: Cundo liberar currentHead?
      // Solucin: combinar con hazard pointers o GC
      retornar value
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"3. Escenario ABA Resuelto"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Ejemplo: Stack con 3 nodos ABC

// Estado inicial: head = (A, version: 0)
head = pack(A, 0)

// Thread 1: pop() - lee (A, 0)
T1_expected = (A, 0)
T1_new = (B, 1)  // Quiere avanzar a B con versin 1

// Thread 2: pop() dos veces, luego push(A)
T2_pop1 = (A, 0)  (B, 1)    // Version incrementada a 1
T2_pop2 = (B, 1)  (C, 2)    // Version incrementada a 2
T2_push = (C, 2)  (A, 3)    // Version incrementada a 3

// Head ahora: (A, 3)  DIFERENTE versin!

// Thread 1: intenta CAS con (A, 0)  (B, 1)
expected = pack(A, 0)
actual = pack(A, 3)
// CAS FALLA porque 0 != 3, aunque puntero sea A

//  ABA DETECTADO: versin previene corrupcin`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"4. Double-Width CAS (128-bit)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// En sistemas de 64-bit, usar CAS de 128-bit

estructura DoubleWord {
  pointer: uint64    // Puntero completo de 64-bit
  version: uint64    // Versin completa de 64-bit
}

// x86-64: CMPXCHG16B
funcin DCAS(location: Atomic<DoubleWord>,
             expected: DoubleWord,
             new: DoubleWord) -> booleano {
  
  // Atomic compare-and-swap de 128 bits
  retornar compareAndSwap128(
    location,
    expected.pointer, expected.version,
    new.pointer, new.version
  )
}

funcin push128(stack: VersionedStack, value: T) {
  newNode = allocate(Node)
  newNode.value = value
  
  mientras true:
    current = stack.head.load()  // Load 128-bit
    newNode.next = current.pointer
    
    new = DoubleWord {
      pointer: (uint64)newNode,
      version: current.version + 1
    }
    
    si DCAS(stack.head, current, new):
      retornar
}

// Ventajas:
// - Punteros completos de 64-bit (sin limitacin de 48-bit)
// - Versin de 64-bit (prcticamente imposible overflow)
// - Ms robusto para sistemas de larga duracin`})]}),e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Simple de implementar, bajo overhead, compatible con la mayora de arquitecturas.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Versin puede hacer overflow (requiere cuidado), en 64-bit solo 48-52 bits para puntero, an necesita resolver memory reclamation."]})}),e.jsx("div",{className:"p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Lock-free stacks/queues, concurrent data structures, memoria transaccional, sistemas embebidos, bibliotecas como libcds, Folly (Facebook)."]})})]})]})}),e.jsx(me,{value:"ps-hazard",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:" Hazard Pointers"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"1. Estructura Bsica"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Hazard Pointers: sistema para safe memory reclamation

estructura HazardPointer {
  pointer: Atomic<void*>     // Puntero "protegido"
  active: Atomic<booleano>   // Si est en uso
  threadId: entero           // Thread dueo
}

estructura HazardPointerRecord {
  hazards: Array<HazardPointer>  // K hazards por thread
  retireList: List<void*>        // Nodos a liberar
  K: entero = 2                  // Nmero de hazards por thread
}

// Pool global de hazard pointers
global hazardPointers: Array<HazardPointerRecord>

funcin acquire() -> HazardPointer* {
  threadId = currentThread().id
  record = hazardPointers[threadId]
  
  // Buscar slot libre
  para cada hp en record.hazards:
    si no hp.active.load():
      si hp.active.compareAndSwap(false, true):
        retornar &hp
  
  throw NoHazardPointerAvailable()
}

funcin release(hp: HazardPointer*) {
  hp.pointer.store(null)
  hp.active.store(false)
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"2. Proteger Punteros"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Proteger un puntero antes de desreferenciarlo

funcin protect(source: Atomic<Node*>, hp: HazardPointer*) -> Node* {
  mientras true:
    // Leer puntero
    ptr = source.load()
    
    // PUBLICAR en hazard pointer
    hp.pointer.store(ptr)
    
    // Verificar que no cambi (evitar race condition)
    si source.load() == ptr:
      retornar ptr  // Protegido exitosamente
    
    // Cambi: reintentar
}

// Uso en operacin lock-free
funcin pop(stack: LockFreeStack) -> T {
  hp = acquire()  // Obtener hazard pointer
  
  intentar:
    mientras true:
      // Proteger head antes de desreferenciar
      head = protect(stack.head, hp)
      
      si head == null:
        throw EmptyStackException()
      
      next = head.next  // Safe: head est protegido
      
      si stack.head.compareAndSwap(head, next):
        value = head.value
        retire(head)  // Marcar para liberacin posterior
        retornar value
  
  finalmente:
    release(hp)  // Liberar hazard pointer
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"3. Retire y Scan"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Marcar nodo para liberacin (no liberar inmediatamente)

funcin retire(node: Node*) {
  threadId = currentThread().id
  record = hazardPointers[threadId]
  
  // Agregar a lista de retirados
  record.retireList.add(node)
  
  // Si lista crece mucho, intentar limpiar
  si record.retireList.size() >= THRESHOLD:
    scan()
}

// Escanear hazard pointers y liberar nodos seguros
funcin scan() {
  threadId = currentThread().id
  record = hazardPointers[threadId]
  
  // Paso 1: Recolectar todos los hazard pointers activos
  protectedPointers = Set<void*>()
  
  para cada threadRecord en hazardPointers:
    para cada hp en threadRecord.hazards:
      si hp.active.load():
        ptr = hp.pointer.load()
        si ptr != null:
          protectedPointers.add(ptr)
  
  // Paso 2: Liberar nodos no protegidos
  newRetireList = List<void*>()
  
  para cada node en record.retireList:
    si node no est en protectedPointers:
      free(node)  // SAFE! Nadie lo est usando
    sino:
      newRetireList.add(node)  // An protegido, mantener
  
  record.retireList = newRetireList
}

// Constantes tpicas
THRESHOLD = K * N * 2
// K = hazards por thread
// N = nmero de threads`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"4. Stack Completo con Hazard Pointers"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`estructura SafeLockFreeStack<T> {
  head: Atomic<Node<T>*>
}

funcin push(stack: SafeLockFreeStack<T>, value: T) {
  newNode = allocate(Node<T>)
  newNode.value = value
  
  mientras true:
    currentHead = stack.head.load()
    newNode.next = currentHead
    
    si stack.head.compareAndSwap(currentHead, newNode):
      retornar  // Push exitoso, no necesita hazard pointer
}

funcin pop(stack: SafeLockFreeStack<T>) -> T {
  hp = acquire()  // Obtener hazard pointer
  
  intentar:
    mientras true:
      // PROTEGER head
      head = protect(stack.head, hp)
      
      si head == null:
        throw EmptyStackException()
      
      // Desreferenciar SAFE (protegido por hazard pointer)
      next = head.next
      value = head.value
      
      si stack.head.compareAndSwap(head, next):
        // Pop exitoso
        retire(head)  // Marcar para liberacin
        retornar value
      
      // CAS fall: otro thread modific, reintentar
  
  finalmente:
    release(hp)  // IMPORTANTE: siempre liberar
}

//  Resuelve ABA: incluso si ABA ocurre,
//    el nodo original A no puede ser liberado
//    mientras est protegido por hazard pointer`})]}),e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," No requiere GC, control explcito de memoria, predecible, sin pausas, funciona en C/C++.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Overhead de scan, complejidad de implementacin, requiere gestin cuidadosa de hazard pointers."]})}),e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Folly (Facebook), libcds, sistemas C++ lock-free, bases de datos (RocksDB), high-frequency trading, sistemas embebidos sin GC."]})})]})]})}),e.jsx(me,{value:"ps-dcas",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:" DCAS (Double Compare-And-Swap)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"1. DCAS en Hardware"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// DCAS: comparar y swapear DOS ubicaciones atmicamente

// x86-64: CMPXCHG16B (128-bit CAS)
funcin CMPXCHG16B(addr: *uint128,
                   expected1: uint64, expected2: uint64,
                   new1: uint64, new2: uint64) -> booleano {
  
  // Atomic: si *addr == (expected1, expected2)
  //         entonces *addr = (new1, new2)
  //         retornar true
  //         sino retornar false
  
  // Implementacin en assembly (x86-64)
  asm {
    mov rax, expected1
    mov rdx, expected2
    mov rbx, new1
    mov rcx, new2
    lock cmpxchg16b [addr]
    setz al  // al = 1 si xito
  }
}

// ARM: No tiene DCAS nativo
// PowerPC: LDARX/STDCX (LL/SC puede simular DCAS)

//  DCAS verdadero es RARO en hardware
// La mayora usa LL/SC o word-based CAS`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"2. DCAS para ABA con Versioning"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Usar DCAS para actualizar puntero + versin atmicamente

estructura VersionedPointer {
  pointer: uint64
  version: uint64
}

funcin DCAS_push(stack: Atomic<VersionedPointer>, value: T) {
  newNode = allocate(Node)
  newNode.value = value
  
  mientras true:
    current = stack.load()  // Lee ambos: pointer y version
    newNode.next = (Node*)current.pointer
    
    nuevo = VersionedPointer {
      pointer: (uint64)newNode,
      version: current.version + 1  // Incrementar versin
    }
    
    // DCAS: comparar (pointer, version) y actualizar ambos
    si CMPXCHG16B(&stack,
                  current.pointer, current.version,
                  nuevo.pointer, nuevo.version):
      retornar  // xito
    
    // Fallo: otro thread modific, reintentar
}

//  Ventaja sobre CAS simple:
//    - Puntero completo de 64-bit (no limitado a 48-bit)
//    - Versin completa de 64-bit (no overflow en prctica)
//    - Actualizacin atmica de ambos campos`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"3. Simular DCAS con MCAS"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// MCAS: Multi-word Compare-And-Swap
// Extender a N palabras (no solo 2)

estructura MCASDescriptor {
  status: Atomic<enum { UNDECIDED, SUCCEEDED, FAILED }>
  words: Array<{
    address: Atomic<uint64>*
    expected: uint64
    new: uint64
  }>
}

funcin MCAS(descriptor: MCASDescriptor) -> booleano {
  // Fase 1: LOCK todas las palabras
  para cada word en descriptor.words:
    mientras true:
      current = word.address.load()
      
      si current == word.expected:
        // Intentar "lockear" con puntero a descriptor
        si word.address.compareAndSwap(current, &descriptor):
          break  // Locked
      sino si current == &descriptor:
        break  // Ya locked por nosotros
      sino:
        // Valor cambi o locked por otro: ABORT
        descriptor.status.store(FAILED)
        unlock_all(descriptor)
        retornar false
  
  // Fase 2: COMMIT (todos locked exitosamente)
  descriptor.status.store(SUCCEEDED)
  
  para cada word en descriptor.words:
    word.address.store(word.new)
  
  retornar true
}

// Uso para stack lock-free
funcin MCAS_push(stack: Stack, value: T) {
  mientras true:
    head = stack.head.load()
    version = stack.version.load()
    
    descriptor = MCASDescriptor {
      status: UNDECIDED,
      words: [
        { address: &stack.head, expected: head, new: newNode },
        { address: &stack.version, expected: version, new: version + 1 }
      ]
    }
    
    si MCAS(descriptor):
      retornar
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"4. DCAS vs LL/SC"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Comparacin de primitivas atmicas

tabla ComparacionPrimitivas:

| Primitiva | Arquitecturas      | ABA Protection | Complejidad |
|-----------|-------------------|----------------|-------------|
| CAS       | x86, ARM, POWER   |  No          | Baja        |
| DCAS      | x86-64 (CMPXCHG16B)|  Con version | Media       |
| LL/SC     | ARM, POWER, RISC-V |  S          | Media       |
| MCAS      | Software emulado   |  S          | Alta        |

// LL/SC (Load-Linked / Store-Conditional)
// Detecta CUALQUIER escritura entre LL y SC

funcin LL_SC_push(stack: Stack, value: T) {
  mientras true:
    // LL: Load-Linked (marca direccin para monitoreo)
    head = LoadLinked(&stack.head)
    newNode.next = head
    
    // SC: Store-Conditional (falla si hubo escritura)
    si StoreConditional(&stack.head, newNode):
      retornar  // xito
    
    // SC fall: otra escritura ocurri (incluso ABA)
    //  LL/SC DETECTA todos los cambios intermedios
}

// DCAS solo detecta cambios si usamos versioning
// LL/SC detecta cambios automticamente`})]}),e.jsx("div",{className:"p-4 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Actualizacin atmica de mltiples palabras, no requiere tagged pointers, ms limpio conceptualmente.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," DCAS hardware es raro (solo x86-64), emulacin por software tiene alto overhead, no portable."]})}),e.jsx("div",{className:"p-4 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Implementaciones acadmicas, algoritmos MCAS (Harris et al.), sistemas experimentales, research en STM (Software Transactional Memory)."]})})]})]})}),e.jsx(me,{value:"ps-gc",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-yellow-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:" Garbage Collection"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"1. GC Resuelve ABA Automticamente"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// En lenguajes con GC (Java, Go, C#), ABA se resuelve naturalmente

// Java: Lock-Free Stack sin worries de ABA
clase LockFreeStack<T> {
  AtomicReference<Node<T>> head = new AtomicReference<>(null);
  
  void push(T value) {
    Node<T> newNode = new Node<>(value);
    
    while (true) {
      Node<T> currentHead = head.get();
      newNode.next = currentHead;
      
      // CAS simple: no necesita versioning
      if (head.compareAndSet(currentHead, newNode)) {
        return;  // xito
      }
      // Fallo: reintentar
    }
  }
  
  T pop() {
    while (true) {
      Node<T> currentHead = head.get();
      
      if (currentHead == null) {
        throw new EmptyStackException();
      }
      
      Node<T> next = currentHead.next;
      
      // CAS: incluso si ABA ocurre...
      if (head.compareAndSet(currentHead, next)) {
        //  SAFE: GC garantiza que el objeto A original
        //    no puede ser reusado hasta que nadie lo referencie
        return currentHead.value;
      }
    }
  }
}

// Por qu funciona?
// - GC rastrea referencias activas
// - Nodo A original no se libera hasta que:
//   1. No hay referencias desde head
//   2. No hay referencias locales (stack frames)
//   3. Pasa GC cycle completo
// - Si A reaparece en head, es un NUEVO objeto A'
//   con diferente direccin de memoria
// - CAS compara direcciones fsicas, no valores`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"2. Epoch-Based Reclamation (EBR)"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Alternativa ligera a GC completo: Epoch-Based Reclamation

estructura EpochManager {
  globalEpoch: Atomic<entero> = 0
  threadEpochs: Array<Atomic<entero>>  // Epoch por thread
  retireLists: Map<entero, List<void*>>  // Nodos por epoch
}

funcin enterEpoch() {
  threadId = currentThread().id
  global = globalEpoch.load()
  threadEpochs[threadId].store(global)
}

funcin exitEpoch() {
  threadId = currentThread().id
  threadEpochs[threadId].store(INACTIVE)
}

funcin retire(node: void*) {
  currentEpoch = globalEpoch.load()
  retireLists[currentEpoch].add(node)
  
  tryAdvanceEpoch()
}

funcin tryAdvanceEpoch() {
  currentEpoch = globalEpoch.load()
  
  // Verificar si todos los threads salieron del epoch viejo
  minEpoch = currentEpoch
  para cada threadEpoch en threadEpochs:
    epoch = threadEpoch.load()
    si epoch != INACTIVE Y epoch < minEpoch:
      minEpoch = epoch
  
  // Si todos avanzaron, incrementar epoch global
  si minEpoch == currentEpoch:
    globalEpoch.compareAndSwap(currentEpoch, currentEpoch + 1)
    
    // Liberar nodos de epochs viejos (safe ahora)
    para epoch en 0 hasta currentEpoch - 2:
      para cada node en retireLists[epoch]:
        free(node)  //  SAFE: nadie lo est usando
      retireLists[epoch].clear()
}

// Uso en operaciones lock-free
funcin pop(stack: Stack) -> T {
  enterEpoch()  // Anunciar que estamos en epoch actual
  
  intentar:
    mientras true:
      head = stack.head.load()
      si head == null:
        throw EmptyStackException()
      
      next = head.next
      si stack.head.compareAndSwap(head, next):
        value = head.value
        retire(head)  // Marcar para liberacin futura
        retornar value
  finalmente:
    exitEpoch()  // Salir del epoch
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"3. Reference Counting Atmico"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Otra aproximacin: reference counting con operaciones atmicas

estructura RefCountedNode<T> {
  value: T
  next: Atomic<RefCountedNode<T>*>
  refCount: Atomic<entero>
}

funcin addRef(node: RefCountedNode<T>*) {
  si node != null:
    node.refCount.fetchAdd(1)
}

funcin release(node: RefCountedNode<T>*) {
  si node != null:
    oldCount = node.refCount.fetchSub(1)
    si oldCount == 1:
      // ltima referencia: liberar
      nextNode = node.next.load()
      release(nextNode)  // Recursivo
      free(node)
}

funcin pop(stack: Stack) -> T {
  mientras true:
    head = stack.head.load()
    si head == null:
      throw EmptyStackException()
    
    addRef(head)  // Incrementar refcount
    
    // Verificar que sigue siendo head (race condition)
    si stack.head.load() != head:
      release(head)
      continue  // Reintentar
    
    next = head.next.load()
    addRef(next)
    
    si stack.head.compareAndSwap(head, next):
      value = head.value
      release(head)  // Decrementar refcount
      release(head)  // Decrementar por la referencia que tenamos
      retornar value
    sino:
      release(next)
      release(head)
      // Reintentar
}

//  Problemas:
// - Overhead alto de atomic increment/decrement
// - Ciclos de referencias (memory leak)
// - Complicado de implementar correctamente`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"4. Comparacin de Mtodos GC"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`tabla ComparacionGC:

| Mtodo              | Overhead | Pausas | Complejidad | Lenguajes    |
|---------------------|----------|--------|-------------|--------------|
| GC Completo         | Alto     | S     | Baja*       | Java, Go, C# |
| Epoch-Based (EBR)   | Bajo     | No     | Media       | C/C++, Rust  |
| Hazard Pointers     | Medio    | No     | Alta        | C/C++        |
| Reference Counting  | Alto     | No     | Alta        | C++, Swift   |

// * Baja para el desarrollador; alta para implementacin de GC

// Elegir mtodo segn requisitos:

funcin elegirMetodo(requisitos: Requisitos) -> Metodo {
  si requisitos.lenguaje == JAVA o GO:
    retornar GC_COMPLETO  // Viene gratis con el lenguaje
  
  si requisitos.latenciaCritica Y requisitos.sinPausas:
    retornar EPOCH_BASED  // Rust crossbeam-epoch
  
  si requisitos.controlExplicito:
    retornar HAZARD_POINTERS  // Folly, libcds
  
  si requisitos.compatibilidadSmartPointers:
    retornar REFERENCE_COUNTING  // C++ shared_ptr
  
  retornar GC_COMPLETO  // Default ms seguro
}`})]}),e.jsx("div",{className:"p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Simple para el desarrollador, seguro por defecto, no requiere gestin manual de memoria.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Pausas de GC (stop-the-world), overhead de memoria, no disponible en C/C++ sin bibliotecas externas."]})}),e.jsx("div",{className:"p-4 bg-yellow-900/30 border border-yellow-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," Java concurrent collections, Go sync package, C# concurrent collections, Rust crossbeam (EBR), aplicaciones empresariales."]})})]})]})}),e.jsx(me,{value:"ps-llsc",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-cyan-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:" Load-Linked / Store-Conditional"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"1. Primitivas LL/SC"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// LL/SC: alternativa superior a CAS para prevenir ABA

// Load-Linked: leer valor y "marcar" direccin para monitoreo
funcin LL(address: *T) -> T {
  // Hardware registra:
  // 1. La direccin leda
  // 2. El valor ledo
  // 3. Activa "link register" o "reservation"
  
  valor = *address
  CPU.linkRegister.address = address
  CPU.linkRegister.active = true
  retornar valor
}

// Store-Conditional: escribir solo si nadie ms escribi
funcin SC(address: *T, newValue: T) -> booleano {
  // Hardware verifica:
  // 1. Link register activo?
  // 2. Direccin coincide?
  // 3. Hubo alguna escritura desde LL?
  
  si no CPU.linkRegister.active:
    retornar false  // No hay LL previo
  
  si CPU.linkRegister.address != address:
    retornar false  // Direccin incorrecta
  
  si CPU.monitorDetectedWrite:
    //  CLAVE: detecta CUALQUIER escritura, incluso ABA
    CPU.linkRegister.active = false
    retornar false
  
  // Todo OK: escribir
  *address = newValue
  CPU.linkRegister.active = false
  retornar true  // xito
}

// ARM: LDREX/STREX
// PowerPC: LDARX/STDCX
// RISC-V: LR/SC
// MIPS: LL/SC`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"2. Stack con LL/SC"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Lock-Free Stack usando LL/SC (sin versioning!)

estructura Node<T> {
  value: T
  next: Node<T>*
}

funcin push(stack: Stack<T>, value: T) {
  newNode = allocate(Node<T>)
  newNode.value = value
  
  mientras true:
    // LL: load-linked del head
    currentHead = LL(&stack.head)
    newNode.next = currentHead
    
    // SC: store-conditional del nuevo head
    si SC(&stack.head, newNode):
      retornar  // xito
    
    // SC fall: hubo escritura intermedia, reintentar
}

funcin pop(stack: Stack<T>) -> T {
  mientras true:
    // LL: load-linked del head
    head = LL(&stack.head)
    
    si head == null:
      throw EmptyStackException()
    
    // Leer siguiente (no necesita proteccin especial)
    next = head.next
    value = head.value
    
    // SC: intentar actualizar head
    si SC(&stack.head, next):
      //  xito: garantizado que nadie escribi
      //    entre LL y SC, incluso si ABA ocurri
      free(head)  // SAFE: podemos liberar inmediatamente
      retornar value
    
    // SC fall: otra escritura, reintentar
}

//  Ventaja sobre CAS:
//    - No necesita versioning/tagging
//    - Detecta automticamente ABA
//    - Ms simple conceptualmente`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"3. LL/SC vs CAS"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// Comparacin detallada

// Escenario: ABA

// Con CAS (sin versioning):
head = stack.head.load()  // Lee A
// ... Thread 2: pop A, pop B, push A (mismo puntero)
// head sigue siendo A (reusado)
si stack.head.CAS(A, next):
  //  XITO INCORRECTO: no detect cambios intermedios
  // Potencial corrupcin de memoria

// Con LL/SC:
head = LL(&stack.head)  // Lee A, activa monitor
// ... Thread 2: pop A (ESCRITURA detectada por hardware)
si SC(&stack.head, next):
  //  FALLA: hardware detect la escritura
  // Incluso si valor volvi a A

// Tabla comparativa:

tabla CAS_vs_LLSC:

| Aspecto          | CAS                    | LL/SC                  |
|------------------|------------------------|------------------------|
| ABA Detection    |  No (sin versioning) |  S (automtico)     |
| Versioning       |  Requerido           |  No requerido        |
| Spurious Fails   |  No                  |  S (context switch) |
| Portabilidad     |  Alta (x86, ARM)     |  Media (ARM, POWER)  |
| Complejidad      | Media (con tagging)    | Baja                   |
| Memory Order     | Debe especificarse     | Automtico             |`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"4. Implementacin en ARM64"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`// ARM64: LDXR/STXR (Load-Exclusive/Store-Exclusive)

// Assembly ARM64 para push
funcin push_arm64(stack: *Node, newNode: *Node) {
  asm {
retry:
    // LDXR: Load-Exclusive (equivalente a LL)
    ldxr    x1, [x0]        // x1 = *stack, marca exclusiva
    str     x1, [newNode]   // newNode->next = x1
    
    // STXR: Store-Exclusive (equivalente a SC)
    stxr    w2, newNode, [x0]  // *stack = newNode si exclusiva
    cbnz    w2, retry       // Si w2 != 0, fall, retry
    
    // w2 == 0: xito
    ret
  }
}

// C con intrinsics
funcin push_intrinsic(stack: _Atomic(Node*), newNode: Node*) {
  mientras true:
    // __atomic_load_exclusive
    currentHead = __builtin_arm_ldrex(&stack)
    newNode->next = currentHead
    
    // __atomic_store_exclusive
    si __builtin_arm_strex(newNode, &stack) == 0:
      retornar  // xito
    
    // Fall: reintentar
}

// RISC-V: LR.W/SC.W
funcin pop_riscv(stack: *Node) -> Node* {
  asm {
retry:
    lr.w.aq   a1, (a0)      // a1 = *stack, acquire semantics
    beqz      a1, empty     // if null, empty
    
    lw        a2, 0(a1)     // a2 = head->next
    sc.w.rl   a3, a2, (a0)  // *stack = a2, release semantics
    bnez      a3, retry     // if failed, retry
    
    mv        a0, a1        // return head
    ret
    
empty:
    li        a0, 0
    ret
  }
}`})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"5. Limitaciones y Spurious Failures"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:`//  LL/SC puede fallar espuriamente (spurious failure)

// Causas de spurious failure:
// 1. Context switch entre LL y SC
// 2. Cach invalidation
// 3. Otras escrituras en la misma cache line
// 4. Interrupciones
// 5. Implementacin conservadora del hardware

funcin pop_con_spurious(stack: Stack) -> T {
  reintentos = 0
  
  mientras true:
    head = LL(&stack.head)
    
    si head == null:
      throw EmptyStackException()
    
    next = head.next
    
    si SC(&stack.head, next):
      retornar head.value  // xito
    
    reintentos++
    si reintentos > MAX_RETRIES:
      // Posible livelock: demasiados spurious failures
      backoff()  // Esperar antes de reintentar
      reintentos = 0
}

// Mitigacin: exponential backoff
funcin backoff() {
  sleepTime = random(1, 1000) * 2^reintentos
  sleep(min(sleepTime, MAX_SLEEP))
}

// Recomendacin: minimizar trabajo entre LL y SC
funcin pop_optimizado(stack: Stack) -> T {
  mientras true:
    head = LL(&stack.head)
    
    si head == null:
      throw EmptyStackException()
    
    //  MINIMIZAR cdigo entre LL y SC
    // No llamar funciones, no hacer I/O, no locks
    
    si SC(&stack.head, head.next):
      // Hacer trabajo pesado DESPUS de SC
      value = head.value
      free(head)
      retornar value
}`})]}),e.jsx("div",{className:"p-4 bg-cyan-900/30 border border-cyan-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Ventajas:"})," Detecta ABA automticamente, no requiere versioning, ms simple que CAS+tagging, semantics ms limpias.",e.jsx("br",{}),e.jsx("span",{className:"font-bold",children:"Desventajas:"})," Spurious failures requieren retry loops, no disponible en x86, puede tener ms contencin que CAS, implementacin depende del hardware."]})}),e.jsx("div",{className:"p-4 bg-cyan-900/30 border border-cyan-700/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-cyan-200",children:[e.jsx("span",{className:"font-bold",children:"Casos de Uso:"})," ARM-based systems (mobile, embedded), PowerPC servers, RISC-V systems, algoritmos lock-free acadmicos, investigacin en arquitecturas de computadoras."]})})]})]})})]})})]}),e.jsxs(sa,{value:"demos",className:"bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx(ra,{className:"text-xl font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"size-5"}),e.jsx("span",{children:"Demostraciones Interactivas"})]})}),e.jsx(na,{children:e.jsxs(ia,{defaultValue:"demo-versioning",className:"px-6 pb-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs(Qt,{className:"grid grid-cols-5 gap-2 bg-gray-900/50 p-2",children:[e.jsx(ce,{value:"demo-versioning",children:" Versioning"}),e.jsx(ce,{value:"demo-hazard",children:" Hazard"}),e.jsx(ce,{value:"demo-dcas",children:" DCAS"}),e.jsx(ce,{value:"demo-gc",children:" GC"}),e.jsx(ce,{value:"demo-llsc",children:" LL/SC"})]})}),e.jsx(me,{value:"demo-versioning",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-blue-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 mb-4",children:"Demo: Versioning Detecta ABA"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>i(!s),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${s?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ot,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",n,"ms"]}),e.jsx(dt,{value:[n],onValueChange:([R])=>l(R),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"Stack State"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"HEAD "}),d.head&&e.jsx("div",{className:"flex items-center gap-2",children:d.nodes.filter(R=>{let ne=d.head;for(;ne;){if(ne===R.id)return!0;ne=d.nodes.find(de=>de.id===ne)?.next||null}return!1}).map((R,ne)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-blue-600 px-3 py-2 rounded",children:[e.jsx("span",{className:"font-bold",children:R.value}),e.jsxs("span",{className:"text-xs text-blue-200 ml-1",children:["(v",R.version,")"]})]}),ne<d.nodes.length-1&&R.next&&e.jsx("span",{className:"text-gray-400",children:""})]},R.id))}),!d.head&&e.jsx("span",{className:"text-gray-500 italic",children:"null"})]}),e.jsxs("div",{className:"mt-2 text-xs text-blue-300",children:["Global Version: ",d.version]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:ze,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:h.map((R,ne)=>e.jsx("div",{className:"text-gray-300",children:R},ne))})]})]})}),e.jsx(me,{value:"demo-hazard",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-green-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:"Demo: Hazard Pointers"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>v(!b),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${b?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:b?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:It,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",f,"ms"]}),e.jsx(dt,{value:[f],onValueChange:([R])=>N(R),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"Hazard Pointers"}),e.jsx("div",{className:"flex gap-2",children:w.length>0?w.map((R,ne)=>e.jsxs("div",{className:"bg-green-600 px-3 py-2 rounded font-bold",children:["HP[",ne,"] = ",R]},ne)):e.jsx("span",{className:"text-gray-500 italic",children:"No hay hazard pointers activos"})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"Retire List"}),e.jsx("div",{className:"flex gap-2",children:E.length>0?E.map((R,ne)=>e.jsx("div",{className:"bg-orange-600 px-3 py-2 rounded font-bold",children:R},ne)):e.jsx("span",{className:"text-gray-500 italic",children:"Lista vaca"})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"Stack"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"HEAD "}),j.head&&e.jsx("div",{className:"flex items-center gap-2",children:j.nodes.filter(R=>{let ne=j.head;for(;ne;){if(ne===R.id)return!0;ne=j.nodes.find(de=>de.id===ne)?.next||null}return!1}).map((R,ne,Ve)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`px-3 py-2 rounded ${w.includes(R.id)?"bg-green-600 ring-2 ring-green-400":"bg-green-700"}`,children:e.jsx("span",{className:"font-bold",children:R.value})}),ne<Ve.length-1&&e.jsx("span",{className:"text-gray-400",children:""})]},R.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-green-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:_e,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:L.map((R,ne)=>e.jsx("div",{className:"text-gray-300",children:R},ne))})]})]})}),e.jsx(me,{value:"demo-dcas",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-purple-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:"Demo: DCAS (128-bit CAS)"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>I(!ie),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${ie?"bg-yellow-600 hover:bg-yellow-700":"bg-purple-600 hover:bg-purple-700"}`,children:ie?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",k,"ms"]}),e.jsx(dt,{value:[k],onValueChange:([R])=>be(R),min:200,max:2e3,step:100,className:"w-full"})]})]}),oe.pointer1&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"DCAS Operation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-purple-900/30 p-3 rounded",children:[e.jsx("div",{className:"text-purple-300 font-bold mb-1",children:"Expected"}),e.jsxs("div",{children:["Pointer: ",oe.pointer1]}),e.jsxs("div",{children:["Version: ",oe.version1]})]}),e.jsxs("div",{className:"bg-purple-900/30 p-3 rounded",children:[e.jsx("div",{className:"text-purple-300 font-bold mb-1",children:"New"}),e.jsxs("div",{children:["Pointer: ",oe.pointer2||"null"]}),e.jsxs("div",{children:["Version: ",oe.version2]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"Stack State"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"HEAD "}),te.head?e.jsx("div",{className:"flex items-center gap-2",children:te.nodes.filter(R=>{let ne=te.head;for(;ne;){if(ne===R.id)return!0;ne=te.nodes.find(de=>de.id===ne)?.next||null}return!1}).map((R,ne,Ve)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-purple-600 px-3 py-2 rounded",children:[e.jsx("span",{className:"font-bold",children:R.value}),e.jsxs("span",{className:"text-xs text-purple-200 ml-1",children:["(v",R.version,")"]})]}),ne<Ve.length-1&&R.next&&e.jsx("span",{className:"text-gray-400",children:""})]},R.id))}):e.jsx("span",{className:"text-gray-500 italic",children:"null"})]}),e.jsxs("div",{className:"mt-2 text-xs text-purple-300",children:["Version: ",te.version]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-purple-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:Xe,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:ke.map((R,ne)=>e.jsx("div",{className:"text-gray-300",children:R},ne))})]})]})}),e.jsx(me,{value:"demo-gc",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-yellow-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:"Demo: Epoch-Based Reclamation"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>F(!Q),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors bg-yellow-600 hover:bg-yellow-700",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:kt,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",ue,"ms"]}),e.jsx(dt,{value:[ue],onValueChange:([R])=>qe(R),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Epoch Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-300 font-bold",children:"Global Epoch:"})," ",re]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-300 font-bold",children:"Thread 1:"})," ",K[0]===-1?"inactive":K[0]]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-300 font-bold",children:"Thread 2:"})," ",K[1]===-1?"inactive":K[1]]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Retire Lists por Epoch"}),O.size>0?e.jsx("div",{className:"space-y-2",children:Array.from(O.entries()).map(([R,ne])=>e.jsxs("div",{className:"bg-yellow-900/30 p-2 rounded",children:[e.jsxs("span",{className:"text-yellow-300 font-bold",children:["Epoch ",R,":"]})," ",ne.join(", ")]},R))}):e.jsx("span",{className:"text-gray-500 italic",children:"No hay nodos pendientes"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Stack"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"HEAD "}),T.head&&e.jsx("div",{className:"flex items-center gap-2",children:T.nodes.filter(R=>{let ne=T.head;for(;ne;){if(ne===R.id)return!0;ne=T.nodes.find(de=>de.id===ne)?.next||null}return!1}).map((R,ne,Ve)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-yellow-600 px-3 py-2 rounded font-bold",children:R.value}),ne<Ve.length-1&&e.jsx("span",{className:"text-gray-400",children:""})]},R.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-yellow-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:We,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:$.map((R,ne)=>e.jsx("div",{className:"text-gray-300",children:R},ne))})]})]})}),e.jsx(me,{value:"demo-llsc",className:"mt-6",children:e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 border border-cyan-700/50",children:[e.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:"Demo: Load-Linked / Store-Conditional"}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("button",{onClick:()=>Oe(!z),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${z?"bg-yellow-600 hover:bg-yellow-700":"bg-cyan-600 hover:bg-cyan-700"}`,children:z?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"size-4"}),"Pausar"]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"size-4"}),"Iniciar"]})}),e.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold transition-colors",children:[e.jsx(it,{className:"size-4"}),"Reset"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Velocidad: ",Re,"ms"]}),e.jsx(dt,{value:[Re],onValueChange:([R])=>ae(R),min:200,max:2e3,step:100,className:"w-full"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"Link Register (Hardware)"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-300 font-bold",children:"Active:"}),e.jsx("span",{className:`px-2 py-1 rounded font-bold ${jt.active?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:jt.active?"YES":"NO"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-cyan-300 font-bold",children:"Address:"})," ",jt.address||"none"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-cyan-300 font-bold",children:"Value:"})," ",jt.value||"none"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"Stack"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"HEAD "}),se.head?e.jsx("div",{className:"flex items-center gap-2",children:se.nodes.filter(R=>{let ne=se.head;for(;ne;){if(ne===R.id)return!0;ne=se.nodes.find(de=>de.id===ne)?.next||null}return!1}).map((R,ne,Ve)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`px-3 py-2 rounded font-bold ${jt.active&&jt.value===R.id?"bg-cyan-600 ring-2 ring-cyan-400":"bg-cyan-700"}`,children:R.value}),ne<Ve.length-1&&e.jsx("span",{className:"text-gray-400",children:""})]},R.id))}):e.jsx("span",{className:"text-gray-500 italic",children:"null"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-300 mb-3",children:"Event Log"}),e.jsx("div",{ref:xt,className:"bg-black/50 rounded p-3 font-mono text-xs space-y-1 max-h-48 overflow-y-auto",children:Me.map((R,ne)=>e.jsx("div",{className:"text-gray-300",children:R},ne))})]})]})})]})})]})]})})]})}const m2=Sa("/ActividadesSeminarioSO/actividad11/aba")({component:u2}),p2=FE.update({id:"/ActividadesSeminarioSO/",path:"/ActividadesSeminarioSO/",getParentRoute:()=>ka}),h2=GE.update({id:"/ActividadesSeminarioSO/actividad14/",path:"/ActividadesSeminarioSO/actividad14/",getParentRoute:()=>ka}),x2=KE.update({id:"/ActividadesSeminarioSO/actividad13/",path:"/ActividadesSeminarioSO/actividad13/",getParentRoute:()=>ka}),f2=QE.update({id:"/ActividadesSeminarioSO/actividad12/",path:"/ActividadesSeminarioSO/actividad12/",getParentRoute:()=>ka}),g2=eR.update({id:"/ActividadesSeminarioSO/actividad11/",path:"/ActividadesSeminarioSO/actividad11/",getParentRoute:()=>ka}),b2=OR.update({id:"/ActividadesSeminarioSO/actividad11/thundering-herd",path:"/ActividadesSeminarioSO/actividad11/thundering-herd",getParentRoute:()=>ka}),v2=zR.update({id:"/ActividadesSeminarioSO/actividad11/starvation",path:"/ActividadesSeminarioSO/actividad11/starvation",getParentRoute:()=>ka}),y2=UR.update({id:"/ActividadesSeminarioSO/actividad11/priority-inversion",path:"/ActividadesSeminarioSO/actividad11/priority-inversion",getParentRoute:()=>ka}),N2=VR.update({id:"/ActividadesSeminarioSO/actividad11/memory-consistency",path:"/ActividadesSeminarioSO/actividad11/memory-consistency",getParentRoute:()=>ka}),j2=HR.update({id:"/ActividadesSeminarioSO/actividad11/lost-wakeup",path:"/ActividadesSeminarioSO/actividad11/lost-wakeup",getParentRoute:()=>ka}),_2=GR.update({id:"/ActividadesSeminarioSO/actividad11/livelock",path:"/ActividadesSeminarioSO/actividad11/livelock",getParentRoute:()=>ka}),S2=KR.update({id:"/ActividadesSeminarioSO/actividad11/lectura-escritura",path:"/ActividadesSeminarioSO/actividad11/lectura-escritura",getParentRoute:()=>ka}),w2=XR.update({id:"/ActividadesSeminarioSO/actividad11/false-sharing",path:"/ActividadesSeminarioSO/actividad11/false-sharing",getParentRoute:()=>ka}),T2=ZR.update({id:"/ActividadesSeminarioSO/actividad11/eventos",path:"/ActividadesSeminarioSO/actividad11/eventos",getParentRoute:()=>ka}),k2=t2.update({id:"/ActividadesSeminarioSO/actividad11/deadlock",path:"/ActividadesSeminarioSO/actividad11/deadlock",getParentRoute:()=>ka}),C2=s2.update({id:"/ActividadesSeminarioSO/actividad11/convoying",path:"/ActividadesSeminarioSO/actividad11/convoying",getParentRoute:()=>ka}),A2=n2.update({id:"/ActividadesSeminarioSO/actividad11/contencion-recursos",path:"/ActividadesSeminarioSO/actividad11/contencion-recursos",getParentRoute:()=>ka}),E2=l2.update({id:"/ActividadesSeminarioSO/actividad11/condicion-carrera",path:"/ActividadesSeminarioSO/actividad11/condicion-carrera",getParentRoute:()=>ka}),R2=d2.update({id:"/ActividadesSeminarioSO/actividad11/bloqueos-innecesarios",path:"/ActividadesSeminarioSO/actividad11/bloqueos-innecesarios",getParentRoute:()=>ka}),L2=m2.update({id:"/ActividadesSeminarioSO/actividad11/aba",path:"/ActividadesSeminarioSO/actividad11/aba",getParentRoute:()=>ka}),M2={ActividadesSeminarioSOIndexRoute:p2,ActividadesSeminarioSOActividad11AbaRoute:L2,ActividadesSeminarioSOActividad11BloqueosInnecesariosRoute:R2,ActividadesSeminarioSOActividad11CondicionCarreraRoute:E2,ActividadesSeminarioSOActividad11ContencionRecursosRoute:A2,ActividadesSeminarioSOActividad11ConvoyingRoute:C2,ActividadesSeminarioSOActividad11DeadlockRoute:k2,ActividadesSeminarioSOActividad11EventosRoute:T2,ActividadesSeminarioSOActividad11FalseSharingRoute:w2,ActividadesSeminarioSOActividad11LecturaEscrituraRoute:S2,ActividadesSeminarioSOActividad11LivelockRoute:_2,ActividadesSeminarioSOActividad11LostWakeupRoute:j2,ActividadesSeminarioSOActividad11MemoryConsistencyRoute:N2,ActividadesSeminarioSOActividad11PriorityInversionRoute:y2,ActividadesSeminarioSOActividad11StarvationRoute:v2,ActividadesSeminarioSOActividad11ThunderingHerdRoute:b2,ActividadesSeminarioSOActividad11IndexRoute:g2,ActividadesSeminarioSOActividad12IndexRoute:f2,ActividadesSeminarioSOActividad13IndexRoute:x2,ActividadesSeminarioSOActividad14IndexRoute:h2},P2=ka._addFileChildren(M2)._addFileTypes(),I2=Uw({routeTree:P2});eS.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Fw,{router:I2})}));
